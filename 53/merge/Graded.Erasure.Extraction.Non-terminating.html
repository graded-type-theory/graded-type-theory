<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Extraction.Non-terminating</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- If the extraction function uses strict applications and removes</a>
<a id="141" class="Comment">-- erasable arguments entirely, then it may be the case that</a>
<a id="202" class="Comment">-- well-typed and well-resourced terms extract to terms that do not</a>
<a id="270" class="Comment">-- terminate</a>
<a id="283" class="Comment">------------------------------------------------------------------------</a>

<a id="357" class="Comment">-- In &quot;A New Extraction for Coq&quot; Letouzey points out that uses of the</a>
<a id="427" class="Comment">-- eliminator for the empty type False can lead to problems similar to</a>
<a id="498" class="Comment">-- the one presented below if all logical arguments are removed</a>
<a id="562" class="Comment">-- entirely, given that the eliminator is replaced with code that</a>
<a id="628" class="Comment">-- throws an exception. However, the example discussed below does not</a>
<a id="698" class="Comment">-- rely on how emptyrec is extracted, but is more similar to one in</a>
<a id="766" class="Comment">-- Mishra-Linger&#39;s PhD thesis (see Figure 5.1).</a>
<a id="814" class="Comment">--</a>
<a id="817" class="Comment">-- The example looks roughly like this:</a>
<a id="857" class="Comment">--</a>
<a id="860" class="Comment">--   (λ^ω _. zero)</a>
<a id="879" class="Comment">--     (λ⁰ (bot : ⊥).</a>
<a id="901" class="Comment">--        (λ^ω+ω x. cast bot x x) (cast bot (λ^ω+ω x. cast bot x x)))</a>
<a id="971" class="Comment">--</a>
<a id="974" class="Comment">-- If erased arguments are removed entirely, then we end up with a</a>
<a id="1041" class="Comment">-- term like the following one:</a>
<a id="1073" class="Comment">--</a>
<a id="1076" class="Comment">--   (λ _. zero) ((λ x. x x) (λ x. x x))</a>
<a id="1117" class="Comment">--</a>
<a id="1120" class="Comment">-- If strict applications are used, then this program does not</a>
<a id="1183" class="Comment">-- terminate.</a>

<a id="1198" class="Keyword">open</a> <a id="1203" class="Keyword">import</a> <a id="1210" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="1226" class="Keyword">open</a> <a id="1231" class="Keyword">import</a> <a id="1238" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="1264" class="Keyword">open</a> <a id="1269" class="Keyword">import</a> <a id="1276" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="1307" class="Keyword">module</a> <a id="1314" href="Graded.Erasure.Extraction.Non-terminating.html" class="Module">Graded.Erasure.Extraction.Non-terminating</a>
  <a id="1358" class="Symbol">{</a><a id="1359" href="Graded.Erasure.Extraction.Non-terminating.html#1359" class="Bound">a</a><a id="1360" class="Symbol">}</a> <a id="1362" class="Symbol">{</a><a id="1363" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="1365" class="Symbol">:</a> <a id="1367" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1371" href="Graded.Erasure.Extraction.Non-terminating.html#1359" class="Bound">a</a><a id="1372" class="Symbol">}</a>
  <a id="1376" class="Symbol">{</a><a id="1377" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="1379" class="Symbol">:</a> <a id="1381" href="Graded.Modality.html#8202" class="Record">Modality</a> <a id="1390" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a><a id="1391" class="Symbol">}</a>
  <a id="1395" class="Symbol">(</a><a id="1396" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a> <a id="1399" class="Symbol">:</a> <a id="1401" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="1419" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a><a id="1420" class="Symbol">)</a>
  <a id="1424" class="Symbol">(</a><a id="1425" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a> <a id="1428" class="Symbol">:</a> <a id="1430" href="Graded.Usage.Restrictions.html#750" class="Record">Usage-restrictions</a> <a id="1449" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a><a id="1450" class="Symbol">)</a>
  <a id="1454" class="Keyword">where</a>

<a id="1461" class="Keyword">open</a> <a id="1466" href="Graded.Modality.html#8202" class="Module">Modality</a> <a id="1475" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1477" class="Keyword">open</a> <a id="1482" href="Definition.Typed.Restrictions.html#752" class="Module">Type-restrictions</a> <a id="1500" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1503" class="Keyword">open</a> <a id="1508" href="Graded.Usage.Restrictions.html#750" class="Module">Usage-restrictions</a> <a id="1527" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>

<a id="1531" class="Keyword">open</a> <a id="1536" class="Keyword">import</a> <a id="1543" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="1560" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1563" class="Keyword">open</a> <a id="1568" class="Keyword">import</a> <a id="1575" href="Definition.Typed.Consequences.DerivedRules.html" class="Module">Definition.Typed.Consequences.DerivedRules</a> <a id="1618" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1621" class="Keyword">open</a> <a id="1626" class="Keyword">import</a> <a id="1633" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="1661" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1664" class="Keyword">open</a> <a id="1669" class="Keyword">import</a> <a id="1676" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="1695" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a>
<a id="1697" class="Keyword">open</a> <a id="1702" class="Keyword">import</a> <a id="1709" href="Definition.Untyped.Identity.html" class="Module">Definition.Untyped.Identity</a> <a id="1737" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>

<a id="1740" class="Keyword">open</a> <a id="1745" class="Keyword">import</a> <a id="1752" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1767" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1769" class="Keyword">open</a> <a id="1774" class="Keyword">import</a> <a id="1781" href="Graded.Context.Properties.html" class="Module">Graded.Context.Properties</a> <a id="1807" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1809" class="Keyword">open</a> <a id="1814" class="Keyword">import</a> <a id="1821" href="Graded.Derived.Identity.html" class="Module">Graded.Derived.Identity</a> <a id="1845" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>
<a id="1848" class="Keyword">open</a> <a id="1853" class="Keyword">import</a> <a id="1860" href="Graded.Erasure.Extraction.html" class="Module">Graded.Erasure.Extraction</a> <a id="1886" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1888" class="Keyword">open</a> <a id="1893" class="Keyword">import</a> <a id="1900" href="Graded.Erasure.Extraction.Properties.html" class="Module">Graded.Erasure.Extraction.Properties</a> <a id="1937" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1939" class="Keyword">open</a> <a id="1944" class="Keyword">import</a> <a id="1951" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a> <a id="1973" class="Symbol">as</a> <a id="1976" class="Module">T</a> <a id="1978" class="Keyword">using</a> <a id="1984" class="Symbol">(</a><a id="1985" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="1995" class="Symbol">;</a> <a id="1997" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a><a id="2003" class="Symbol">)</a>
<a id="2005" class="Keyword">open</a> <a id="2010" class="Keyword">import</a> <a id="2017" href="Graded.Erasure.Target.Non-terminating.html" class="Module">Graded.Erasure.Target.Non-terminating</a>
<a id="2055" class="Keyword">open</a> <a id="2060" class="Keyword">import</a> <a id="2067" href="Graded.Erasure.Target.Properties.html" class="Module">Graded.Erasure.Target.Properties</a>
<a id="2100" class="Keyword">open</a> <a id="2105" class="Keyword">import</a> <a id="2112" href="Graded.Modality.Properties.html" class="Module">Graded.Modality.Properties</a> <a id="2139" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="2141" class="Keyword">open</a> <a id="2146" class="Keyword">import</a> <a id="2153" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="2165" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="2167" class="Keyword">open</a> <a id="2172" class="Keyword">import</a> <a id="2179" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="2192" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="2194" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>
<a id="2197" class="Keyword">open</a> <a id="2202" class="Keyword">import</a> <a id="2209" href="Graded.Usage.Properties.html" class="Module">Graded.Usage.Properties</a> <a id="2233" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="2235" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>

<a id="2239" class="Keyword">open</a> <a id="2244" class="Keyword">import</a> <a id="2251" href="Tools.Bool.html" class="Module">Tools.Bool</a> <a id="2262" class="Keyword">using</a> <a id="2268" class="Symbol">(</a><a id="2269" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="2273" class="Symbol">;</a> <a id="2275" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="2279" class="Symbol">)</a>
<a id="2281" class="Keyword">open</a> <a id="2286" class="Keyword">import</a> <a id="2293" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="2305" class="Keyword">open</a> <a id="2310" class="Keyword">import</a> <a id="2317" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="2327" class="Keyword">open</a> <a id="2332" class="Keyword">import</a> <a id="2339" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="2354" class="Keyword">open</a> <a id="2359" class="Keyword">import</a> <a id="2366" href="Tools.Nat.html" class="Module">Tools.Nat</a> <a id="2376" class="Keyword">using</a> <a id="2382" class="Symbol">(</a><a id="2383" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="2386" class="Symbol">;</a> <a id="2388" href="Tools.Nat.html#2085" class="InductiveConstructor">1+</a><a id="2390" class="Symbol">)</a>
<a id="2392" class="Keyword">open</a> <a id="2397" class="Keyword">import</a> <a id="2404" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="2418" class="Keyword">open</a> <a id="2423" class="Keyword">import</a> <a id="2430" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="2458" class="Symbol">as</a> <a id="2461" class="Module">PE</a> <a id="2464" class="Keyword">using</a> <a id="2470" class="Symbol">(</a><a id="2471" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="2474" class="Symbol">;</a> <a id="2476" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">_≢_</a><a id="2479" class="Symbol">)</a>
<a id="2481" class="Keyword">import</a> <a id="2488" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>
<a id="2526" class="Keyword">open</a> <a id="2531" class="Keyword">import</a> <a id="2538" href="Tools.Relation.html" class="Module">Tools.Relation</a>
<a id="2553" class="Keyword">open</a> <a id="2558" class="Keyword">import</a> <a id="2565" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="2576" class="Keyword">private</a> <a id="2584" class="Keyword">variable</a>
  <a id="2595" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a>           <a id="2607" class="Symbol">:</a> <a id="2609" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
  <a id="2616" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>           <a id="2628" class="Symbol">:</a> <a id="2630" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="2636" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a>           <a id="2648" class="Symbol">:</a> <a id="2650" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="2654" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="2659" class="Symbol">_</a>
  <a id="2663" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="2665" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="2667" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="2669" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a>     <a id="2675" class="Symbol">:</a> <a id="2677" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="2682" class="Symbol">_</a>
  <a id="2686" href="Graded.Erasure.Extraction.Non-terminating.html#2686" class="Generalizable">γ₁</a> <a id="2689" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">γ₂</a> <a id="2692" href="Graded.Erasure.Extraction.Non-terminating.html#2692" class="Generalizable">γ₃</a> <a id="2695" href="Graded.Erasure.Extraction.Non-terminating.html#2695" class="Generalizable">γ₄</a> <a id="2698" class="Symbol">:</a> <a id="2700" href="Graded.Context.html#692" class="Datatype">Conₘ</a> <a id="2705" class="Symbol">_</a>
  <a id="2709" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="2711" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a>         <a id="2721" class="Symbol">:</a> <a id="2723" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a>
  <a id="2727" href="Graded.Erasure.Extraction.Non-terminating.html#2727" class="Generalizable">v</a>           <a id="2739" class="Symbol">:</a> <a id="2741" href="Graded.Erasure.Target.html#1227" class="Datatype">T.Term</a> <a id="2748" class="Symbol">_</a>
  <a id="2752" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a>           <a id="2764" class="Symbol">:</a> <a id="2766" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a>

<a id="2778" class="Comment">-- Some lemmas used below.</a>

<a id="2806" class="Keyword">private</a> <a id="2814" class="Keyword">module</a> <a id="Lemmas"></a><a id="2821" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="2828" class="Symbol">(</a><a id="2829" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="2832" class="Symbol">:</a> <a id="2834" href="Definition.Typed.html#1184" class="Datatype Operator">⊢</a> <a id="2836" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a><a id="2837" class="Symbol">)</a> <a id="2839" class="Keyword">where</a> <a id="2845" class="Keyword">opaque</a>

  <a id="Lemmas.Empty⊢ℕ∷U"></a><a id="2855" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="2865" class="Symbol">:</a> <a id="2867" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="2869" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2871" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="2877" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="2879" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="2881" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="2883" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="2885" class="Number">0</a>
  <a id="2889" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="2899" class="Symbol">=</a> <a id="2901" href="Definition.Typed.html#2015" class="InductiveConstructor">ℕⱼ</a> <a id="2904" class="Symbol">(</a><a id="2905" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="2908" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">∙[</a> <a id="2911" href="Definition.Typed.html#1406" class="InductiveConstructor">Emptyⱼ</a> <a id="2918" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">]</a><a id="2919" class="Symbol">)</a>

  <a id="Lemmas.Empty⊢ℕ"></a><a id="2924" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a> <a id="2932" class="Symbol">:</a> <a id="2934" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="2936" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2938" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="2944" href="Definition.Typed.html#1306" class="Datatype Operator">⊢</a> <a id="2946" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a>
  <a id="2950" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a> <a id="2958" class="Symbol">=</a> <a id="2960" href="Definition.Typed.html#1675" class="InductiveConstructor">univ</a> <a id="2965" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a>

  <a id="Lemmas.Empty∙ℕ⊢ℕ∷U"></a><a id="2978" href="Graded.Erasure.Extraction.Non-terminating.html#2978" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="2990" class="Symbol">:</a> <a id="2992" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="2994" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2996" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="3002" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3004" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3006" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="3008" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3010" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="3012" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="3014" class="Number">0</a>
  <a id="3018" href="Graded.Erasure.Extraction.Non-terminating.html#2978" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="3030" class="Symbol">=</a> <a id="3032" href="Definition.Typed.html#2015" class="InductiveConstructor">ℕⱼ</a> <a id="3035" class="Symbol">(</a><a id="3036" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="3039" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">∙[</a> <a id="3042" href="Definition.Typed.html#1406" class="InductiveConstructor">Emptyⱼ</a> <a id="3049" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">]</a> <a id="3051" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">∙[</a> <a id="3054" href="Definition.Typed.html#1381" class="InductiveConstructor">ℕⱼ</a> <a id="3057" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">]</a><a id="3058" class="Symbol">)</a>

  <a id="Lemmas.Empty∙ℕ∙ℕ⊢ℕ∷U"></a><a id="3063" href="Graded.Erasure.Extraction.Non-terminating.html#3063" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="3077" class="Symbol">:</a> <a id="3079" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="3081" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3083" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="3089" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3091" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3093" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3095" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3097" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="3099" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3101" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="3103" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="3105" class="Number">0</a>
  <a id="3109" href="Graded.Erasure.Extraction.Non-terminating.html#3063" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="3123" class="Symbol">=</a> <a id="3125" href="Definition.Typed.html#2015" class="InductiveConstructor">ℕⱼ</a> <a id="3128" class="Symbol">(</a><a id="3129" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="3132" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">∙[</a> <a id="3135" href="Definition.Typed.html#1406" class="InductiveConstructor">Emptyⱼ</a> <a id="3142" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">]</a> <a id="3144" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">∙[</a> <a id="3147" href="Definition.Typed.html#1381" class="InductiveConstructor">ℕⱼ</a> <a id="3150" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">]</a> <a id="3152" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">∙[</a> <a id="3155" href="Definition.Typed.html#1381" class="InductiveConstructor">ℕⱼ</a> <a id="3158" href="Definition.Typed.Properties.Well-formed.html#3866" class="Function Operator">]</a><a id="3159" class="Symbol">)</a>

<a id="3162" class="Keyword">opaque</a>

  <a id="3172" class="Comment">-- Another lemma used below.</a>

  <a id="▸Πℕℕ"></a><a id="3204" href="Graded.Erasure.Extraction.Non-terminating.html#3204" class="Function">▸Πℕℕ</a> <a id="3209" class="Symbol">:</a> <a id="3211" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="3213" href="Graded.Modality.html#1365" class="Function Operator">≤</a> <a id="3215" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="3217" class="Symbol">→</a> <a id="3219" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3222" class="Symbol">{</a><a id="3223" class="Argument">n</a> <a id="3225" class="Symbol">=</a> <a id="3227" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="3228" class="Symbol">}</a> <a id="3230" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="3233" class="InductiveConstructor">𝟙ᵐ</a> <a id="3236" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="3238" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="3240" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="3242" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="3244" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="3246" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="3248" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3250" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="3252" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a>
  <a id="3256" href="Graded.Erasure.Extraction.Non-terminating.html#3204" class="Function">▸Πℕℕ</a> <a id="3261" class="Symbol">{</a><a id="3262" href="Graded.Erasure.Extraction.Non-terminating.html#3262" class="Bound">q</a><a id="3263" class="Symbol">}</a> <a id="3265" href="Graded.Erasure.Extraction.Non-terminating.html#3265" class="Bound">q≤𝟘</a> <a id="3269" class="Symbol">=</a> <a id="3271" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a>
    <a id="3279" class="Symbol">(</a><a id="3280" href="Graded.Usage.html#8369" class="InductiveConstructor">ΠΣₘ</a> <a id="3284" href="Graded.Usage.html#8279" class="InductiveConstructor">ℕₘ</a> <a id="3287" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3289" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a> <a id="3293" href="Graded.Usage.html#8279" class="InductiveConstructor">ℕₘ</a> <a id="3296" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3298" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
        <a id="3312" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3315" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="3317" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="3319" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="3321" href="Graded.Erasure.Extraction.Non-terminating.html#3262" class="Bound">q</a>  <a id="3324" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="3327" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="3335" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="3337" href="Graded.Modality.html#3173" class="Function">·-identityˡ</a> <a id="3349" class="Symbol">_</a> <a id="3351" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
        <a id="3361" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3364" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="3366" href="Graded.Erasure.Extraction.Non-terminating.html#3262" class="Bound">q</a>      <a id="3373" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="3376" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="3384" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="3386" href="Graded.Erasure.Extraction.Non-terminating.html#3265" class="Bound">q≤𝟘</a> <a id="3390" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
        <a id="3400" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>          <a id="3412" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="3413" class="Symbol">)</a>
    <a id="3419" class="Symbol">(</a><a id="3420" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="3433" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>        <a id="3443" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="3447" href="Graded.Context.Properties.Addition.html#926" class="Function">+ᶜ-identityʳ</a> <a id="3460" class="Symbol">_</a> <a id="3462" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="3471" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3474" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="3477" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="3481" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="3482" class="Symbol">)</a>
    <a id="3488" class="Keyword">where</a>
    <a id="3498" class="Keyword">open</a> <a id="3503" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="3517" class="Comment">------------------------------------------------------------------------</a>
<a id="3590" class="Comment">-- The term former cast</a>

<a id="3615" class="Keyword">opaque</a>

  <a id="3625" class="Comment">-- A cast lemma.</a>

  <a id="cast"></a><a id="3645" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="3650" class="Symbol">:</a> <a id="3652" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="3657" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3659" class="Symbol">→</a> <a id="3661" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="3666" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3668" class="Symbol">→</a> <a id="3670" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="3675" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3677" class="Symbol">→</a> <a id="3679" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="3684" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3686" class="Symbol">→</a> <a id="3688" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="3693" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>
  <a id="3697" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="3702" href="Graded.Erasure.Extraction.Non-terminating.html#3702" class="Bound">t</a> <a id="3704" href="Graded.Erasure.Extraction.Non-terminating.html#3704" class="Bound">A</a> <a id="3706" href="Graded.Erasure.Extraction.Non-terminating.html#3706" class="Bound">B</a> <a id="3708" href="Graded.Erasure.Extraction.Non-terminating.html#3708" class="Bound">u</a> <a id="3710" class="Symbol">=</a>
    <a id="3716" href="Definition.Untyped.Identity.html#876" class="Function">subst</a> <a id="3722" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="3724" class="Symbol">(</a><a id="3725" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="3727" class="Number">0</a><a id="3728" class="Symbol">)</a> <a id="3730" class="Symbol">(</a><a id="3731" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="3735" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="3737" class="Symbol">)</a> <a id="3739" href="Graded.Erasure.Extraction.Non-terminating.html#3704" class="Bound">A</a> <a id="3741" href="Graded.Erasure.Extraction.Non-terminating.html#3706" class="Bound">B</a> <a id="3743" class="Symbol">(</a><a id="3744" href="Definition.Untyped.html#2030" class="InductiveConstructor">emptyrec</a> <a id="3753" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="3755" class="Symbol">(</a><a id="3756" href="Definition.Untyped.html#2075" class="InductiveConstructor">Id</a> <a id="3759" class="Symbol">(</a><a id="3760" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="3762" class="Number">0</a><a id="3763" class="Symbol">)</a> <a id="3765" href="Graded.Erasure.Extraction.Non-terminating.html#3704" class="Bound">A</a> <a id="3767" href="Graded.Erasure.Extraction.Non-terminating.html#3706" class="Bound">B</a><a id="3768" class="Symbol">)</a> <a id="3770" href="Graded.Erasure.Extraction.Non-terminating.html#3702" class="Bound">t</a><a id="3771" class="Symbol">)</a> <a id="3773" href="Graded.Erasure.Extraction.Non-terminating.html#3708" class="Bound">u</a>

<a id="3776" class="Keyword">opaque</a>
  <a id="3785" class="Keyword">unfolding</a> <a id="3795" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="3800" href="Definition.Untyped.Identity.html#876" class="Function">subst</a>

  <a id="3809" class="Comment">-- An extraction lemma for cast.</a>

  <a id="erase-cast"></a><a id="3845" href="Graded.Erasure.Extraction.Non-terminating.html#3845" class="Function">erase-cast</a> <a id="3856" class="Symbol">:</a> <a id="3858" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="3865" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a> <a id="3867" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="3869" class="Symbol">(</a><a id="3870" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="3875" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="3877" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="3879" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="3881" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a><a id="3882" class="Symbol">)</a> <a id="3884" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3886" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="3893" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a> <a id="3895" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="3897" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a>
  <a id="3901" href="Graded.Erasure.Extraction.Non-terminating.html#3845" class="Function">erase-cast</a> <a id="3912" class="Symbol">=</a> <a id="3914" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a>

<a id="3923" class="Keyword">opaque</a>
  <a id="3932" class="Keyword">unfolding</a> <a id="3942" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a>

  <a id="3950" class="Comment">-- A typing rule for cast.</a>

  <a id="⊢cast"></a><a id="3980" href="Graded.Erasure.Extraction.Non-terminating.html#3980" class="Function">⊢cast</a> <a id="3986" class="Symbol">:</a>
    <a id="3992" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="3994" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="3996" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="3998" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="4000" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="4006" class="Symbol">→</a>
    <a id="4012" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4014" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="4016" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4018" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="4020" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="4022" class="Number">0</a> <a id="4024" class="Symbol">→</a>
    <a id="4030" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4032" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="4034" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4036" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="4038" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="4040" class="Number">0</a> <a id="4042" class="Symbol">→</a>
    <a id="4048" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4050" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="4052" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a> <a id="4054" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="4056" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4058" class="Symbol">→</a>
    <a id="4064" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4066" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="4068" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="4073" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="4075" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4077" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4079" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a> <a id="4081" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="4083" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a>
  <a id="4087" href="Graded.Erasure.Extraction.Non-terminating.html#3980" class="Function">⊢cast</a> <a id="4093" href="Graded.Erasure.Extraction.Non-terminating.html#4093" class="Bound">⊢t</a> <a id="4096" href="Graded.Erasure.Extraction.Non-terminating.html#4096" class="Bound">⊢A</a> <a id="4099" href="Graded.Erasure.Extraction.Non-terminating.html#4099" class="Bound">⊢B</a> <a id="4102" class="Symbol">=</a>
    <a id="4108" href="Definition.Typed.Consequences.DerivedRules.Identity.html#11930" class="Function">⊢subst</a> <a id="4115" class="Symbol">(</a><a id="4116" href="Definition.Typed.html#1675" class="InductiveConstructor">univ</a> <a id="4121" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4123" href="Definition.Typed.Properties.html#21442" class="Function">var₀</a> <a id="4128" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4130" href="Definition.Typed.html#1354" class="InductiveConstructor">Uⱼ</a> <a id="4133" class="Symbol">(</a><a id="4134" href="Definition.Typed.Properties.Well-formed.html#770" class="Function">wfTerm</a> <a id="4141" href="Graded.Erasure.Extraction.Non-terminating.html#4093" class="Bound">⊢t</a><a id="4143" class="Symbol">))</a> <a id="4146" class="Symbol">(</a><a id="4147" href="Definition.Typed.html#3655" class="InductiveConstructor">emptyrecⱼ</a> <a id="4157" class="Symbol">(</a><a id="4158" href="Definition.Typed.html#1603" class="InductiveConstructor">Idⱼ</a> <a id="4162" href="Graded.Erasure.Extraction.Non-terminating.html#4096" class="Bound">⊢A</a> <a id="4165" href="Graded.Erasure.Extraction.Non-terminating.html#4099" class="Bound">⊢B</a><a id="4167" class="Symbol">)</a> <a id="4169" href="Graded.Erasure.Extraction.Non-terminating.html#4093" class="Bound">⊢t</a><a id="4171" class="Symbol">)</a>

<a id="4174" class="Keyword">opaque</a>
  <a id="4183" class="Keyword">unfolding</a> <a id="4193" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a>

  <a id="4201" class="Comment">-- A usage rule for cast.</a>

  <a id="▸cast"></a><a id="4230" href="Graded.Erasure.Extraction.Non-terminating.html#4230" class="Function">▸cast</a> <a id="4236" class="Symbol">:</a>
    <a id="4242" href="Graded.Usage.Restrictions.html#1638" class="Field">Emptyrec-allowed</a> <a id="4259" class="InductiveConstructor">𝟙ᵐ</a> <a id="4262" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="4264" class="Symbol">→</a>
    <a id="4270" href="Graded.Erasure.Extraction.Non-terminating.html#2686" class="Generalizable">γ₁</a> <a id="4273" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="4276" href="Graded.Mode.html#3339" class="Function">𝟘ᵐ?</a> <a id="4280" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="4282" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="4284" class="Symbol">→</a>
    <a id="4290" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">γ₂</a> <a id="4293" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="4296" class="InductiveConstructor">𝟙ᵐ</a> <a id="4299" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="4301" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4303" class="Symbol">→</a>
    <a id="4309" href="Graded.Erasure.Extraction.Non-terminating.html#2692" class="Generalizable">γ₃</a> <a id="4312" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="4315" class="InductiveConstructor">𝟙ᵐ</a> <a id="4318" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="4320" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4322" class="Symbol">→</a>
    <a id="4328" href="Graded.Erasure.Extraction.Non-terminating.html#2695" class="Generalizable">γ₄</a> <a id="4331" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="4334" class="InductiveConstructor">𝟙ᵐ</a> <a id="4337" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="4339" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a> <a id="4341" class="Symbol">→</a>
    <a id="4347" href="Graded.Modality.html#930" class="Function">ω</a> <a id="4349" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="4352" class="Symbol">(</a><a id="4353" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">γ₂</a> <a id="4356" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4359" href="Graded.Erasure.Extraction.Non-terminating.html#2692" class="Generalizable">γ₃</a> <a id="4362" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4365" href="Graded.Erasure.Extraction.Non-terminating.html#2695" class="Generalizable">γ₄</a><a id="4367" class="Symbol">)</a> <a id="4369" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="4372" class="InductiveConstructor">𝟙ᵐ</a> <a id="4375" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="4377" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="4382" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="4384" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4386" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4388" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a>
  <a id="4392" href="Graded.Erasure.Extraction.Non-terminating.html#4230" class="Function">▸cast</a> <a id="4398" class="Symbol">{</a><a id="4399" href="Graded.Erasure.Extraction.Non-terminating.html#4399" class="Bound">γ₁</a><a id="4401" class="Symbol">}</a> <a id="4403" class="Symbol">{</a><a id="4404" href="Graded.Erasure.Extraction.Non-terminating.html#4404" class="Bound">γ₂</a><a id="4406" class="Symbol">}</a> <a id="4408" class="Symbol">{</a><a id="4409" href="Graded.Erasure.Extraction.Non-terminating.html#4409" class="Bound">γ₃</a><a id="4411" class="Symbol">}</a> <a id="4413" class="Symbol">{</a><a id="4414" href="Graded.Erasure.Extraction.Non-terminating.html#4414" class="Bound">γ₄</a><a id="4416" class="Symbol">}</a> <a id="4418" href="Graded.Erasure.Extraction.Non-terminating.html#4418" class="Bound">ok</a> <a id="4421" href="Graded.Erasure.Extraction.Non-terminating.html#4421" class="Bound">▸t</a> <a id="4424" href="Graded.Erasure.Extraction.Non-terminating.html#4424" class="Bound">▸A</a> <a id="4427" href="Graded.Erasure.Extraction.Non-terminating.html#4427" class="Bound">▸B</a> <a id="4430" href="Graded.Erasure.Extraction.Non-terminating.html#4430" class="Bound">▸u</a> <a id="4433" class="Symbol">=</a>
    <a id="4439" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a> <a id="4443" class="Symbol">(</a><a id="4444" href="Graded.Derived.Identity.html#1298" class="Function">▸subst</a> <a id="4451" href="Graded.Usage.html#8251" class="InductiveConstructor">Uₘ</a>
           <a id="4465" class="Symbol">(</a><a id="4466" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a> <a id="4470" href="Graded.Usage.html#8487" class="InductiveConstructor">var</a> <a id="4474" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4476" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
              <a id="4496" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4499" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="4501" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="4503" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="4505" href="Graded.Modality.html#928" class="Function">𝟙</a>   <a id="4509" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="4512" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="4520" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="4522" href="Graded.Modality.html#3215" class="Function">·-identityʳ</a> <a id="4534" class="Symbol">_</a> <a id="4536" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
              <a id="4552" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4555" href="Graded.Context.html#1107" class="Function Operator">,</a> <a id="4557" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="4560" href="Graded.Context.html#1107" class="Function Operator">≔</a> <a id="4562" href="Graded.Modality.html#928" class="Function">𝟙</a>  <a id="4565" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="4566" class="Symbol">)</a>
           <a id="4579" href="Graded.Erasure.Extraction.Non-terminating.html#4424" class="Bound">▸A</a> <a id="4582" href="Graded.Erasure.Extraction.Non-terminating.html#4427" class="Bound">▸B</a>
           <a id="4596" class="Symbol">(</a><a id="4597" href="Graded.Usage.html#11590" class="InductiveConstructor">emptyrecₘ</a> <a id="4607" class="Symbol">(</a><a id="4608" href="Graded.Usage.Properties.html#2553" class="Function">▸-cong</a> <a id="4615" class="Symbol">(</a><a id="4616" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="4623" href="Graded.Mode.html#19132" class="Function">⌞𝟘⌟≡𝟘ᵐ?</a><a id="4630" class="Symbol">)</a> <a id="4632" href="Graded.Erasure.Extraction.Non-terminating.html#4421" class="Bound">▸t</a><a id="4634" class="Symbol">)</a>
              <a id="4650" class="Symbol">(</a><a id="4651" href="Graded.Usage.Properties.html#49288" class="Function">Idₘ-generalised</a> <a id="4667" href="Graded.Usage.html#8251" class="InductiveConstructor">Uₘ</a> <a id="4670" class="Symbol">(</a><a id="4671" href="Graded.Usage.Properties.html#3635" class="Function">▸-𝟘ᵐ?</a> <a id="4677" href="Graded.Erasure.Extraction.Non-terminating.html#4424" class="Bound">▸A</a> <a id="4680" class="Symbol">.</a><a id="4681" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4686" class="Symbol">)</a> <a id="4688" class="Symbol">(</a><a id="4689" href="Graded.Usage.Properties.html#3635" class="Function">▸-𝟘ᵐ?</a> <a id="4695" href="Graded.Erasure.Extraction.Non-terminating.html#4427" class="Bound">▸B</a> <a id="4698" class="Symbol">.</a><a id="4699" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4704" class="Symbol">)</a>
                 <a id="4723" class="Symbol">(λ</a> <a id="4726" href="Graded.Erasure.Extraction.Non-terminating.html#4726" class="Bound">_</a> <a id="4728" class="Symbol">→</a> <a id="4730" href="Graded.Context.Properties.Meet.html#2443" class="Function">∧ᶜ-decreasingˡ</a> <a id="4745" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4748" class="Symbol">_)</a>
                 <a id="4768" class="Symbol">(λ</a> <a id="4771" href="Graded.Erasure.Extraction.Non-terminating.html#4771" class="Bound">_</a> <a id="4773" class="Symbol">→</a> <a id="4775" href="Graded.Context.Properties.Meet.html#2657" class="Function">∧ᶜ-decreasingʳ</a> <a id="4790" class="Symbol">_</a> <a id="4792" class="Symbol">_))</a>
              <a id="4810" href="Graded.Erasure.Extraction.Non-terminating.html#4418" class="Bound">ok</a><a id="4812" class="Symbol">)</a>
           <a id="4825" href="Graded.Erasure.Extraction.Non-terminating.html#4430" class="Bound">▸u</a><a id="4827" class="Symbol">)</a>
    <a id="4833" class="Symbol">(</a><a id="4834" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="4847" href="Graded.Modality.html#930" class="Function">ω</a> <a id="4849" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="4852" class="Symbol">(</a><a id="4853" href="Graded.Erasure.Extraction.Non-terminating.html#4404" class="Bound">γ₂</a> <a id="4856" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4859" href="Graded.Erasure.Extraction.Non-terminating.html#4409" class="Bound">γ₃</a> <a id="4862" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4865" href="Graded.Erasure.Extraction.Non-terminating.html#4414" class="Bound">γ₄</a><a id="4867" class="Symbol">)</a>                   <a id="4887" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="4891" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="4900" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="4953" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="4962" class="Symbol">(</a><a id="4963" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="4976" class="Symbol">_)</a> <a id="4979" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5032" href="Graded.Context.Properties.Addition.html#2641" class="Function">+ᶜ-congˡ</a> <a id="5041" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5094" href="Graded.Context.Properties.Addition.html#2641" class="Function">+ᶜ-congˡ</a> <a id="5103" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5156" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="5165" class="Symbol">(</a><a id="5166" href="Graded.Context.Properties.Addition.html#2746" class="Function">+ᶜ-congʳ</a> <a id="5175" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5177" href="Graded.Context.Properties.Multiplication.html#898" class="Function">·ᶜ-zeroˡ</a> <a id="5186" class="Symbol">_)</a> <a id="5189" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5242" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="5255" class="Symbol">_</a> <a id="5257" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="5266" href="Graded.Modality.html#930" class="Function">ω</a> <a id="5268" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="5271" class="Symbol">(</a><a id="5272" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="5275" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5278" href="Graded.Erasure.Extraction.Non-terminating.html#4404" class="Bound">γ₂</a> <a id="5281" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5284" href="Graded.Erasure.Extraction.Non-terminating.html#4409" class="Bound">γ₃</a> <a id="5287" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5290" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="5292" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="5295" href="Graded.Erasure.Extraction.Non-terminating.html#4399" class="Bound">γ₁</a> <a id="5298" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5301" href="Graded.Erasure.Extraction.Non-terminating.html#4414" class="Bound">γ₄</a><a id="5303" class="Symbol">)</a>  <a id="5306" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="5307" class="Symbol">)</a>
    <a id="5313" class="Keyword">where</a>
    <a id="5323" class="Keyword">open</a> <a id="5328" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="5342" class="Comment">------------------------------------------------------------------------</a>
<a id="5415" class="Comment">-- The term former λx∙xx</a>

<a id="5441" class="Keyword">opaque</a>

  <a id="5451" class="Comment">-- A term that is roughly &quot;λ x. x x&quot;.</a>

  <a id="λx∙xx"></a><a id="5492" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="5498" class="Symbol">:</a> <a id="5500" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="5502" class="Symbol">→</a> <a id="5504" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="5509" class="Symbol">(</a><a id="5510" href="Tools.Nat.html#2085" class="InductiveConstructor">1+</a> <a id="5513" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="5514" class="Symbol">)</a>
  <a id="5518" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="5524" href="Graded.Erasure.Extraction.Non-terminating.html#5524" class="Bound">p</a> <a id="5526" class="Symbol">=</a>
    <a id="5532" href="Definition.Untyped.html#1349" class="InductiveConstructor">lam</a> <a id="5536" class="Symbol">(</a><a id="5537" href="Graded.Modality.html#930" class="Function">ω</a> <a id="5539" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="5541" href="Graded.Modality.html#930" class="Function">ω</a><a id="5542" class="Symbol">)</a> <a id="5544" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="5550" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="5555" class="Symbol">(</a><a id="5556" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="5560" href="Tools.Fin.html#439" class="Function">x1</a><a id="5562" class="Symbol">)</a> <a id="5564" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="5566" class="Symbol">(</a><a id="5567" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="5569" href="Graded.Modality.html#930" class="Function">ω</a> <a id="5571" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="5573" href="Graded.Erasure.Extraction.Non-terminating.html#5524" class="Bound">p</a> <a id="5575" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="5577" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="5579" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="5581" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="5582" class="Symbol">)</a> <a id="5584" class="Symbol">(</a><a id="5585" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="5589" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="5591" class="Symbol">)</a> <a id="5593" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="5596" href="Graded.Modality.html#930" class="Function">ω</a> <a id="5598" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a> <a id="5600" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="5604" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a>

<a id="5608" class="Keyword">opaque</a>
  <a id="5617" class="Keyword">unfolding</a> <a id="5627" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a>

  <a id="5636" class="Comment">-- An extraction lemma for λx∙xx.</a>

  <a id="erase-λx∙xx"></a><a id="5673" href="Graded.Erasure.Extraction.Non-terminating.html#5673" class="Function">erase-λx∙xx</a> <a id="5685" class="Symbol">:</a>
    <a id="5691" class="Symbol">⦃</a> <a id="5693" href="Graded.Erasure.Extraction.Non-terminating.html#5693" class="Bound">𝟘-well-behaved</a> <a id="5708" class="Symbol">:</a> <a id="5710" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="5732" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="5734" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="5753" class="Symbol">⦄</a> <a id="5755" class="Symbol">→</a>
    <a id="5761" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5768" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a> <a id="5770" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="5772" class="Symbol">(</a><a id="5773" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="5779" class="Symbol">{</a><a id="5780" class="Argument">n</a> <a id="5782" class="Symbol">=</a> <a id="5784" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="5785" class="Symbol">}</a> <a id="5787" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="5788" class="Symbol">)</a> <a id="5790" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="5796" class="InductiveConstructor">T.lam</a> <a id="5802" class="Symbol">(</a><a id="5803" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="5809" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="5812" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="5817" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="5819" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="5821" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="5827" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="5829" class="Symbol">)</a>
  <a id="5833" href="Graded.Erasure.Extraction.Non-terminating.html#5673" class="Function">erase-λx∙xx</a> <a id="5845" class="Symbol">{</a><a id="5846" href="Graded.Erasure.Extraction.Non-terminating.html#5846" class="Bound">b</a><a id="5847" class="Symbol">}</a> <a id="5849" class="Symbol">{</a><a id="5850" href="Graded.Erasure.Extraction.Non-terminating.html#5850" class="Bound">s</a><a id="5851" class="Symbol">}</a> <a id="5853" class="Symbol">{</a><a id="5854" href="Graded.Erasure.Extraction.Non-terminating.html#5854" class="Bound">p</a><a id="5855" class="Symbol">}</a> <a id="5857" class="Symbol">=</a>
    <a id="5863" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5870" href="Graded.Erasure.Extraction.Non-terminating.html#5846" class="Bound">b</a> <a id="5872" href="Graded.Erasure.Extraction.Non-terminating.html#5850" class="Bound">s</a> <a id="5874" class="Symbol">(</a><a id="5875" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="5881" href="Graded.Erasure.Extraction.Non-terminating.html#5854" class="Bound">p</a><a id="5882" class="Symbol">)</a>                                          <a id="5925" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="5928" href="Graded.Erasure.Extraction.Properties.html#4481" class="Function">lam-≢𝟘</a> <a id="5935" href="Graded.Erasure.Extraction.Non-terminating.html#5846" class="Bound">b</a> <a id="5937" class="Symbol">(</a><a id="5938" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="5942" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5945" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5951" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5954" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1135" class="Function">+-positive</a><a id="5964" class="Symbol">)</a> <a id="5966" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="5973" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a>
      <a id="5985" class="Symbol">(</a><a id="5986" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5993" href="Graded.Erasure.Extraction.Non-terminating.html#5846" class="Bound">b</a> <a id="5995" href="Graded.Erasure.Extraction.Non-terminating.html#5850" class="Bound">s</a> <a id="5997" href="Function.Base.html#1974" class="Function Operator">$</a>
       <a id="6006" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="6011" class="Symbol">(</a><a id="6012" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="6016" href="Tools.Fin.html#439" class="Function">x1</a><a id="6018" class="Symbol">)</a> <a id="6020" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="6022" class="Symbol">(</a><a id="6023" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="6025" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6027" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="6029" href="Graded.Erasure.Extraction.Non-terminating.html#5854" class="Bound">p</a> <a id="6031" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="6033" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="6035" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="6037" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="6038" class="Symbol">)</a> <a id="6040" class="Symbol">(</a><a id="6041" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="6045" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6047" class="Symbol">)</a> <a id="6049" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="6052" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6054" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a> <a id="6056" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="6060" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6062" class="Symbol">)</a>  <a id="6065" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="6068" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="6076" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6082" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6084" href="Graded.Erasure.Extraction.Properties.html#4159" class="Function">∘-≢𝟘</a> <a id="6089" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="6093" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="6100" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a>
      <a id="6112" class="Symbol">(</a><a id="6113" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="6120" href="Graded.Erasure.Extraction.Non-terminating.html#5846" class="Bound">b</a> <a id="6122" href="Graded.Erasure.Extraction.Non-terminating.html#5850" class="Bound">s</a>
         <a id="6133" class="Symbol">(</a><a id="6134" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="6139" class="Symbol">(</a><a id="6140" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="6144" href="Tools.Fin.html#439" class="Function">x1</a><a id="6146" class="Symbol">)</a> <a id="6148" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="6150" class="Symbol">(</a><a id="6151" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="6153" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6155" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="6157" href="Graded.Erasure.Extraction.Non-terminating.html#5854" class="Bound">p</a> <a id="6159" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="6161" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="6163" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="6165" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="6166" class="Symbol">)</a> <a id="6168" class="Symbol">(</a><a id="6169" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="6173" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6175" class="Symbol">))</a>
         <a id="6187" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6192" href="Graded.Erasure.Extraction.Non-terminating.html#5850" class="Bound">s</a> <a id="6194" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6196" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6202" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6204" class="Symbol">)</a>                                       <a id="6244" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="6247" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="6255" class="Symbol">(λ</a> <a id="6258" href="Graded.Erasure.Extraction.Non-terminating.html#6258" class="Bound">t</a> <a id="6260" class="Symbol">→</a> <a id="6262" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6268" class="Symbol">(</a><a id="6269" href="Graded.Erasure.Extraction.Non-terminating.html#6258" class="Bound">t</a> <a id="6271" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6276" class="Symbol">_</a> <a id="6278" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6280" class="Symbol">_))</a> <a id="6284" href="Graded.Erasure.Extraction.Non-terminating.html#3845" class="Function">erase-cast</a> <a id="6295" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="6302" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6308" class="Symbol">(</a><a id="6309" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6315" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="6318" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6323" href="Graded.Erasure.Extraction.Non-terminating.html#5850" class="Bound">s</a> <a id="6325" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6327" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6333" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6335" class="Symbol">)</a>                            <a id="6364" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="6370" class="Keyword">where</a>
    <a id="6380" class="Keyword">open</a> <a id="6385" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="6424" class="Keyword">opaque</a>
  <a id="6433" class="Keyword">unfolding</a> <a id="6443" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a>

  <a id="6452" class="Comment">-- A typing rule for λx∙xx.</a>

  <a id="⊢λx∙xx"></a><a id="6483" href="Graded.Erasure.Extraction.Non-terminating.html#6483" class="Function">⊢λx∙xx</a> <a id="6490" class="Symbol">:</a>
    <a id="6496" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="6506" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6508" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6510" class="Symbol">→</a>
    <a id="6516" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="6526" class="Symbol">(</a><a id="6527" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6529" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="6531" href="Graded.Modality.html#930" class="Function">ω</a><a id="6532" class="Symbol">)</a> <a id="6534" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6536" class="Symbol">→</a>
    <a id="6542" href="Definition.Typed.html#1184" class="Datatype Operator">⊢</a> <a id="6544" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="6546" class="Symbol">→</a>
    <a id="6552" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="6554" class="InductiveConstructor Operator">∙</a> <a id="6556" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="6562" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="6564" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="6570" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6572" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="6574" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="6576" class="Symbol">(</a><a id="6577" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6579" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="6581" href="Graded.Modality.html#930" class="Function">ω</a><a id="6582" class="Symbol">)</a> <a id="6584" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="6586" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6588" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="6590" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="6592" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="6594" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a>
  <a id="6598" href="Graded.Erasure.Extraction.Non-terminating.html#6483" class="Function">⊢λx∙xx</a> <a id="6605" href="Graded.Erasure.Extraction.Non-terminating.html#6605" class="Bound">ω-ok</a> <a id="6610" href="Graded.Erasure.Extraction.Non-terminating.html#6610" class="Bound">ω+ω-ok</a> <a id="6617" href="Graded.Erasure.Extraction.Non-terminating.html#6617" class="Bound">⊢Γ</a> <a id="6620" class="Symbol">=</a>
    <a id="6626" href="Definition.Typed.Consequences.DerivedRules.Pi.html#1407" class="Function">lamⱼ′</a> <a id="6632" href="Graded.Erasure.Extraction.Non-terminating.html#6610" class="Bound">ω+ω-ok</a> <a id="6639" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="6645" href="Graded.Erasure.Extraction.Non-terminating.html#3980" class="Function">⊢cast</a> <a id="6651" class="Symbol">(</a><a id="6652" href="Definition.Typed.Properties.html#21561" class="Function">var₁</a> <a id="6657" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a><a id="6664" class="Symbol">)</a> <a id="6666" href="Graded.Erasure.Extraction.Non-terminating.html#2978" class="Function">Empty∙ℕ⊢ℕ∷U</a>
      <a id="6684" class="Symbol">(</a><a id="6685" href="Definition.Typed.html#1855" class="InductiveConstructor">ΠΣⱼ</a> <a id="6689" href="Graded.Erasure.Extraction.Non-terminating.html#2978" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="6701" href="Graded.Erasure.Extraction.Non-terminating.html#3063" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="6715" href="Graded.Erasure.Extraction.Non-terminating.html#6605" class="Bound">ω-ok</a><a id="6719" class="Symbol">)</a> <a id="6721" class="Symbol">(</a><a id="6722" href="Definition.Typed.Properties.html#21442" class="Function">var₀</a> <a id="6727" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a><a id="6734" class="Symbol">)</a> <a id="6736" href="Definition.Typed.html#2438" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="6743" href="Definition.Typed.Properties.html#21442" class="Function">var₀</a> <a id="6748" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a>
    <a id="6760" class="Keyword">where</a>
    <a id="6770" class="Keyword">open</a> <a id="6775" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="6782" href="Graded.Erasure.Extraction.Non-terminating.html#6617" class="Bound">⊢Γ</a>

<a id="6786" class="Keyword">opaque</a>
  <a id="6795" class="Keyword">unfolding</a> <a id="6805" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a>

  <a id="6814" class="Comment">-- A usage rule for λx∙xx.</a>

  <a id="▸λx∙xx"></a><a id="6844" href="Graded.Erasure.Extraction.Non-terminating.html#6844" class="Function">▸λx∙xx</a> <a id="6851" class="Symbol">:</a>
    <a id="6857" href="Graded.Usage.Restrictions.html#1638" class="Field">Emptyrec-allowed</a> <a id="6874" class="InductiveConstructor">𝟙ᵐ</a> <a id="6877" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="6879" class="Symbol">→</a>
    <a id="6885" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6887" href="Graded.Modality.html#1365" class="Function Operator">≤</a> <a id="6889" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="6891" class="Symbol">→</a>
    <a id="6897" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="6900" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="6903" class="InductiveConstructor">𝟙ᵐ</a> <a id="6906" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="6908" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="6914" class="Symbol">{</a><a id="6915" class="Argument">n</a> <a id="6917" class="Symbol">=</a> <a id="6919" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="6920" class="Symbol">}</a> <a id="6922" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a>
  <a id="6926" href="Graded.Erasure.Extraction.Non-terminating.html#6844" class="Function">▸λx∙xx</a> <a id="6933" class="Symbol">{</a><a id="6934" href="Graded.Erasure.Extraction.Non-terminating.html#6934" class="Bound">p</a><a id="6935" class="Symbol">}</a> <a id="6937" href="Graded.Erasure.Extraction.Non-terminating.html#6937" class="Bound">ok</a> <a id="6940" href="Graded.Erasure.Extraction.Non-terminating.html#6940" class="Bound">p≤𝟘</a> <a id="6944" class="Symbol">=</a>
    <a id="6950" href="Graded.Usage.html#8532" class="InductiveConstructor">lamₘ</a> <a id="6955" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6957" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a> <a id="6961" class="Symbol">(</a><a id="6962" href="Graded.Erasure.Extraction.Non-terminating.html#4230" class="Function">▸cast</a> <a id="6968" href="Graded.Erasure.Extraction.Non-terminating.html#6937" class="Bound">ok</a> <a id="6971" href="Graded.Usage.html#8487" class="InductiveConstructor">var</a> <a id="6975" href="Graded.Usage.html#8279" class="InductiveConstructor">ℕₘ</a> <a id="6978" class="Symbol">(</a><a id="6979" href="Graded.Erasure.Extraction.Non-terminating.html#3204" class="Function">▸Πℕℕ</a> <a id="6984" href="Graded.Erasure.Extraction.Non-terminating.html#6940" class="Bound">p≤𝟘</a><a id="6987" class="Symbol">)</a> <a id="6989" href="Graded.Usage.html#8487" class="InductiveConstructor">var</a> <a id="6993" href="Graded.Usage.html#8601" class="InductiveConstructor Operator">∘ₘ</a> <a id="6996" href="Graded.Usage.html#8487" class="InductiveConstructor">var</a><a id="6999" class="Symbol">)</a> <a id="7001" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="7003" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
      <a id="7015" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7018" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7020" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="7022" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="7024" class="Symbol">(</a><a id="7025" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7027" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="7029" href="Graded.Modality.html#930" class="Function">ω</a><a id="7030" class="Symbol">)</a>                                      <a id="7069" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="7072" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="7080" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="7082" href="Graded.Modality.html#3173" class="Function">·-identityˡ</a> <a id="7094" class="Symbol">_</a> <a id="7096" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
      <a id="7104" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7107" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7109" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7111" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="7113" href="Graded.Modality.html#930" class="Function">ω</a>                                            <a id="7158" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="7162" class="Symbol">(</a><a id="7163" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="7172" class="Symbol">(</a><a id="7173" href="Graded.Context.Properties.Addition.html#2458" class="Function">+ᶜ-cong</a> <a id="7181" class="Symbol">(</a><a id="7182" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="7191" class="Symbol">_)</a> <a id="7194" class="Symbol">(</a><a id="7195" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="7204" class="Symbol">_))</a> <a id="7208" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                 <a id="7275" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="7288" class="Symbol">_)</a> <a id="7291" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a>
                                                                <a id="7357" href="Algebra.Structures.html#13194" class="Function">+-cong</a> <a id="7364" class="Symbol">(</a><a id="7365" href="Graded.Modality.html#3215" class="Function">·-identityʳ</a> <a id="7377" class="Symbol">_)</a> <a id="7380" href="Graded.Mode.html#20914" class="Function">·⌜⌞⌟⌝</a> <a id="7386" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
      <a id="7394" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7396" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7399" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7402" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7405" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7407" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7410" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7413" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7415" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7417" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="7419" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="7421" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="7423" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7425" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="7427" href="Graded.Mode.html#4878" class="Function Operator">⌜</a> <a id="7429" href="Graded.Mode.html#5213" class="Function Operator">⌞</a> <a id="7431" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7433" href="Graded.Mode.html#5213" class="Function Operator">⌟</a> <a id="7435" href="Graded.Mode.html#4878" class="Function Operator">⌝</a>            <a id="7448" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
      <a id="7458" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7460" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7463" class="Symbol">(</a><a id="7464" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7467" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7469" href="Graded.Modality.html#928" class="Function">𝟙</a><a id="7470" class="Symbol">)</a> <a id="7472" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7475" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7477" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7480" class="Symbol">(</a><a id="7481" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7484" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7486" href="Graded.Mode.html#4878" class="Function Operator">⌜</a> <a id="7488" href="Graded.Mode.html#5213" class="Function Operator">⌞</a> <a id="7490" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7492" href="Graded.Mode.html#5213" class="Function Operator">⌟</a> <a id="7494" href="Graded.Mode.html#4878" class="Function Operator">⌝</a><a id="7495" class="Symbol">)</a>                <a id="7512" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="7516" href="Graded.Context.Properties.Addition.html#2746" class="Function">+ᶜ-congʳ</a> <a id="7525" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7591" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="7600" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7666" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="7675" class="Symbol">(</a><a id="7676" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="7689" class="Symbol">_)</a> <a id="7692" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7758" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="7771" class="Symbol">_</a> <a id="7773" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
      <a id="7781" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7783" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7786" class="Symbol">(</a><a id="7787" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7790" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7793" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7796" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7799" class="Symbol">(</a><a id="7800" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7803" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7805" href="Graded.Modality.html#928" class="Function">𝟙</a><a id="7806" class="Symbol">))</a> <a id="7809" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7812" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7814" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7817" class="Symbol">(</a><a id="7818" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7821" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7823" href="Graded.Mode.html#4878" class="Function Operator">⌜</a> <a id="7825" href="Graded.Mode.html#5213" class="Function Operator">⌞</a> <a id="7827" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7829" href="Graded.Mode.html#5213" class="Function Operator">⌟</a> <a id="7831" href="Graded.Mode.html#4878" class="Function Operator">⌝</a><a id="7832" class="Symbol">)</a>  <a id="7835" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="7841" class="Keyword">where</a>
    <a id="7851" class="Keyword">open</a> <a id="7856" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="7870" class="Comment">------------------------------------------------------------------------</a>
<a id="7943" class="Comment">-- The term former extracts-to-loop</a>

<a id="7980" class="Keyword">opaque</a>

  <a id="7990" class="Comment">-- A term for which the extraction is loop s (for some s) if</a>
  <a id="8053" class="Comment">-- erasable arguments are removed entirely.</a>

  <a id="extracts-to-loop"></a><a id="8100" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a> <a id="8117" class="Symbol">:</a> <a id="8119" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="8121" class="Symbol">→</a> <a id="8123" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="8128" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>
  <a id="8132" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a> <a id="8149" href="Graded.Erasure.Extraction.Non-terminating.html#8149" class="Bound">p</a> <a id="8151" class="Symbol">=</a>
    <a id="8157" href="Definition.Untyped.html#1349" class="InductiveConstructor">lam</a> <a id="8161" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="8163" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="8169" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="8175" href="Graded.Erasure.Extraction.Non-terminating.html#8149" class="Bound">p</a> <a id="8177" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="8180" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8182" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="8184" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8186" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a> <a id="8188" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="8193" class="Symbol">(</a><a id="8194" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="8198" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8200" class="Symbol">)</a> <a id="8202" class="Symbol">(</a><a id="8203" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="8205" class="Symbol">(</a><a id="8206" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8208" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="8210" href="Graded.Modality.html#930" class="Function">ω</a><a id="8211" class="Symbol">)</a> <a id="8213" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="8215" href="Graded.Erasure.Extraction.Non-terminating.html#8149" class="Bound">p</a> <a id="8217" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="8219" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8221" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="8223" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="8224" class="Symbol">)</a> <a id="8226" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8228" class="Symbol">(</a><a id="8229" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="8235" href="Graded.Erasure.Extraction.Non-terminating.html#8149" class="Bound">p</a><a id="8236" class="Symbol">)</a>

<a id="8239" class="Keyword">opaque</a>
  <a id="8248" class="Keyword">unfolding</a> <a id="8258" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a> <a id="8275" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a>

  <a id="8283" class="Comment">-- An extraction lemma for extracts-to-loop.</a>

  <a id="erase-extracts-to-loop"></a><a id="8331" href="Graded.Erasure.Extraction.Non-terminating.html#8331" class="Function">erase-extracts-to-loop</a> <a id="8354" class="Symbol">:</a>
    <a id="8360" class="Symbol">⦃</a> <a id="8362" href="Graded.Erasure.Extraction.Non-terminating.html#8362" class="Bound">𝟘-well-behaved</a> <a id="8377" class="Symbol">:</a> <a id="8379" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="8401" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="8403" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="8422" class="Symbol">⦄</a> <a id="8424" class="Symbol">→</a>
    <a id="8430" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8437" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8442" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="8444" class="Symbol">(</a><a id="8445" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a> <a id="8462" class="Symbol">{</a><a id="8463" class="Argument">n</a> <a id="8465" class="Symbol">=</a> <a id="8467" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="8468" class="Symbol">}</a> <a id="8470" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="8471" class="Symbol">)</a> <a id="8473" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8475" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="8480" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a>
  <a id="8484" href="Graded.Erasure.Extraction.Non-terminating.html#8331" class="Function">erase-extracts-to-loop</a> <a id="8507" class="Symbol">{</a><a id="8508" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a><a id="8509" class="Symbol">}</a> <a id="8511" class="Symbol">{</a><a id="8512" href="Graded.Erasure.Extraction.Non-terminating.html#8512" class="Bound">p</a><a id="8513" class="Symbol">}</a> <a id="8515" class="Symbol">=</a>
    <a id="8521" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8528" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8533" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a> <a id="8535" class="Symbol">(</a><a id="8536" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a> <a id="8553" href="Graded.Erasure.Extraction.Non-terminating.html#8512" class="Bound">p</a><a id="8554" class="Symbol">)</a>                       <a id="8578" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="8581" href="Graded.Erasure.Extraction.Properties.html#4878" class="Function">lam-𝟘-remove</a> <a id="8594" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="8601" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8608" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8613" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a>
      <a id="8621" class="Symbol">(</a><a id="8622" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="8628" href="Graded.Erasure.Extraction.Non-terminating.html#8512" class="Bound">p</a> <a id="8630" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="8633" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8635" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="8637" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8639" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a>
       <a id="8648" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="8653" class="Symbol">(</a><a id="8654" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="8658" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8660" class="Symbol">)</a> <a id="8662" class="Symbol">(</a><a id="8663" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="8665" class="Symbol">(</a><a id="8666" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8668" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="8670" href="Graded.Modality.html#930" class="Function">ω</a><a id="8671" class="Symbol">)</a> <a id="8673" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="8675" href="Graded.Erasure.Extraction.Non-terminating.html#8512" class="Bound">p</a> <a id="8677" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="8679" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8681" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="8683" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="8684" class="Symbol">)</a> <a id="8686" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8688" class="Symbol">(</a><a id="8689" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="8695" href="Graded.Erasure.Extraction.Non-terminating.html#8512" class="Bound">p</a><a id="8696" class="Symbol">))</a>
      <a id="8705" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="8709" href="Graded.Erasure.Extraction.html#854" class="Function">loop?</a> <a id="8715" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a> <a id="8717" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="8760" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="8763" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="8771" href="Graded.Erasure.Target.html#4865" class="Function Operator">T._[</a> <a id="8776" class="Symbol">_</a> <a id="8778" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a> <a id="8780" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="8846" href="Graded.Erasure.Extraction.Properties.html#4159" class="Function">∘-≢𝟘</a> <a id="8851" class="Symbol">(</a><a id="8852" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="8856" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="8859" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="8865" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="8868" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1135" class="Function">+-positive</a><a id="8878" class="Symbol">)</a> <a id="8880" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="8886" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8893" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8898" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a> <a id="8900" class="Symbol">(</a><a id="8901" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="8907" href="Graded.Erasure.Extraction.Non-terminating.html#8512" class="Bound">p</a><a id="8908" class="Symbol">)</a> <a id="8910" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="8915" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a> <a id="8917" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
      <a id="8925" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8932" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8937" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a>
        <a id="8947" class="Symbol">(</a><a id="8948" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="8953" class="Symbol">(</a><a id="8954" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="8958" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8960" class="Symbol">)</a> <a id="8962" class="Symbol">(</a><a id="8963" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="8965" class="Symbol">(</a><a id="8966" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8968" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="8970" href="Graded.Modality.html#930" class="Function">ω</a><a id="8971" class="Symbol">)</a> <a id="8973" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="8975" href="Graded.Erasure.Extraction.Non-terminating.html#8512" class="Bound">p</a> <a id="8977" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="8979" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8981" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="8983" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="8984" class="Symbol">)</a> <a id="8986" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8988" class="Symbol">(</a><a id="8989" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="8995" href="Graded.Erasure.Extraction.Non-terminating.html#8512" class="Bound">p</a><a id="8996" class="Symbol">))</a>
      <a id="9005" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="9009" href="Graded.Erasure.Extraction.html#854" class="Function">loop?</a> <a id="9015" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a> <a id="9017" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="9060" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="9063" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a>
                                                                  <a id="9137" class="Symbol">(λ</a> <a id="9140" href="Graded.Erasure.Extraction.Non-terminating.html#9140" class="Bound">t</a> <a id="9142" class="Symbol">→</a> <a id="9144" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9151" class="Symbol">_</a> <a id="9153" class="Symbol">_</a> <a id="9155" class="Symbol">(</a><a id="9156" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="9162" class="Symbol">_)</a> <a id="9165" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9170" class="Symbol">_</a> <a id="9172" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="9174" href="Graded.Erasure.Extraction.Non-terminating.html#9140" class="Bound">t</a> <a id="9176" href="Graded.Erasure.Target.html#4865" class="Function Operator">T.[</a> <a id="9180" class="Symbol">_</a> <a id="9182" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a><a id="9183" class="Symbol">)</a>
                                                                  <a id="9251" href="Graded.Erasure.Extraction.Non-terminating.html#3845" class="Function">erase-cast</a> <a id="9262" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="9268" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9275" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9280" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a> <a id="9282" class="Symbol">(</a><a id="9283" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="9289" href="Graded.Erasure.Extraction.Non-terminating.html#8512" class="Bound">p</a><a id="9290" class="Symbol">)</a> <a id="9292" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9297" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a> <a id="9299" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
      <a id="9307" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9314" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9319" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a> <a id="9321" class="Symbol">(</a><a id="9322" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="9328" href="Graded.Erasure.Extraction.Non-terminating.html#8512" class="Bound">p</a><a id="9329" class="Symbol">)</a>
      <a id="9337" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="9341" href="Graded.Erasure.Extraction.html#854" class="Function">loop?</a> <a id="9347" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a> <a id="9349" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="9392" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="9395" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="9403" class="Symbol">(λ</a> <a id="9406" href="Graded.Erasure.Extraction.Non-terminating.html#9406" class="Bound">t</a> <a id="9408" class="Symbol">→</a> <a id="9410" href="Graded.Erasure.Extraction.Non-terminating.html#9406" class="Bound">t</a> <a id="9412" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9417" class="Symbol">_</a> <a id="9419" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="9421" href="Graded.Erasure.Extraction.Non-terminating.html#9406" class="Bound">t</a> <a id="9423" href="Graded.Erasure.Target.html#4865" class="Function Operator">T.[</a> <a id="9427" class="Symbol">_</a> <a id="9429" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a><a id="9430" class="Symbol">)</a>
                                                                <a id="9496" href="Graded.Erasure.Extraction.Non-terminating.html#5673" class="Function">erase-λx∙xx</a> <a id="9508" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="9514" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="9519" href="Graded.Erasure.Extraction.Non-terminating.html#8508" class="Bound">s</a>                                                   <a id="9571" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="9577" class="Keyword">where</a>
    <a id="9587" class="Keyword">open</a> <a id="9592" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="9631" class="Keyword">opaque</a>
  <a id="9640" class="Keyword">unfolding</a> <a id="9650" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a>

  <a id="9670" class="Comment">-- A typing rule for extracts-to-loop.</a>

  <a id="⊢extracts-to-loop"></a><a id="9712" href="Graded.Erasure.Extraction.Non-terminating.html#9712" class="Function">⊢extracts-to-loop</a> <a id="9730" class="Symbol">:</a>
    <a id="9736" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="9746" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="9748" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="9750" class="Symbol">→</a>
    <a id="9756" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="9766" href="Graded.Modality.html#930" class="Function">ω</a> <a id="9768" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="9770" class="Symbol">→</a>
    <a id="9776" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="9786" class="Symbol">(</a><a id="9787" href="Graded.Modality.html#930" class="Function">ω</a> <a id="9789" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="9791" href="Graded.Modality.html#930" class="Function">ω</a><a id="9792" class="Symbol">)</a> <a id="9794" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="9796" class="Symbol">→</a>
    <a id="9802" href="Definition.Typed.html#1184" class="Datatype Operator">⊢</a> <a id="9804" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="9806" class="Symbol">→</a>
    <a id="9812" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="9814" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="9816" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a> <a id="9833" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="9835" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="9837" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="9839" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="9841" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="9843" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="9845" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="9847" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="9853" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="9855" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a>
  <a id="9859" href="Graded.Erasure.Extraction.Non-terminating.html#9712" class="Function">⊢extracts-to-loop</a> <a id="9877" href="Graded.Erasure.Extraction.Non-terminating.html#9877" class="Bound">𝟘-ok</a> <a id="9882" href="Graded.Erasure.Extraction.Non-terminating.html#9882" class="Bound">ω-ok</a> <a id="9887" href="Graded.Erasure.Extraction.Non-terminating.html#9887" class="Bound">ω+ω-ok</a> <a id="9894" href="Graded.Erasure.Extraction.Non-terminating.html#9894" class="Bound">⊢Γ</a> <a id="9897" class="Symbol">=</a>
    <a id="9903" href="Definition.Typed.Consequences.DerivedRules.Pi.html#1407" class="Function">lamⱼ′</a> <a id="9909" href="Graded.Erasure.Extraction.Non-terminating.html#9877" class="Bound">𝟘-ok</a> <a id="9914" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="9920" href="Graded.Erasure.Extraction.Non-terminating.html#6483" class="Function">⊢λx∙xx</a> <a id="9927" href="Graded.Erasure.Extraction.Non-terminating.html#9882" class="Bound">ω-ok</a> <a id="9932" href="Graded.Erasure.Extraction.Non-terminating.html#9887" class="Bound">ω+ω-ok</a> <a id="9939" href="Graded.Erasure.Extraction.Non-terminating.html#9894" class="Bound">⊢Γ</a> <a id="9942" href="Definition.Typed.html#2438" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="9949" href="Graded.Erasure.Extraction.Non-terminating.html#3980" class="Function">⊢cast</a> <a id="9955" class="Symbol">(</a><a id="9956" href="Definition.Typed.Properties.html#21442" class="Function">var₀</a> <a id="9961" class="Symbol">(</a><a id="9962" href="Definition.Typed.html#1406" class="InductiveConstructor">Emptyⱼ</a> <a id="9969" href="Graded.Erasure.Extraction.Non-terminating.html#9894" class="Bound">⊢Γ</a><a id="9971" class="Symbol">))</a> <a id="9974" class="Symbol">(</a><a id="9975" href="Definition.Typed.html#1855" class="InductiveConstructor">ΠΣⱼ</a> <a id="9979" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="9989" href="Graded.Erasure.Extraction.Non-terminating.html#2978" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="10001" href="Graded.Erasure.Extraction.Non-terminating.html#9887" class="Bound">ω+ω-ok</a><a id="10007" class="Symbol">)</a>
      <a id="10015" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="10025" class="Symbol">(</a><a id="10026" href="Graded.Erasure.Extraction.Non-terminating.html#6483" class="Function">⊢λx∙xx</a> <a id="10033" href="Graded.Erasure.Extraction.Non-terminating.html#9882" class="Bound">ω-ok</a> <a id="10038" href="Graded.Erasure.Extraction.Non-terminating.html#9887" class="Bound">ω+ω-ok</a> <a id="10045" href="Graded.Erasure.Extraction.Non-terminating.html#9894" class="Bound">⊢Γ</a><a id="10047" class="Symbol">)</a>
    <a id="10053" class="Keyword">where</a>
    <a id="10063" class="Keyword">open</a> <a id="10068" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="10075" href="Graded.Erasure.Extraction.Non-terminating.html#9894" class="Bound">⊢Γ</a>

<a id="10079" class="Keyword">opaque</a>
  <a id="10088" class="Keyword">unfolding</a> <a id="10098" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a>

  <a id="10118" class="Comment">-- A usage rule for extracts-to-loop.</a>

  <a id="▸extracts-to-loop"></a><a id="10159" href="Graded.Erasure.Extraction.Non-terminating.html#10159" class="Function">▸extracts-to-loop</a> <a id="10177" class="Symbol">:</a>
    <a id="10183" class="Symbol">⦃</a> <a id="10185" href="Graded.Erasure.Extraction.Non-terminating.html#10185" class="Bound">𝟘-well-behaved</a> <a id="10200" class="Symbol">:</a> <a id="10202" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="10224" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="10226" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="10245" class="Symbol">⦄</a> <a id="10247" class="Symbol">→</a>
    <a id="10253" href="Graded.Usage.Restrictions.html#1638" class="Field">Emptyrec-allowed</a> <a id="10270" class="InductiveConstructor">𝟙ᵐ</a> <a id="10273" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="10275" class="Symbol">→</a>
    <a id="10281" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="10283" href="Graded.Modality.html#1365" class="Function Operator">≤</a> <a id="10285" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="10287" class="Symbol">→</a>
    <a id="10293" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10296" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="10299" class="InductiveConstructor">𝟙ᵐ</a> <a id="10302" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="10304" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a> <a id="10321" class="Symbol">{</a><a id="10322" class="Argument">n</a> <a id="10324" class="Symbol">=</a> <a id="10326" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="10327" class="Symbol">}</a> <a id="10329" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a>
  <a id="10333" href="Graded.Erasure.Extraction.Non-terminating.html#10159" class="Function">▸extracts-to-loop</a> <a id="10351" class="Symbol">{</a><a id="10352" href="Graded.Erasure.Extraction.Non-terminating.html#10352" class="Bound">p</a><a id="10353" class="Symbol">}</a> <a id="10355" class="Symbol">{</a><a id="10356" href="Graded.Erasure.Extraction.Non-terminating.html#10356" class="Bound">n</a><a id="10357" class="Symbol">}</a> <a id="10359" href="Graded.Erasure.Extraction.Non-terminating.html#10359" class="Bound">ok</a> <a id="10362" href="Graded.Erasure.Extraction.Non-terminating.html#10362" class="Bound">p≤𝟘</a> <a id="10366" class="Symbol">=</a> <a id="10368" href="Graded.Usage.html#8532" class="InductiveConstructor">lamₘ</a> <a id="10373" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10375" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a>
    <a id="10383" class="Symbol">(</a><a id="10384" href="Graded.Erasure.Extraction.Non-terminating.html#11023" class="Function">▸λx∙xx′</a> <a id="10392" href="Graded.Usage.html#8601" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="10400" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a>
       <a id="10411" class="Symbol">(</a><a id="10412" href="Graded.Usage.Properties.html#2553" class="Function">▸-cong</a> <a id="10419" class="Symbol">(</a><a id="10420" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="10427" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10429" href="Graded.Mode.html#19762" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="10438" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10440" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="10444" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="10447" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="10453" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="10456" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1135" class="Function">+-positive</a><a id="10466" class="Symbol">)</a> <a id="10468" href="Function.Base.html#1974" class="Function Operator">$</a>
        <a id="10478" href="Graded.Erasure.Extraction.Non-terminating.html#4230" class="Function">▸cast</a> <a id="10484" href="Graded.Erasure.Extraction.Non-terminating.html#10359" class="Bound">ok</a> <a id="10487" href="Graded.Usage.html#8487" class="InductiveConstructor">var</a> <a id="10491" class="Symbol">(</a><a id="10492" href="Graded.Erasure.Extraction.Non-terminating.html#3204" class="Function">▸Πℕℕ</a> <a id="10497" href="Graded.Erasure.Extraction.Non-terminating.html#10362" class="Bound">p≤𝟘</a><a id="10500" class="Symbol">)</a> <a id="10502" href="Graded.Usage.html#8279" class="InductiveConstructor">ℕₘ</a> <a id="10505" href="Graded.Erasure.Extraction.Non-terminating.html#11023" class="Function">▸λx∙xx′</a><a id="10512" class="Symbol">)</a>
     <a id="10519" class="Symbol">(</a><a id="10520" class="Keyword">let</a> <a id="10524" class="Keyword">open</a> <a id="10529" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a> <a id="10542" class="Keyword">in</a> <a id="10545" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
        <a id="10559" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>                     <a id="10582" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10586" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="10595" class="Symbol">_</a> <a id="10597" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
        <a id="10607" href="Graded.Modality.html#930" class="Function">ω</a> <a id="10609" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="10612" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>                <a id="10630" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10634" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="10643" href="Function.Base.html#1974" class="Function Operator">$</a>
                                   <a id="10680" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="10689" class="Symbol">(</a><a id="10690" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="10703" class="Symbol">_)</a> <a id="10706" href="Function.Base.html#1974" class="Function Operator">$</a>
                                   <a id="10743" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="10756" class="Symbol">_</a> <a id="10758" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
        <a id="10768" href="Graded.Modality.html#930" class="Function">ω</a> <a id="10770" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="10773" class="Symbol">(</a><a id="10774" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10777" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="10780" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10783" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="10786" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a><a id="10788" class="Symbol">)</a>  <a id="10791" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="10792" class="Symbol">))</a>
    <a id="10799" class="Symbol">(</a><a id="10800" class="Keyword">let</a> <a id="10804" class="Keyword">open</a> <a id="10809" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a> <a id="10822" class="Keyword">in</a> <a id="10825" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="10838" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10841" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="10843" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="10845" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="10847" href="Graded.Modality.html#926" class="Function">𝟘</a>           <a id="10859" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="10862" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="10870" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="10872" href="Graded.Modality.html#3432" class="Function">·-zeroʳ</a> <a id="10880" class="Symbol">_</a> <a id="10882" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
       <a id="10891" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>                   <a id="10912" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10916" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="10925" class="Symbol">_</a> <a id="10927" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="10936" class="Symbol">(</a><a id="10937" href="Graded.Modality.html#930" class="Function">ω</a> <a id="10939" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="10941" href="Graded.Modality.html#930" class="Function">ω</a><a id="10942" class="Symbol">)</a> <a id="10944" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="10947" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>        <a id="10957" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10961" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="10974" class="Symbol">_</a> <a id="10976" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="10985" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10988" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="10991" class="Symbol">(</a><a id="10992" href="Graded.Modality.html#930" class="Function">ω</a> <a id="10994" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="10996" href="Graded.Modality.html#930" class="Function">ω</a><a id="10997" class="Symbol">)</a> <a id="10999" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="11002" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="11006" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="11007" class="Symbol">)</a>
    <a id="11013" class="Keyword">where</a>
    <a id="11023" href="Graded.Erasure.Extraction.Non-terminating.html#11023" class="Function">▸λx∙xx′</a> <a id="11031" class="Symbol">:</a> <a id="11033" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="11036" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="11039" href="Graded.Mode.html#1117" class="InductiveConstructor">𝟙ᵐ</a> <a id="11042" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="11044" href="Graded.Erasure.Extraction.Non-terminating.html#5492" class="Function">λx∙xx</a> <a id="11050" class="Symbol">{</a><a id="11051" class="Argument">n</a> <a id="11053" class="Symbol">=</a> <a id="11055" href="Graded.Erasure.Extraction.Non-terminating.html#10356" class="Bound">n</a><a id="11056" class="Symbol">}</a> <a id="11058" href="Graded.Erasure.Extraction.Non-terminating.html#10352" class="Bound">p</a>
    <a id="11064" href="Graded.Erasure.Extraction.Non-terminating.html#11023" class="Function">▸λx∙xx′</a> <a id="11072" class="Symbol">=</a> <a id="11074" href="Graded.Erasure.Extraction.Non-terminating.html#6844" class="Function">▸λx∙xx</a> <a id="11081" href="Graded.Erasure.Extraction.Non-terminating.html#10359" class="Bound">ok</a> <a id="11084" href="Graded.Erasure.Extraction.Non-terminating.html#10362" class="Bound">p≤𝟘</a>

<a id="11089" class="Comment">------------------------------------------------------------------------</a>
<a id="11162" class="Comment">-- The term former loops</a>

<a id="11188" class="Keyword">opaque</a>

  <a id="11198" class="Comment">-- A term for which the extraction does not terminate if erasable</a>
  <a id="11266" class="Comment">-- arguments are removed entirely and strict applications are used</a>
  <a id="11335" class="Comment">-- (if ω is non-zero).</a>

  <a id="loops"></a><a id="11361" href="Graded.Erasure.Extraction.Non-terminating.html#11361" class="Function">loops</a> <a id="11367" class="Symbol">:</a> <a id="11369" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="11371" class="Symbol">→</a> <a id="11373" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="11378" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>
  <a id="11382" href="Graded.Erasure.Extraction.Non-terminating.html#11361" class="Function">loops</a> <a id="11388" href="Graded.Erasure.Extraction.Non-terminating.html#11388" class="Bound">p</a> <a id="11390" class="Symbol">=</a> <a id="11392" href="Definition.Untyped.html#1349" class="InductiveConstructor">lam</a> <a id="11396" href="Graded.Modality.html#930" class="Function">ω</a> <a id="11398" href="Definition.Untyped.html#1681" class="InductiveConstructor">zero</a> <a id="11403" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="11406" href="Graded.Modality.html#930" class="Function">ω</a> <a id="11408" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a> <a id="11410" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a> <a id="11427" href="Graded.Erasure.Extraction.Non-terminating.html#11388" class="Bound">p</a>

<a id="11430" class="Keyword">opaque</a>
  <a id="11439" class="Keyword">unfolding</a> <a id="11449" href="Graded.Erasure.Extraction.Non-terminating.html#11361" class="Function">loops</a>

  <a id="11458" class="Comment">-- An extraction lemma for loops.</a>

  <a id="erase-loops"></a><a id="11495" href="Graded.Erasure.Extraction.Non-terminating.html#11495" class="Function">erase-loops</a> <a id="11507" class="Symbol">:</a>
    <a id="11513" class="Symbol">⦃</a> <a id="11515" href="Graded.Erasure.Extraction.Non-terminating.html#11515" class="Bound">𝟘-well-behaved</a> <a id="11530" class="Symbol">:</a> <a id="11532" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="11554" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="11556" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="11575" class="Symbol">⦄</a> <a id="11577" class="Symbol">→</a>
    <a id="11583" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11590" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11595" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="11597" class="Symbol">(</a><a id="11598" href="Graded.Erasure.Extraction.Non-terminating.html#11361" class="Function">loops</a> <a id="11604" class="Symbol">{</a><a id="11605" class="Argument">n</a> <a id="11607" class="Symbol">=</a> <a id="11609" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="11610" class="Symbol">}</a> <a id="11612" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="11613" class="Symbol">)</a> <a id="11615" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="11621" class="InductiveConstructor">T.lam</a> <a id="11627" class="InductiveConstructor">T.zero</a> <a id="11634" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11639" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="11641" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="11643" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="11648" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a>
  <a id="11652" href="Graded.Erasure.Extraction.Non-terminating.html#11495" class="Function">erase-loops</a> <a id="11664" class="Symbol">{</a><a id="11665" href="Graded.Erasure.Extraction.Non-terminating.html#11665" class="Bound">s</a><a id="11666" class="Symbol">}</a> <a id="11668" class="Symbol">{</a><a id="11669" href="Graded.Erasure.Extraction.Non-terminating.html#11669" class="Bound">p</a><a id="11670" class="Symbol">}</a> <a id="11672" class="Symbol">=</a>
    <a id="11678" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11685" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11690" href="Graded.Erasure.Extraction.Non-terminating.html#11665" class="Bound">s</a> <a id="11692" class="Symbol">(</a><a id="11693" href="Definition.Untyped.html#1349" class="InductiveConstructor">lam</a> <a id="11697" href="Graded.Modality.html#930" class="Function">ω</a> <a id="11699" href="Definition.Untyped.html#1681" class="InductiveConstructor">zero</a> <a id="11704" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="11707" href="Graded.Modality.html#930" class="Function">ω</a> <a id="11709" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a> <a id="11711" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a> <a id="11728" href="Graded.Erasure.Extraction.Non-terminating.html#11669" class="Bound">p</a><a id="11729" class="Symbol">)</a>  <a id="11732" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="11735" href="Graded.Erasure.Extraction.Properties.html#4159" class="Function">∘-≢𝟘</a> <a id="11740" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="11744" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="11751" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11758" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11763" href="Graded.Erasure.Extraction.Non-terminating.html#11665" class="Bound">s</a> <a id="11765" class="Symbol">(</a><a id="11766" href="Definition.Untyped.html#1349" class="InductiveConstructor">lam</a> <a id="11770" href="Graded.Modality.html#930" class="Function">ω</a> <a id="11772" href="Definition.Untyped.html#1681" class="InductiveConstructor">zero</a><a id="11776" class="Symbol">)</a> <a id="11778" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11783" href="Graded.Erasure.Extraction.Non-terminating.html#11665" class="Bound">s</a> <a id="11785" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
    <a id="11791" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11798" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11803" href="Graded.Erasure.Extraction.Non-terminating.html#11665" class="Bound">s</a> <a id="11805" class="Symbol">(</a><a id="11806" href="Graded.Erasure.Extraction.Non-terminating.html#8100" class="Function">extracts-to-loop</a> <a id="11823" href="Graded.Erasure.Extraction.Non-terminating.html#11669" class="Bound">p</a><a id="11824" class="Symbol">)</a>                    <a id="11845" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="11848" href="Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">PE.cong₂</a> <a id="11857" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T._∘⟨</a> <a id="11863" class="Symbol">_</a> <a id="11865" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩_</a> <a id="11868" class="Symbol">(</a><a id="11869" href="Graded.Erasure.Extraction.Properties.html#4481" class="Function">lam-≢𝟘</a> <a id="11876" class="Symbol">_</a> <a id="11878" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a><a id="11881" class="Symbol">)</a>
                                                             <a id="11944" href="Graded.Erasure.Extraction.Non-terminating.html#8331" class="Function">erase-extracts-to-loop</a> <a id="11967" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="11973" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="11979" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="11986" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11991" href="Graded.Erasure.Extraction.Non-terminating.html#11665" class="Bound">s</a> <a id="11993" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="11995" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12000" href="Graded.Erasure.Extraction.Non-terminating.html#11665" class="Bound">s</a>                          <a id="12027" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="12033" class="Keyword">where</a>
    <a id="12043" class="Keyword">open</a> <a id="12048" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="12087" class="Keyword">opaque</a>

  <a id="12097" class="Comment">-- If ω is non-zero, erasable arguments are removed entirely, and</a>
  <a id="12165" class="Comment">-- strict applications are used, then the extraction of loops p does</a>
  <a id="12236" class="Comment">-- not reduce to a value.</a>

  <a id="loops-does-not-reduce-to-a-value"></a><a id="12265" href="Graded.Erasure.Extraction.Non-terminating.html#12265" class="Function">loops-does-not-reduce-to-a-value</a> <a id="12298" class="Symbol">:</a>
    <a id="12304" class="Symbol">⦃</a> <a id="12306" href="Graded.Erasure.Extraction.Non-terminating.html#12306" class="Bound">𝟘-well-behaved</a> <a id="12321" class="Symbol">:</a> <a id="12323" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="12345" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="12347" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="12366" class="Symbol">⦄</a> <a id="12368" class="Symbol">→</a>
    <a id="12374" href="Graded.Erasure.Target.html#6123" class="Datatype">T.Value</a> <a id="12382" href="Graded.Erasure.Extraction.Non-terminating.html#2727" class="Generalizable">v</a> <a id="12384" class="Symbol">→</a>
    <a id="12390" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="12392" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="12399" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="12404" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12411" class="Symbol">(</a><a id="12412" href="Graded.Erasure.Extraction.Non-terminating.html#11361" class="Function">loops</a> <a id="12418" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="12419" class="Symbol">)</a> <a id="12421" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12426" href="Graded.Erasure.Extraction.Non-terminating.html#2727" class="Generalizable">v</a>
  <a id="12430" href="Graded.Erasure.Extraction.Non-terminating.html#12265" class="Function">loops-does-not-reduce-to-a-value</a> <a id="12463" class="Symbol">{</a><a id="12464" href="Graded.Erasure.Extraction.Non-terminating.html#12464" class="Bound">v</a><a id="12465" class="Symbol">}</a> <a id="12467" class="Symbol">{</a><a id="12468" href="Graded.Erasure.Extraction.Non-terminating.html#12468" class="Bound">p</a><a id="12469" class="Symbol">}</a> <a id="12471" href="Graded.Erasure.Extraction.Non-terminating.html#12471" class="Bound">v-value</a> <a id="12479" class="Symbol">=</a>
    <a id="12485" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="12492" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="12497" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12504" class="Symbol">(</a><a id="12505" href="Graded.Erasure.Extraction.Non-terminating.html#11361" class="Function">loops</a> <a id="12511" href="Graded.Erasure.Extraction.Non-terminating.html#12468" class="Bound">p</a><a id="12512" class="Symbol">)</a> <a id="12514" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12519" href="Graded.Erasure.Extraction.Non-terminating.html#12464" class="Bound">v</a>            <a id="12532" href="Tools.Function.html#1018" class="Function">≡⟨</a> <a id="12535" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="12543" class="Symbol">(</a><a id="12544" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T._⇒*</a> <a id="12550" class="Symbol">_)</a> <a id="12553" href="Graded.Erasure.Extraction.Non-terminating.html#11495" class="Function">erase-loops</a> <a id="12565" href="Tools.Function.html#1018" class="Function">⟩→</a>
    <a id="12572" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="12578" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="12585" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="12590" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12597" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="12599" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12604" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12611" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12616" href="Graded.Erasure.Extraction.Non-terminating.html#12464" class="Bound">v</a>  <a id="12619" href="Tools.Function.html#904" class="Function">→⟨</a> <a id="12622" href="Graded.Erasure.Extraction.Non-terminating.html#12698" class="Function">helper</a> <a id="12629" href="Tools.Function.html#904" class="Function">⟩</a>
    <a id="12635" href="Data.Empty.html#914" class="Function">⊥</a>                                              <a id="12682" href="Tools.Function.html#1132" class="Function Operator">□</a>
    <a id="12688" class="Keyword">where</a>
    <a id="12698" href="Graded.Erasure.Extraction.Non-terminating.html#12698" class="Function">helper</a> <a id="12705" class="Symbol">:</a> <a id="12707" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="12709" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="12715" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="12722" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="12727" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12734" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="12736" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12741" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="12743" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12748" href="Graded.Erasure.Extraction.Non-terminating.html#12464" class="Bound">v</a>
    <a id="12754" href="Graded.Erasure.Extraction.Non-terminating.html#12698" class="Function">helper</a> <a id="12761" href="Graded.Erasure.Target.html#7893" class="InductiveConstructor">T.refl</a> <a id="12768" class="Symbol">=</a>
      <a id="12776" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="12781" href="Graded.Erasure.Extraction.Non-terminating.html#12471" class="Bound">v-value</a> <a id="12789" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="12792" class="Symbol">λ</a> <a id="12794" class="Symbol">()</a>
    <a id="12801" href="Graded.Erasure.Extraction.Non-terminating.html#12698" class="Function">helper</a> <a id="12808" class="Symbol">(</a><a id="12809" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12817" class="Symbol">(</a><a id="12818" href="Graded.Erasure.Target.html#7049" class="InductiveConstructor">T.app-subst</a> <a id="12830" class="Symbol">())</a>     <a id="12838" class="Symbol">_)</a>
    <a id="12845" href="Graded.Erasure.Extraction.Non-terminating.html#12698" class="Function">helper</a> <a id="12852" class="Symbol">(</a><a id="12853" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12861" class="Symbol">(</a><a id="12862" href="Graded.Erasure.Target.html#7197" class="InductiveConstructor">T.β-red</a> <a id="12870" href="Graded.Erasure.Extraction.Non-terminating.html#12870" class="Bound">loop-value</a><a id="12880" class="Symbol">)</a> <a id="12882" class="Symbol">_)</a> <a id="12885" class="Symbol">=</a>
      <a id="12893" href="Graded.Erasure.Target.Non-terminating.html#1375" class="Function">¬loop⇒*</a> <a id="12901" href="Graded.Erasure.Extraction.Non-terminating.html#12870" class="Bound">loop-value</a> <a id="12912" href="Graded.Erasure.Target.html#7893" class="InductiveConstructor">T.refl</a>
    <a id="12923" href="Graded.Erasure.Extraction.Non-terminating.html#12698" class="Function">helper</a> <a id="12930" class="Symbol">(</a><a id="12931" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12939" class="Symbol">(</a><a id="12940" href="Graded.Erasure.Target.html#7103" class="InductiveConstructor">T.app-subst-arg</a> <a id="12956" class="Symbol">_</a> <a id="12958" href="Graded.Erasure.Extraction.Non-terminating.html#12958" class="Bound">loop⇒</a><a id="12963" class="Symbol">)</a> <a id="12965" href="Graded.Erasure.Extraction.Non-terminating.html#12965" class="Bound">⇒*v</a><a id="12968" class="Symbol">)</a>
      <a id="12976" class="Keyword">rewrite</a> <a id="12984" href="Graded.Erasure.Target.Properties.Reduction.html#2101" class="Function">redDet</a> <a id="12991" class="Symbol">_</a> <a id="12993" href="Graded.Erasure.Extraction.Non-terminating.html#12958" class="Bound">loop⇒</a> <a id="12999" href="Graded.Erasure.Target.Non-terminating.html#941" class="Function">loop⇒loop</a> <a id="13009" class="Symbol">=</a>
      <a id="13017" href="Graded.Erasure.Extraction.Non-terminating.html#12698" class="Function">helper</a> <a id="13024" href="Graded.Erasure.Extraction.Non-terminating.html#12965" class="Bound">⇒*v</a>

<a id="13029" class="Keyword">opaque</a>
  <a id="13038" class="Keyword">unfolding</a> <a id="13048" href="Graded.Erasure.Extraction.Non-terminating.html#11361" class="Function">loops</a>

  <a id="13057" class="Comment">-- A typing rule for loops.</a>

  <a id="⊢loops"></a><a id="13088" href="Graded.Erasure.Extraction.Non-terminating.html#13088" class="Function">⊢loops</a> <a id="13095" class="Symbol">:</a>
    <a id="13101" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="13111" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="13113" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="13115" class="Symbol">→</a>
    <a id="13121" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="13131" href="Graded.Modality.html#930" class="Function">ω</a> <a id="13133" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="13135" class="Symbol">→</a>
    <a id="13141" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="13151" class="Symbol">(</a><a id="13152" href="Graded.Modality.html#930" class="Function">ω</a> <a id="13154" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="13156" href="Graded.Modality.html#930" class="Function">ω</a><a id="13157" class="Symbol">)</a> <a id="13159" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="13161" class="Symbol">→</a>
    <a id="13167" href="Definition.Typed.html#1184" class="Datatype Operator">⊢</a> <a id="13169" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="13171" class="Symbol">→</a>
    <a id="13177" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="13179" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="13181" href="Graded.Erasure.Extraction.Non-terminating.html#11361" class="Function">loops</a> <a id="13187" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="13189" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="13191" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a>
  <a id="13195" href="Graded.Erasure.Extraction.Non-terminating.html#13088" class="Function">⊢loops</a> <a id="13202" href="Graded.Erasure.Extraction.Non-terminating.html#13202" class="Bound">𝟘-ok</a> <a id="13207" href="Graded.Erasure.Extraction.Non-terminating.html#13207" class="Bound">ω-ok</a> <a id="13212" href="Graded.Erasure.Extraction.Non-terminating.html#13212" class="Bound">ω+ω-ok</a> <a id="13219" href="Graded.Erasure.Extraction.Non-terminating.html#13219" class="Bound">⊢Γ</a> <a id="13222" class="Symbol">=</a>
    <a id="13228" href="Definition.Typed.Consequences.DerivedRules.Pi.html#1407" class="Function">lamⱼ′</a> <a id="13234" href="Graded.Erasure.Extraction.Non-terminating.html#13207" class="Bound">ω-ok</a> <a id="13239" class="Symbol">(</a><a id="13240" href="Definition.Typed.html#3280" class="InductiveConstructor">zeroⱼ</a> <a id="13246" class="Symbol">(</a><a id="13247" href="Graded.Erasure.Extraction.Non-terminating.html#13219" class="Bound">⊢Γ</a> <a id="13250" href="Definition.Typed.html#1232" class="InductiveConstructor Operator">∙</a> <a id="13252" href="Definition.Typed.Consequences.DerivedRules.Pi-Sigma.html#861" class="Function">ΠΣⱼ′</a> <a id="13257" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a> <a id="13265" href="Graded.Erasure.Extraction.Non-terminating.html#13202" class="Bound">𝟘-ok</a><a id="13269" class="Symbol">))</a> <a id="13272" href="Definition.Typed.html#2438" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="13279" href="Graded.Erasure.Extraction.Non-terminating.html#9712" class="Function">⊢extracts-to-loop</a> <a id="13297" href="Graded.Erasure.Extraction.Non-terminating.html#13202" class="Bound">𝟘-ok</a> <a id="13302" href="Graded.Erasure.Extraction.Non-terminating.html#13207" class="Bound">ω-ok</a> <a id="13307" href="Graded.Erasure.Extraction.Non-terminating.html#13212" class="Bound">ω+ω-ok</a> <a id="13314" href="Graded.Erasure.Extraction.Non-terminating.html#13219" class="Bound">⊢Γ</a>
    <a id="13321" class="Keyword">where</a>
    <a id="13331" class="Keyword">open</a> <a id="13336" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="13343" href="Graded.Erasure.Extraction.Non-terminating.html#13219" class="Bound">⊢Γ</a>

<a id="13347" class="Keyword">opaque</a>
  <a id="13356" class="Keyword">unfolding</a> <a id="13366" href="Graded.Erasure.Extraction.Non-terminating.html#11361" class="Function">loops</a>

  <a id="13375" class="Comment">-- A usage rule for loops.</a>

  <a id="▸loops"></a><a id="13405" href="Graded.Erasure.Extraction.Non-terminating.html#13405" class="Function">▸loops</a> <a id="13412" class="Symbol">:</a>
    <a id="13418" class="Symbol">⦃</a> <a id="13420" href="Graded.Erasure.Extraction.Non-terminating.html#13420" class="Bound">𝟘-well-behaved</a> <a id="13435" class="Symbol">:</a> <a id="13437" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="13459" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="13461" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="13480" class="Symbol">⦄</a> <a id="13482" class="Symbol">→</a>
    <a id="13488" href="Graded.Usage.Restrictions.html#1638" class="Field">Emptyrec-allowed</a> <a id="13505" class="InductiveConstructor">𝟙ᵐ</a> <a id="13508" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="13510" class="Symbol">→</a>
    <a id="13516" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="13518" href="Graded.Modality.html#1365" class="Function Operator">≤</a> <a id="13520" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="13522" class="Symbol">→</a>
    <a id="13528" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13531" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="13534" class="InductiveConstructor">𝟙ᵐ</a> <a id="13537" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="13539" href="Graded.Erasure.Extraction.Non-terminating.html#11361" class="Function">loops</a> <a id="13545" class="Symbol">{</a><a id="13546" class="Argument">n</a> <a id="13548" class="Symbol">=</a> <a id="13550" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="13551" class="Symbol">}</a> <a id="13553" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a>
  <a id="13557" href="Graded.Erasure.Extraction.Non-terminating.html#13405" class="Function">▸loops</a> <a id="13564" href="Graded.Erasure.Extraction.Non-terminating.html#13564" class="Bound">ok</a> <a id="13567" href="Graded.Erasure.Extraction.Non-terminating.html#13567" class="Bound">p≤𝟘</a> <a id="13571" class="Symbol">=</a> <a id="13573" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a>
    <a id="13581" class="Symbol">(</a><a id="13582" href="Graded.Usage.html#8532" class="InductiveConstructor">lamₘ</a>
       <a id="13594" class="Symbol">(</a><a id="13595" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a> <a id="13599" href="Graded.Usage.html#9351" class="InductiveConstructor">zeroₘ</a> <a id="13605" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="13607" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
          <a id="13623" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13626" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="13628" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="13630" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="13632" href="Graded.Modality.html#930" class="Function">ω</a>  <a id="13635" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="13638" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="13646" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="13648" href="Graded.Modality.html#3173" class="Function">·-identityˡ</a> <a id="13660" class="Symbol">_</a> <a id="13662" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
          <a id="13674" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13677" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="13679" href="Graded.Modality.html#930" class="Function">ω</a>      <a id="13686" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="13689" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="13697" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="13699" href="Graded.Modality.Properties.Addition.html#3754" class="Function">ω≤𝟘</a> <a id="13703" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
          <a id="13715" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>          <a id="13727" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="13728" class="Symbol">)</a> <a id="13730" href="Graded.Usage.html#8601" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="13738" href="Graded.Usage.Properties.html#2553" class="Function">▸-cong</a> <a id="13745" class="Symbol">(</a><a id="13746" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="13753" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="13755" href="Graded.Mode.html#19762" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="13764" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a><a id="13767" class="Symbol">)</a>
       <a id="13776" class="Symbol">(</a><a id="13777" href="Graded.Erasure.Extraction.Non-terminating.html#10159" class="Function">▸extracts-to-loop</a> <a id="13795" href="Graded.Erasure.Extraction.Non-terminating.html#13564" class="Bound">ok</a> <a id="13798" href="Graded.Erasure.Extraction.Non-terminating.html#13567" class="Bound">p≤𝟘</a><a id="13801" class="Symbol">))</a>
    <a id="13808" class="Symbol">(</a><a id="13809" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="13822" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>             <a id="13837" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="13841" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="13850" class="Symbol">(</a><a id="13851" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="13864" class="Symbol">_)</a> <a id="13867" class="Symbol">(</a><a id="13868" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="13877" class="Symbol">_)</a> <a id="13880" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="13889" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13892" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="13895" href="Graded.Modality.html#930" class="Function">ω</a> <a id="13897" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="13900" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="13904" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="13905" class="Symbol">)</a>
    <a id="13911" class="Keyword">where</a>
    <a id="13921" class="Keyword">open</a> <a id="13926" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>
</pre></body></html>