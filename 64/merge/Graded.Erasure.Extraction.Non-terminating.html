<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Extraction.Non-terminating</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- If the extraction function uses strict applications and removes</a>
<a id="141" class="Comment">-- erasable arguments entirely, then it may be the case that</a>
<a id="202" class="Comment">-- well-typed and well-resourced terms extract to terms that do not</a>
<a id="270" class="Comment">-- terminate</a>
<a id="283" class="Comment">------------------------------------------------------------------------</a>

<a id="357" class="Comment">-- In &quot;A New Extraction for Coq&quot; Letouzey points out that uses of the</a>
<a id="427" class="Comment">-- eliminator for the empty type False can lead to problems similar to</a>
<a id="498" class="Comment">-- the one presented below if all logical arguments are removed</a>
<a id="562" class="Comment">-- entirely, given that the eliminator is replaced with code that</a>
<a id="628" class="Comment">-- throws an exception. However, the example discussed below does not</a>
<a id="698" class="Comment">-- rely on how emptyrec is extracted, but is more similar to one in</a>
<a id="766" class="Comment">-- Mishra-Linger&#39;s PhD thesis (see Figure 5.1).</a>
<a id="814" class="Comment">--</a>
<a id="817" class="Comment">-- The example looks roughly like this:</a>
<a id="857" class="Comment">--</a>
<a id="860" class="Comment">--   (λ^ω _. zero)</a>
<a id="879" class="Comment">--     (λ⁰ (bot : ⊥).</a>
<a id="901" class="Comment">--        (λ^ω+ω x. cast bot x x) (cast bot (λ^ω+ω x. cast bot x x)))</a>
<a id="971" class="Comment">--</a>
<a id="974" class="Comment">-- If erased arguments are removed entirely, then we end up with a</a>
<a id="1041" class="Comment">-- term like the following one:</a>
<a id="1073" class="Comment">--</a>
<a id="1076" class="Comment">--   (λ _. zero) ((λ x. x x) (λ x. x x))</a>
<a id="1117" class="Comment">--</a>
<a id="1120" class="Comment">-- If strict applications are used, then this program does not</a>
<a id="1183" class="Comment">-- terminate.</a>

<a id="1198" class="Keyword">open</a> <a id="1203" class="Keyword">import</a> <a id="1210" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="1226" class="Keyword">open</a> <a id="1231" class="Keyword">import</a> <a id="1238" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="1264" class="Keyword">open</a> <a id="1269" class="Keyword">import</a> <a id="1276" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="1307" class="Keyword">module</a> <a id="1314" href="Graded.Erasure.Extraction.Non-terminating.html" class="Module">Graded.Erasure.Extraction.Non-terminating</a>
  <a id="1358" class="Symbol">{</a><a id="1359" href="Graded.Erasure.Extraction.Non-terminating.html#1359" class="Bound">a</a><a id="1360" class="Symbol">}</a> <a id="1362" class="Symbol">{</a><a id="1363" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="1365" class="Symbol">:</a> <a id="1367" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1371" href="Graded.Erasure.Extraction.Non-terminating.html#1359" class="Bound">a</a><a id="1372" class="Symbol">}</a>
  <a id="1376" class="Symbol">{</a><a id="1377" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="1379" class="Symbol">:</a> <a id="1381" href="Graded.Modality.html#9576" class="Record">Modality</a> <a id="1390" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a><a id="1391" class="Symbol">}</a>
  <a id="1395" class="Symbol">(</a><a id="1396" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a> <a id="1399" class="Symbol">:</a> <a id="1401" href="Definition.Typed.Restrictions.html#808" class="Record">Type-restrictions</a> <a id="1419" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a><a id="1420" class="Symbol">)</a>
  <a id="1424" class="Symbol">(</a><a id="1425" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a> <a id="1428" class="Symbol">:</a> <a id="1430" href="Graded.Usage.Restrictions.html#812" class="Record">Usage-restrictions</a> <a id="1449" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a><a id="1450" class="Symbol">)</a>
  <a id="1454" class="Keyword">where</a>

<a id="1461" class="Keyword">open</a> <a id="1466" href="Graded.Modality.html#9576" class="Module">Modality</a> <a id="1475" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1477" class="Keyword">open</a> <a id="1482" href="Definition.Typed.Restrictions.html#808" class="Module">Type-restrictions</a> <a id="1500" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1503" class="Keyword">open</a> <a id="1508" href="Graded.Usage.Restrictions.html#812" class="Module">Usage-restrictions</a> <a id="1527" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>

<a id="1531" class="Keyword">open</a> <a id="1536" class="Keyword">import</a> <a id="1543" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="1560" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1563" class="Keyword">open</a> <a id="1568" class="Keyword">import</a> <a id="1575" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="1603" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1606" class="Keyword">open</a> <a id="1611" class="Keyword">import</a> <a id="1618" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="1637" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a>
<a id="1639" class="Keyword">open</a> <a id="1644" class="Keyword">import</a> <a id="1651" href="Definition.Untyped.Identity.html" class="Module">Definition.Untyped.Identity</a> <a id="1679" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>

<a id="1682" class="Keyword">open</a> <a id="1687" class="Keyword">import</a> <a id="1694" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1709" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1711" class="Keyword">open</a> <a id="1716" class="Keyword">import</a> <a id="1723" href="Graded.Context.Properties.html" class="Module">Graded.Context.Properties</a> <a id="1749" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1751" class="Keyword">open</a> <a id="1756" class="Keyword">import</a> <a id="1763" href="Graded.Derived.Identity.html" class="Module">Graded.Derived.Identity</a> <a id="1787" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>
<a id="1790" class="Keyword">open</a> <a id="1795" class="Keyword">import</a> <a id="1802" href="Graded.Erasure.Extraction.html" class="Module">Graded.Erasure.Extraction</a> <a id="1828" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1830" class="Keyword">open</a> <a id="1835" class="Keyword">import</a> <a id="1842" href="Graded.Erasure.Extraction.Properties.html" class="Module">Graded.Erasure.Extraction.Properties</a> <a id="1879" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1881" class="Keyword">open</a> <a id="1886" class="Keyword">import</a> <a id="1893" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a> <a id="1915" class="Symbol">as</a> <a id="1918" class="Module">T</a> <a id="1920" class="Keyword">using</a> <a id="1926" class="Symbol">(</a><a id="1927" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="1937" class="Symbol">;</a> <a id="1939" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a><a id="1945" class="Symbol">)</a>
<a id="1947" class="Keyword">open</a> <a id="1952" class="Keyword">import</a> <a id="1959" href="Graded.Erasure.Target.Non-terminating.html" class="Module">Graded.Erasure.Target.Non-terminating</a>
<a id="1997" class="Keyword">open</a> <a id="2002" class="Keyword">import</a> <a id="2009" href="Graded.Erasure.Target.Properties.html" class="Module">Graded.Erasure.Target.Properties</a>
<a id="2042" class="Keyword">open</a> <a id="2047" class="Keyword">import</a> <a id="2054" href="Graded.Modality.Properties.html" class="Module">Graded.Modality.Properties</a> <a id="2081" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="2083" class="Keyword">open</a> <a id="2088" class="Keyword">import</a> <a id="2095" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="2107" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="2109" class="Keyword">open</a> <a id="2114" class="Keyword">import</a> <a id="2121" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="2134" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="2136" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>
<a id="2139" class="Keyword">open</a> <a id="2144" class="Keyword">import</a> <a id="2151" href="Graded.Usage.Properties.html" class="Module">Graded.Usage.Properties</a> <a id="2175" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="2177" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>

<a id="2181" class="Keyword">open</a> <a id="2186" class="Keyword">import</a> <a id="2193" href="Tools.Bool.html" class="Module">Tools.Bool</a> <a id="2204" class="Keyword">using</a> <a id="2210" class="Symbol">(</a><a id="2211" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="2215" class="Symbol">;</a> <a id="2217" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="2221" class="Symbol">)</a>
<a id="2223" class="Keyword">open</a> <a id="2228" class="Keyword">import</a> <a id="2235" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="2247" class="Keyword">open</a> <a id="2252" class="Keyword">import</a> <a id="2259" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="2269" class="Keyword">open</a> <a id="2274" class="Keyword">import</a> <a id="2281" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="2296" class="Keyword">open</a> <a id="2301" class="Keyword">import</a> <a id="2308" href="Tools.Nat.html" class="Module">Tools.Nat</a> <a id="2318" class="Keyword">using</a> <a id="2324" class="Symbol">(</a><a id="2325" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="2328" class="Symbol">;</a> <a id="2330" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a><a id="2332" class="Symbol">)</a>
<a id="2334" class="Keyword">open</a> <a id="2339" class="Keyword">import</a> <a id="2346" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="2360" class="Keyword">open</a> <a id="2365" class="Keyword">import</a> <a id="2372" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="2400" class="Symbol">as</a> <a id="2403" class="Module">PE</a> <a id="2406" class="Keyword">using</a> <a id="2412" class="Symbol">(</a><a id="2413" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="2416" class="Symbol">;</a> <a id="2418" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">_≢_</a><a id="2421" class="Symbol">)</a>
<a id="2423" class="Keyword">import</a> <a id="2430" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>
<a id="2468" class="Keyword">open</a> <a id="2473" class="Keyword">import</a> <a id="2480" href="Tools.Relation.html" class="Module">Tools.Relation</a>

<a id="2496" class="Keyword">private</a> <a id="2504" class="Keyword">variable</a>
  <a id="2515" href="Graded.Erasure.Extraction.Non-terminating.html#2515" class="Generalizable">b</a>           <a id="2527" class="Symbol">:</a> <a id="2529" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
  <a id="2536" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a>           <a id="2548" class="Symbol">:</a> <a id="2550" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="2556" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a>           <a id="2568" class="Symbol">:</a> <a id="2570" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="2574" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2579" class="Symbol">_</a>
  <a id="2583" href="Graded.Erasure.Extraction.Non-terminating.html#2583" class="Generalizable">A</a> <a id="2585" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">B</a> <a id="2587" href="Graded.Erasure.Extraction.Non-terminating.html#2587" class="Generalizable">t</a> <a id="2589" href="Graded.Erasure.Extraction.Non-terminating.html#2589" class="Generalizable">u</a>     <a id="2595" class="Symbol">:</a> <a id="2597" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2602" class="Symbol">_</a>
  <a id="2606" href="Graded.Erasure.Extraction.Non-terminating.html#2606" class="Generalizable">γ₁</a> <a id="2609" href="Graded.Erasure.Extraction.Non-terminating.html#2609" class="Generalizable">γ₂</a> <a id="2612" href="Graded.Erasure.Extraction.Non-terminating.html#2612" class="Generalizable">γ₃</a> <a id="2615" href="Graded.Erasure.Extraction.Non-terminating.html#2615" class="Generalizable">γ₄</a> <a id="2618" class="Symbol">:</a> <a id="2620" href="Graded.Context.html#729" class="Datatype">Conₘ</a> <a id="2625" class="Symbol">_</a>
  <a id="2629" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="2631" href="Graded.Erasure.Extraction.Non-terminating.html#2631" class="Generalizable">q</a>         <a id="2641" class="Symbol">:</a> <a id="2643" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a>
  <a id="2647" href="Graded.Erasure.Extraction.Non-terminating.html#2647" class="Generalizable">v</a>           <a id="2659" class="Symbol">:</a> <a id="2661" href="Graded.Erasure.Target.html#1227" class="Datatype">T.Term</a> <a id="2668" class="Symbol">_</a>
  <a id="2672" href="Graded.Erasure.Extraction.Non-terminating.html#2672" class="Generalizable">s</a>           <a id="2684" class="Symbol">:</a> <a id="2686" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a>

<a id="2698" class="Comment">-- Some lemmas used below.</a>

<a id="2726" class="Keyword">private</a> <a id="2734" class="Keyword">module</a> <a id="Lemmas"></a><a id="2741" href="Graded.Erasure.Extraction.Non-terminating.html#2741" class="Module">Lemmas</a> <a id="2748" class="Symbol">(</a><a id="2749" href="Graded.Erasure.Extraction.Non-terminating.html#2749" class="Bound">⊢Γ</a> <a id="2752" class="Symbol">:</a> <a id="2754" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="2756" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a><a id="2757" class="Symbol">)</a> <a id="2759" class="Keyword">where</a> <a id="2765" class="Keyword">opaque</a>

  <a id="Lemmas.Empty⊢ℕ∷U"></a><a id="2775" href="Graded.Erasure.Extraction.Non-terminating.html#2775" class="Function">Empty⊢ℕ∷U</a> <a id="2785" class="Symbol">:</a> <a id="2787" href="Graded.Erasure.Extraction.Non-terminating.html#2756" class="Bound">Γ</a> <a id="2789" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2791" href="Definition.Untyped.html#2034" class="InductiveConstructor">Empty</a> <a id="2797" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2799" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="2801" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2803" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="2805" class="Number">0</a>
  <a id="2809" href="Graded.Erasure.Extraction.Non-terminating.html#2775" class="Function">Empty⊢ℕ∷U</a> <a id="2819" class="Symbol">=</a> <a id="2821" href="Definition.Typed.html#1967" class="InductiveConstructor">ℕⱼ</a> <a id="2824" class="Symbol">(</a><a id="2825" href="Graded.Erasure.Extraction.Non-terminating.html#2749" class="Bound">⊢Γ</a> <a id="2828" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="2831" href="Definition.Typed.html#1362" class="InductiveConstructor">Emptyⱼ</a> <a id="2838" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a><a id="2839" class="Symbol">)</a>

  <a id="Lemmas.Empty⊢ℕ"></a><a id="2844" href="Graded.Erasure.Extraction.Non-terminating.html#2844" class="Function">Empty⊢ℕ</a> <a id="2852" class="Symbol">:</a> <a id="2854" href="Graded.Erasure.Extraction.Non-terminating.html#2756" class="Bound">Γ</a> <a id="2856" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2858" href="Definition.Untyped.html#2034" class="InductiveConstructor">Empty</a> <a id="2864" href="Definition.Typed.html#1262" class="Datatype Operator">⊢</a> <a id="2866" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
  <a id="2870" href="Graded.Erasure.Extraction.Non-terminating.html#2844" class="Function">Empty⊢ℕ</a> <a id="2878" class="Symbol">=</a> <a id="2880" href="Definition.Typed.html#1627" class="InductiveConstructor">univ</a> <a id="2885" href="Graded.Erasure.Extraction.Non-terminating.html#2775" class="Function">Empty⊢ℕ∷U</a>

  <a id="Lemmas.Empty∙ℕ⊢ℕ∷U"></a><a id="2898" href="Graded.Erasure.Extraction.Non-terminating.html#2898" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="2910" class="Symbol">:</a> <a id="2912" href="Graded.Erasure.Extraction.Non-terminating.html#2756" class="Bound">Γ</a> <a id="2914" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2916" href="Definition.Untyped.html#2034" class="InductiveConstructor">Empty</a> <a id="2922" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2924" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="2926" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2928" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="2930" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2932" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="2934" class="Number">0</a>
  <a id="2938" href="Graded.Erasure.Extraction.Non-terminating.html#2898" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="2950" class="Symbol">=</a> <a id="2952" href="Definition.Typed.html#1967" class="InductiveConstructor">ℕⱼ</a> <a id="2955" class="Symbol">(</a><a id="2956" href="Graded.Erasure.Extraction.Non-terminating.html#2749" class="Bound">⊢Γ</a> <a id="2959" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="2962" href="Definition.Typed.html#1362" class="InductiveConstructor">Emptyⱼ</a> <a id="2969" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a> <a id="2971" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="2974" href="Definition.Typed.html#1337" class="InductiveConstructor">ℕⱼ</a> <a id="2977" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a><a id="2978" class="Symbol">)</a>

  <a id="Lemmas.Empty∙ℕ∙ℕ⊢ℕ∷U"></a><a id="2983" href="Graded.Erasure.Extraction.Non-terminating.html#2983" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="2997" class="Symbol">:</a> <a id="2999" href="Graded.Erasure.Extraction.Non-terminating.html#2756" class="Bound">Γ</a> <a id="3001" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3003" href="Definition.Untyped.html#2034" class="InductiveConstructor">Empty</a> <a id="3009" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3011" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="3013" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3015" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="3017" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3019" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="3021" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3023" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="3025" class="Number">0</a>
  <a id="3029" href="Graded.Erasure.Extraction.Non-terminating.html#2983" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="3043" class="Symbol">=</a> <a id="3045" href="Definition.Typed.html#1967" class="InductiveConstructor">ℕⱼ</a> <a id="3048" class="Symbol">(</a><a id="3049" href="Graded.Erasure.Extraction.Non-terminating.html#2749" class="Bound">⊢Γ</a> <a id="3052" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="3055" href="Definition.Typed.html#1362" class="InductiveConstructor">Emptyⱼ</a> <a id="3062" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a> <a id="3064" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="3067" href="Definition.Typed.html#1337" class="InductiveConstructor">ℕⱼ</a> <a id="3070" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a> <a id="3072" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="3075" href="Definition.Typed.html#1337" class="InductiveConstructor">ℕⱼ</a> <a id="3078" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a><a id="3079" class="Symbol">)</a>

<a id="3082" class="Keyword">opaque</a>

  <a id="3092" class="Comment">-- Another lemma used below.</a>

  <a id="▸Πℕℕ"></a><a id="3124" href="Graded.Erasure.Extraction.Non-terminating.html#3124" class="Function">▸Πℕℕ</a> <a id="3129" class="Symbol">:</a> <a id="3131" href="Graded.Erasure.Extraction.Non-terminating.html#2631" class="Generalizable">q</a> <a id="3133" href="Graded.Modality.html#1384" class="Function Operator">≤</a> <a id="3135" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="3137" class="Symbol">→</a> <a id="3139" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="3142" class="Symbol">{</a><a id="3143" class="Argument">n</a> <a id="3145" class="Symbol">=</a> <a id="3147" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a><a id="3148" class="Symbol">}</a> <a id="3150" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="3153" class="InductiveConstructor">𝟙ᵐ</a> <a id="3156" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="3158" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="3160" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="3162" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="3164" href="Graded.Erasure.Extraction.Non-terminating.html#2631" class="Generalizable">q</a> <a id="3166" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="3168" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="3170" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="3172" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
  <a id="3176" href="Graded.Erasure.Extraction.Non-terminating.html#3124" class="Function">▸Πℕℕ</a> <a id="3181" class="Symbol">{</a><a id="3182" href="Graded.Erasure.Extraction.Non-terminating.html#3182" class="Bound">q</a><a id="3183" class="Symbol">}</a> <a id="3185" href="Graded.Erasure.Extraction.Non-terminating.html#3185" class="Bound">q≤𝟘</a> <a id="3189" class="Symbol">=</a> <a id="3191" href="Graded.Usage.html#16559" class="InductiveConstructor">sub</a>
    <a id="3199" class="Symbol">(</a><a id="3200" href="Graded.Usage.html#8749" class="InductiveConstructor">ΠΣₘ</a> <a id="3204" href="Graded.Usage.html#8659" class="InductiveConstructor">ℕₘ</a> <a id="3207" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3209" href="Graded.Usage.html#16559" class="InductiveConstructor">sub</a> <a id="3213" href="Graded.Usage.html#8659" class="InductiveConstructor">ℕₘ</a> <a id="3216" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3218" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
        <a id="3232" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="3235" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="3237" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="3239" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="3241" href="Graded.Erasure.Extraction.Non-terminating.html#3182" class="Bound">q</a>  <a id="3244" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="3247" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="3255" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="3257" href="Graded.Modality.html#3820" class="Function">·-identityˡ</a> <a id="3269" class="Symbol">_</a> <a id="3271" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
        <a id="3281" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="3284" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="3286" href="Graded.Erasure.Extraction.Non-terminating.html#3182" class="Bound">q</a>      <a id="3293" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="3296" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="3304" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="3306" href="Graded.Erasure.Extraction.Non-terminating.html#3185" class="Bound">q≤𝟘</a> <a id="3310" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
        <a id="3320" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>          <a id="3332" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="3333" class="Symbol">)</a>
    <a id="3339" class="Symbol">(</a><a id="3340" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="3353" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>        <a id="3363" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="3367" href="Graded.Context.Properties.Addition.html#903" class="Function">+ᶜ-identityʳ</a> <a id="3380" class="Symbol">_</a> <a id="3382" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="3391" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="3394" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="3397" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>  <a id="3401" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="3402" class="Symbol">)</a>
    <a id="3408" class="Keyword">where</a>
    <a id="3418" class="Keyword">open</a> <a id="3423" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="3437" class="Comment">------------------------------------------------------------------------</a>
<a id="3510" class="Comment">-- The term former cast</a>

<a id="3535" class="Keyword">opaque</a>

  <a id="3545" class="Comment">-- A cast lemma.</a>

  <a id="cast"></a><a id="3565" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="3570" class="Symbol">:</a> <a id="3572" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3577" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a> <a id="3579" class="Symbol">→</a> <a id="3581" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3586" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a> <a id="3588" class="Symbol">→</a> <a id="3590" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3595" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a> <a id="3597" class="Symbol">→</a> <a id="3599" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3604" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a> <a id="3606" class="Symbol">→</a> <a id="3608" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3613" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a>
  <a id="3617" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="3622" href="Graded.Erasure.Extraction.Non-terminating.html#3622" class="Bound">t</a> <a id="3624" href="Graded.Erasure.Extraction.Non-terminating.html#3624" class="Bound">A</a> <a id="3626" href="Graded.Erasure.Extraction.Non-terminating.html#3626" class="Bound">B</a> <a id="3628" href="Graded.Erasure.Extraction.Non-terminating.html#3628" class="Bound">u</a> <a id="3630" class="Symbol">=</a>
    <a id="3636" href="Definition.Untyped.Identity.html#872" class="Function">subst</a> <a id="3642" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="3644" class="Symbol">(</a><a id="3645" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="3647" class="Number">0</a><a id="3648" class="Symbol">)</a> <a id="3650" class="Symbol">(</a><a id="3651" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="3655" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="3657" class="Symbol">)</a> <a id="3659" href="Graded.Erasure.Extraction.Non-terminating.html#3624" class="Bound">A</a> <a id="3661" href="Graded.Erasure.Extraction.Non-terminating.html#3626" class="Bound">B</a> <a id="3663" class="Symbol">(</a><a id="3664" href="Definition.Untyped.html#2051" class="InductiveConstructor">emptyrec</a> <a id="3673" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="3675" class="Symbol">(</a><a id="3676" href="Definition.Untyped.html#2096" class="InductiveConstructor">Id</a> <a id="3679" class="Symbol">(</a><a id="3680" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="3682" class="Number">0</a><a id="3683" class="Symbol">)</a> <a id="3685" href="Graded.Erasure.Extraction.Non-terminating.html#3624" class="Bound">A</a> <a id="3687" href="Graded.Erasure.Extraction.Non-terminating.html#3626" class="Bound">B</a><a id="3688" class="Symbol">)</a> <a id="3690" href="Graded.Erasure.Extraction.Non-terminating.html#3622" class="Bound">t</a><a id="3691" class="Symbol">)</a> <a id="3693" href="Graded.Erasure.Extraction.Non-terminating.html#3628" class="Bound">u</a>

<a id="3696" class="Keyword">opaque</a>
  <a id="3705" class="Keyword">unfolding</a> <a id="3715" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="3720" href="Definition.Untyped.Identity.html#872" class="Function">subst</a>

  <a id="3729" class="Comment">-- An extraction lemma for cast.</a>

  <a id="erase-cast"></a><a id="3765" href="Graded.Erasure.Extraction.Non-terminating.html#3765" class="Function">erase-cast</a> <a id="3776" class="Symbol">:</a> <a id="3778" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="3785" href="Graded.Erasure.Extraction.Non-terminating.html#2515" class="Generalizable">b</a> <a id="3787" href="Graded.Erasure.Extraction.Non-terminating.html#2672" class="Generalizable">s</a> <a id="3789" class="Symbol">(</a><a id="3790" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="3795" href="Graded.Erasure.Extraction.Non-terminating.html#2587" class="Generalizable">t</a> <a id="3797" href="Graded.Erasure.Extraction.Non-terminating.html#2583" class="Generalizable">A</a> <a id="3799" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">B</a> <a id="3801" href="Graded.Erasure.Extraction.Non-terminating.html#2589" class="Generalizable">u</a><a id="3802" class="Symbol">)</a> <a id="3804" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3806" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="3813" href="Graded.Erasure.Extraction.Non-terminating.html#2515" class="Generalizable">b</a> <a id="3815" href="Graded.Erasure.Extraction.Non-terminating.html#2672" class="Generalizable">s</a> <a id="3817" href="Graded.Erasure.Extraction.Non-terminating.html#2589" class="Generalizable">u</a>
  <a id="3821" href="Graded.Erasure.Extraction.Non-terminating.html#3765" class="Function">erase-cast</a> <a id="3832" class="Symbol">=</a> <a id="3834" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a>

<a id="3843" class="Keyword">opaque</a>
  <a id="3852" class="Keyword">unfolding</a> <a id="3862" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a>

  <a id="3870" class="Comment">-- A typing rule for cast.</a>

  <a id="⊢cast"></a><a id="3900" href="Graded.Erasure.Extraction.Non-terminating.html#3900" class="Function">⊢cast</a> <a id="3906" class="Symbol">:</a>
    <a id="3912" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a> <a id="3914" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3916" href="Graded.Erasure.Extraction.Non-terminating.html#2587" class="Generalizable">t</a> <a id="3918" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3920" href="Definition.Untyped.html#2034" class="InductiveConstructor">Empty</a> <a id="3926" class="Symbol">→</a>
    <a id="3932" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a> <a id="3934" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3936" href="Graded.Erasure.Extraction.Non-terminating.html#2583" class="Generalizable">A</a> <a id="3938" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3940" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="3942" class="Number">0</a> <a id="3944" class="Symbol">→</a>
    <a id="3950" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a> <a id="3952" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3954" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">B</a> <a id="3956" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3958" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="3960" class="Number">0</a> <a id="3962" class="Symbol">→</a>
    <a id="3968" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a> <a id="3970" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3972" href="Graded.Erasure.Extraction.Non-terminating.html#2589" class="Generalizable">u</a> <a id="3974" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3976" href="Graded.Erasure.Extraction.Non-terminating.html#2583" class="Generalizable">A</a> <a id="3978" class="Symbol">→</a>
    <a id="3984" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a> <a id="3986" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3988" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="3993" href="Graded.Erasure.Extraction.Non-terminating.html#2587" class="Generalizable">t</a> <a id="3995" href="Graded.Erasure.Extraction.Non-terminating.html#2583" class="Generalizable">A</a> <a id="3997" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">B</a> <a id="3999" href="Graded.Erasure.Extraction.Non-terminating.html#2589" class="Generalizable">u</a> <a id="4001" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="4003" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">B</a>
  <a id="4007" href="Graded.Erasure.Extraction.Non-terminating.html#3900" class="Function">⊢cast</a> <a id="4013" href="Graded.Erasure.Extraction.Non-terminating.html#4013" class="Bound">⊢t</a> <a id="4016" href="Graded.Erasure.Extraction.Non-terminating.html#4016" class="Bound">⊢A</a> <a id="4019" href="Graded.Erasure.Extraction.Non-terminating.html#4019" class="Bound">⊢B</a> <a id="4022" class="Symbol">=</a>
    <a id="4028" href="Definition.Typed.Properties.Admissible.Identity.html#11895" class="Function">⊢subst</a> <a id="4035" class="Symbol">(</a><a id="4036" href="Definition.Typed.html#1627" class="InductiveConstructor">univ</a> <a id="4041" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4043" href="Definition.Typed.Properties.Admissible.Var.html#599" class="Function">var₀</a> <a id="4048" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4050" href="Definition.Typed.html#1310" class="InductiveConstructor">Uⱼ</a> <a id="4053" class="Symbol">(</a><a id="4054" href="Definition.Typed.Properties.Well-formed.html#10731" class="Function">wfTerm</a> <a id="4061" href="Graded.Erasure.Extraction.Non-terminating.html#4013" class="Bound">⊢t</a><a id="4063" class="Symbol">))</a> <a id="4066" class="Symbol">(</a><a id="4067" href="Definition.Typed.html#3463" class="InductiveConstructor">emptyrecⱼ</a> <a id="4077" class="Symbol">(</a><a id="4078" href="Definition.Typed.Properties.Admissible.Identity.Primitive.html#770" class="Function">Idⱼ′</a> <a id="4083" href="Graded.Erasure.Extraction.Non-terminating.html#4016" class="Bound">⊢A</a> <a id="4086" href="Graded.Erasure.Extraction.Non-terminating.html#4019" class="Bound">⊢B</a><a id="4088" class="Symbol">)</a> <a id="4090" href="Graded.Erasure.Extraction.Non-terminating.html#4013" class="Bound">⊢t</a><a id="4092" class="Symbol">)</a>

<a id="4095" class="Keyword">opaque</a>
  <a id="4104" class="Keyword">unfolding</a> <a id="4114" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a>

  <a id="4122" class="Comment">-- A usage rule for cast.</a>

  <a id="▸cast"></a><a id="4151" href="Graded.Erasure.Extraction.Non-terminating.html#4151" class="Function">▸cast</a> <a id="4157" class="Symbol">:</a>
    <a id="4163" href="Graded.Usage.Restrictions.html#1782" class="Field">Emptyrec-allowed</a> <a id="4180" class="InductiveConstructor">𝟙ᵐ</a> <a id="4183" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="4185" class="Symbol">→</a>
    <a id="4191" href="Graded.Erasure.Extraction.Non-terminating.html#2606" class="Generalizable">γ₁</a> <a id="4194" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="4197" href="Graded.Mode.html#3316" class="Function">𝟘ᵐ?</a> <a id="4201" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="4203" href="Graded.Erasure.Extraction.Non-terminating.html#2587" class="Generalizable">t</a> <a id="4205" class="Symbol">→</a>
    <a id="4211" href="Graded.Erasure.Extraction.Non-terminating.html#2609" class="Generalizable">γ₂</a> <a id="4214" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="4217" class="InductiveConstructor">𝟙ᵐ</a> <a id="4220" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="4222" href="Graded.Erasure.Extraction.Non-terminating.html#2583" class="Generalizable">A</a> <a id="4224" class="Symbol">→</a>
    <a id="4230" href="Graded.Erasure.Extraction.Non-terminating.html#2612" class="Generalizable">γ₃</a> <a id="4233" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="4236" class="InductiveConstructor">𝟙ᵐ</a> <a id="4239" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="4241" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">B</a> <a id="4243" class="Symbol">→</a>
    <a id="4249" href="Graded.Erasure.Extraction.Non-terminating.html#2615" class="Generalizable">γ₄</a> <a id="4252" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="4255" class="InductiveConstructor">𝟙ᵐ</a> <a id="4258" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="4260" href="Graded.Erasure.Extraction.Non-terminating.html#2589" class="Generalizable">u</a> <a id="4262" class="Symbol">→</a>
    <a id="4268" href="Graded.Modality.html#949" class="Function">ω</a> <a id="4270" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="4273" class="Symbol">(</a><a id="4274" href="Graded.Erasure.Extraction.Non-terminating.html#2609" class="Generalizable">γ₂</a> <a id="4277" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="4280" href="Graded.Erasure.Extraction.Non-terminating.html#2612" class="Generalizable">γ₃</a> <a id="4283" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="4286" href="Graded.Erasure.Extraction.Non-terminating.html#2615" class="Generalizable">γ₄</a><a id="4288" class="Symbol">)</a> <a id="4290" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="4293" class="InductiveConstructor">𝟙ᵐ</a> <a id="4296" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="4298" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="4303" href="Graded.Erasure.Extraction.Non-terminating.html#2587" class="Generalizable">t</a> <a id="4305" href="Graded.Erasure.Extraction.Non-terminating.html#2583" class="Generalizable">A</a> <a id="4307" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">B</a> <a id="4309" href="Graded.Erasure.Extraction.Non-terminating.html#2589" class="Generalizable">u</a>
  <a id="4313" href="Graded.Erasure.Extraction.Non-terminating.html#4151" class="Function">▸cast</a> <a id="4319" class="Symbol">{</a><a id="4320" href="Graded.Erasure.Extraction.Non-terminating.html#4320" class="Bound">γ₁</a><a id="4322" class="Symbol">}</a> <a id="4324" class="Symbol">{</a><a id="4325" href="Graded.Erasure.Extraction.Non-terminating.html#4325" class="Bound">γ₂</a><a id="4327" class="Symbol">}</a> <a id="4329" class="Symbol">{</a><a id="4330" href="Graded.Erasure.Extraction.Non-terminating.html#4330" class="Bound">γ₃</a><a id="4332" class="Symbol">}</a> <a id="4334" class="Symbol">{</a><a id="4335" href="Graded.Erasure.Extraction.Non-terminating.html#4335" class="Bound">γ₄</a><a id="4337" class="Symbol">}</a> <a id="4339" href="Graded.Erasure.Extraction.Non-terminating.html#4339" class="Bound">ok</a> <a id="4342" href="Graded.Erasure.Extraction.Non-terminating.html#4342" class="Bound">▸t</a> <a id="4345" href="Graded.Erasure.Extraction.Non-terminating.html#4345" class="Bound">▸A</a> <a id="4348" href="Graded.Erasure.Extraction.Non-terminating.html#4348" class="Bound">▸B</a> <a id="4351" href="Graded.Erasure.Extraction.Non-terminating.html#4351" class="Bound">▸u</a> <a id="4354" class="Symbol">=</a>
    <a id="4360" href="Graded.Usage.html#16559" class="InductiveConstructor">sub</a> <a id="4364" class="Symbol">(</a><a id="4365" href="Graded.Derived.Identity.html#1233" class="Function">▸subst</a> <a id="4372" href="Graded.Usage.html#8631" class="InductiveConstructor">Uₘ</a>
           <a id="4386" class="Symbol">(</a><a id="4387" href="Graded.Usage.html#16559" class="InductiveConstructor">sub</a> <a id="4391" href="Graded.Usage.html#8867" class="InductiveConstructor">var</a> <a id="4395" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4397" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
              <a id="4417" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="4420" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="4422" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="4424" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="4426" href="Graded.Modality.html#947" class="Function">𝟙</a>   <a id="4430" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="4433" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="4441" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="4443" href="Graded.Modality.html#3862" class="Function">·-identityʳ</a> <a id="4455" class="Symbol">_</a> <a id="4457" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
              <a id="4473" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="4476" href="Graded.Context.html#1144" class="Function Operator">,</a> <a id="4478" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="4481" href="Graded.Context.html#1144" class="Function Operator">≔</a> <a id="4483" href="Graded.Modality.html#947" class="Function">𝟙</a>  <a id="4486" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="4487" class="Symbol">)</a>
           <a id="4500" href="Graded.Erasure.Extraction.Non-terminating.html#4345" class="Bound">▸A</a> <a id="4503" href="Graded.Erasure.Extraction.Non-terminating.html#4348" class="Bound">▸B</a>
           <a id="4517" class="Symbol">(</a><a id="4518" href="Graded.Usage.html#13790" class="InductiveConstructor">emptyrecₘ</a> <a id="4528" class="Symbol">(</a><a id="4529" href="Graded.Usage.Properties.html#2559" class="Function">▸-cong</a> <a id="4536" class="Symbol">(</a><a id="4537" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="4544" href="Graded.Mode.html#19175" class="Function">⌞𝟘⌟≡𝟘ᵐ?</a><a id="4551" class="Symbol">)</a> <a id="4553" href="Graded.Erasure.Extraction.Non-terminating.html#4342" class="Bound">▸t</a><a id="4555" class="Symbol">)</a>
              <a id="4571" class="Symbol">(</a><a id="4572" href="Graded.Usage.Properties.html#51649" class="Function">Idₘ-generalised</a> <a id="4588" href="Graded.Usage.html#8631" class="InductiveConstructor">Uₘ</a> <a id="4591" class="Symbol">(</a><a id="4592" href="Graded.Usage.Properties.html#3641" class="Function">▸-𝟘ᵐ?</a> <a id="4598" href="Graded.Erasure.Extraction.Non-terminating.html#4345" class="Bound">▸A</a> <a id="4601" class="Symbol">.</a><a id="4602" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4607" class="Symbol">)</a> <a id="4609" class="Symbol">(</a><a id="4610" href="Graded.Usage.Properties.html#3641" class="Function">▸-𝟘ᵐ?</a> <a id="4616" href="Graded.Erasure.Extraction.Non-terminating.html#4348" class="Bound">▸B</a> <a id="4619" class="Symbol">.</a><a id="4620" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4625" class="Symbol">)</a>
                 <a id="4644" class="Symbol">(λ</a> <a id="4647" href="Graded.Erasure.Extraction.Non-terminating.html#4647" class="Bound">_</a> <a id="4649" class="Symbol">→</a> <a id="4651" href="Graded.Context.Properties.Meet.html#2443" class="Function">∧ᶜ-decreasingˡ</a> <a id="4666" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="4669" class="Symbol">_)</a>
                 <a id="4689" class="Symbol">(λ</a> <a id="4692" href="Graded.Erasure.Extraction.Non-terminating.html#4692" class="Bound">_</a> <a id="4694" class="Symbol">→</a> <a id="4696" href="Graded.Context.Properties.Meet.html#2657" class="Function">∧ᶜ-decreasingʳ</a> <a id="4711" class="Symbol">_</a> <a id="4713" class="Symbol">_))</a>
              <a id="4731" href="Graded.Erasure.Extraction.Non-terminating.html#4339" class="Bound">ok</a><a id="4733" class="Symbol">)</a>
           <a id="4746" href="Graded.Erasure.Extraction.Non-terminating.html#4351" class="Bound">▸u</a><a id="4748" class="Symbol">)</a>
    <a id="4754" class="Symbol">(</a><a id="4755" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="4768" href="Graded.Modality.html#949" class="Function">ω</a> <a id="4770" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="4773" class="Symbol">(</a><a id="4774" href="Graded.Erasure.Extraction.Non-terminating.html#4325" class="Bound">γ₂</a> <a id="4777" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="4780" href="Graded.Erasure.Extraction.Non-terminating.html#4330" class="Bound">γ₃</a> <a id="4783" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="4786" href="Graded.Erasure.Extraction.Non-terminating.html#4335" class="Bound">γ₄</a><a id="4788" class="Symbol">)</a>                   <a id="4808" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="4812" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="4821" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="4874" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="4883" class="Symbol">(</a><a id="4884" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="4897" class="Symbol">_)</a> <a id="4900" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="4953" href="Graded.Context.Properties.Addition.html#2618" class="Function">+ᶜ-congˡ</a> <a id="4962" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5015" href="Graded.Context.Properties.Addition.html#2618" class="Function">+ᶜ-congˡ</a> <a id="5024" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5077" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="5086" class="Symbol">(</a><a id="5087" href="Graded.Context.Properties.Addition.html#2723" class="Function">+ᶜ-congʳ</a> <a id="5096" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5098" href="Graded.Context.Properties.Multiplication.html#898" class="Function">·ᶜ-zeroˡ</a> <a id="5107" class="Symbol">_)</a> <a id="5110" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5163" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="5176" class="Symbol">_</a> <a id="5178" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="5187" href="Graded.Modality.html#949" class="Function">ω</a> <a id="5189" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="5192" class="Symbol">(</a><a id="5193" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="5196" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="5199" href="Graded.Erasure.Extraction.Non-terminating.html#4325" class="Bound">γ₂</a> <a id="5202" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="5205" href="Graded.Erasure.Extraction.Non-terminating.html#4330" class="Bound">γ₃</a> <a id="5208" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="5211" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="5213" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="5216" href="Graded.Erasure.Extraction.Non-terminating.html#4320" class="Bound">γ₁</a> <a id="5219" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="5222" href="Graded.Erasure.Extraction.Non-terminating.html#4335" class="Bound">γ₄</a><a id="5224" class="Symbol">)</a>  <a id="5227" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="5228" class="Symbol">)</a>
    <a id="5234" class="Keyword">where</a>
    <a id="5244" class="Keyword">open</a> <a id="5249" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="5263" class="Comment">------------------------------------------------------------------------</a>
<a id="5336" class="Comment">-- The term former λx∙xx</a>

<a id="5362" class="Keyword">opaque</a>

  <a id="5372" class="Comment">-- A term that is roughly &quot;λ x. x x&quot;.</a>

  <a id="λx∙xx"></a><a id="5413" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="5419" class="Symbol">:</a> <a id="5421" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="5423" class="Symbol">→</a> <a id="5425" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="5430" class="Symbol">(</a><a id="5431" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="5434" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a><a id="5435" class="Symbol">)</a>
  <a id="5439" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="5445" href="Graded.Erasure.Extraction.Non-terminating.html#5445" class="Bound">p</a> <a id="5447" class="Symbol">=</a>
    <a id="5453" href="Definition.Untyped.html#1370" class="InductiveConstructor">lam</a> <a id="5457" class="Symbol">(</a><a id="5458" href="Graded.Modality.html#949" class="Function">ω</a> <a id="5460" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="5462" href="Graded.Modality.html#949" class="Function">ω</a><a id="5463" class="Symbol">)</a> <a id="5465" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="5471" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="5476" class="Symbol">(</a><a id="5477" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="5481" href="Tools.Fin.html#439" class="Function">x1</a><a id="5483" class="Symbol">)</a> <a id="5485" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="5487" class="Symbol">(</a><a id="5488" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="5490" href="Graded.Modality.html#949" class="Function">ω</a> <a id="5492" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="5494" href="Graded.Erasure.Extraction.Non-terminating.html#5445" class="Bound">p</a> <a id="5496" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="5498" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="5500" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="5502" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a><a id="5503" class="Symbol">)</a> <a id="5505" class="Symbol">(</a><a id="5506" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="5510" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="5512" class="Symbol">)</a> <a id="5514" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">∘⟨</a> <a id="5517" href="Graded.Modality.html#949" class="Function">ω</a> <a id="5519" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">⟩</a> <a id="5521" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="5525" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a>

<a id="5529" class="Keyword">opaque</a>
  <a id="5538" class="Keyword">unfolding</a> <a id="5548" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a>

  <a id="5557" class="Comment">-- An extraction lemma for λx∙xx.</a>

  <a id="erase-λx∙xx"></a><a id="5594" href="Graded.Erasure.Extraction.Non-terminating.html#5594" class="Function">erase-λx∙xx</a> <a id="5606" class="Symbol">:</a>
    <a id="5612" class="Symbol">⦃</a> <a id="5614" href="Graded.Erasure.Extraction.Non-terminating.html#5614" class="Bound">𝟘-well-behaved</a> <a id="5629" class="Symbol">:</a> <a id="5631" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="5653" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="5655" href="Graded.Modality.html#9717" class="Function">semiring-with-meet</a> <a id="5674" class="Symbol">⦄</a> <a id="5676" class="Symbol">→</a>
    <a id="5682" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5689" href="Graded.Erasure.Extraction.Non-terminating.html#2515" class="Generalizable">b</a> <a id="5691" href="Graded.Erasure.Extraction.Non-terminating.html#2672" class="Generalizable">s</a> <a id="5693" class="Symbol">(</a><a id="5694" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="5700" class="Symbol">{</a><a id="5701" class="Argument">n</a> <a id="5703" class="Symbol">=</a> <a id="5705" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a><a id="5706" class="Symbol">}</a> <a id="5708" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a><a id="5709" class="Symbol">)</a> <a id="5711" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="5717" class="InductiveConstructor">T.lam</a> <a id="5723" class="Symbol">(</a><a id="5724" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="5730" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="5733" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="5738" href="Graded.Erasure.Extraction.Non-terminating.html#2672" class="Generalizable">s</a> <a id="5740" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="5742" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="5748" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="5750" class="Symbol">)</a>
  <a id="5754" href="Graded.Erasure.Extraction.Non-terminating.html#5594" class="Function">erase-λx∙xx</a> <a id="5766" class="Symbol">{</a><a id="5767" href="Graded.Erasure.Extraction.Non-terminating.html#5767" class="Bound">b</a><a id="5768" class="Symbol">}</a> <a id="5770" class="Symbol">{</a><a id="5771" href="Graded.Erasure.Extraction.Non-terminating.html#5771" class="Bound">s</a><a id="5772" class="Symbol">}</a> <a id="5774" class="Symbol">{</a><a id="5775" href="Graded.Erasure.Extraction.Non-terminating.html#5775" class="Bound">p</a><a id="5776" class="Symbol">}</a> <a id="5778" class="Symbol">=</a>
    <a id="5784" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5791" href="Graded.Erasure.Extraction.Non-terminating.html#5767" class="Bound">b</a> <a id="5793" href="Graded.Erasure.Extraction.Non-terminating.html#5771" class="Bound">s</a> <a id="5795" class="Symbol">(</a><a id="5796" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="5802" href="Graded.Erasure.Extraction.Non-terminating.html#5775" class="Bound">p</a><a id="5803" class="Symbol">)</a>                                          <a id="5846" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="5849" href="Graded.Erasure.Extraction.Properties.html#4431" class="Function">lam-≢𝟘</a> <a id="5856" href="Graded.Erasure.Extraction.Non-terminating.html#5767" class="Bound">b</a> <a id="5858" class="Symbol">(</a><a id="5859" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a> <a id="5863" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5866" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5872" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5875" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1108" class="Function">+-positive</a><a id="5885" class="Symbol">)</a> <a id="5887" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="5894" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a>
      <a id="5906" class="Symbol">(</a><a id="5907" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5914" href="Graded.Erasure.Extraction.Non-terminating.html#5767" class="Bound">b</a> <a id="5916" href="Graded.Erasure.Extraction.Non-terminating.html#5771" class="Bound">s</a> <a id="5918" href="Function.Base.html#1974" class="Function Operator">$</a>
       <a id="5927" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="5932" class="Symbol">(</a><a id="5933" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="5937" href="Tools.Fin.html#439" class="Function">x1</a><a id="5939" class="Symbol">)</a> <a id="5941" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="5943" class="Symbol">(</a><a id="5944" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="5946" href="Graded.Modality.html#949" class="Function">ω</a> <a id="5948" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="5950" href="Graded.Erasure.Extraction.Non-terminating.html#5775" class="Bound">p</a> <a id="5952" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="5954" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="5956" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="5958" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a><a id="5959" class="Symbol">)</a> <a id="5961" class="Symbol">(</a><a id="5962" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="5966" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="5968" class="Symbol">)</a> <a id="5970" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">∘⟨</a> <a id="5973" href="Graded.Modality.html#949" class="Function">ω</a> <a id="5975" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">⟩</a> <a id="5977" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="5981" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="5983" class="Symbol">)</a>  <a id="5986" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="5989" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="5997" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6003" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6005" href="Graded.Erasure.Extraction.Properties.html#4109" class="Function">∘-≢𝟘</a> <a id="6010" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a> <a id="6014" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="6021" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a>
      <a id="6033" class="Symbol">(</a><a id="6034" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="6041" href="Graded.Erasure.Extraction.Non-terminating.html#5767" class="Bound">b</a> <a id="6043" href="Graded.Erasure.Extraction.Non-terminating.html#5771" class="Bound">s</a>
         <a id="6054" class="Symbol">(</a><a id="6055" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="6060" class="Symbol">(</a><a id="6061" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="6065" href="Tools.Fin.html#439" class="Function">x1</a><a id="6067" class="Symbol">)</a> <a id="6069" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="6071" class="Symbol">(</a><a id="6072" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="6074" href="Graded.Modality.html#949" class="Function">ω</a> <a id="6076" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="6078" href="Graded.Erasure.Extraction.Non-terminating.html#5775" class="Bound">p</a> <a id="6080" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="6082" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="6084" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="6086" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a><a id="6087" class="Symbol">)</a> <a id="6089" class="Symbol">(</a><a id="6090" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="6094" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6096" class="Symbol">))</a>
         <a id="6108" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6113" href="Graded.Erasure.Extraction.Non-terminating.html#5771" class="Bound">s</a> <a id="6115" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6117" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6123" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6125" class="Symbol">)</a>                                       <a id="6165" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="6168" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="6176" class="Symbol">(λ</a> <a id="6179" href="Graded.Erasure.Extraction.Non-terminating.html#6179" class="Bound">t</a> <a id="6181" class="Symbol">→</a> <a id="6183" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6189" class="Symbol">(</a><a id="6190" href="Graded.Erasure.Extraction.Non-terminating.html#6179" class="Bound">t</a> <a id="6192" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6197" class="Symbol">_</a> <a id="6199" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6201" class="Symbol">_))</a> <a id="6205" href="Graded.Erasure.Extraction.Non-terminating.html#3765" class="Function">erase-cast</a> <a id="6216" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="6223" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6229" class="Symbol">(</a><a id="6230" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6236" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="6239" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6244" href="Graded.Erasure.Extraction.Non-terminating.html#5771" class="Bound">s</a> <a id="6246" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6248" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6254" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6256" class="Symbol">)</a>                            <a id="6285" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="6291" class="Keyword">where</a>
    <a id="6301" class="Keyword">open</a> <a id="6306" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="6345" class="Keyword">opaque</a>
  <a id="6354" class="Keyword">unfolding</a> <a id="6364" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a>

  <a id="6373" class="Comment">-- A typing rule for λx∙xx.</a>

  <a id="⊢λx∙xx"></a><a id="6404" href="Graded.Erasure.Extraction.Non-terminating.html#6404" class="Function">⊢λx∙xx</a> <a id="6411" class="Symbol">:</a>
    <a id="6417" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="6427" href="Graded.Modality.html#949" class="Function">ω</a> <a id="6429" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="6431" class="Symbol">→</a>
    <a id="6437" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="6447" class="Symbol">(</a><a id="6448" href="Graded.Modality.html#949" class="Function">ω</a> <a id="6450" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="6452" href="Graded.Modality.html#949" class="Function">ω</a><a id="6453" class="Symbol">)</a> <a id="6455" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="6457" class="Symbol">→</a>
    <a id="6463" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="6465" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a> <a id="6467" class="Symbol">→</a>
    <a id="6473" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a> <a id="6475" class="InductiveConstructor Operator">∙</a> <a id="6477" href="Definition.Untyped.html#2034" class="InductiveConstructor">Empty</a> <a id="6483" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="6485" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="6491" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="6493" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="6495" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="6497" class="Symbol">(</a><a id="6498" href="Graded.Modality.html#949" class="Function">ω</a> <a id="6500" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="6502" href="Graded.Modality.html#949" class="Function">ω</a><a id="6503" class="Symbol">)</a> <a id="6505" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="6507" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="6509" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="6511" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="6513" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="6515" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
  <a id="6519" href="Graded.Erasure.Extraction.Non-terminating.html#6404" class="Function">⊢λx∙xx</a> <a id="6526" href="Graded.Erasure.Extraction.Non-terminating.html#6526" class="Bound">ω-ok</a> <a id="6531" href="Graded.Erasure.Extraction.Non-terminating.html#6531" class="Bound">ω+ω-ok</a> <a id="6538" href="Graded.Erasure.Extraction.Non-terminating.html#6538" class="Bound">⊢Γ</a> <a id="6541" class="Symbol">=</a>
    <a id="6547" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="6553" href="Graded.Erasure.Extraction.Non-terminating.html#6531" class="Bound">ω+ω-ok</a> <a id="6560" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="6566" href="Graded.Erasure.Extraction.Non-terminating.html#3900" class="Function">⊢cast</a> <a id="6572" class="Symbol">(</a><a id="6573" href="Definition.Typed.Properties.Admissible.Var.html#712" class="Function">var₁</a> <a id="6578" href="Graded.Erasure.Extraction.Non-terminating.html#2844" class="Function">Empty⊢ℕ</a><a id="6585" class="Symbol">)</a> <a id="6587" href="Graded.Erasure.Extraction.Non-terminating.html#2898" class="Function">Empty∙ℕ⊢ℕ∷U</a>
      <a id="6605" class="Symbol">(</a><a id="6606" href="Definition.Typed.html#1807" class="InductiveConstructor">ΠΣⱼ</a> <a id="6610" href="Graded.Erasure.Extraction.Non-terminating.html#2898" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="6622" href="Graded.Erasure.Extraction.Non-terminating.html#2983" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="6636" href="Graded.Erasure.Extraction.Non-terminating.html#6526" class="Bound">ω-ok</a><a id="6640" class="Symbol">)</a> <a id="6642" class="Symbol">(</a><a id="6643" href="Definition.Typed.Properties.Admissible.Var.html#599" class="Function">var₀</a> <a id="6648" href="Graded.Erasure.Extraction.Non-terminating.html#2844" class="Function">Empty⊢ℕ</a><a id="6655" class="Symbol">)</a> <a id="6657" href="Definition.Typed.html#2390" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="6664" href="Definition.Typed.Properties.Admissible.Var.html#599" class="Function">var₀</a> <a id="6669" href="Graded.Erasure.Extraction.Non-terminating.html#2844" class="Function">Empty⊢ℕ</a>
    <a id="6681" class="Keyword">where</a>
    <a id="6691" class="Keyword">open</a> <a id="6696" href="Graded.Erasure.Extraction.Non-terminating.html#2741" class="Module">Lemmas</a> <a id="6703" href="Graded.Erasure.Extraction.Non-terminating.html#6538" class="Bound">⊢Γ</a>

<a id="6707" class="Keyword">opaque</a>
  <a id="6716" class="Keyword">unfolding</a> <a id="6726" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a>

  <a id="6735" class="Comment">-- A usage rule for λx∙xx.</a>

  <a id="▸λx∙xx"></a><a id="6765" href="Graded.Erasure.Extraction.Non-terminating.html#6765" class="Function">▸λx∙xx</a> <a id="6772" class="Symbol">:</a>
    <a id="6778" href="Graded.Usage.Restrictions.html#1782" class="Field">Emptyrec-allowed</a> <a id="6795" class="InductiveConstructor">𝟙ᵐ</a> <a id="6798" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="6800" class="Symbol">→</a>
    <a id="6806" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="6808" href="Graded.Modality.html#1384" class="Function Operator">≤</a> <a id="6810" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="6812" class="Symbol">→</a>
    <a id="6818" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="6821" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="6824" class="InductiveConstructor">𝟙ᵐ</a> <a id="6827" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="6829" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="6835" class="Symbol">{</a><a id="6836" class="Argument">n</a> <a id="6838" class="Symbol">=</a> <a id="6840" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a><a id="6841" class="Symbol">}</a> <a id="6843" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a>
  <a id="6847" href="Graded.Erasure.Extraction.Non-terminating.html#6765" class="Function">▸λx∙xx</a> <a id="6854" class="Symbol">{</a><a id="6855" href="Graded.Erasure.Extraction.Non-terminating.html#6855" class="Bound">p</a><a id="6856" class="Symbol">}</a> <a id="6858" href="Graded.Erasure.Extraction.Non-terminating.html#6858" class="Bound">ok</a> <a id="6861" href="Graded.Erasure.Extraction.Non-terminating.html#6861" class="Bound">p≤𝟘</a> <a id="6865" class="Symbol">=</a>
    <a id="6871" href="Graded.Usage.html#8912" class="InductiveConstructor">lamₘ</a> <a id="6876" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6878" href="Graded.Usage.html#16559" class="InductiveConstructor">sub</a> <a id="6882" class="Symbol">(</a><a id="6883" href="Graded.Erasure.Extraction.Non-terminating.html#4151" class="Function">▸cast</a> <a id="6889" href="Graded.Erasure.Extraction.Non-terminating.html#6858" class="Bound">ok</a> <a id="6892" href="Graded.Usage.html#8867" class="InductiveConstructor">var</a> <a id="6896" href="Graded.Usage.html#8659" class="InductiveConstructor">ℕₘ</a> <a id="6899" class="Symbol">(</a><a id="6900" href="Graded.Erasure.Extraction.Non-terminating.html#3124" class="Function">▸Πℕℕ</a> <a id="6905" href="Graded.Erasure.Extraction.Non-terminating.html#6861" class="Bound">p≤𝟘</a><a id="6908" class="Symbol">)</a> <a id="6910" href="Graded.Usage.html#8867" class="InductiveConstructor">var</a> <a id="6914" href="Graded.Usage.html#8981" class="InductiveConstructor Operator">∘ₘ</a> <a id="6917" href="Graded.Usage.html#8867" class="InductiveConstructor">var</a><a id="6920" class="Symbol">)</a> <a id="6922" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6924" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
      <a id="6936" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="6939" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="6941" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="6943" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="6945" class="Symbol">(</a><a id="6946" href="Graded.Modality.html#949" class="Function">ω</a> <a id="6948" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="6950" href="Graded.Modality.html#949" class="Function">ω</a><a id="6951" class="Symbol">)</a>                                      <a id="6990" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="6993" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="7001" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="7003" href="Graded.Modality.html#3820" class="Function">·-identityˡ</a> <a id="7015" class="Symbol">_</a> <a id="7017" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
      <a id="7025" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7028" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7030" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7032" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="7034" href="Graded.Modality.html#949" class="Function">ω</a>                                            <a id="7079" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="7083" class="Symbol">(</a><a id="7084" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="7093" class="Symbol">(</a><a id="7094" href="Graded.Context.Properties.Addition.html#2435" class="Function">+ᶜ-cong</a> <a id="7102" class="Symbol">(</a><a id="7103" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="7112" class="Symbol">_)</a> <a id="7115" class="Symbol">(</a><a id="7116" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="7125" class="Symbol">_))</a> <a id="7129" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                 <a id="7196" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="7209" class="Symbol">_)</a> <a id="7212" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a>
                                                                <a id="7278" href="Algebra.Structures.html#13194" class="Function">+-cong</a> <a id="7285" class="Symbol">(</a><a id="7286" href="Graded.Modality.html#3862" class="Function">·-identityʳ</a> <a id="7298" class="Symbol">_)</a> <a id="7301" href="Graded.Mode.html#20957" class="Function">·⌜⌞⌟⌝</a> <a id="7307" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
      <a id="7315" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7317" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7320" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7323" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="7326" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7328" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7331" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7334" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7336" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7338" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="7340" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="7342" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="7344" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7346" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="7348" href="Graded.Mode.html#4855" class="Function Operator">⌜</a> <a id="7350" href="Graded.Mode.html#5190" class="Function Operator">⌞</a> <a id="7352" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7354" href="Graded.Mode.html#5190" class="Function Operator">⌟</a> <a id="7356" href="Graded.Mode.html#4855" class="Function Operator">⌝</a>            <a id="7369" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
      <a id="7379" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7381" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7384" class="Symbol">(</a><a id="7385" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7388" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7390" href="Graded.Modality.html#947" class="Function">𝟙</a><a id="7391" class="Symbol">)</a> <a id="7393" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="7396" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7398" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7401" class="Symbol">(</a><a id="7402" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7405" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7407" href="Graded.Mode.html#4855" class="Function Operator">⌜</a> <a id="7409" href="Graded.Mode.html#5190" class="Function Operator">⌞</a> <a id="7411" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7413" href="Graded.Mode.html#5190" class="Function Operator">⌟</a> <a id="7415" href="Graded.Mode.html#4855" class="Function Operator">⌝</a><a id="7416" class="Symbol">)</a>                <a id="7433" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="7437" href="Graded.Context.Properties.Addition.html#2723" class="Function">+ᶜ-congʳ</a> <a id="7446" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7512" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="7521" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7587" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="7596" class="Symbol">(</a><a id="7597" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="7610" class="Symbol">_)</a> <a id="7613" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7679" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="7692" class="Symbol">_</a> <a id="7694" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
      <a id="7702" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7704" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7707" class="Symbol">(</a><a id="7708" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7711" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="7714" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7717" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="7720" class="Symbol">(</a><a id="7721" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7724" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7726" href="Graded.Modality.html#947" class="Function">𝟙</a><a id="7727" class="Symbol">))</a> <a id="7730" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="7733" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7735" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7738" class="Symbol">(</a><a id="7739" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7742" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7744" href="Graded.Mode.html#4855" class="Function Operator">⌜</a> <a id="7746" href="Graded.Mode.html#5190" class="Function Operator">⌞</a> <a id="7748" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7750" href="Graded.Mode.html#5190" class="Function Operator">⌟</a> <a id="7752" href="Graded.Mode.html#4855" class="Function Operator">⌝</a><a id="7753" class="Symbol">)</a>  <a id="7756" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="7762" class="Keyword">where</a>
    <a id="7772" class="Keyword">open</a> <a id="7777" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="7791" class="Comment">------------------------------------------------------------------------</a>
<a id="7864" class="Comment">-- The term former extracts-to-loop</a>

<a id="7901" class="Keyword">opaque</a>

  <a id="7911" class="Comment">-- A term for which the extraction is loop s (for some s) if</a>
  <a id="7974" class="Comment">-- erasable arguments are removed entirely.</a>

  <a id="extracts-to-loop"></a><a id="8021" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a> <a id="8038" class="Symbol">:</a> <a id="8040" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="8042" class="Symbol">→</a> <a id="8044" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="8049" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a>
  <a id="8053" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a> <a id="8070" href="Graded.Erasure.Extraction.Non-terminating.html#8070" class="Bound">p</a> <a id="8072" class="Symbol">=</a>
    <a id="8078" href="Definition.Untyped.html#1370" class="InductiveConstructor">lam</a> <a id="8082" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="8084" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="8090" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="8096" href="Graded.Erasure.Extraction.Non-terminating.html#8070" class="Bound">p</a> <a id="8098" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">∘⟨</a> <a id="8101" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8103" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="8105" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8107" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">⟩</a> <a id="8109" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="8114" class="Symbol">(</a><a id="8115" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="8119" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8121" class="Symbol">)</a> <a id="8123" class="Symbol">(</a><a id="8124" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="8126" class="Symbol">(</a><a id="8127" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8129" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="8131" href="Graded.Modality.html#949" class="Function">ω</a><a id="8132" class="Symbol">)</a> <a id="8134" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="8136" href="Graded.Erasure.Extraction.Non-terminating.html#8070" class="Bound">p</a> <a id="8138" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="8140" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="8142" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="8144" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a><a id="8145" class="Symbol">)</a> <a id="8147" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="8149" class="Symbol">(</a><a id="8150" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="8156" href="Graded.Erasure.Extraction.Non-terminating.html#8070" class="Bound">p</a><a id="8157" class="Symbol">)</a>

<a id="8160" class="Keyword">opaque</a>
  <a id="8169" class="Keyword">unfolding</a> <a id="8179" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a> <a id="8196" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a>

  <a id="8204" class="Comment">-- An extraction lemma for extracts-to-loop.</a>

  <a id="erase-extracts-to-loop"></a><a id="8252" href="Graded.Erasure.Extraction.Non-terminating.html#8252" class="Function">erase-extracts-to-loop</a> <a id="8275" class="Symbol">:</a>
    <a id="8281" class="Symbol">⦃</a> <a id="8283" href="Graded.Erasure.Extraction.Non-terminating.html#8283" class="Bound">𝟘-well-behaved</a> <a id="8298" class="Symbol">:</a> <a id="8300" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="8322" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="8324" href="Graded.Modality.html#9717" class="Function">semiring-with-meet</a> <a id="8343" class="Symbol">⦄</a> <a id="8345" class="Symbol">→</a>
    <a id="8351" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8358" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8363" href="Graded.Erasure.Extraction.Non-terminating.html#2672" class="Generalizable">s</a> <a id="8365" class="Symbol">(</a><a id="8366" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a> <a id="8383" class="Symbol">{</a><a id="8384" class="Argument">n</a> <a id="8386" class="Symbol">=</a> <a id="8388" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a><a id="8389" class="Symbol">}</a> <a id="8391" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a><a id="8392" class="Symbol">)</a> <a id="8394" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8396" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="8401" href="Graded.Erasure.Extraction.Non-terminating.html#2672" class="Generalizable">s</a>
  <a id="8405" href="Graded.Erasure.Extraction.Non-terminating.html#8252" class="Function">erase-extracts-to-loop</a> <a id="8428" class="Symbol">{</a><a id="8429" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a><a id="8430" class="Symbol">}</a> <a id="8432" class="Symbol">{</a><a id="8433" href="Graded.Erasure.Extraction.Non-terminating.html#8433" class="Bound">p</a><a id="8434" class="Symbol">}</a> <a id="8436" class="Symbol">=</a>
    <a id="8442" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8449" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8454" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a> <a id="8456" class="Symbol">(</a><a id="8457" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a> <a id="8474" href="Graded.Erasure.Extraction.Non-terminating.html#8433" class="Bound">p</a><a id="8475" class="Symbol">)</a>                       <a id="8499" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="8502" href="Graded.Erasure.Extraction.Properties.html#4828" class="Function">lam-𝟘-remove</a> <a id="8515" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="8522" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8529" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8534" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a>
      <a id="8542" class="Symbol">(</a><a id="8543" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="8549" href="Graded.Erasure.Extraction.Non-terminating.html#8433" class="Bound">p</a> <a id="8551" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">∘⟨</a> <a id="8554" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8556" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="8558" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8560" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">⟩</a>
       <a id="8569" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="8574" class="Symbol">(</a><a id="8575" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="8579" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8581" class="Symbol">)</a> <a id="8583" class="Symbol">(</a><a id="8584" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="8586" class="Symbol">(</a><a id="8587" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8589" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="8591" href="Graded.Modality.html#949" class="Function">ω</a><a id="8592" class="Symbol">)</a> <a id="8594" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="8596" href="Graded.Erasure.Extraction.Non-terminating.html#8433" class="Bound">p</a> <a id="8598" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="8600" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="8602" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="8604" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a><a id="8605" class="Symbol">)</a> <a id="8607" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="8609" class="Symbol">(</a><a id="8610" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="8616" href="Graded.Erasure.Extraction.Non-terminating.html#8433" class="Bound">p</a><a id="8617" class="Symbol">))</a>
      <a id="8626" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="8630" href="Graded.Erasure.Extraction.html#854" class="Function">loop?</a> <a id="8636" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a> <a id="8638" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="8681" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="8684" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="8692" href="Graded.Erasure.Target.html#4865" class="Function Operator">T._[</a> <a id="8697" class="Symbol">_</a> <a id="8699" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a> <a id="8701" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="8767" href="Graded.Erasure.Extraction.Properties.html#4109" class="Function">∘-≢𝟘</a> <a id="8772" class="Symbol">(</a><a id="8773" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a> <a id="8777" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="8780" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="8786" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="8789" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1108" class="Function">+-positive</a><a id="8799" class="Symbol">)</a> <a id="8801" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="8807" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8814" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8819" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a> <a id="8821" class="Symbol">(</a><a id="8822" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="8828" href="Graded.Erasure.Extraction.Non-terminating.html#8433" class="Bound">p</a><a id="8829" class="Symbol">)</a> <a id="8831" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="8836" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a> <a id="8838" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
      <a id="8846" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8853" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8858" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a>
        <a id="8868" class="Symbol">(</a><a id="8869" href="Graded.Erasure.Extraction.Non-terminating.html#3565" class="Function">cast</a> <a id="8874" class="Symbol">(</a><a id="8875" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="8879" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8881" class="Symbol">)</a> <a id="8883" class="Symbol">(</a><a id="8884" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="8886" class="Symbol">(</a><a id="8887" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8889" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="8891" href="Graded.Modality.html#949" class="Function">ω</a><a id="8892" class="Symbol">)</a> <a id="8894" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="8896" href="Graded.Erasure.Extraction.Non-terminating.html#8433" class="Bound">p</a> <a id="8898" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="8900" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="8902" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="8904" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a><a id="8905" class="Symbol">)</a> <a id="8907" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="8909" class="Symbol">(</a><a id="8910" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="8916" href="Graded.Erasure.Extraction.Non-terminating.html#8433" class="Bound">p</a><a id="8917" class="Symbol">))</a>
      <a id="8926" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="8930" href="Graded.Erasure.Extraction.html#854" class="Function">loop?</a> <a id="8936" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a> <a id="8938" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="8981" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="8984" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a>
                                                                  <a id="9058" class="Symbol">(λ</a> <a id="9061" href="Graded.Erasure.Extraction.Non-terminating.html#9061" class="Bound">t</a> <a id="9063" class="Symbol">→</a> <a id="9065" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9072" class="Symbol">_</a> <a id="9074" class="Symbol">_</a> <a id="9076" class="Symbol">(</a><a id="9077" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="9083" class="Symbol">_)</a> <a id="9086" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9091" class="Symbol">_</a> <a id="9093" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="9095" href="Graded.Erasure.Extraction.Non-terminating.html#9061" class="Bound">t</a> <a id="9097" href="Graded.Erasure.Target.html#4865" class="Function Operator">T.[</a> <a id="9101" class="Symbol">_</a> <a id="9103" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a><a id="9104" class="Symbol">)</a>
                                                                  <a id="9172" href="Graded.Erasure.Extraction.Non-terminating.html#3765" class="Function">erase-cast</a> <a id="9183" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="9189" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9196" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9201" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a> <a id="9203" class="Symbol">(</a><a id="9204" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="9210" href="Graded.Erasure.Extraction.Non-terminating.html#8433" class="Bound">p</a><a id="9211" class="Symbol">)</a> <a id="9213" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9218" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a> <a id="9220" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
      <a id="9228" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9235" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9240" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a> <a id="9242" class="Symbol">(</a><a id="9243" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="9249" href="Graded.Erasure.Extraction.Non-terminating.html#8433" class="Bound">p</a><a id="9250" class="Symbol">)</a>
      <a id="9258" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="9262" href="Graded.Erasure.Extraction.html#854" class="Function">loop?</a> <a id="9268" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a> <a id="9270" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="9313" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="9316" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="9324" class="Symbol">(λ</a> <a id="9327" href="Graded.Erasure.Extraction.Non-terminating.html#9327" class="Bound">t</a> <a id="9329" class="Symbol">→</a> <a id="9331" href="Graded.Erasure.Extraction.Non-terminating.html#9327" class="Bound">t</a> <a id="9333" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9338" class="Symbol">_</a> <a id="9340" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="9342" href="Graded.Erasure.Extraction.Non-terminating.html#9327" class="Bound">t</a> <a id="9344" href="Graded.Erasure.Target.html#4865" class="Function Operator">T.[</a> <a id="9348" class="Symbol">_</a> <a id="9350" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a><a id="9351" class="Symbol">)</a>
                                                                <a id="9417" href="Graded.Erasure.Extraction.Non-terminating.html#5594" class="Function">erase-λx∙xx</a> <a id="9429" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="9435" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="9440" href="Graded.Erasure.Extraction.Non-terminating.html#8429" class="Bound">s</a>                                                   <a id="9492" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="9498" class="Keyword">where</a>
    <a id="9508" class="Keyword">open</a> <a id="9513" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="9552" class="Keyword">opaque</a>
  <a id="9561" class="Keyword">unfolding</a> <a id="9571" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a>

  <a id="9591" class="Comment">-- A typing rule for extracts-to-loop.</a>

  <a id="⊢extracts-to-loop"></a><a id="9633" href="Graded.Erasure.Extraction.Non-terminating.html#9633" class="Function">⊢extracts-to-loop</a> <a id="9651" class="Symbol">:</a>
    <a id="9657" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="9667" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="9669" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="9671" class="Symbol">→</a>
    <a id="9677" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="9687" href="Graded.Modality.html#949" class="Function">ω</a> <a id="9689" href="Graded.Erasure.Extraction.Non-terminating.html#2631" class="Generalizable">q</a> <a id="9691" class="Symbol">→</a>
    <a id="9697" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="9707" class="Symbol">(</a><a id="9708" href="Graded.Modality.html#949" class="Function">ω</a> <a id="9710" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="9712" href="Graded.Modality.html#949" class="Function">ω</a><a id="9713" class="Symbol">)</a> <a id="9715" href="Graded.Erasure.Extraction.Non-terminating.html#2631" class="Generalizable">q</a> <a id="9717" class="Symbol">→</a>
    <a id="9723" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="9725" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a> <a id="9727" class="Symbol">→</a>
    <a id="9733" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a> <a id="9735" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="9737" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a> <a id="9754" href="Graded.Erasure.Extraction.Non-terminating.html#2631" class="Generalizable">q</a> <a id="9756" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="9758" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="9760" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="9762" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="9764" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="9766" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="9768" href="Definition.Untyped.html#2034" class="InductiveConstructor">Empty</a> <a id="9774" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="9776" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
  <a id="9780" href="Graded.Erasure.Extraction.Non-terminating.html#9633" class="Function">⊢extracts-to-loop</a> <a id="9798" href="Graded.Erasure.Extraction.Non-terminating.html#9798" class="Bound">𝟘-ok</a> <a id="9803" href="Graded.Erasure.Extraction.Non-terminating.html#9803" class="Bound">ω-ok</a> <a id="9808" href="Graded.Erasure.Extraction.Non-terminating.html#9808" class="Bound">ω+ω-ok</a> <a id="9815" href="Graded.Erasure.Extraction.Non-terminating.html#9815" class="Bound">⊢Γ</a> <a id="9818" class="Symbol">=</a>
    <a id="9824" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="9830" href="Graded.Erasure.Extraction.Non-terminating.html#9798" class="Bound">𝟘-ok</a> <a id="9835" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="9841" href="Graded.Erasure.Extraction.Non-terminating.html#6404" class="Function">⊢λx∙xx</a> <a id="9848" href="Graded.Erasure.Extraction.Non-terminating.html#9803" class="Bound">ω-ok</a> <a id="9853" href="Graded.Erasure.Extraction.Non-terminating.html#9808" class="Bound">ω+ω-ok</a> <a id="9860" href="Graded.Erasure.Extraction.Non-terminating.html#9815" class="Bound">⊢Γ</a> <a id="9863" href="Definition.Typed.html#2390" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="9870" href="Graded.Erasure.Extraction.Non-terminating.html#3900" class="Function">⊢cast</a> <a id="9876" class="Symbol">(</a><a id="9877" href="Definition.Typed.Properties.Admissible.Var.html#599" class="Function">var₀</a> <a id="9882" class="Symbol">(</a><a id="9883" href="Definition.Typed.html#1362" class="InductiveConstructor">Emptyⱼ</a> <a id="9890" href="Graded.Erasure.Extraction.Non-terminating.html#9815" class="Bound">⊢Γ</a><a id="9892" class="Symbol">))</a> <a id="9895" class="Symbol">(</a><a id="9896" href="Definition.Typed.html#1807" class="InductiveConstructor">ΠΣⱼ</a> <a id="9900" href="Graded.Erasure.Extraction.Non-terminating.html#2775" class="Function">Empty⊢ℕ∷U</a> <a id="9910" href="Graded.Erasure.Extraction.Non-terminating.html#2898" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="9922" href="Graded.Erasure.Extraction.Non-terminating.html#9808" class="Bound">ω+ω-ok</a><a id="9928" class="Symbol">)</a>
      <a id="9936" href="Graded.Erasure.Extraction.Non-terminating.html#2775" class="Function">Empty⊢ℕ∷U</a> <a id="9946" class="Symbol">(</a><a id="9947" href="Graded.Erasure.Extraction.Non-terminating.html#6404" class="Function">⊢λx∙xx</a> <a id="9954" href="Graded.Erasure.Extraction.Non-terminating.html#9803" class="Bound">ω-ok</a> <a id="9959" href="Graded.Erasure.Extraction.Non-terminating.html#9808" class="Bound">ω+ω-ok</a> <a id="9966" href="Graded.Erasure.Extraction.Non-terminating.html#9815" class="Bound">⊢Γ</a><a id="9968" class="Symbol">)</a>
    <a id="9974" class="Keyword">where</a>
    <a id="9984" class="Keyword">open</a> <a id="9989" href="Graded.Erasure.Extraction.Non-terminating.html#2741" class="Module">Lemmas</a> <a id="9996" href="Graded.Erasure.Extraction.Non-terminating.html#9815" class="Bound">⊢Γ</a>

<a id="10000" class="Keyword">opaque</a>
  <a id="10009" class="Keyword">unfolding</a> <a id="10019" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a>

  <a id="10039" class="Comment">-- A usage rule for extracts-to-loop.</a>

  <a id="▸extracts-to-loop"></a><a id="10080" href="Graded.Erasure.Extraction.Non-terminating.html#10080" class="Function">▸extracts-to-loop</a> <a id="10098" class="Symbol">:</a>
    <a id="10104" class="Symbol">⦃</a> <a id="10106" href="Graded.Erasure.Extraction.Non-terminating.html#10106" class="Bound">𝟘-well-behaved</a> <a id="10121" class="Symbol">:</a> <a id="10123" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="10145" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="10147" href="Graded.Modality.html#9717" class="Function">semiring-with-meet</a> <a id="10166" class="Symbol">⦄</a> <a id="10168" class="Symbol">→</a>
    <a id="10174" href="Graded.Usage.Restrictions.html#1782" class="Field">Emptyrec-allowed</a> <a id="10191" class="InductiveConstructor">𝟙ᵐ</a> <a id="10194" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="10196" class="Symbol">→</a>
    <a id="10202" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="10204" href="Graded.Modality.html#1384" class="Function Operator">≤</a> <a id="10206" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="10208" class="Symbol">→</a>
    <a id="10214" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10217" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="10220" class="InductiveConstructor">𝟙ᵐ</a> <a id="10223" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="10225" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a> <a id="10242" class="Symbol">{</a><a id="10243" class="Argument">n</a> <a id="10245" class="Symbol">=</a> <a id="10247" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a><a id="10248" class="Symbol">}</a> <a id="10250" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a>
  <a id="10254" href="Graded.Erasure.Extraction.Non-terminating.html#10080" class="Function">▸extracts-to-loop</a> <a id="10272" class="Symbol">{</a><a id="10273" href="Graded.Erasure.Extraction.Non-terminating.html#10273" class="Bound">p</a><a id="10274" class="Symbol">}</a> <a id="10276" class="Symbol">{</a><a id="10277" href="Graded.Erasure.Extraction.Non-terminating.html#10277" class="Bound">n</a><a id="10278" class="Symbol">}</a> <a id="10280" href="Graded.Erasure.Extraction.Non-terminating.html#10280" class="Bound">ok</a> <a id="10283" href="Graded.Erasure.Extraction.Non-terminating.html#10283" class="Bound">p≤𝟘</a> <a id="10287" class="Symbol">=</a> <a id="10289" href="Graded.Usage.html#8912" class="InductiveConstructor">lamₘ</a> <a id="10294" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10296" href="Graded.Usage.html#16559" class="InductiveConstructor">sub</a>
    <a id="10304" class="Symbol">(</a><a id="10305" href="Graded.Erasure.Extraction.Non-terminating.html#10944" class="Function">▸λx∙xx′</a> <a id="10313" href="Graded.Usage.html#8981" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="10321" href="Graded.Usage.html#16559" class="InductiveConstructor">sub</a>
       <a id="10332" class="Symbol">(</a><a id="10333" href="Graded.Usage.Properties.html#2559" class="Function">▸-cong</a> <a id="10340" class="Symbol">(</a><a id="10341" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="10348" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10350" href="Graded.Mode.html#19805" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="10359" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10361" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a> <a id="10365" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="10368" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="10374" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="10377" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1108" class="Function">+-positive</a><a id="10387" class="Symbol">)</a> <a id="10389" href="Function.Base.html#1974" class="Function Operator">$</a>
        <a id="10399" href="Graded.Erasure.Extraction.Non-terminating.html#4151" class="Function">▸cast</a> <a id="10405" href="Graded.Erasure.Extraction.Non-terminating.html#10280" class="Bound">ok</a> <a id="10408" href="Graded.Usage.html#8867" class="InductiveConstructor">var</a> <a id="10412" class="Symbol">(</a><a id="10413" href="Graded.Erasure.Extraction.Non-terminating.html#3124" class="Function">▸Πℕℕ</a> <a id="10418" href="Graded.Erasure.Extraction.Non-terminating.html#10283" class="Bound">p≤𝟘</a><a id="10421" class="Symbol">)</a> <a id="10423" href="Graded.Usage.html#8659" class="InductiveConstructor">ℕₘ</a> <a id="10426" href="Graded.Erasure.Extraction.Non-terminating.html#10944" class="Function">▸λx∙xx′</a><a id="10433" class="Symbol">)</a>
     <a id="10440" class="Symbol">(</a><a id="10441" class="Keyword">let</a> <a id="10445" class="Keyword">open</a> <a id="10450" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a> <a id="10463" class="Keyword">in</a> <a id="10466" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
        <a id="10480" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>                     <a id="10503" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10507" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="10516" class="Symbol">_</a> <a id="10518" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
        <a id="10528" href="Graded.Modality.html#949" class="Function">ω</a> <a id="10530" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="10533" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>                <a id="10551" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10555" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="10564" href="Function.Base.html#1974" class="Function Operator">$</a>
                                   <a id="10601" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="10610" class="Symbol">(</a><a id="10611" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="10624" class="Symbol">_)</a> <a id="10627" href="Function.Base.html#1974" class="Function Operator">$</a>
                                   <a id="10664" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="10677" class="Symbol">_</a> <a id="10679" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
        <a id="10689" href="Graded.Modality.html#949" class="Function">ω</a> <a id="10691" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="10694" class="Symbol">(</a><a id="10695" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10698" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="10701" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10704" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="10707" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a><a id="10709" class="Symbol">)</a>  <a id="10712" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="10713" class="Symbol">))</a>
    <a id="10720" class="Symbol">(</a><a id="10721" class="Keyword">let</a> <a id="10725" class="Keyword">open</a> <a id="10730" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a> <a id="10743" class="Keyword">in</a> <a id="10746" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="10759" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10762" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="10764" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="10766" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="10768" href="Graded.Modality.html#945" class="Function">𝟘</a>           <a id="10780" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="10783" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="10791" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="10793" href="Graded.Modality.html#4079" class="Function">·-zeroʳ</a> <a id="10801" class="Symbol">_</a> <a id="10803" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
       <a id="10812" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>                   <a id="10833" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10837" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="10846" class="Symbol">_</a> <a id="10848" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="10857" class="Symbol">(</a><a id="10858" href="Graded.Modality.html#949" class="Function">ω</a> <a id="10860" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="10862" href="Graded.Modality.html#949" class="Function">ω</a><a id="10863" class="Symbol">)</a> <a id="10865" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="10868" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>        <a id="10878" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10882" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="10895" class="Symbol">_</a> <a id="10897" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="10906" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10909" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="10912" class="Symbol">(</a><a id="10913" href="Graded.Modality.html#949" class="Function">ω</a> <a id="10915" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="10917" href="Graded.Modality.html#949" class="Function">ω</a><a id="10918" class="Symbol">)</a> <a id="10920" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="10923" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>  <a id="10927" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="10928" class="Symbol">)</a>
    <a id="10934" class="Keyword">where</a>
    <a id="10944" href="Graded.Erasure.Extraction.Non-terminating.html#10944" class="Function">▸λx∙xx′</a> <a id="10952" class="Symbol">:</a> <a id="10954" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10957" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="10960" href="Graded.Mode.html#1094" class="InductiveConstructor">𝟙ᵐ</a> <a id="10963" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="10965" href="Graded.Erasure.Extraction.Non-terminating.html#5413" class="Function">λx∙xx</a> <a id="10971" class="Symbol">{</a><a id="10972" class="Argument">n</a> <a id="10974" class="Symbol">=</a> <a id="10976" href="Graded.Erasure.Extraction.Non-terminating.html#10277" class="Bound">n</a><a id="10977" class="Symbol">}</a> <a id="10979" href="Graded.Erasure.Extraction.Non-terminating.html#10273" class="Bound">p</a>
    <a id="10985" href="Graded.Erasure.Extraction.Non-terminating.html#10944" class="Function">▸λx∙xx′</a> <a id="10993" class="Symbol">=</a> <a id="10995" href="Graded.Erasure.Extraction.Non-terminating.html#6765" class="Function">▸λx∙xx</a> <a id="11002" href="Graded.Erasure.Extraction.Non-terminating.html#10280" class="Bound">ok</a> <a id="11005" href="Graded.Erasure.Extraction.Non-terminating.html#10283" class="Bound">p≤𝟘</a>

<a id="11010" class="Comment">------------------------------------------------------------------------</a>
<a id="11083" class="Comment">-- The term former loops</a>

<a id="11109" class="Keyword">opaque</a>

  <a id="11119" class="Comment">-- A term for which the extraction does not terminate if erasable</a>
  <a id="11187" class="Comment">-- arguments are removed entirely and strict applications are used</a>
  <a id="11256" class="Comment">-- (if ω is non-zero).</a>

  <a id="loops"></a><a id="11282" href="Graded.Erasure.Extraction.Non-terminating.html#11282" class="Function">loops</a> <a id="11288" class="Symbol">:</a> <a id="11290" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="11292" class="Symbol">→</a> <a id="11294" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="11299" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a>
  <a id="11303" href="Graded.Erasure.Extraction.Non-terminating.html#11282" class="Function">loops</a> <a id="11309" href="Graded.Erasure.Extraction.Non-terminating.html#11309" class="Bound">p</a> <a id="11311" class="Symbol">=</a> <a id="11313" href="Definition.Untyped.html#1370" class="InductiveConstructor">lam</a> <a id="11317" href="Graded.Modality.html#949" class="Function">ω</a> <a id="11319" href="Definition.Untyped.html#1702" class="InductiveConstructor">zero</a> <a id="11324" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">∘⟨</a> <a id="11327" href="Graded.Modality.html#949" class="Function">ω</a> <a id="11329" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">⟩</a> <a id="11331" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a> <a id="11348" href="Graded.Erasure.Extraction.Non-terminating.html#11309" class="Bound">p</a>

<a id="11351" class="Keyword">opaque</a>
  <a id="11360" class="Keyword">unfolding</a> <a id="11370" href="Graded.Erasure.Extraction.Non-terminating.html#11282" class="Function">loops</a>

  <a id="11379" class="Comment">-- An extraction lemma for loops.</a>

  <a id="erase-loops"></a><a id="11416" href="Graded.Erasure.Extraction.Non-terminating.html#11416" class="Function">erase-loops</a> <a id="11428" class="Symbol">:</a>
    <a id="11434" class="Symbol">⦃</a> <a id="11436" href="Graded.Erasure.Extraction.Non-terminating.html#11436" class="Bound">𝟘-well-behaved</a> <a id="11451" class="Symbol">:</a> <a id="11453" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="11475" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="11477" href="Graded.Modality.html#9717" class="Function">semiring-with-meet</a> <a id="11496" class="Symbol">⦄</a> <a id="11498" class="Symbol">→</a>
    <a id="11504" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11511" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11516" href="Graded.Erasure.Extraction.Non-terminating.html#2672" class="Generalizable">s</a> <a id="11518" class="Symbol">(</a><a id="11519" href="Graded.Erasure.Extraction.Non-terminating.html#11282" class="Function">loops</a> <a id="11525" class="Symbol">{</a><a id="11526" class="Argument">n</a> <a id="11528" class="Symbol">=</a> <a id="11530" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a><a id="11531" class="Symbol">}</a> <a id="11533" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a><a id="11534" class="Symbol">)</a> <a id="11536" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="11542" class="InductiveConstructor">T.lam</a> <a id="11548" class="InductiveConstructor">T.zero</a> <a id="11555" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11560" href="Graded.Erasure.Extraction.Non-terminating.html#2672" class="Generalizable">s</a> <a id="11562" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="11564" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="11569" href="Graded.Erasure.Extraction.Non-terminating.html#2672" class="Generalizable">s</a>
  <a id="11573" href="Graded.Erasure.Extraction.Non-terminating.html#11416" class="Function">erase-loops</a> <a id="11585" class="Symbol">{</a><a id="11586" href="Graded.Erasure.Extraction.Non-terminating.html#11586" class="Bound">s</a><a id="11587" class="Symbol">}</a> <a id="11589" class="Symbol">{</a><a id="11590" href="Graded.Erasure.Extraction.Non-terminating.html#11590" class="Bound">p</a><a id="11591" class="Symbol">}</a> <a id="11593" class="Symbol">=</a>
    <a id="11599" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11606" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11611" href="Graded.Erasure.Extraction.Non-terminating.html#11586" class="Bound">s</a> <a id="11613" class="Symbol">(</a><a id="11614" href="Definition.Untyped.html#1370" class="InductiveConstructor">lam</a> <a id="11618" href="Graded.Modality.html#949" class="Function">ω</a> <a id="11620" href="Definition.Untyped.html#1702" class="InductiveConstructor">zero</a> <a id="11625" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">∘⟨</a> <a id="11628" href="Graded.Modality.html#949" class="Function">ω</a> <a id="11630" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">⟩</a> <a id="11632" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a> <a id="11649" href="Graded.Erasure.Extraction.Non-terminating.html#11590" class="Bound">p</a><a id="11650" class="Symbol">)</a>  <a id="11653" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="11656" href="Graded.Erasure.Extraction.Properties.html#4109" class="Function">∘-≢𝟘</a> <a id="11661" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a> <a id="11665" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="11672" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11679" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11684" href="Graded.Erasure.Extraction.Non-terminating.html#11586" class="Bound">s</a> <a id="11686" class="Symbol">(</a><a id="11687" href="Definition.Untyped.html#1370" class="InductiveConstructor">lam</a> <a id="11691" href="Graded.Modality.html#949" class="Function">ω</a> <a id="11693" href="Definition.Untyped.html#1702" class="InductiveConstructor">zero</a><a id="11697" class="Symbol">)</a> <a id="11699" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11704" href="Graded.Erasure.Extraction.Non-terminating.html#11586" class="Bound">s</a> <a id="11706" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
    <a id="11712" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11719" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11724" href="Graded.Erasure.Extraction.Non-terminating.html#11586" class="Bound">s</a> <a id="11726" class="Symbol">(</a><a id="11727" href="Graded.Erasure.Extraction.Non-terminating.html#8021" class="Function">extracts-to-loop</a> <a id="11744" href="Graded.Erasure.Extraction.Non-terminating.html#11590" class="Bound">p</a><a id="11745" class="Symbol">)</a>                    <a id="11766" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="11769" href="Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">PE.cong₂</a> <a id="11778" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T._∘⟨</a> <a id="11784" class="Symbol">_</a> <a id="11786" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩_</a> <a id="11789" class="Symbol">(</a><a id="11790" href="Graded.Erasure.Extraction.Properties.html#4431" class="Function">lam-≢𝟘</a> <a id="11797" class="Symbol">_</a> <a id="11799" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a><a id="11802" class="Symbol">)</a>
                                                             <a id="11865" href="Graded.Erasure.Extraction.Non-terminating.html#8252" class="Function">erase-extracts-to-loop</a> <a id="11888" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="11894" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="11900" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="11907" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11912" href="Graded.Erasure.Extraction.Non-terminating.html#11586" class="Bound">s</a> <a id="11914" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="11916" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="11921" href="Graded.Erasure.Extraction.Non-terminating.html#11586" class="Bound">s</a>                          <a id="11948" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="11954" class="Keyword">where</a>
    <a id="11964" class="Keyword">open</a> <a id="11969" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="12008" class="Keyword">opaque</a>

  <a id="12018" class="Comment">-- If ω is non-zero, erasable arguments are removed entirely, and</a>
  <a id="12086" class="Comment">-- strict applications are used, then the extraction of loops p does</a>
  <a id="12157" class="Comment">-- not reduce to a value.</a>

  <a id="loops-does-not-reduce-to-a-value"></a><a id="12186" href="Graded.Erasure.Extraction.Non-terminating.html#12186" class="Function">loops-does-not-reduce-to-a-value</a> <a id="12219" class="Symbol">:</a>
    <a id="12225" class="Symbol">⦃</a> <a id="12227" href="Graded.Erasure.Extraction.Non-terminating.html#12227" class="Bound">𝟘-well-behaved</a> <a id="12242" class="Symbol">:</a> <a id="12244" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="12266" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="12268" href="Graded.Modality.html#9717" class="Function">semiring-with-meet</a> <a id="12287" class="Symbol">⦄</a> <a id="12289" class="Symbol">→</a>
    <a id="12295" href="Graded.Erasure.Target.html#6123" class="Datatype">T.Value</a> <a id="12303" href="Graded.Erasure.Extraction.Non-terminating.html#2647" class="Generalizable">v</a> <a id="12305" class="Symbol">→</a>
    <a id="12311" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="12313" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="12320" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="12325" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12332" class="Symbol">(</a><a id="12333" href="Graded.Erasure.Extraction.Non-terminating.html#11282" class="Function">loops</a> <a id="12339" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a><a id="12340" class="Symbol">)</a> <a id="12342" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12347" href="Graded.Erasure.Extraction.Non-terminating.html#2647" class="Generalizable">v</a>
  <a id="12351" href="Graded.Erasure.Extraction.Non-terminating.html#12186" class="Function">loops-does-not-reduce-to-a-value</a> <a id="12384" class="Symbol">{</a><a id="12385" href="Graded.Erasure.Extraction.Non-terminating.html#12385" class="Bound">v</a><a id="12386" class="Symbol">}</a> <a id="12388" class="Symbol">{</a><a id="12389" href="Graded.Erasure.Extraction.Non-terminating.html#12389" class="Bound">p</a><a id="12390" class="Symbol">}</a> <a id="12392" href="Graded.Erasure.Extraction.Non-terminating.html#12392" class="Bound">v-value</a> <a id="12400" class="Symbol">=</a>
    <a id="12406" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="12413" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="12418" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12425" class="Symbol">(</a><a id="12426" href="Graded.Erasure.Extraction.Non-terminating.html#11282" class="Function">loops</a> <a id="12432" href="Graded.Erasure.Extraction.Non-terminating.html#12389" class="Bound">p</a><a id="12433" class="Symbol">)</a> <a id="12435" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12440" href="Graded.Erasure.Extraction.Non-terminating.html#12385" class="Bound">v</a>            <a id="12453" href="Tools.Function.html#1025" class="Function">≡⟨</a> <a id="12456" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="12464" class="Symbol">(</a><a id="12465" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T._⇒*</a> <a id="12471" class="Symbol">_)</a> <a id="12474" href="Graded.Erasure.Extraction.Non-terminating.html#11416" class="Function">erase-loops</a> <a id="12486" href="Tools.Function.html#1025" class="Function">⟩→</a>
    <a id="12493" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="12499" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="12506" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="12511" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12518" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="12520" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12525" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12532" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12537" href="Graded.Erasure.Extraction.Non-terminating.html#12385" class="Bound">v</a>  <a id="12540" href="Tools.Function.html#911" class="Function">→⟨</a> <a id="12543" href="Graded.Erasure.Extraction.Non-terminating.html#12619" class="Function">helper</a> <a id="12550" href="Tools.Function.html#911" class="Function">⟩</a>
    <a id="12556" href="Data.Empty.html#914" class="Function">⊥</a>                                              <a id="12603" href="Tools.Function.html#1139" class="Function Operator">□</a>
    <a id="12609" class="Keyword">where</a>
    <a id="12619" href="Graded.Erasure.Extraction.Non-terminating.html#12619" class="Function">helper</a> <a id="12626" class="Symbol">:</a> <a id="12628" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="12630" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="12636" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="12643" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="12648" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12655" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="12657" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12662" href="Graded.Erasure.Extraction.Non-terminating.html#2672" class="Generalizable">s</a> <a id="12664" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12669" href="Graded.Erasure.Extraction.Non-terminating.html#12385" class="Bound">v</a>
    <a id="12675" href="Graded.Erasure.Extraction.Non-terminating.html#12619" class="Function">helper</a> <a id="12682" href="Graded.Erasure.Target.html#7893" class="InductiveConstructor">T.refl</a> <a id="12689" class="Symbol">=</a>
      <a id="12697" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="12702" href="Graded.Erasure.Extraction.Non-terminating.html#12392" class="Bound">v-value</a> <a id="12710" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="12713" class="Symbol">λ</a> <a id="12715" class="Symbol">()</a>
    <a id="12722" href="Graded.Erasure.Extraction.Non-terminating.html#12619" class="Function">helper</a> <a id="12729" class="Symbol">(</a><a id="12730" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12738" class="Symbol">(</a><a id="12739" href="Graded.Erasure.Target.html#7049" class="InductiveConstructor">T.app-subst</a> <a id="12751" class="Symbol">())</a>     <a id="12759" class="Symbol">_)</a>
    <a id="12766" href="Graded.Erasure.Extraction.Non-terminating.html#12619" class="Function">helper</a> <a id="12773" class="Symbol">(</a><a id="12774" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12782" class="Symbol">(</a><a id="12783" href="Graded.Erasure.Target.html#7197" class="InductiveConstructor">T.β-red</a> <a id="12791" href="Graded.Erasure.Extraction.Non-terminating.html#12791" class="Bound">loop-value</a><a id="12801" class="Symbol">)</a> <a id="12803" class="Symbol">_)</a> <a id="12806" class="Symbol">=</a>
      <a id="12814" href="Graded.Erasure.Target.Non-terminating.html#1375" class="Function">¬loop⇒*</a> <a id="12822" href="Graded.Erasure.Extraction.Non-terminating.html#12791" class="Bound">loop-value</a> <a id="12833" href="Graded.Erasure.Target.html#7893" class="InductiveConstructor">T.refl</a>
    <a id="12844" href="Graded.Erasure.Extraction.Non-terminating.html#12619" class="Function">helper</a> <a id="12851" class="Symbol">(</a><a id="12852" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12860" class="Symbol">(</a><a id="12861" href="Graded.Erasure.Target.html#7103" class="InductiveConstructor">T.app-subst-arg</a> <a id="12877" class="Symbol">_</a> <a id="12879" href="Graded.Erasure.Extraction.Non-terminating.html#12879" class="Bound">loop⇒</a><a id="12884" class="Symbol">)</a> <a id="12886" href="Graded.Erasure.Extraction.Non-terminating.html#12886" class="Bound">⇒*v</a><a id="12889" class="Symbol">)</a>
      <a id="12897" class="Keyword">rewrite</a> <a id="12905" href="Graded.Erasure.Target.Properties.Reduction.html#2120" class="Function">redDet</a> <a id="12912" class="Symbol">_</a> <a id="12914" href="Graded.Erasure.Extraction.Non-terminating.html#12879" class="Bound">loop⇒</a> <a id="12920" href="Graded.Erasure.Target.Non-terminating.html#941" class="Function">loop⇒loop</a> <a id="12930" class="Symbol">=</a>
      <a id="12938" href="Graded.Erasure.Extraction.Non-terminating.html#12619" class="Function">helper</a> <a id="12945" href="Graded.Erasure.Extraction.Non-terminating.html#12886" class="Bound">⇒*v</a>

<a id="12950" class="Keyword">opaque</a>
  <a id="12959" class="Keyword">unfolding</a> <a id="12969" href="Graded.Erasure.Extraction.Non-terminating.html#11282" class="Function">loops</a>

  <a id="12978" class="Comment">-- A typing rule for loops.</a>

  <a id="⊢loops"></a><a id="13009" href="Graded.Erasure.Extraction.Non-terminating.html#13009" class="Function">⊢loops</a> <a id="13016" class="Symbol">:</a>
    <a id="13022" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="13032" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="13034" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="13036" class="Symbol">→</a>
    <a id="13042" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="13052" href="Graded.Modality.html#949" class="Function">ω</a> <a id="13054" href="Graded.Erasure.Extraction.Non-terminating.html#2631" class="Generalizable">q</a> <a id="13056" class="Symbol">→</a>
    <a id="13062" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="13072" class="Symbol">(</a><a id="13073" href="Graded.Modality.html#949" class="Function">ω</a> <a id="13075" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="13077" href="Graded.Modality.html#949" class="Function">ω</a><a id="13078" class="Symbol">)</a> <a id="13080" href="Graded.Erasure.Extraction.Non-terminating.html#2631" class="Generalizable">q</a> <a id="13082" class="Symbol">→</a>
    <a id="13088" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="13090" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a> <a id="13092" class="Symbol">→</a>
    <a id="13098" href="Graded.Erasure.Extraction.Non-terminating.html#2556" class="Generalizable">Γ</a> <a id="13100" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="13102" href="Graded.Erasure.Extraction.Non-terminating.html#11282" class="Function">loops</a> <a id="13108" href="Graded.Erasure.Extraction.Non-terminating.html#2631" class="Generalizable">q</a> <a id="13110" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="13112" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
  <a id="13116" href="Graded.Erasure.Extraction.Non-terminating.html#13009" class="Function">⊢loops</a> <a id="13123" href="Graded.Erasure.Extraction.Non-terminating.html#13123" class="Bound">𝟘-ok</a> <a id="13128" href="Graded.Erasure.Extraction.Non-terminating.html#13128" class="Bound">ω-ok</a> <a id="13133" href="Graded.Erasure.Extraction.Non-terminating.html#13133" class="Bound">ω+ω-ok</a> <a id="13140" href="Graded.Erasure.Extraction.Non-terminating.html#13140" class="Bound">⊢Γ</a> <a id="13143" class="Symbol">=</a>
    <a id="13149" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="13155" href="Graded.Erasure.Extraction.Non-terminating.html#13128" class="Bound">ω-ok</a> <a id="13160" class="Symbol">(</a><a id="13161" href="Definition.Typed.html#3118" class="InductiveConstructor">zeroⱼ</a> <a id="13167" class="Symbol">(</a><a id="13168" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="13170" href="Definition.Typed.html#1440" class="InductiveConstructor">ΠΣⱼ</a> <a id="13174" href="Graded.Erasure.Extraction.Non-terminating.html#2844" class="Function">Empty⊢ℕ</a> <a id="13182" href="Graded.Erasure.Extraction.Non-terminating.html#13123" class="Bound">𝟘-ok</a><a id="13186" class="Symbol">))</a> <a id="13189" href="Definition.Typed.html#2390" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="13196" href="Graded.Erasure.Extraction.Non-terminating.html#9633" class="Function">⊢extracts-to-loop</a> <a id="13214" href="Graded.Erasure.Extraction.Non-terminating.html#13123" class="Bound">𝟘-ok</a> <a id="13219" href="Graded.Erasure.Extraction.Non-terminating.html#13128" class="Bound">ω-ok</a> <a id="13224" href="Graded.Erasure.Extraction.Non-terminating.html#13133" class="Bound">ω+ω-ok</a> <a id="13231" href="Graded.Erasure.Extraction.Non-terminating.html#13140" class="Bound">⊢Γ</a>
    <a id="13238" class="Keyword">where</a>
    <a id="13248" class="Keyword">open</a> <a id="13253" href="Graded.Erasure.Extraction.Non-terminating.html#2741" class="Module">Lemmas</a> <a id="13260" href="Graded.Erasure.Extraction.Non-terminating.html#13140" class="Bound">⊢Γ</a>

<a id="13264" class="Keyword">opaque</a>
  <a id="13273" class="Keyword">unfolding</a> <a id="13283" href="Graded.Erasure.Extraction.Non-terminating.html#11282" class="Function">loops</a>

  <a id="13292" class="Comment">-- A usage rule for loops.</a>

  <a id="▸loops"></a><a id="13322" href="Graded.Erasure.Extraction.Non-terminating.html#13322" class="Function">▸loops</a> <a id="13329" class="Symbol">:</a>
    <a id="13335" class="Symbol">⦃</a> <a id="13337" href="Graded.Erasure.Extraction.Non-terminating.html#13337" class="Bound">𝟘-well-behaved</a> <a id="13352" class="Symbol">:</a> <a id="13354" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="13376" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="13378" href="Graded.Modality.html#9717" class="Function">semiring-with-meet</a> <a id="13397" class="Symbol">⦄</a> <a id="13399" class="Symbol">→</a>
    <a id="13405" href="Graded.Usage.Restrictions.html#1782" class="Field">Emptyrec-allowed</a> <a id="13422" class="InductiveConstructor">𝟙ᵐ</a> <a id="13425" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="13427" class="Symbol">→</a>
    <a id="13433" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a> <a id="13435" href="Graded.Modality.html#1384" class="Function Operator">≤</a> <a id="13437" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="13439" class="Symbol">→</a>
    <a id="13445" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="13448" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="13451" class="InductiveConstructor">𝟙ᵐ</a> <a id="13454" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="13456" href="Graded.Erasure.Extraction.Non-terminating.html#11282" class="Function">loops</a> <a id="13462" class="Symbol">{</a><a id="13463" class="Argument">n</a> <a id="13465" class="Symbol">=</a> <a id="13467" href="Graded.Erasure.Extraction.Non-terminating.html#2536" class="Generalizable">n</a><a id="13468" class="Symbol">}</a> <a id="13470" href="Graded.Erasure.Extraction.Non-terminating.html#2629" class="Generalizable">p</a>
  <a id="13474" href="Graded.Erasure.Extraction.Non-terminating.html#13322" class="Function">▸loops</a> <a id="13481" href="Graded.Erasure.Extraction.Non-terminating.html#13481" class="Bound">ok</a> <a id="13484" href="Graded.Erasure.Extraction.Non-terminating.html#13484" class="Bound">p≤𝟘</a> <a id="13488" class="Symbol">=</a> <a id="13490" href="Graded.Usage.html#16559" class="InductiveConstructor">sub</a>
    <a id="13498" class="Symbol">(</a><a id="13499" href="Graded.Usage.html#8912" class="InductiveConstructor">lamₘ</a>
       <a id="13511" class="Symbol">(</a><a id="13512" href="Graded.Usage.html#16559" class="InductiveConstructor">sub</a> <a id="13516" href="Graded.Usage.html#9731" class="InductiveConstructor">zeroₘ</a> <a id="13522" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="13524" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
          <a id="13540" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="13543" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="13545" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="13547" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="13549" href="Graded.Modality.html#949" class="Function">ω</a>  <a id="13552" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="13555" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="13563" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="13565" href="Graded.Modality.html#3820" class="Function">·-identityˡ</a> <a id="13577" class="Symbol">_</a> <a id="13579" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
          <a id="13591" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="13594" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="13596" href="Graded.Modality.html#949" class="Function">ω</a>      <a id="13603" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="13606" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="13614" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="13616" href="Graded.Modality.Properties.Addition.html#3754" class="Function">ω≤𝟘</a> <a id="13620" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
          <a id="13632" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>          <a id="13644" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="13645" class="Symbol">)</a> <a id="13647" href="Graded.Usage.html#8981" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="13655" href="Graded.Usage.Properties.html#2559" class="Function">▸-cong</a> <a id="13662" class="Symbol">(</a><a id="13663" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="13670" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="13672" href="Graded.Mode.html#19805" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="13681" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a><a id="13684" class="Symbol">)</a>
       <a id="13693" class="Symbol">(</a><a id="13694" href="Graded.Erasure.Extraction.Non-terminating.html#10080" class="Function">▸extracts-to-loop</a> <a id="13712" href="Graded.Erasure.Extraction.Non-terminating.html#13481" class="Bound">ok</a> <a id="13715" href="Graded.Erasure.Extraction.Non-terminating.html#13484" class="Bound">p≤𝟘</a><a id="13718" class="Symbol">))</a>
    <a id="13725" class="Symbol">(</a><a id="13726" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="13739" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>             <a id="13754" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="13758" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="13767" class="Symbol">(</a><a id="13768" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="13781" class="Symbol">_)</a> <a id="13784" class="Symbol">(</a><a id="13785" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="13794" class="Symbol">_)</a> <a id="13797" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="13806" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="13809" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="13812" href="Graded.Modality.html#949" class="Function">ω</a> <a id="13814" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="13817" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>  <a id="13821" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="13822" class="Symbol">)</a>
    <a id="13828" class="Keyword">where</a>
    <a id="13838" class="Keyword">open</a> <a id="13843" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>
</pre></body></html>