<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Heap.Soundness</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Resource-correctness of the heap semantics.</a>
<a id="121" class="Comment">------------------------------------------------------------------------</a>

<a id="195" class="Keyword">open</a> <a id="200" class="Keyword">import</a> <a id="207" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="223" class="Keyword">open</a> <a id="228" class="Keyword">import</a> <a id="235" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="261" class="Keyword">open</a> <a id="266" class="Keyword">import</a> <a id="273" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>
<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Tools.Bool.html" class="Module">Tools.Bool</a>
<a id="326" class="Keyword">import</a> <a id="333" href="Graded.Heap.Bisimilarity.html" class="Module">Graded.Heap.Bisimilarity</a>

<a id="359" class="Keyword">module</a> <a id="366" href="Graded.Heap.Soundness.html" class="Module">Graded.Heap.Soundness</a>
  <a id="390" class="Symbol">{</a><a id="391" href="Graded.Heap.Soundness.html#391" class="Bound">a</a><a id="392" class="Symbol">}</a> <a id="394" class="Symbol">{</a><a id="395" href="Graded.Heap.Soundness.html#395" class="Bound">M</a> <a id="397" class="Symbol">:</a> <a id="399" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="403" href="Graded.Heap.Soundness.html#391" class="Bound">a</a><a id="404" class="Symbol">}</a> <a id="406" class="Symbol">{</a><a id="407" href="Graded.Heap.Soundness.html#407" class="Bound">𝕄</a> <a id="409" class="Symbol">:</a> <a id="411" href="Graded.Modality.html#8202" class="Record">Modality</a> <a id="420" href="Graded.Heap.Soundness.html#395" class="Bound">M</a><a id="421" class="Symbol">}</a>
  <a id="425" class="Symbol">{</a><a id="426" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="429" class="Symbol">:</a> <a id="431" href="Graded.Usage.Restrictions.html#750" class="Record">Usage-restrictions</a> <a id="450" href="Graded.Heap.Soundness.html#407" class="Bound">𝕄</a><a id="451" class="Symbol">}</a>
  <a id="455" class="Symbol">(</a><a id="456" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a> <a id="459" class="Symbol">:</a> <a id="461" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="479" href="Graded.Heap.Soundness.html#407" class="Bound">𝕄</a><a id="480" class="Symbol">)</a>
  <a id="484" class="Symbol">(</a><a id="485" href="Graded.Heap.Soundness.html#485" class="Bound">erased-heap</a> <a id="497" class="Symbol">:</a> <a id="499" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="503" class="Symbol">)</a>
  <a id="507" class="Symbol">(</a><a id="508" class="Keyword">open</a> <a id="513" href="Graded.Heap.Bisimilarity.html" class="Module">Graded.Heap.Bisimilarity</a> <a id="538" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="541" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a> <a id="544" href="Graded.Heap.Soundness.html#485" class="Bound">erased-heap</a><a id="555" class="Symbol">)</a>
  <a id="559" class="Symbol">(</a><a id="560" href="Graded.Heap.Soundness.html#560" class="Bound">As</a> <a id="563" class="Symbol">:</a> <a id="565" href="Graded.Heap.Bisimilarity.html#1861" class="Record">Assumptions</a><a id="576" class="Symbol">)</a>
  <a id="580" class="Keyword">where</a>

<a id="587" class="Keyword">open</a> <a id="592" href="Definition.Typed.Restrictions.html#752" class="Module">Type-restrictions</a> <a id="610" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a>
<a id="613" class="Keyword">open</a> <a id="618" href="Graded.Usage.Restrictions.html#750" class="Module">Usage-restrictions</a> <a id="637" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a>
<a id="640" class="Keyword">open</a> <a id="645" href="Graded.Modality.html#8202" class="Module">Modality</a> <a id="654" href="Graded.Heap.Soundness.html#407" class="Bound">𝕄</a>
<a id="656" class="Keyword">open</a> <a id="661" href="Graded.Heap.Bisimilarity.html#1861" class="Module">Assumptions</a> <a id="673" href="Graded.Heap.Soundness.html#560" class="Bound">As</a>

<a id="677" class="Keyword">open</a> <a id="682" class="Keyword">import</a> <a id="689" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="701" class="Keyword">open</a> <a id="706" class="Keyword">import</a> <a id="713" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="728" class="Keyword">open</a> <a id="733" class="Keyword">import</a> <a id="740" href="Tools.Nat.html" class="Module">Tools.Nat</a>
<a id="750" class="Keyword">open</a> <a id="755" class="Keyword">import</a> <a id="762" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="776" class="Keyword">import</a> <a id="783" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="811" class="Symbol">as</a> <a id="814" class="Module">PE</a>
<a id="817" class="Keyword">open</a> <a id="822" class="Keyword">import</a> <a id="829" href="Tools.Relation.html" class="Module">Tools.Relation</a>
<a id="844" class="Keyword">import</a> <a id="851" href="Tools.Reasoning.PartialOrder.html" class="Module">Tools.Reasoning.PartialOrder</a> <a id="880" class="Symbol">as</a> <a id="883" class="Module">RPo</a>
<a id="887" class="Keyword">open</a> <a id="892" class="Keyword">import</a> <a id="899" href="Tools.Sum.html" class="Module">Tools.Sum</a> <a id="909" class="Keyword">hiding</a> <a id="916" class="Symbol">(</a><a id="917" href="Tools.Sum.html#315" class="Function">id</a><a id="919" class="Symbol">;</a> <a id="921" href="Tools.Sum.html#397" class="Function">sym</a><a id="924" class="Symbol">)</a>

<a id="927" class="Keyword">open</a> <a id="932" class="Keyword">import</a> <a id="939" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="958" href="Graded.Heap.Soundness.html#395" class="Bound">M</a>
<a id="960" class="Keyword">open</a> <a id="965" class="Keyword">import</a> <a id="972" href="Definition.Untyped.Neutral.html" class="Module">Definition.Untyped.Neutral</a> <a id="999" href="Graded.Heap.Soundness.html#395" class="Bound">M</a> <a id="1001" href="Definition.Typed.Restrictions.html#876" class="Function">type-variant</a>
<a id="1014" class="Keyword">open</a> <a id="1019" class="Keyword">import</a> <a id="1026" href="Definition.Untyped.Inversion.html" class="Module">Definition.Untyped.Inversion</a> <a id="1055" href="Graded.Heap.Soundness.html#395" class="Bound">M</a>
<a id="1057" class="Keyword">open</a> <a id="1062" class="Keyword">import</a> <a id="1069" href="Definition.Untyped.Properties.html" class="Module">Definition.Untyped.Properties</a> <a id="1099" href="Graded.Heap.Soundness.html#395" class="Bound">M</a>
<a id="1101" class="Keyword">open</a> <a id="1106" class="Keyword">import</a> <a id="1113" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="1130" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a>
<a id="1133" class="Keyword">open</a> <a id="1138" class="Keyword">import</a> <a id="1145" href="Definition.Typed.Consequences.Canonicity.html" class="Module">Definition.Typed.Consequences.Canonicity</a> <a id="1186" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a>
<a id="1189" class="Keyword">open</a> <a id="1194" class="Keyword">import</a> <a id="1201" href="Definition.Typed.Consequences.Inversion.html" class="Module">Definition.Typed.Consequences.Inversion</a> <a id="1241" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a>
<a id="1244" class="Keyword">open</a> <a id="1249" class="Keyword">import</a> <a id="1256" href="Definition.Typed.EqRelInstance.html" class="Module">Definition.Typed.EqRelInstance</a> <a id="1287" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a>
<a id="1290" class="Keyword">open</a> <a id="1295" class="Keyword">import</a> <a id="1302" href="Definition.LogicalRelation.html" class="Module">Definition.LogicalRelation</a> <a id="1329" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a>
<a id="1332" class="Keyword">open</a> <a id="1337" class="Keyword">import</a> <a id="1344" href="Definition.LogicalRelation.Fundamental.Reducibility.html" class="Module">Definition.LogicalRelation.Fundamental.Reducibility</a> <a id="1396" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a>
<a id="1399" class="Keyword">open</a> <a id="1404" class="Keyword">import</a> <a id="1411" href="Definition.LogicalRelation.Substitution.Introductions.Nat.html" class="Module">Definition.LogicalRelation.Substitution.Introductions.Nat</a> <a id="1469" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a>

<a id="1473" class="Keyword">open</a> <a id="1478" class="Keyword">import</a> <a id="1485" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1500" href="Graded.Heap.Soundness.html#407" class="Bound">𝕄</a>
<a id="1502" class="Keyword">open</a> <a id="1507" class="Keyword">import</a> <a id="1514" href="Graded.Context.Properties.html" class="Module">Graded.Context.Properties</a> <a id="1540" href="Graded.Heap.Soundness.html#407" class="Bound">𝕄</a>
<a id="1542" class="Keyword">open</a> <a id="1547" class="Keyword">import</a> <a id="1554" href="Graded.Context.Weakening.html" class="Module">Graded.Context.Weakening</a> <a id="1579" href="Graded.Heap.Soundness.html#407" class="Bound">𝕄</a>
<a id="1581" class="Keyword">open</a> <a id="1586" class="Keyword">import</a> <a id="1593" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="1605" href="Graded.Heap.Soundness.html#407" class="Bound">𝕄</a>
<a id="1607" class="Keyword">open</a> <a id="1612" class="Keyword">import</a> <a id="1619" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="1632" href="Graded.Heap.Soundness.html#407" class="Bound">𝕄</a> <a id="1634" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a>
<a id="1637" class="Keyword">open</a> <a id="1642" class="Keyword">import</a> <a id="1649" href="Graded.Usage.Inversion.html" class="Module">Graded.Usage.Inversion</a> <a id="1672" href="Graded.Heap.Soundness.html#407" class="Bound">𝕄</a> <a id="1674" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a>

<a id="1678" class="Keyword">open</a> <a id="1683" class="Keyword">import</a> <a id="1690" href="Graded.Heap.Options.html" class="Module">Graded.Heap.Options</a>
<a id="1710" class="Keyword">open</a> <a id="1715" class="Keyword">import</a> <a id="1722" href="Graded.Heap.Untyped.html" class="Module">Graded.Heap.Untyped</a> <a id="1742" href="Definition.Typed.Restrictions.html#876" class="Function">type-variant</a> <a id="1755" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a>
<a id="1758" class="Keyword">open</a> <a id="1763" class="Keyword">import</a> <a id="1770" href="Graded.Heap.Untyped.Properties.html" class="Module">Graded.Heap.Untyped.Properties</a> <a id="1801" href="Definition.Typed.Restrictions.html#876" class="Function">type-variant</a> <a id="1814" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a>
<a id="1817" class="Keyword">open</a> <a id="1822" class="Keyword">import</a> <a id="1829" href="Graded.Heap.Usage.html" class="Module">Graded.Heap.Usage</a> <a id="1847" href="Definition.Typed.Restrictions.html#876" class="Function">type-variant</a> <a id="1860" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="1863" href="Graded.Heap.Soundness.html#485" class="Bound">erased-heap</a>
<a id="1875" class="Keyword">open</a> <a id="1880" class="Keyword">import</a> <a id="1887" href="Graded.Heap.Usage.Properties.html" class="Module">Graded.Heap.Usage.Properties</a> <a id="1916" href="Definition.Typed.Restrictions.html#876" class="Function">type-variant</a> <a id="1929" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="1932" href="Graded.Heap.Soundness.html#485" class="Bound">erased-heap</a>
<a id="1944" class="Keyword">import</a> <a id="1951" href="Graded.Heap.Usage.Reduction.html" class="Module">Graded.Heap.Usage.Reduction</a> <a id="1979" href="Definition.Typed.Restrictions.html#876" class="Function">type-variant</a> <a id="1992" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="1995" href="Graded.Heap.Soundness.html#485" class="Bound">erased-heap</a> <a id="2007" class="Symbol">(</a><a id="2008" href="Graded.Heap.Options.html#1458" class="Function">tracking-and-ℕ-fullred-if</a> <a id="2034" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="2039" class="Symbol">)</a> <a id="2041" href="Graded.Heap.Bisimilarity.html#2040" class="Field">Unitʷ-η→</a> <a id="2050" class="Symbol">as</a> <a id="URᶠ"></a><a id="2053" href="Graded.Heap.Soundness.html#2053" class="Module">URᶠ</a>
<a id="2057" class="Keyword">import</a> <a id="2064" href="Graded.Heap.Usage.Reduction.html" class="Module">Graded.Heap.Usage.Reduction</a> <a id="2092" href="Definition.Typed.Restrictions.html#876" class="Function">type-variant</a> <a id="2105" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="2108" href="Graded.Heap.Soundness.html#485" class="Bound">erased-heap</a> <a id="2120" class="Symbol">(</a><a id="2121" href="Graded.Heap.Options.html#1458" class="Function">tracking-and-ℕ-fullred-if</a> <a id="2147" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="2151" class="Symbol">)</a> <a id="2153" href="Graded.Heap.Bisimilarity.html#2040" class="Field">Unitʷ-η→</a> <a id="2162" class="Symbol">as</a> <a id="URᵗ"></a><a id="2165" href="Graded.Heap.Soundness.html#2165" class="Module">URᵗ</a>
<a id="2169" class="Keyword">open</a> <a id="2174" class="Keyword">import</a> <a id="2181" href="Graded.Heap.Termination.html" class="Module">Graded.Heap.Termination</a> <a id="2205" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="2208" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a> <a id="2211" href="Graded.Heap.Soundness.html#485" class="Bound">erased-heap</a> <a id="2223" href="Graded.Heap.Soundness.html#560" class="Bound">As</a>
<a id="2226" class="Keyword">open</a> <a id="2231" class="Keyword">import</a> <a id="2238" href="Graded.Heap.Typed.html" class="Module">Graded.Heap.Typed</a> <a id="2256" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="2259" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a> <a id="2262" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
<a id="2268" class="Keyword">import</a> <a id="2275" href="Graded.Heap.Typed.html" class="Module">Graded.Heap.Typed</a> <a id="2293" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="2296" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a> <a id="2299" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="2304" class="Symbol">as</a> <a id="HTₜ"></a><a id="2307" href="Graded.Heap.Soundness.html#2307" class="Module">HTₜ</a>
<a id="2311" class="Keyword">open</a> <a id="2316" class="Keyword">import</a> <a id="2323" href="Graded.Heap.Typed.Reduction.html" class="Module">Graded.Heap.Typed.Reduction</a> <a id="2351" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="2354" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a> <a id="2357" class="Symbol">(</a><a id="2358" href="Graded.Heap.Options.html#1458" class="Function">tracking-and-ℕ-fullred-if</a> <a id="2384" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="2389" class="Symbol">)</a> <a id="2391" class="Keyword">hiding</a> <a id="2398" class="Symbol">(</a><a id="2399" href="Graded.Heap.Typed.Reduction.html#28350" class="Function">⇒*→≡</a><a id="2403" class="Symbol">)</a>
<a id="2405" class="Keyword">open</a> <a id="2410" class="Keyword">import</a> <a id="2417" href="Graded.Heap.Typed.Reduction.html" class="Module">Graded.Heap.Typed.Reduction</a> <a id="2445" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="2448" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a> <a id="2451" class="Symbol">(</a><a id="2452" href="Graded.Heap.Options.html#1458" class="Function">tracking-and-ℕ-fullred-if</a> <a id="2478" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="2482" class="Symbol">)</a> <a id="2484" class="Keyword">using</a> <a id="2490" class="Symbol">(</a><a id="2491" href="Graded.Heap.Typed.Reduction.html#28350" class="Function">⇒*→≡</a><a id="2495" class="Symbol">)</a>
<a id="2497" class="Keyword">open</a> <a id="2502" class="Keyword">import</a> <a id="2509" href="Graded.Heap.Typed.Properties.html" class="Module">Graded.Heap.Typed.Properties</a> <a id="2538" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="2541" href="Graded.Heap.Soundness.html#456" class="Bound">TR</a>
<a id="2544" class="Keyword">open</a> <a id="2549" class="Keyword">import</a> <a id="2556" href="Graded.Heap.Reduction.html" class="Module">Graded.Heap.Reduction</a> <a id="2578" href="Definition.Typed.Restrictions.html#876" class="Function">type-variant</a> <a id="2591" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="2594" class="Symbol">(</a><a id="2595" href="Graded.Heap.Options.html#1458" class="Function">tracking-and-ℕ-fullred-if</a> <a id="2621" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="2625" class="Symbol">)</a>
<a id="2627" class="Keyword">open</a> <a id="2632" class="Keyword">import</a> <a id="2639" href="Graded.Heap.Reduction.Properties.html" class="Module">Graded.Heap.Reduction.Properties</a> <a id="2672" href="Definition.Typed.Restrictions.html#876" class="Function">type-variant</a> <a id="2685" href="Graded.Heap.Soundness.html#426" class="Bound">UR</a> <a id="2688" class="Symbol">(</a><a id="2689" href="Graded.Heap.Options.html#1458" class="Function">tracking-and-ℕ-fullred-if</a> <a id="2715" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="2719" class="Symbol">)</a>
  <a id="2723" class="Keyword">using</a> <a id="2729" class="Symbol">(</a><a id="2730" href="Graded.Heap.Reduction.Properties.html#1410" class="Function Operator">_⇨*_</a><a id="2734" class="Symbol">;</a> <a id="2736" href="Graded.Heap.Reduction.Properties.html#12879" class="Function">++sucₛ-⇒*</a><a id="2745" class="Symbol">)</a>


<a id="2749" class="Keyword">private</a> <a id="2757" class="Keyword">variable</a>
  <a id="2768" href="Graded.Heap.Soundness.html#2768" class="Generalizable">k</a> <a id="2770" class="Symbol">:</a> <a id="2772" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="2778" href="Graded.Heap.Soundness.html#2778" class="Generalizable">n</a> <a id="2780" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a> <a id="2782" href="Graded.Heap.Soundness.html#2782" class="Generalizable">A</a> <a id="2784" class="Symbol">:</a> <a id="2786" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="2791" class="Symbol">_</a>
  <a id="2795" href="Graded.Heap.Soundness.html#2795" class="Generalizable">s</a> <a id="2797" class="Symbol">:</a> <a id="2799" href="Graded.Heap.Untyped.html#8799" class="Record">State</a> <a id="2805" class="Symbol">_</a> <a id="2807" class="Symbol">_</a> <a id="2809" class="Symbol">_</a>
  <a id="2813" href="Graded.Heap.Soundness.html#2813" class="Generalizable">γ</a> <a id="2815" href="Graded.Heap.Soundness.html#2815" class="Generalizable">δ</a> <a id="2817" href="Graded.Heap.Soundness.html#2817" class="Generalizable">η</a> <a id="2819" class="Symbol">:</a> <a id="2821" href="Graded.Context.html#692" class="Datatype">Conₘ</a> <a id="2826" class="Symbol">_</a>
  <a id="2830" href="Graded.Heap.Soundness.html#2830" class="Generalizable">Γ</a> <a id="2832" href="Graded.Heap.Soundness.html#2832" class="Generalizable">Δ</a> <a id="2834" class="Symbol">:</a> <a id="2836" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="2840" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="2845" class="Symbol">_</a>
  <a id="2849" href="Graded.Heap.Soundness.html#2849" class="Generalizable">H</a> <a id="2851" class="Symbol">:</a> <a id="2853" href="Graded.Heap.Untyped.html#5863" class="Datatype">Heap</a> <a id="2858" class="Symbol">_</a> <a id="2860" class="Symbol">_</a>
  <a id="2864" href="Graded.Heap.Soundness.html#2864" class="Generalizable">ρ</a> <a id="2866" class="Symbol">:</a> <a id="2868" href="Definition.Untyped.NotParametrised.html#2601" class="Datatype">Wk</a> <a id="2871" class="Symbol">_</a> <a id="2873" class="Symbol">_</a>
  <a id="2877" href="Graded.Heap.Soundness.html#2877" class="Generalizable">S</a> <a id="2879" class="Symbol">:</a> <a id="2881" href="Graded.Heap.Untyped.html#4594" class="Datatype">Stack</a> <a id="2887" class="Symbol">_</a>
  <a id="2891" href="Graded.Heap.Soundness.html#2891" class="Generalizable">m</a> <a id="2893" class="Symbol">:</a> <a id="2895" href="Graded.Mode.html#1062" class="Datatype">Mode</a>

<a id="2901" class="Keyword">opaque</a>

  <a id="2911" class="Comment">-- All well-typed and well-resourced states of type ℕ reduce to numerals</a>

  <a id="redNumeral"></a><a id="2987" href="Graded.Heap.Soundness.html#2987" class="Function">redNumeral</a> <a id="2998" class="Symbol">:</a> <a id="3000" class="Symbol">(</a><a id="3001" href="Graded.Usage.Restrictions.html#1638" class="Function">Emptyrec-allowed</a> <a id="3018" class="InductiveConstructor">𝟙ᵐ</a> <a id="3021" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="3023" class="Symbol">→</a> <a id="3025" href="Definition.Typed.html#21923" class="Function">Consistent</a> <a id="3036" href="Graded.Heap.Soundness.html#2832" class="Generalizable">Δ</a><a id="3037" class="Symbol">)</a>
             <a id="3052" class="Symbol">→</a> <a id="3054" href="Graded.Heap.Soundness.html#2832" class="Generalizable">Δ</a> <a id="3056" href="Definition.LogicalRelation.html#3071" class="Record Operator">⊩ℕ</a> <a id="3059" href="Graded.Heap.Soundness.html#2778" class="Generalizable">n</a> <a id="3061" href="Definition.LogicalRelation.html#3071" class="Record Operator">∷ℕ</a> <a id="3064" class="Symbol">→</a> <a id="3066" href="Graded.Heap.Soundness.html#2778" class="Generalizable">n</a> <a id="3068" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">PE.≡</a> <a id="3073" href="Graded.Heap.Untyped.html#9884" class="Function Operator">⦅</a> <a id="3075" href="Graded.Heap.Soundness.html#2795" class="Generalizable">s</a> <a id="3077" href="Graded.Heap.Untyped.html#9884" class="Function Operator">⦆</a> <a id="3079" class="Symbol">→</a> <a id="3081" href="Graded.Heap.Soundness.html#2832" class="Generalizable">Δ</a> <a id="3083" href="Graded.Heap.Typed.html#3888" class="Function Operator">⨾</a> <a id="3085" href="Graded.Heap.Soundness.html#2830" class="Generalizable">Γ</a> <a id="3087" href="Graded.Heap.Typed.html#3888" class="Function Operator">⊢</a> <a id="3089" href="Graded.Heap.Soundness.html#2795" class="Generalizable">s</a> <a id="3091" href="Graded.Heap.Typed.html#3888" class="Function Operator">∷</a> <a id="3093" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3095" class="Symbol">→</a> <a id="3097" href="Graded.Heap.Soundness.html#2813" class="Generalizable">γ</a> <a id="3099" href="Graded.Heap.Usage.html#3287" class="Function Operator">⨾</a> <a id="3101" href="Graded.Heap.Soundness.html#2815" class="Generalizable">δ</a> <a id="3103" href="Graded.Heap.Usage.html#3287" class="Function Operator">⨾</a> <a id="3105" href="Graded.Heap.Soundness.html#2817" class="Generalizable">η</a> <a id="3107" href="Graded.Heap.Usage.html#3287" class="Function Operator">▸</a> <a id="3109" href="Graded.Heap.Soundness.html#2795" class="Generalizable">s</a>
             <a id="3124" class="Symbol">→</a> <a id="3126" href="Tools.Product.html#1014" class="Function">∃₅</a> <a id="3129" class="Symbol">λ</a> <a id="3131" href="Graded.Heap.Soundness.html#3131" class="Bound">m</a> <a id="3133" href="Graded.Heap.Soundness.html#3133" class="Bound">n</a> <a id="3135" href="Graded.Heap.Soundness.html#3135" class="Bound">H</a> <a id="3137" class="Symbol">(</a><a id="3138" href="Graded.Heap.Soundness.html#3138" class="Bound">ρ</a> <a id="3140" class="Symbol">:</a> <a id="3142" href="Definition.Untyped.NotParametrised.html#2601" class="Datatype">Wk</a> <a id="3145" href="Graded.Heap.Soundness.html#3131" class="Bound">m</a> <a id="3147" href="Graded.Heap.Soundness.html#3133" class="Bound">n</a><a id="3148" class="Symbol">)</a> <a id="3150" href="Graded.Heap.Soundness.html#3150" class="Bound">t</a> <a id="3152" class="Symbol">→</a> <a id="3154" href="Graded.Heap.Soundness.html#2795" class="Generalizable">s</a> <a id="3156" href="Graded.Heap.Reduction.html#5867" class="Datatype Operator">⇒*</a> <a id="3159" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟨</a> <a id="3161" href="Graded.Heap.Soundness.html#3135" class="Bound">H</a> <a id="3163" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="3165" href="Graded.Heap.Soundness.html#3150" class="Bound">t</a> <a id="3167" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="3169" href="Graded.Heap.Soundness.html#3138" class="Bound">ρ</a> <a id="3171" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="3173" class="InductiveConstructor">ε</a> <a id="3175" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟩</a> <a id="3177" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3179" href="Definition.Untyped.html#3454" class="Datatype">Numeral</a> <a id="3187" href="Graded.Heap.Soundness.html#3150" class="Bound">t</a>
  <a id="3191" href="Graded.Heap.Soundness.html#2987" class="Function">redNumeral</a> <a id="3202" href="Graded.Heap.Soundness.html#3202" class="Bound">consistent</a> <a id="3213" class="Symbol">(</a><a id="3214" href="Definition.LogicalRelation.html#3184" class="InductiveConstructor">ℕₜ</a> <a id="3217" class="Symbol">_</a> <a id="3219" href="Graded.Heap.Soundness.html#3219" class="Bound">d</a> <a id="3221" href="Graded.Heap.Soundness.html#3221" class="Bound">n≡n</a> <a id="3225" class="Symbol">(</a><a id="3226" href="Definition.LogicalRelation.html#3411" class="InductiveConstructor">sucᵣ</a> <a id="3231" href="Graded.Heap.Soundness.html#3231" class="Bound">x</a><a id="3232" class="Symbol">))</a> <a id="3235" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a> <a id="3243" href="Graded.Heap.Soundness.html#3243" class="Bound">⊢s</a> <a id="3246" href="Graded.Heap.Soundness.html#3246" class="Bound">▸s</a> <a id="3249" class="Symbol">=</a>
    <a id="3255" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3260" href="Graded.Heap.Termination.html#2637" class="Function">whBisim</a> <a id="3268" href="Graded.Heap.Soundness.html#3202" class="Bound">consistent</a> <a id="3279" class="Symbol">(</a><a id="3280" href="Definition.Typed.html#20806" class="Field">redₜ</a> <a id="3285" href="Graded.Heap.Soundness.html#3219" class="Bound">d</a> <a id="3287" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3289" href="Definition.Untyped.Neutral.html#2535" class="InductiveConstructor">sucₙ</a><a id="3293" class="Symbol">)</a> <a id="3295" href="Graded.Heap.Soundness.html#3243" class="Bound">⊢s</a> <a id="3298" href="Graded.Heap.Soundness.html#3246" class="Bound">▸s</a> <a id="3301" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3304" class="Symbol">λ</a>
      <a id="3312" class="Symbol">(_</a> <a id="3315" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3317" class="Symbol">_</a> <a id="3319" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3321" href="Graded.Heap.Soundness.html#3321" class="Bound">H</a> <a id="3323" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3325" href="Graded.Heap.Soundness.html#3325" class="Bound">t</a> <a id="3327" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3329" href="Graded.Heap.Soundness.html#3329" class="Bound">ρ</a> <a id="3331" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3333" href="Graded.Heap.Soundness.html#3333" class="Bound">d′</a> <a id="3336" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3338" href="Graded.Heap.Soundness.html#3338" class="Bound">≡u</a> <a id="3341" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3343" href="Graded.Heap.Soundness.html#3343" class="Bound">v</a><a id="3344" class="Symbol">)</a> <a id="3346" class="Symbol">→</a>
    <a id="3352" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3357" href="Definition.Untyped.Inversion.html#6493" class="Function">subst-suc</a> <a id="3367" class="Symbol">{</a><a id="3368" class="Argument">t</a> <a id="3370" class="Symbol">=</a> <a id="3372" href="Definition.Untyped.html#9219" class="Function">wk</a> <a id="3375" href="Graded.Heap.Soundness.html#3329" class="Bound">ρ</a> <a id="3377" href="Graded.Heap.Soundness.html#3325" class="Bound">t</a><a id="3378" class="Symbol">}</a> <a id="3380" href="Graded.Heap.Soundness.html#3338" class="Bound">≡u</a> <a id="3383" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3386" class="Symbol">λ</a> <a id="3388" class="Symbol">{</a>
      <a id="3396" class="Symbol">(</a><a id="3397" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="3402" class="Symbol">(</a><a id="3403" href="Graded.Heap.Soundness.html#3403" class="Bound">x</a> <a id="3405" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3407" href="Graded.Heap.Soundness.html#3407" class="Bound">≡x</a><a id="3409" class="Symbol">))</a> <a id="3412" class="Symbol">→</a>
    <a id="3418" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3423" href="Definition.Untyped.Inversion.html#674" class="Function">wk-var</a> <a id="3430" href="Graded.Heap.Soundness.html#3407" class="Bound">≡x</a> <a id="3433" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3436" class="Symbol">λ</a> <a id="3438" class="Symbol">{</a>
      <a id="3446" class="Symbol">(_</a> <a id="3449" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3451" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a> <a id="3459" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3461" class="Symbol">_)</a> <a id="3464" class="Symbol">→</a>
    <a id="3470" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3475" href="Graded.Heap.Soundness.html#3343" class="Bound">v</a> <a id="3477" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3480" class="Symbol">λ</a> <a id="3482" class="Symbol">()};</a>
      <a id="3493" class="Symbol">(</a><a id="3494" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3499" class="Symbol">(</a><a id="3500" href="Graded.Heap.Soundness.html#3500" class="Bound">n′</a> <a id="3503" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3505" href="Graded.Heap.Soundness.html#3505" class="Bound">≡suc</a> <a id="3510" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3512" href="Graded.Heap.Soundness.html#3512" class="Bound">≡n</a><a id="3514" class="Symbol">))</a> <a id="3517" class="Symbol">→</a>
    <a id="3523" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3528" href="Definition.Untyped.Inversion.html#6386" class="Function">wk-suc</a> <a id="3535" href="Graded.Heap.Soundness.html#3505" class="Bound">≡suc</a> <a id="3540" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3543" class="Symbol">λ</a> <a id="3545" class="Symbol">{</a>
      <a id="3553" class="Symbol">(</a><a id="3554" href="Graded.Heap.Soundness.html#3554" class="Bound">n″</a> <a id="3557" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3559" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a> <a id="3567" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3569" href="Graded.Heap.Soundness.html#3569" class="Bound">≡n′</a><a id="3572" class="Symbol">)</a> <a id="3574" class="Symbol">→</a>
    <a id="3580" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3585" href="Definition.Untyped.Properties.html#72148" class="Function">isNumeral?</a> <a id="3596" href="Graded.Heap.Soundness.html#3554" class="Bound">n″</a> <a id="3599" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3602" class="Symbol">λ</a> <a id="3604" class="Symbol">{</a>
      <a id="3612" class="Symbol">(</a><a id="3613" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="3617" href="Graded.Heap.Soundness.html#3617" class="Bound">num</a><a id="3620" class="Symbol">)</a> <a id="3622" class="Symbol">→</a>
    <a id="3628" class="Symbol">_</a> <a id="3630" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3632" class="Symbol">_</a> <a id="3634" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3636" class="Symbol">_</a> <a id="3638" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3640" class="Symbol">_</a> <a id="3642" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3644" class="Symbol">_</a> <a id="3646" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3648" href="Graded.Heap.Bisimilarity.html#14787" class="Function">bisim₇*</a> <a id="3656" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="3661" href="Graded.Heap.Soundness.html#3333" class="Bound">d′</a> <a id="3664" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3666" href="Definition.Untyped.html#3520" class="InductiveConstructor">sucₙ</a> <a id="3671" href="Graded.Heap.Soundness.html#3617" class="Bound">num</a> <a id="3675" class="Symbol">;</a>
      <a id="3683" class="Symbol">(</a><a id="3684" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="3687" href="Graded.Heap.Soundness.html#3687" class="Bound">¬num</a><a id="3691" class="Symbol">)</a> <a id="3693" class="Symbol">→</a>
    <a id="3699" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3704" href="Graded.Heap.Typed.Reduction.html#19414" class="Function">⊢ₛ-⇒*</a> <a id="3710" href="Graded.Heap.Soundness.html#3243" class="Bound">⊢s</a> <a id="3713" href="Graded.Heap.Soundness.html#3333" class="Bound">d′</a> <a id="3716" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3719" class="Symbol">λ</a>
      <a id="3727" class="Symbol">(_</a> <a id="3730" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3732" class="Symbol">_</a> <a id="3734" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3736" class="Symbol">_</a> <a id="3738" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3740" class="Symbol">_</a> <a id="3742" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3744" href="Graded.Heap.Soundness.html#3744" class="Bound">⊢H</a> <a id="3747" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3749" href="Graded.Heap.Soundness.html#3749" class="Bound">⊢t</a> <a id="3752" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3754" href="Graded.Heap.Soundness.html#3754" class="Bound">⊢S</a><a id="3756" class="Symbol">)</a> <a id="3758" class="Symbol">→</a>
    <a id="3764" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3769" href="Definition.Typed.Consequences.Inversion.html#4035" class="Function">inversion-suc</a> <a id="3783" href="Graded.Heap.Soundness.html#3749" class="Bound">⊢t</a> <a id="3786" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3789" class="Symbol">λ</a>
      <a id="3797" class="Symbol">(</a><a id="3798" href="Graded.Heap.Soundness.html#3798" class="Bound">⊢n″</a> <a id="3802" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3804" href="Graded.Heap.Soundness.html#3804" class="Bound">≡ℕ</a><a id="3806" class="Symbol">)</a> <a id="3808" class="Symbol">→</a>
    <a id="3814" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3819" href="Graded.Heap.Usage.Reduction.html#47450" class="Function">URᶠ.▸-⇒*</a> <a id="3828" href="Graded.Heap.Soundness.html#3246" class="Bound">▸s</a> <a id="3831" href="Graded.Heap.Soundness.html#3333" class="Bound">d′</a> <a id="3834" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3837" class="Symbol">λ</a>
      <a id="3845" class="Symbol">(_</a> <a id="3848" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3850" class="Symbol">_</a> <a id="3852" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3854" class="Symbol">_</a> <a id="3856" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3858" href="Graded.Heap.Soundness.html#3858" class="Bound">▸H</a> <a id="3861" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3863" href="Graded.Heap.Soundness.html#3863" class="Bound">▸t</a> <a id="3866" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3868" href="Graded.Heap.Soundness.html#3868" class="Bound">▸ε</a> <a id="3871" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3873" href="Graded.Heap.Soundness.html#3873" class="Bound">γ≤</a><a id="3875" class="Symbol">)</a> <a id="3877" class="Symbol">→</a>
    <a id="3883" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3888" href="Graded.Usage.Inversion.html#8434" class="Function">inv-usage-suc</a> <a id="3902" href="Graded.Heap.Soundness.html#3863" class="Bound">▸t</a> <a id="3905" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3908" class="Symbol">λ</a>
      <a id="3916" class="Symbol">(</a><a id="3917" href="Graded.Usage.Inversion.html#8308" class="InductiveConstructor">invUsageSuc</a> <a id="3929" href="Graded.Heap.Soundness.html#3929" class="Bound">▸n″</a> <a id="3933" href="Graded.Heap.Soundness.html#3933" class="Bound">δ≤</a><a id="3935" class="Symbol">)</a>  <a id="3938" class="Symbol">→</a>
    <a id="3944" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3949" href="Graded.Heap.Soundness.html#2987" class="Function">redNumeral</a> <a id="3960" class="Symbol">{</a><a id="3961" class="Argument">s</a> <a id="3963" class="Symbol">=</a> <a id="3965" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟨</a> <a id="3967" href="Graded.Heap.Soundness.html#3321" class="Bound">H</a> <a id="3969" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="3971" href="Graded.Heap.Soundness.html#3554" class="Bound">n″</a> <a id="3974" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="3976" href="Graded.Heap.Soundness.html#3329" class="Bound">ρ</a> <a id="3978" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="3980" href="Graded.Heap.Untyped.html#4626" class="InductiveConstructor">ε</a> <a id="3982" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟩</a><a id="3983" class="Symbol">}</a> <a id="3985" href="Graded.Heap.Soundness.html#3202" class="Bound">consistent</a> <a id="3996" href="Graded.Heap.Soundness.html#3231" class="Bound">x</a>
          <a id="4008" class="Symbol">(</a><a id="4009" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="4016" class="Symbol">(</a><a id="4017" href="Relation.Binary.PropositionalEquality.Core.html#1938" class="Function">PE.trans</a> <a id="4026" class="Symbol">(</a><a id="4027" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="4035" class="Symbol">(</a><a id="4036" href="Graded.Heap.Untyped.html#7956" class="Function Operator">_[</a> <a id="4039" href="Graded.Heap.Soundness.html#3321" class="Bound">H</a> <a id="4041" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a><a id="4043" class="Symbol">)</a> <a id="4045" href="Graded.Heap.Soundness.html#3569" class="Bound">≡n′</a><a id="4048" class="Symbol">)</a> <a id="4050" href="Graded.Heap.Soundness.html#3512" class="Bound">≡n</a><a id="4052" class="Symbol">))</a>
          <a id="4065" class="Symbol">(_</a> <a id="4068" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4070" href="Graded.Heap.Soundness.html#3744" class="Bound">⊢H</a> <a id="4073" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4075" href="Graded.Heap.Soundness.html#3798" class="Bound">⊢n″</a> <a id="4079" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4081" href="Graded.Heap.Typed.html#3707" class="InductiveConstructor">ε</a><a id="4082" class="Symbol">)</a>
          <a id="4094" class="Symbol">(</a><a id="4095" href="Graded.Heap.Soundness.html#3858" class="Bound">▸H</a> <a id="4098" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4100" href="Graded.Heap.Soundness.html#3929" class="Bound">▸n″</a> <a id="4104" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4106" href="Graded.Heap.Soundness.html#3868" class="Bound">▸ε</a> <a id="4109" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4111" href="Graded.Context.Properties.PartialOrder.html#790" class="Function">≤ᶜ-trans</a> <a id="4120" href="Graded.Heap.Soundness.html#3873" class="Bound">γ≤</a> <a id="4123" class="Symbol">(</a><a id="4124" href="Graded.Context.Properties.Addition.html#2897" class="Function">+ᶜ-monotoneˡ</a> <a id="4137" class="Symbol">(</a><a id="4138" href="Graded.Context.Properties.Multiplication.html#3380" class="Function">·ᶜ-monotoneʳ</a> <a id="4151" class="Symbol">(</a><a id="4152" href="Graded.Context.Weakening.html#3188" class="Function">wk-≤ᶜ</a> <a id="4158" href="Graded.Heap.Soundness.html#3329" class="Bound">ρ</a> <a id="4160" href="Graded.Heap.Soundness.html#3933" class="Bound">δ≤</a><a id="4162" class="Symbol">))))</a> <a id="4167" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="4170" class="Symbol">λ</a>
      <a id="4178" class="Symbol">(_</a> <a id="4181" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4183" class="Symbol">_</a> <a id="4185" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4187" href="Graded.Heap.Soundness.html#4187" class="Bound">H′</a> <a id="4190" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4192" href="Graded.Heap.Soundness.html#4192" class="Bound">ρ′</a> <a id="4195" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4197" href="Graded.Heap.Soundness.html#4197" class="Bound">t′</a> <a id="4200" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4202" href="Graded.Heap.Soundness.html#4202" class="Bound">d₀</a> <a id="4205" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4207" href="Graded.Heap.Soundness.html#4207" class="Bound">n</a><a id="4208" class="Symbol">)</a> <a id="4210" class="Symbol">→</a>
    <a id="4216" class="Symbol">_</a> <a id="4218" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4220" class="Symbol">_</a> <a id="4222" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4224" class="Symbol">_</a> <a id="4226" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4228" class="Symbol">_</a> <a id="4230" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4232" class="Symbol">_</a>
      <a id="4240" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4242" class="Symbol">(</a><a id="4243" href="Graded.Heap.Bisimilarity.html#14787" class="Function">bisim₇*</a> <a id="4251" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="4256" href="Graded.Heap.Soundness.html#3333" class="Bound">d′</a> <a id="4259" href="Graded.Heap.Reduction.Properties.html#1410" class="Function Operator">⇨*</a> <a id="4262" class="Symbol">((</a><a id="4264" href="Graded.Heap.Reduction.html#5711" class="InductiveConstructor Operator">⇒ₛ</a> <a id="4267" class="Symbol">(</a><a id="4268" href="Graded.Heap.Reduction.html#5136" class="InductiveConstructor">sucₕ</a> <a id="4273" href="Graded.Heap.Soundness.html#3687" class="Bound">¬num</a><a id="4277" class="Symbol">))</a> <a id="4280" href="Graded.Heap.Reduction.html#5943" class="InductiveConstructor Operator">⇨</a>
          <a id="4292" class="Symbol">(</a><a id="4293" href="Graded.Heap.Reduction.Properties.html#12879" class="Function">++sucₛ-⇒*</a> <a id="4303" class="Symbol">{</a><a id="4304" class="Argument">k</a> <a id="4306" class="Symbol">=</a> <a id="4308" class="Number">1</a><a id="4309" class="Symbol">}</a> <a id="4311" href="Graded.Heap.Soundness.html#4202" class="Bound">d₀</a> <a id="4314" href="Graded.Heap.Reduction.Properties.html#1410" class="Function Operator">⇨*</a> <a id="4317" class="Symbol">((</a><a id="4319" href="Graded.Heap.Reduction.html#5711" class="InductiveConstructor Operator">⇒ₛ</a> <a id="4322" class="Symbol">(</a><a id="4323" href="Graded.Heap.Reduction.html#5226" class="InductiveConstructor">numₕ</a> <a id="4328" href="Graded.Heap.Soundness.html#4207" class="Bound">n</a><a id="4329" class="Symbol">))</a> <a id="4332" href="Graded.Heap.Reduction.html#5943" class="InductiveConstructor Operator">⇨</a> <a id="4334" href="Graded.Heap.Reduction.html#5929" class="InductiveConstructor">id</a><a id="4336" class="Symbol">))))</a>
      <a id="4347" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4349" href="Definition.Untyped.html#3520" class="InductiveConstructor">sucₙ</a> <a id="4354" href="Graded.Heap.Soundness.html#4207" class="Bound">n</a> <a id="4356" class="Symbol">}}}</a>

  <a id="4363" href="Graded.Heap.Soundness.html#2987" class="Function">redNumeral</a> <a id="4374" href="Graded.Heap.Soundness.html#4374" class="Bound">consistent</a> <a id="4385" class="Symbol">(</a><a id="4386" href="Definition.LogicalRelation.html#3184" class="InductiveConstructor">ℕₜ</a> <a id="4389" class="Symbol">_</a> <a id="4391" href="Graded.Heap.Soundness.html#4391" class="Bound">d</a> <a id="4393" href="Graded.Heap.Soundness.html#4393" class="Bound">n≡n</a> <a id="4397" href="Definition.LogicalRelation.html#3466" class="InductiveConstructor">zeroᵣ</a><a id="4402" class="Symbol">)</a> <a id="4404" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a> <a id="4412" href="Graded.Heap.Soundness.html#4412" class="Bound">⊢s</a> <a id="4415" href="Graded.Heap.Soundness.html#4415" class="Bound">▸s</a> <a id="4418" class="Symbol">=</a>
    <a id="4424" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="4429" href="Graded.Heap.Termination.html#2637" class="Function">whBisim</a> <a id="4437" href="Graded.Heap.Soundness.html#4374" class="Bound">consistent</a> <a id="4448" class="Symbol">(</a><a id="4449" href="Definition.Typed.html#20806" class="Field">redₜ</a> <a id="4454" href="Graded.Heap.Soundness.html#4391" class="Bound">d</a> <a id="4456" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4458" href="Definition.Untyped.Neutral.html#2515" class="InductiveConstructor">zeroₙ</a><a id="4463" class="Symbol">)</a> <a id="4465" href="Graded.Heap.Soundness.html#4412" class="Bound">⊢s</a> <a id="4468" href="Graded.Heap.Soundness.html#4415" class="Bound">▸s</a> <a id="4471" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="4474" class="Symbol">λ</a>
      <a id="4482" class="Symbol">(_</a> <a id="4485" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4487" class="Symbol">_</a> <a id="4489" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4491" href="Graded.Heap.Soundness.html#4491" class="Bound">H</a> <a id="4493" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4495" href="Graded.Heap.Soundness.html#4495" class="Bound">t</a> <a id="4497" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4499" href="Graded.Heap.Soundness.html#4499" class="Bound">ρ</a> <a id="4501" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4503" href="Graded.Heap.Soundness.html#4503" class="Bound">d′</a> <a id="4506" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4508" href="Graded.Heap.Soundness.html#4508" class="Bound">≡u</a> <a id="4511" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4513" href="Graded.Heap.Soundness.html#4513" class="Bound">v</a><a id="4514" class="Symbol">)</a> <a id="4516" class="Symbol">→</a>
    <a id="4522" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="4527" href="Definition.Untyped.Inversion.html#6219" class="Function">subst-zero</a> <a id="4538" class="Symbol">{</a><a id="4539" class="Argument">t</a> <a id="4541" class="Symbol">=</a> <a id="4543" href="Definition.Untyped.html#9219" class="Function">wk</a> <a id="4546" href="Graded.Heap.Soundness.html#4499" class="Bound">ρ</a> <a id="4548" href="Graded.Heap.Soundness.html#4495" class="Bound">t</a><a id="4549" class="Symbol">}</a> <a id="4551" href="Graded.Heap.Soundness.html#4508" class="Bound">≡u</a> <a id="4554" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="4557" class="Symbol">λ</a> <a id="4559" class="Symbol">{</a>
      <a id="4567" class="Symbol">(</a><a id="4568" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="4573" class="Symbol">(</a><a id="4574" href="Graded.Heap.Soundness.html#4574" class="Bound">x</a> <a id="4576" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4578" href="Graded.Heap.Soundness.html#4578" class="Bound">≡x</a><a id="4580" class="Symbol">))</a> <a id="4583" class="Symbol">→</a>
    <a id="4589" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="4594" href="Definition.Untyped.Inversion.html#674" class="Function">wk-var</a> <a id="4601" href="Graded.Heap.Soundness.html#4578" class="Bound">≡x</a> <a id="4604" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="4607" class="Symbol">λ</a> <a id="4609" class="Symbol">{</a>
      <a id="4617" class="Symbol">(_</a> <a id="4620" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4622" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a> <a id="4630" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4632" href="Graded.Heap.Soundness.html#4632" class="Bound">w</a><a id="4633" class="Symbol">)</a> <a id="4635" class="Symbol">→</a>
    <a id="4641" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="4646" href="Graded.Heap.Soundness.html#4513" class="Bound">v</a> <a id="4648" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="4651" class="Symbol">λ</a> <a id="4653" class="Symbol">()}</a> <a id="4657" class="Symbol">;</a>
      <a id="4665" class="Symbol">(</a><a id="4666" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="4671" href="Graded.Heap.Soundness.html#4671" class="Bound">≡zero</a><a id="4676" class="Symbol">)</a> <a id="4678" class="Symbol">→</a>
    <a id="4684" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="4689" href="Definition.Untyped.Inversion.html#6152" class="Function">wk-zero</a> <a id="4697" href="Graded.Heap.Soundness.html#4671" class="Bound">≡zero</a> <a id="4703" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="4706" class="Symbol">λ</a> <a id="4708" class="Symbol">{</a>
      <a id="4716" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a> <a id="4724" class="Symbol">→</a>
    <a id="4730" class="Symbol">_</a> <a id="4732" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4734" class="Symbol">_</a> <a id="4736" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4738" class="Symbol">_</a> <a id="4740" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4742" class="Symbol">_</a> <a id="4744" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4746" class="Symbol">_</a> <a id="4748" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4750" href="Graded.Heap.Bisimilarity.html#14787" class="Function">bisim₇*</a> <a id="4758" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="4763" href="Graded.Heap.Soundness.html#4503" class="Bound">d′</a> <a id="4766" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4768" href="Definition.Untyped.html#3497" class="InductiveConstructor">zeroₙ</a> <a id="4774" class="Symbol">}}</a>

  <a id="4780" href="Graded.Heap.Soundness.html#2987" class="Function">redNumeral</a>
    <a id="4795" class="Symbol">{</a><a id="4796" href="Graded.Heap.Soundness.html#4796" class="Bound">s</a><a id="4797" class="Symbol">}</a> <a id="4799" href="Graded.Heap.Soundness.html#4799" class="Bound">consistent</a> <a id="4810" class="Symbol">(</a><a id="4811" href="Definition.LogicalRelation.html#3184" class="InductiveConstructor">ℕₜ</a> <a id="4814" class="Symbol">_</a> <a id="4816" href="Graded.Heap.Soundness.html#4816" class="Bound">d</a> <a id="4818" href="Graded.Heap.Soundness.html#4818" class="Bound">n≡n</a> <a id="4822" class="Symbol">(</a><a id="4823" href="Definition.LogicalRelation.html#3498" class="InductiveConstructor">ne</a> <a id="4826" class="Symbol">(</a><a id="4827" href="Definition.LogicalRelation.html#1950" class="InductiveConstructor">neNfₜ</a> <a id="4833" href="Graded.Heap.Soundness.html#4833" class="Bound">neK</a> <a id="4837" href="Graded.Heap.Soundness.html#4837" class="Bound">⊢k</a> <a id="4840" href="Graded.Heap.Soundness.html#4840" class="Bound">k≡k</a><a id="4843" class="Symbol">)))</a> <a id="4847" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a> <a id="4855" href="Graded.Heap.Soundness.html#4855" class="Bound">⊢s</a> <a id="4858" href="Graded.Heap.Soundness.html#4858" class="Bound">▸s</a> <a id="4861" class="Symbol">=</a>
    <a id="4867" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="4872" href="Graded.Heap.Termination.html#2637" class="Function">whBisim</a> <a id="4880" class="Symbol">{</a><a id="4881" class="Argument">s</a> <a id="4883" class="Symbol">=</a> <a id="4885" href="Graded.Heap.Soundness.html#4796" class="Bound">s</a><a id="4886" class="Symbol">}</a> <a id="4888" href="Graded.Heap.Soundness.html#4799" class="Bound">consistent</a> <a id="4899" class="Symbol">(</a><a id="4900" href="Definition.Typed.html#20806" class="Field">redₜ</a> <a id="4905" href="Graded.Heap.Soundness.html#4816" class="Bound">d</a> <a id="4907" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4909" href="Definition.Untyped.Neutral.html#2659" class="InductiveConstructor">ne</a> <a id="4912" href="Graded.Heap.Soundness.html#4833" class="Bound">neK</a><a id="4915" class="Symbol">)</a> <a id="4917" href="Graded.Heap.Soundness.html#4855" class="Bound">⊢s</a> <a id="4920" href="Graded.Heap.Soundness.html#4858" class="Bound">▸s</a> <a id="4923" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="4926" class="Symbol">λ</a> <a id="4928" class="Symbol">{</a>
      <a id="4936" class="Symbol">(_</a> <a id="4939" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4941" class="Symbol">_</a> <a id="4943" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4945" href="Graded.Heap.Soundness.html#4945" class="Bound">H</a> <a id="4947" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4949" href="Graded.Heap.Soundness.html#4949" class="Bound">t</a> <a id="4951" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4953" href="Graded.Heap.Soundness.html#4953" class="Bound">ρ</a> <a id="4955" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4957" href="Graded.Heap.Soundness.html#4957" class="Bound">d′</a> <a id="4960" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4962" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a> <a id="4970" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4972" href="Graded.Heap.Soundness.html#4972" class="Bound">v</a><a id="4973" class="Symbol">)</a> <a id="4975" class="Symbol">→</a>
    <a id="4981" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="4988" class="Symbol">(</a><a id="4989" href="Graded.Heap.Untyped.Properties.html#2725" class="Function">Value→¬Neutral</a> <a id="5004" class="Symbol">(</a><a id="5005" href="Graded.Heap.Untyped.Properties.html#2258" class="Function">substValue</a> <a id="5016" class="Symbol">(</a><a id="5017" href="Graded.Heap.Untyped.html#7729" class="Function">toSubstₕ</a> <a id="5026" href="Graded.Heap.Soundness.html#4945" class="Bound">H</a><a id="5027" class="Symbol">)</a> <a id="5029" class="Symbol">(</a><a id="5030" href="Graded.Heap.Untyped.Properties.html#1818" class="Function">wkValue</a> <a id="5038" href="Graded.Heap.Soundness.html#4953" class="Bound">ρ</a> <a id="5040" href="Graded.Heap.Soundness.html#4972" class="Bound">v</a><a id="5041" class="Symbol">))</a> <a id="5044" href="Graded.Heap.Soundness.html#4833" class="Bound">neK</a><a id="5047" class="Symbol">)</a> <a id="5049" class="Symbol">}</a>

<a id="5052" class="Keyword">opaque</a>

  <a id="5062" class="Comment">-- Given some assumptions, all well-typed and erased terms of type ℕ reduce to some</a>
  <a id="5148" class="Comment">-- numeral and the resulting heap has all grades less than or equal to 𝟘.</a>

  <a id="5225" class="Comment">-- Note that some assumptions to this theorem are given as a module parameter.</a>

  <a id="soundness"></a><a id="5307" href="Graded.Heap.Soundness.html#5307" class="Function">soundness</a> <a id="5317" class="Symbol">:</a> <a id="5319" class="Symbol">{</a><a id="5320" href="Graded.Heap.Soundness.html#5320" class="Bound">Δ</a> <a id="5322" class="Symbol">:</a> <a id="5324" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="5328" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="5333" href="Graded.Heap.Soundness.html#2768" class="Generalizable">k</a><a id="5334" class="Symbol">}</a>
            <a id="5348" class="Symbol">→</a> <a id="5350" class="Symbol">(</a><a id="5351" href="Graded.Heap.Soundness.html#2768" class="Generalizable">k</a> <a id="5353" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">PE.≡</a> <a id="5358" class="Number">0</a> <a id="5360" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5362" class="Symbol">(</a><a id="5363" href="Graded.Usage.Restrictions.html#1638" class="Function">Emptyrec-allowed</a> <a id="5380" class="InductiveConstructor">𝟙ᵐ</a> <a id="5383" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="5385" class="Symbol">→</a> <a id="5387" href="Definition.Typed.html#21923" class="Function">Consistent</a> <a id="5398" href="Graded.Heap.Soundness.html#5320" class="Bound">Δ</a><a id="5399" class="Symbol">)</a> <a id="5401" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5403" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="5405" href="Graded.Heap.Soundness.html#485" class="Bound">erased-heap</a><a id="5416" class="Symbol">)</a>
            <a id="5430" class="Symbol">→</a> <a id="5432" href="Graded.Heap.Soundness.html#5320" class="Bound">Δ</a> <a id="5434" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="5436" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a> <a id="5438" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="5440" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="5442" class="Symbol">→</a> <a id="5444" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="5447" href="Graded.Usage.html#14461" class="Function Operator">▸</a> <a id="5449" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a>
            <a id="5463" class="Symbol">→</a> <a id="5465" href="Tools.Product.html#1014" class="Function">∃₅</a> <a id="5468" class="Symbol">λ</a> <a id="5470" href="Graded.Heap.Soundness.html#5470" class="Bound">m</a> <a id="5472" href="Graded.Heap.Soundness.html#5472" class="Bound">n</a> <a id="5474" href="Graded.Heap.Soundness.html#5474" class="Bound">H</a> <a id="5476" href="Graded.Heap.Soundness.html#5476" class="Bound">k</a> <a id="5478" class="Symbol">(</a><a id="5479" href="Graded.Heap.Soundness.html#5479" class="Bound">ρ</a> <a id="5481" class="Symbol">:</a> <a id="5483" href="Definition.Untyped.NotParametrised.html#2601" class="Datatype">Wk</a> <a id="5486" href="Graded.Heap.Soundness.html#5470" class="Bound">m</a> <a id="5488" href="Graded.Heap.Soundness.html#5472" class="Bound">n</a><a id="5489" class="Symbol">)</a> <a id="5491" class="Symbol">→</a>
              <a id="5507" href="Graded.Heap.Untyped.html#10056" class="Function">initial</a> <a id="5515" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a> <a id="5517" href="Graded.Heap.Reduction.html#5867" class="Datatype Operator">⇒*</a> <a id="5520" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟨</a> <a id="5522" href="Graded.Heap.Soundness.html#5474" class="Bound">H</a> <a id="5524" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="5526" href="Definition.Untyped.html#3622" class="Function">sucᵏ</a> <a id="5531" href="Graded.Heap.Soundness.html#5476" class="Bound">k</a> <a id="5533" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="5535" href="Graded.Heap.Soundness.html#5479" class="Bound">ρ</a> <a id="5537" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="5539" class="InductiveConstructor">ε</a> <a id="5541" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟩</a> <a id="5543" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
              <a id="5559" class="Symbol">(</a><a id="5560" href="Graded.Heap.Soundness.html#5320" class="Bound">Δ</a> <a id="5562" href="Definition.Typed.html#5482" class="Datatype Operator">⊢</a> <a id="5564" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a> <a id="5566" href="Definition.Typed.html#5482" class="Datatype Operator">≡</a> <a id="5568" href="Definition.Untyped.html#3622" class="Function">sucᵏ</a> <a id="5573" href="Graded.Heap.Soundness.html#5476" class="Bound">k</a> <a id="5575" href="Definition.Typed.html#5482" class="Datatype Operator">∷</a> <a id="5577" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="5578" class="Symbol">)</a> <a id="5580" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
              <a id="5596" href="Graded.Heap.Soundness.html#5474" class="Bound">H</a> <a id="5598" href="Graded.Heap.Usage.html#1317" class="Datatype Operator">≤ʰ</a> <a id="5601" href="Graded.Modality.html#926" class="Function">𝟘</a>
  <a id="5605" href="Graded.Heap.Soundness.html#5307" class="Function">soundness</a> <a id="5615" class="Symbol">{</a><a id="5616" href="Graded.Heap.Soundness.html#5616" class="Bound">k</a><a id="5617" class="Symbol">}</a> <a id="5619" class="Symbol">{</a><a id="5620" href="Graded.Heap.Soundness.html#5620" class="Bound">t</a><a id="5621" class="Symbol">}</a> <a id="5623" class="Symbol">{</a><a id="5624" href="Graded.Heap.Soundness.html#5624" class="Bound">Δ</a><a id="5625" class="Symbol">}</a> <a id="5627" href="Graded.Heap.Soundness.html#5627" class="Bound">as</a> <a id="5630" href="Graded.Heap.Soundness.html#5630" class="Bound">⊢t</a> <a id="5633" href="Graded.Heap.Soundness.html#5633" class="Bound">▸t</a> <a id="5636" class="Symbol">=</a>
    <a id="5642" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="5647" href="Graded.Heap.Usage.Properties.html#1908" class="Function">▸initial</a> <a id="5656" href="Graded.Heap.Soundness.html#6958" class="Function">k≡0⊎erased-heap</a> <a id="5672" href="Graded.Heap.Soundness.html#5633" class="Bound">▸t</a> <a id="5675" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="5678" class="Symbol">λ</a>
      <a id="5686" href="Graded.Heap.Soundness.html#5686" class="Bound">▸s</a> <a id="5689" class="Symbol">→</a>
    <a id="5695" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="5700" href="Definition.LogicalRelation.Substitution.Introductions.Nat.html#2491" class="Function">⊩∷ℕ⇔</a> <a id="5705" class="Symbol">.</a><a id="5706" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5712" class="Symbol">(</a><a id="5713" href="Definition.LogicalRelation.Fundamental.Reducibility.html#1446" class="Function">reducible-⊩∷</a> <a id="5726" href="Graded.Heap.Soundness.html#5630" class="Bound">⊢t</a> <a id="5729" class="Symbol">.</a><a id="5730" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="5735" class="Symbol">)</a> <a id="5737" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="5740" class="Symbol">λ</a>
      <a id="5748" href="Graded.Heap.Soundness.html#5748" class="Bound">[t]</a> <a id="5752" class="Symbol">→</a>
    <a id="5758" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="5763" href="Graded.Heap.Soundness.html#2987" class="Function">redNumeral</a> <a id="5774" href="Graded.Heap.Soundness.html#6722" class="Function">consistent</a> <a id="5785" href="Graded.Heap.Soundness.html#5748" class="Bound">[t]</a> <a id="5789" class="Symbol">(</a><a id="5790" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="5797" class="Symbol">(</a><a id="5798" href="Relation.Binary.PropositionalEquality.Core.html#1938" class="Function">PE.trans</a> <a id="5807" class="Symbol">(</a><a id="5808" href="Graded.Heap.Untyped.Properties.html#21613" class="Function">erasedHeap-subst</a> <a id="5825" class="Symbol">(</a><a id="5826" href="Definition.Untyped.html#9219" class="Function">wk</a> <a id="5829" href="Definition.Untyped.NotParametrised.html#2630" class="InductiveConstructor">id</a> <a id="5832" href="Graded.Heap.Soundness.html#5620" class="Bound">t</a><a id="5833" class="Symbol">))</a> <a id="5836" class="Symbol">(</a><a id="5837" href="Definition.Untyped.Properties.html#9557" class="Function">wk-id</a> <a id="5843" href="Graded.Heap.Soundness.html#5620" class="Bound">t</a><a id="5844" class="Symbol">)))</a>
           <a id="5859" class="Symbol">(</a><a id="5860" href="Graded.Heap.Typed.Properties.html#1894" class="Function">⊢initial</a> <a id="5869" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="5875" href="Graded.Heap.Soundness.html#5630" class="Bound">⊢t</a><a id="5877" class="Symbol">)</a> <a id="5879" href="Graded.Heap.Soundness.html#5686" class="Bound">▸s</a> <a id="5882" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="5885" class="Symbol">λ</a>
      <a id="5893" class="Symbol">(_</a> <a id="5896" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5898" class="Symbol">_</a> <a id="5900" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5902" href="Graded.Heap.Soundness.html#5902" class="Bound">H</a> <a id="5904" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5906" href="Graded.Heap.Soundness.html#5906" class="Bound">ρ</a> <a id="5908" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5910" href="Graded.Heap.Soundness.html#5910" class="Bound">t</a> <a id="5912" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5914" href="Graded.Heap.Soundness.html#5914" class="Bound">d</a> <a id="5916" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5918" href="Graded.Heap.Soundness.html#5918" class="Bound">num</a><a id="5921" class="Symbol">)</a> <a id="5923" class="Symbol">→</a>
    <a id="5929" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="5934" href="Graded.Heap.Usage.Reduction.html#47450" class="Function">URᵗ.▸-⇒*</a> <a id="5943" href="Graded.Heap.Soundness.html#5686" class="Bound">▸s</a> <a id="5946" href="Graded.Heap.Soundness.html#5914" class="Bound">d</a> <a id="5948" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="5951" class="Symbol">λ</a> <a id="5953" class="Symbol">{</a>
      <a id="5961" class="Symbol">(</a><a id="5962" href="Graded.Heap.Soundness.html#5962" class="Bound">γ</a> <a id="5964" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5966" href="Graded.Heap.Soundness.html#5966" class="Bound">δ</a> <a id="5968" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5970" class="Symbol">_</a> <a id="5972" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5974" href="Graded.Heap.Soundness.html#5974" class="Bound">▸H</a> <a id="5977" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5979" href="Graded.Heap.Soundness.html#5979" class="Bound">▸n</a> <a id="5982" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5984" href="Graded.Heap.Usage.html#3105" class="InductiveConstructor">ε</a> <a id="5986" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5988" href="Graded.Heap.Soundness.html#5988" class="Bound">γ≤</a><a id="5990" class="Symbol">)</a> <a id="5992" class="Symbol">→</a>
    <a id="5998" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="6003" href="Definition.Untyped.Properties.html#73520" class="Function">Numeral→sucᵏ</a> <a id="6016" href="Graded.Heap.Soundness.html#5918" class="Bound">num</a> <a id="6020" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="6023" class="Symbol">λ</a>
      <a id="6031" class="Symbol">(</a><a id="6032" href="Graded.Heap.Soundness.html#6032" class="Bound">k</a> <a id="6034" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6036" href="Graded.Heap.Soundness.html#6036" class="Bound">≡sucᵏ</a><a id="6041" class="Symbol">)</a> <a id="6043" class="Symbol">→</a>
    <a id="6049" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="6054" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">PE.subst</a> <a id="6063" class="Symbol">(λ</a> <a id="6066" href="Graded.Heap.Soundness.html#6066" class="Bound">x</a> <a id="6068" class="Symbol">→</a> <a id="6070" class="Symbol">_</a> <a id="6072" href="Graded.Heap.Reduction.html#5867" class="Datatype Operator">⇒*</a> <a id="6075" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟨</a> <a id="6077" class="Symbol">_</a> <a id="6079" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="6081" href="Graded.Heap.Soundness.html#6066" class="Bound">x</a> <a id="6083" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="6085" class="Symbol">_</a> <a id="6087" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="6089" class="Symbol">_</a> <a id="6091" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟩</a><a id="6092" class="Symbol">)</a> <a id="6094" href="Graded.Heap.Soundness.html#6036" class="Bound">≡sucᵏ</a> <a id="6100" href="Graded.Heap.Soundness.html#5914" class="Bound">d</a> <a id="6102" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="6105" class="Symbol">λ</a>
      <a id="6113" href="Graded.Heap.Soundness.html#6113" class="Bound">d′</a> <a id="6116" class="Symbol">→</a>
    <a id="6122" class="Keyword">let</a> <a id="6126" class="Keyword">open</a> <a id="6131" href="Tools.Reasoning.PartialOrder.html" class="Module">RPo</a> <a id="6135" href="Graded.Context.Properties.PartialOrder.html#1875" class="Function">≤ᶜ-poset</a> <a id="6144" class="Keyword">in</a>
    <a id="6151" class="Symbol">_</a> <a id="6153" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6155" class="Symbol">_</a> <a id="6157" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6159" class="Symbol">_</a> <a id="6161" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6163" class="Symbol">_</a> <a id="6165" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6167" class="Symbol">_</a>
      <a id="6175" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6177" href="Graded.Heap.Soundness.html#6113" class="Bound">d′</a>
      <a id="6186" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6188" href="Relation.Binary.PropositionalEquality.Core.html#2044" class="Function">PE.subst₂</a> <a id="6198" class="Symbol">(_</a> <a id="6201" href="Definition.Typed.html#5482" class="Datatype Operator">⊢_≡_∷</a> <a id="6207" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="6208" class="Symbol">)</a>
          <a id="6220" class="Symbol">(</a><a id="6221" href="Relation.Binary.PropositionalEquality.Core.html#1938" class="Function">PE.trans</a> <a id="6230" class="Symbol">(</a><a id="6231" href="Graded.Heap.Untyped.Properties.html#21613" class="Function">erasedHeap-subst</a> <a id="6248" class="Symbol">(</a><a id="6249" href="Definition.Untyped.html#9219" class="Function">wk</a> <a id="6252" href="Definition.Untyped.NotParametrised.html#2630" class="InductiveConstructor">id</a> <a id="6255" class="Symbol">_))</a> <a id="6259" class="Symbol">(</a><a id="6260" href="Definition.Untyped.Properties.html#9557" class="Function">wk-id</a> <a id="6266" class="Symbol">_))</a>
          <a id="6280" class="Symbol">(</a><a id="6281" href="Relation.Binary.PropositionalEquality.Core.html#1938" class="Function">PE.trans</a> <a id="6290" class="Symbol">(</a><a id="6291" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="6299" class="Symbol">(</a><a id="6300" href="Graded.Heap.Untyped.html#7956" class="Function Operator">_[</a> <a id="6303" href="Graded.Heap.Soundness.html#5902" class="Bound">H</a> <a id="6305" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a><a id="6307" class="Symbol">)</a> <a id="6309" class="Symbol">(</a><a id="6310" href="Definition.Untyped.Properties.html#73931" class="Function">wk-sucᵏ</a> <a id="6318" href="Graded.Heap.Soundness.html#6032" class="Bound">k</a><a id="6319" class="Symbol">))</a> <a id="6322" class="Symbol">(</a><a id="6323" href="Definition.Untyped.Properties.html#73760" class="Function">subst-sucᵏ</a> <a id="6334" href="Graded.Heap.Soundness.html#6032" class="Bound">k</a><a id="6335" class="Symbol">))</a>
          <a id="6348" class="Symbol">(</a><a id="6349" href="Graded.Heap.Typed.Reduction.html#28350" class="Function">⇒*→≡</a> <a id="6354" class="Symbol">(</a><a id="6355" href="Graded.Heap.Typed.Properties.html#1894" class="Function">⊢initial</a> <a id="6364" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="6369" href="Graded.Heap.Soundness.html#5630" class="Bound">⊢t</a><a id="6371" class="Symbol">)</a> <a id="6373" href="Graded.Heap.Soundness.html#6113" class="Bound">d′</a><a id="6375" class="Symbol">)</a>
      <a id="6383" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6385" href="Graded.Heap.Usage.Properties.html#4676" class="Function">𝟘▸H→H≤𝟘</a> <a id="6393" class="Symbol">(</a><a id="6394" href="Graded.Heap.Usage.Properties.html#3795" class="Function">subₕ</a> <a id="6399" href="Graded.Heap.Soundness.html#5974" class="Bound">▸H</a> <a id="6402" class="Symbol">(</a><a id="6403" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
          <a id="6419" href="Graded.Heap.Soundness.html#5962" class="Bound">γ</a>                     <a id="6441" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="6444" href="Graded.Heap.Soundness.html#5988" class="Bound">γ≤</a> <a id="6447" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
          <a id="6459" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="6461" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="6464" href="Graded.Context.Weakening.html#958" class="Function">wkConₘ</a> <a id="6471" href="Graded.Heap.Soundness.html#5906" class="Bound">ρ</a> <a id="6473" href="Graded.Heap.Soundness.html#5966" class="Bound">δ</a> <a id="6475" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="6478" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="6481" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="6484" href="Graded.Context.Properties.Addition.html#926" class="Function">+ᶜ-identityʳ</a> <a id="6497" class="Symbol">_</a> <a id="6499" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
          <a id="6511" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="6513" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="6516" href="Graded.Context.Weakening.html#958" class="Function">wkConₘ</a> <a id="6523" href="Graded.Heap.Soundness.html#5906" class="Bound">ρ</a> <a id="6525" href="Graded.Heap.Soundness.html#5966" class="Bound">δ</a>       <a id="6533" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="6536" href="Graded.Context.Properties.Multiplication.html#701" class="Function">·ᶜ-identityˡ</a> <a id="6549" class="Symbol">_</a> <a id="6551" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
          <a id="6563" href="Graded.Context.Weakening.html#958" class="Function">wkConₘ</a> <a id="6570" href="Graded.Heap.Soundness.html#5906" class="Bound">ρ</a> <a id="6572" href="Graded.Heap.Soundness.html#5966" class="Bound">δ</a>            <a id="6585" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="6588" href="Graded.Context.Weakening.html#3188" class="Function">wk-≤ᶜ</a> <a id="6594" href="Graded.Heap.Soundness.html#5906" class="Bound">ρ</a> <a id="6596" class="Symbol">(</a><a id="6597" href="Graded.Usage.Inversion.html#8705" class="Function">inv-usage-numeral</a> <a id="6615" href="Graded.Heap.Soundness.html#5979" class="Bound">▸n</a> <a id="6618" href="Graded.Heap.Soundness.html#5918" class="Bound">num</a><a id="6621" class="Symbol">)</a> <a id="6623" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
          <a id="6635" href="Graded.Context.Weakening.html#958" class="Function">wkConₘ</a> <a id="6642" href="Graded.Heap.Soundness.html#5906" class="Bound">ρ</a> <a id="6644" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>           <a id="6657" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="6660" href="Graded.Context.Weakening.html#1158" class="Function">wk-𝟘ᶜ</a> <a id="6666" href="Graded.Heap.Soundness.html#5906" class="Bound">ρ</a> <a id="6668" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
          <a id="6680" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>                    <a id="6702" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a> <a id="6704" class="Symbol">))}</a>
    <a id="6712" class="Keyword">where</a>
    <a id="6722" href="Graded.Heap.Soundness.html#6722" class="Function">consistent</a> <a id="6733" class="Symbol">:</a> <a id="6735" href="Graded.Usage.Restrictions.html#1638" class="Function">Emptyrec-allowed</a> <a id="6752" href="Graded.Mode.html#1117" class="InductiveConstructor">𝟙ᵐ</a> <a id="6755" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="6757" class="Symbol">→</a> <a id="6759" href="Definition.Typed.html#21923" class="Function">Consistent</a> <a id="6770" href="Graded.Heap.Soundness.html#5624" class="Bound">Δ</a>
    <a id="6776" href="Graded.Heap.Soundness.html#6722" class="Function">consistent</a> <a id="6787" href="Graded.Heap.Soundness.html#6787" class="Bound">ok</a> <a id="6790" class="Symbol">=</a>
      <a id="6798" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="6803" href="Graded.Heap.Soundness.html#5627" class="Bound">as</a> <a id="6806" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="6809" class="Symbol">λ</a> <a id="6811" class="Keyword">where</a>
        <a id="6825" class="Symbol">(</a><a id="6826" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="6831" class="Symbol">(</a><a id="6832" href="Graded.Heap.Soundness.html#6832" class="Bound">c</a> <a id="6834" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6836" class="Symbol">_))</a> <a id="6840" class="Symbol">→</a> <a id="6842" href="Graded.Heap.Soundness.html#6832" class="Bound">c</a> <a id="6844" href="Graded.Heap.Soundness.html#6787" class="Bound">ok</a>
        <a id="6855" class="Symbol">(</a><a id="6856" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="6861" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a><a id="6868" class="Symbol">)</a> <a id="6870" class="Symbol">→</a>
          <a id="6882" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="6887" href="Tools.PropositionalEquality.html#2252" class="Function">PE.singleton</a> <a id="6900" href="Graded.Heap.Soundness.html#5624" class="Bound">Δ</a> <a id="6902" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="6905" class="Symbol">λ</a> <a id="6907" class="Keyword">where</a>
            <a id="6925" class="Symbol">(</a><a id="6926" href="Definition.Untyped.NotParametrised.html#926" class="InductiveConstructor">ε</a> <a id="6928" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6930" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a><a id="6937" class="Symbol">)</a> <a id="6939" class="Symbol">→</a> <a id="6941" class="Symbol">λ</a> <a id="6943" href="Graded.Heap.Soundness.html#6943" class="Bound">_</a> <a id="6945" class="Symbol">→</a> <a id="6947" href="Definition.Typed.Consequences.Canonicity.html#1915" class="Function">¬Empty</a>
    <a id="6958" href="Graded.Heap.Soundness.html#6958" class="Function">k≡0⊎erased-heap</a> <a id="6974" class="Symbol">:</a> <a id="6976" href="Graded.Heap.Soundness.html#5616" class="Bound">k</a> <a id="6978" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">PE.≡</a> <a id="6983" class="Number">0</a> <a id="6985" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="6987" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="6989" href="Graded.Heap.Soundness.html#485" class="Bound">erased-heap</a>
    <a id="7005" href="Graded.Heap.Soundness.html#6958" class="Function">k≡0⊎erased-heap</a> <a id="7021" class="Symbol">=</a>
      <a id="7029" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="7034" href="Graded.Heap.Soundness.html#5627" class="Bound">as</a> <a id="7037" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="7040" class="Symbol">λ</a> <a id="7042" class="Keyword">where</a>
        <a id="7056" class="Symbol">(</a><a id="7057" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7062" href="Graded.Heap.Soundness.html#7062" class="Bound">x</a><a id="7063" class="Symbol">)</a> <a id="7065" class="Symbol">→</a> <a id="7067" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7072" href="Graded.Heap.Soundness.html#7062" class="Bound">x</a>
        <a id="7082" class="Symbol">(</a><a id="7083" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7088" class="Symbol">(_</a> <a id="7091" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7093" href="Graded.Heap.Soundness.html#7093" class="Bound">x</a><a id="7094" class="Symbol">))</a> <a id="7097" class="Symbol">→</a> <a id="7099" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7104" href="Graded.Heap.Soundness.html#7093" class="Bound">x</a>

<a id="7107" class="Keyword">opaque</a>

  <a id="7117" class="Comment">-- The soundness property above specialized to closed terms</a>
  <a id="7179" class="Comment">-- All closed, well-typed and well-resourced terms of type ℕ reduce to some</a>
  <a id="7257" class="Comment">-- numeral and the resulting heap has all grades less than or equal to 𝟘.</a>

  <a id="7334" class="Comment">-- Note that some assumptions to this theorem are given as a module parameter.</a>

  <a id="soundness-closed"></a><a id="7416" href="Graded.Heap.Soundness.html#7416" class="Function">soundness-closed</a> <a id="7433" class="Symbol">:</a> <a id="7435" class="InductiveConstructor">ε</a> <a id="7437" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="7439" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a> <a id="7441" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="7443" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="7445" class="Symbol">→</a> <a id="7447" class="InductiveConstructor">ε</a> <a id="7449" href="Graded.Usage.html#14461" class="Function Operator">▸</a> <a id="7451" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a>
                   <a id="7472" class="Symbol">→</a> <a id="7474" href="Tools.Product.html#1014" class="Function">∃₅</a> <a id="7477" class="Symbol">λ</a> <a id="7479" href="Graded.Heap.Soundness.html#7479" class="Bound">m</a> <a id="7481" href="Graded.Heap.Soundness.html#7481" class="Bound">n</a> <a id="7483" href="Graded.Heap.Soundness.html#7483" class="Bound">H</a> <a id="7485" href="Graded.Heap.Soundness.html#7485" class="Bound">k</a> <a id="7487" class="Symbol">(</a><a id="7488" href="Graded.Heap.Soundness.html#7488" class="Bound">ρ</a> <a id="7490" class="Symbol">:</a> <a id="7492" href="Definition.Untyped.NotParametrised.html#2601" class="Datatype">Wk</a> <a id="7495" href="Graded.Heap.Soundness.html#7479" class="Bound">m</a> <a id="7497" href="Graded.Heap.Soundness.html#7481" class="Bound">n</a><a id="7498" class="Symbol">)</a> <a id="7500" class="Symbol">→</a>
                   <a id="7521" href="Graded.Heap.Untyped.html#10056" class="Function">initial</a> <a id="7529" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a> <a id="7531" href="Graded.Heap.Reduction.html#5867" class="Datatype Operator">⇒*</a> <a id="7534" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟨</a> <a id="7536" href="Graded.Heap.Soundness.html#7483" class="Bound">H</a> <a id="7538" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="7540" href="Definition.Untyped.html#3622" class="Function">sucᵏ</a> <a id="7545" href="Graded.Heap.Soundness.html#7485" class="Bound">k</a> <a id="7547" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="7549" href="Graded.Heap.Soundness.html#7488" class="Bound">ρ</a> <a id="7551" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="7553" class="InductiveConstructor">ε</a> <a id="7555" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟩</a> <a id="7557" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
                   <a id="7578" class="Symbol">(</a><a id="7579" class="InductiveConstructor">ε</a> <a id="7581" href="Definition.Typed.html#5482" class="Datatype Operator">⊢</a> <a id="7583" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a> <a id="7585" href="Definition.Typed.html#5482" class="Datatype Operator">≡</a> <a id="7587" href="Definition.Untyped.html#3622" class="Function">sucᵏ</a> <a id="7592" href="Graded.Heap.Soundness.html#7485" class="Bound">k</a> <a id="7594" href="Definition.Typed.html#5482" class="Datatype Operator">∷</a> <a id="7596" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="7597" class="Symbol">)</a> <a id="7599" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
                   <a id="7620" href="Graded.Heap.Soundness.html#7483" class="Bound">H</a> <a id="7622" href="Graded.Heap.Usage.html#1317" class="Datatype Operator">≤ʰ</a> <a id="7625" href="Graded.Modality.html#926" class="Function">𝟘</a>
  <a id="7629" href="Graded.Heap.Soundness.html#7416" class="Function">soundness-closed</a> <a id="7646" class="Symbol">=</a> <a id="7648" href="Graded.Heap.Soundness.html#5307" class="Function">soundness</a> <a id="7658" class="Symbol">(</a><a id="7659" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7664" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a><a id="7671" class="Symbol">)</a>

<a id="7674" class="Keyword">opaque</a>

  <a id="7684" class="Comment">-- The soundness property above specialized to open terms</a>
  <a id="7744" class="Comment">-- Given some assumptions, all well-typed and erased types of type ℕ reduce to some</a>
  <a id="7830" class="Comment">-- numeral and the resulting heap has all grades less than or equal to 𝟘</a>

  <a id="7906" class="Comment">-- Note that some assumptions to this theorem are given as a module parameter.</a>

  <a id="soundness-open"></a><a id="7988" href="Graded.Heap.Soundness.html#7988" class="Function">soundness-open</a> <a id="8003" class="Symbol">:</a> <a id="8005" class="Symbol">(</a><a id="8006" href="Graded.Usage.Restrictions.html#1638" class="Function">Emptyrec-allowed</a> <a id="8023" class="InductiveConstructor">𝟙ᵐ</a> <a id="8026" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="8028" class="Symbol">→</a> <a id="8030" href="Definition.Typed.html#21923" class="Function">Consistent</a> <a id="8041" href="Graded.Heap.Soundness.html#2832" class="Generalizable">Δ</a><a id="8042" class="Symbol">)</a>
                   <a id="8063" class="Symbol">→</a> <a id="8065" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="8067" href="Graded.Heap.Soundness.html#485" class="Bound">erased-heap</a>
                   <a id="8098" class="Symbol">→</a> <a id="8100" href="Graded.Heap.Soundness.html#2832" class="Generalizable">Δ</a> <a id="8102" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="8104" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a> <a id="8106" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="8108" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8110" class="Symbol">→</a> <a id="8112" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="8115" href="Graded.Usage.html#14461" class="Function Operator">▸</a> <a id="8117" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a>
                   <a id="8138" class="Symbol">→</a> <a id="8140" href="Tools.Product.html#1014" class="Function">∃₅</a> <a id="8143" class="Symbol">λ</a> <a id="8145" href="Graded.Heap.Soundness.html#8145" class="Bound">m</a> <a id="8147" href="Graded.Heap.Soundness.html#8147" class="Bound">n</a> <a id="8149" href="Graded.Heap.Soundness.html#8149" class="Bound">H</a> <a id="8151" href="Graded.Heap.Soundness.html#8151" class="Bound">k</a> <a id="8153" class="Symbol">(</a><a id="8154" href="Graded.Heap.Soundness.html#8154" class="Bound">ρ</a> <a id="8156" class="Symbol">:</a> <a id="8158" href="Definition.Untyped.NotParametrised.html#2601" class="Datatype">Wk</a> <a id="8161" href="Graded.Heap.Soundness.html#8145" class="Bound">m</a> <a id="8163" href="Graded.Heap.Soundness.html#8147" class="Bound">n</a><a id="8164" class="Symbol">)</a> <a id="8166" class="Symbol">→</a>
                   <a id="8187" href="Graded.Heap.Untyped.html#10056" class="Function">initial</a> <a id="8195" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a> <a id="8197" href="Graded.Heap.Reduction.html#5867" class="Datatype Operator">⇒*</a> <a id="8200" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟨</a> <a id="8202" href="Graded.Heap.Soundness.html#8149" class="Bound">H</a> <a id="8204" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="8206" href="Definition.Untyped.html#3622" class="Function">sucᵏ</a> <a id="8211" href="Graded.Heap.Soundness.html#8151" class="Bound">k</a> <a id="8213" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="8215" href="Graded.Heap.Soundness.html#8154" class="Bound">ρ</a> <a id="8217" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">,</a> <a id="8219" class="InductiveConstructor">ε</a> <a id="8221" href="Graded.Heap.Untyped.html#8875" class="InductiveConstructor Operator">⟩</a> <a id="8223" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
                   <a id="8244" class="Symbol">(</a><a id="8245" href="Graded.Heap.Soundness.html#2832" class="Generalizable">Δ</a> <a id="8247" href="Definition.Typed.html#5482" class="Datatype Operator">⊢</a> <a id="8249" href="Graded.Heap.Soundness.html#2780" class="Generalizable">t</a> <a id="8251" href="Definition.Typed.html#5482" class="Datatype Operator">≡</a> <a id="8253" href="Definition.Untyped.html#3622" class="Function">sucᵏ</a> <a id="8258" href="Graded.Heap.Soundness.html#8151" class="Bound">k</a> <a id="8260" href="Definition.Typed.html#5482" class="Datatype Operator">∷</a> <a id="8262" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="8263" class="Symbol">)</a> <a id="8265" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
                   <a id="8286" href="Graded.Heap.Soundness.html#8149" class="Bound">H</a> <a id="8288" href="Graded.Heap.Usage.html#1317" class="Datatype Operator">≤ʰ</a> <a id="8291" href="Graded.Modality.html#926" class="Function">𝟘</a>
  <a id="8295" href="Graded.Heap.Soundness.html#7988" class="Function">soundness-open</a> <a id="8310" href="Graded.Heap.Soundness.html#8310" class="Bound">consistent</a> <a id="8321" href="Graded.Heap.Soundness.html#8321" class="Bound">erased</a> <a id="8328" class="Symbol">=</a> <a id="8330" href="Graded.Heap.Soundness.html#5307" class="Function">soundness</a> <a id="8340" class="Symbol">(</a><a id="8341" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="8346" class="Symbol">(</a><a id="8347" href="Graded.Heap.Soundness.html#8310" class="Bound">consistent</a> <a id="8358" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8360" href="Graded.Heap.Soundness.html#8321" class="Bound">erased</a><a id="8366" class="Symbol">))</a>
</pre></body></html>