<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Application.NegativeAxioms.Canonicity.Erased</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Proof that consistent erased axioms do not jeopardize canonicity</a>
<a id="142" class="Comment">-- if erased matches are not allowed.</a>
<a id="180" class="Comment">------------------------------------------------------------------------</a>

<a id="254" class="Keyword">import</a> <a id="261" href="Definition.Modality.Instances.Erasure.Modality.html" class="Module">Definition.Modality.Instances.Erasure.Modality</a>
<a id="308" class="Keyword">open</a> <a id="313" class="Keyword">import</a> <a id="320" href="Definition.Modality.Instances.Erasure.html" class="Module">Definition.Modality.Instances.Erasure</a>

<a id="359" class="Keyword">open</a> <a id="364" class="Keyword">import</a> <a id="371" href="Definition.Modality.Restrictions.html" class="Module">Definition.Modality.Restrictions</a> <a id="404" href="Definition.Modality.Instances.Erasure.html#397" class="Datatype">Erasure</a>
<a id="412" class="Keyword">open</a> <a id="417" class="Keyword">import</a> <a id="424" href="Definition.Modality.Restrictions.Definitions.html" class="Module">Definition.Modality.Restrictions.Definitions</a>
<a id="469" class="Keyword">import</a> <a id="476" href="Definition.Typed.html" class="Module">Definition.Typed</a>
<a id="493" class="Keyword">open</a> <a id="498" class="Keyword">import</a> <a id="505" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a> <a id="535" href="Definition.Modality.Instances.Erasure.html#397" class="Datatype">Erasure</a>
<a id="543" class="Keyword">open</a> <a id="548" class="Keyword">import</a> <a id="555" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="574" href="Definition.Modality.Instances.Erasure.html#397" class="Datatype">Erasure</a> <a id="582" class="Keyword">hiding</a> <a id="589" class="Symbol">(</a><a id="590" href="Definition.Untyped.NotParametrised.html#1138" class="InductiveConstructor Operator">_‚à∑_</a><a id="593" class="Symbol">)</a>

<a id="596" class="Keyword">open</a> <a id="601" class="Keyword">import</a> <a id="608" href="Tools.Empty.html" class="Module">Tools.Empty</a>

<a id="621" class="Keyword">module</a> <a id="628" href="Application.NegativeAxioms.Canonicity.Erased.html" class="Module">Application.NegativeAxioms.Canonicity.Erased</a>
  <a id="675" class="Symbol">(</a><a id="676" href="Application.NegativeAxioms.Canonicity.Erased.html#676" class="Bound">R</a> <a id="678" class="Symbol">:</a> <a id="680" href="Definition.Modality.Restrictions.html#723" class="Record">Restrictions</a><a id="692" class="Symbol">)</a>
  <a id="696" class="Symbol">(</a><a id="697" class="Keyword">open</a> <a id="702" href="Definition.Modality.Instances.Erasure.Modality.html" class="Module">Definition.Modality.Instances.Erasure.Modality</a> <a id="749" href="Application.NegativeAxioms.Canonicity.Erased.html#676" class="Bound">R</a><a id="750" class="Symbol">)</a>
  <a id="754" class="Comment">-- Erased matches are not allowed.</a>
  <a id="791" class="Symbol">(</a><a id="792" href="Application.NegativeAxioms.Canonicity.Erased.html#792" class="Bound">no-erased-matches</a> <a id="810" class="Symbol">:</a> <a id="812" href="Definition.Modality.Restrictions.Definitions.html#2762" class="Function">No-erased-matches</a> <a id="830" href="Definition.Modality.Instances.Erasure.Modality.html#1926" class="Function">ErasureModality</a><a id="845" class="Symbol">)</a>
  <a id="849" class="Symbol">(</a><a id="850" href="Application.NegativeAxioms.Canonicity.Erased.html#850" class="Bound">TR</a> <a id="853" class="Symbol">:</a> <a id="855" href="Definition.Typed.Restrictions.html#379" class="Record">Type-restrictions</a><a id="872" class="Symbol">)</a>
  <a id="876" class="Symbol">(</a><a id="877" class="Keyword">open</a> <a id="882" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="899" href="Application.NegativeAxioms.Canonicity.Erased.html#850" class="Bound">TR</a><a id="901" class="Symbol">)</a>
  <a id="905" class="Symbol">{</a><a id="906" href="Application.NegativeAxioms.Canonicity.Erased.html#906" class="Bound">m</a><a id="907" class="Symbol">}</a> <a id="909" class="Symbol">{</a><a id="910" href="Application.NegativeAxioms.Canonicity.Erased.html#910" class="Bound">Œì</a> <a id="912" class="Symbol">:</a> <a id="914" href="Definition.Untyped.NotParametrised.html#781" class="Datatype">Con</a> <a id="918" href="Definition.Untyped.html#1883" class="Datatype">Term</a> <a id="923" href="Application.NegativeAxioms.Canonicity.Erased.html#906" class="Bound">m</a><a id="924" class="Symbol">}</a> <a id="926" class="Symbol">(</a><a id="927" href="Application.NegativeAxioms.Canonicity.Erased.html#927" class="Bound">consistent</a> <a id="938" class="Symbol">:</a> <a id="940" class="Symbol">‚àÄ{</a><a id="942" href="Application.NegativeAxioms.Canonicity.Erased.html#942" class="Bound">t</a><a id="943" class="Symbol">}</a> <a id="945" class="Symbol">‚Üí</a> <a id="947" href="Application.NegativeAxioms.Canonicity.Erased.html#910" class="Bound">Œì</a> <a id="949" href="Definition.Typed.html#1476" class="Datatype Operator">‚ä¢</a> <a id="951" href="Application.NegativeAxioms.Canonicity.Erased.html#942" class="Bound">t</a> <a id="953" href="Definition.Typed.html#1476" class="Datatype Operator">‚à∑</a> <a id="955" href="Definition.Untyped.html#2416" class="InductiveConstructor">Empty</a> <a id="961" class="Symbol">‚Üí</a> <a id="963" href="Data.Empty.html#526" class="Datatype">‚ä•</a><a id="964" class="Symbol">)</a>
  <a id="968" class="Keyword">where</a>

<a id="975" class="Keyword">open</a> <a id="980" class="Keyword">import</a> <a id="987" href="Definition.Modality.Context.html" class="Module">Definition.Modality.Context</a> <a id="1015" href="Definition.Modality.Instances.Erasure.Modality.html#1926" class="Function">ErasureModality</a>
<a id="1031" class="Keyword">open</a> <a id="1036" class="Keyword">import</a> <a id="1043" href="Definition.Modality.Usage.html" class="Module">Definition.Modality.Usage</a> <a id="1069" href="Definition.Modality.Instances.Erasure.Modality.html#1926" class="Function">ErasureModality</a>
<a id="1085" class="Keyword">open</a> <a id="1090" class="Keyword">import</a> <a id="1097" href="Definition.Mode.html" class="Module">Definition.Mode</a> <a id="1113" href="Definition.Modality.Instances.Erasure.Modality.html#1926" class="Function">ErasureModality</a>
<a id="1129" class="Keyword">import</a> <a id="1136" href="Application.NegativeAxioms.Canonicity.NegativeErased.html" class="Module">Application.NegativeAxioms.Canonicity.NegativeErased</a>
  <a id="1191" href="Application.NegativeAxioms.Canonicity.Erased.html#676" class="Bound">R</a> <a id="1193" href="Application.NegativeAxioms.Canonicity.Erased.html#792" class="Bound">no-erased-matches</a> <a id="1211" href="Application.NegativeAxioms.Canonicity.Erased.html#850" class="Bound">TR</a>
  as <a id="NE"></a><a id="1219" href="Application.NegativeAxioms.Canonicity.Erased.html#1219" class="Module">NE</a>
<a id="1222" class="Keyword">open</a> <a id="1227" class="Keyword">import</a> <a id="1234" href="Application.NegativeAxioms.NegativeErasedContext.html" class="Module">Application.NegativeAxioms.NegativeErasedContext</a>
  <a id="1285" href="Definition.Modality.Instances.Erasure.Modality.html#1926" class="Function">ErasureModality</a> <a id="1301" href="Application.NegativeAxioms.Canonicity.Erased.html#850" class="Bound">TR</a> <a id="1304" class="Symbol">(Œª</a> <a id="1307" class="Symbol">())</a>
<a id="1311" class="Keyword">open</a> <a id="1316" class="Keyword">import</a> <a id="1323" href="Erasure.SucRed.html" class="Module">Erasure.SucRed</a> <a id="1338" href="Application.NegativeAxioms.Canonicity.Erased.html#850" class="Bound">TR</a>

<a id="1342" class="Keyword">open</a> <a id="1347" class="Keyword">import</a> <a id="1354" href="Tools.Nat.html" class="Module">Tools.Nat</a>
<a id="1364" class="Keyword">open</a> <a id="1369" class="Keyword">import</a> <a id="1376" href="Tools.Product.html" class="Module">Tools.Product</a>

<a id="1391" class="Keyword">private</a>
  <a id="1401" class="Keyword">variable</a>
    <a id="1414" href="Application.NegativeAxioms.Canonicity.Erased.html#1414" class="Generalizable">n</a> <a id="1416" class="Symbol">:</a> <a id="1418" href="Agda.Builtin.Nat.html#186" class="Datatype">Nat</a>
    <a id="1426" href="Application.NegativeAxioms.Canonicity.Erased.html#1426" class="Generalizable">t</a> <a id="1428" href="Application.NegativeAxioms.Canonicity.Erased.html#1428" class="Generalizable">u</a> <a id="1430" class="Symbol">:</a> <a id="1432" href="Definition.Untyped.html#1883" class="Datatype">Term</a> <a id="1437" href="Application.NegativeAxioms.Canonicity.Erased.html#1414" class="Generalizable">n</a>

<a id="1440" class="Comment">-- Canonicity theorem: Any well-typed term Œì ‚ä¢ t ‚à∑ ‚Ñï, Œ≥ ‚ñ∏ t</a>
<a id="1500" class="Comment">-- reduces to a numeral under the ‚áíÀ¢* reduction.</a>

<a id="canonicityRed"></a><a id="1550" href="Application.NegativeAxioms.Canonicity.Erased.html#1550" class="Function">canonicityRed</a> <a id="1564" class="Symbol">:</a> <a id="1566" href="Application.NegativeAxioms.Canonicity.Erased.html#910" class="Bound">Œì</a> <a id="1568" href="Definition.Typed.html#1476" class="Datatype Operator">‚ä¢</a> <a id="1570" href="Application.NegativeAxioms.Canonicity.Erased.html#1426" class="Generalizable">t</a> <a id="1572" href="Definition.Typed.html#1476" class="Datatype Operator">‚à∑</a> <a id="1574" href="Definition.Untyped.html#2389" class="InductiveConstructor">‚Ñï</a> <a id="1576" class="Symbol">‚Üí</a> <a id="1578" href="Definition.Modality.Context.html#2011" class="Function">ùüò·∂ú</a> <a id="1581" href="Definition.Modality.Usage.html#1055" class="Datatype Operator">‚ñ∏[</a> <a id="1584" href="Definition.Mode.html#1066" class="InductiveConstructor">ùüô·µê</a> <a id="1587" href="Definition.Modality.Usage.html#1055" class="Datatype Operator">]</a> <a id="1589" href="Application.NegativeAxioms.Canonicity.Erased.html#1426" class="Generalizable">t</a>
              <a id="1605" class="Symbol">‚Üí</a> <a id="1607" href="Data.Product.html#1369" class="Function">‚àÉ</a> <a id="1609" class="Symbol">Œª</a> <a id="1611" href="Application.NegativeAxioms.Canonicity.Erased.html#1611" class="Bound">u</a> <a id="1613" class="Symbol">‚Üí</a> <a id="1615" href="Definition.Untyped.html#9268" class="Datatype">Numeral</a> <a id="1623" href="Application.NegativeAxioms.Canonicity.Erased.html#1611" class="Bound">u</a> <a id="1625" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="1627" href="Application.NegativeAxioms.Canonicity.Erased.html#910" class="Bound">Œì</a> <a id="1629" href="Erasure.SucRed.html#926" class="Datatype Operator">‚ä¢</a> <a id="1631" href="Application.NegativeAxioms.Canonicity.Erased.html#1426" class="Generalizable">t</a> <a id="1633" href="Erasure.SucRed.html#926" class="Datatype Operator">‚áíÀ¢*</a> <a id="1637" href="Application.NegativeAxioms.Canonicity.Erased.html#1611" class="Bound">u</a> <a id="1639" href="Erasure.SucRed.html#926" class="Datatype Operator">‚à∑‚Ñï</a>
<a id="1642" href="Application.NegativeAxioms.Canonicity.Erased.html#1550" class="Function">canonicityRed</a> <a id="1656" href="Application.NegativeAxioms.Canonicity.Erased.html#1656" class="Bound">‚ä¢t</a> <a id="1659" href="Application.NegativeAxioms.Canonicity.Erased.html#1659" class="Bound">ùüò‚ñ∏t</a> <a id="1663" class="Symbol">=</a> <a id="1665" href="Application.NegativeAxioms.Canonicity.NegativeErased.html#7313" class="Function">NE.canonicityRed</a> <a id="1682" href="Application.NegativeAxioms.NegativeErasedContext.html#2013" class="Function">erasedContext</a> <a id="1696" href="Application.NegativeAxioms.Canonicity.Erased.html#927" class="Bound">consistent</a> <a id="1707" href="Application.NegativeAxioms.Canonicity.Erased.html#1656" class="Bound">‚ä¢t</a> <a id="1710" href="Application.NegativeAxioms.Canonicity.Erased.html#1659" class="Bound">ùüò‚ñ∏t</a>

<a id="1715" class="Comment">-- Canonicity theorem: Any well-typed term Œì ‚ä¢ t : ‚Ñï is convertible to a numeral.</a>

<a id="canonicityEq"></a><a id="1798" href="Application.NegativeAxioms.Canonicity.Erased.html#1798" class="Function">canonicityEq</a> <a id="1811" class="Symbol">:</a> <a id="1813" href="Application.NegativeAxioms.Canonicity.Erased.html#910" class="Bound">Œì</a> <a id="1815" href="Definition.Typed.html#1476" class="Datatype Operator">‚ä¢</a> <a id="1817" href="Application.NegativeAxioms.Canonicity.Erased.html#1426" class="Generalizable">t</a> <a id="1819" href="Definition.Typed.html#1476" class="Datatype Operator">‚à∑</a> <a id="1821" href="Definition.Untyped.html#2389" class="InductiveConstructor">‚Ñï</a> <a id="1823" class="Symbol">‚Üí</a> <a id="1825" href="Definition.Modality.Context.html#2011" class="Function">ùüò·∂ú</a> <a id="1828" href="Definition.Modality.Usage.html#1055" class="Datatype Operator">‚ñ∏[</a> <a id="1831" href="Definition.Mode.html#1066" class="InductiveConstructor">ùüô·µê</a> <a id="1834" href="Definition.Modality.Usage.html#1055" class="Datatype Operator">]</a> <a id="1836" href="Application.NegativeAxioms.Canonicity.Erased.html#1426" class="Generalizable">t</a>
             <a id="1851" class="Symbol">‚Üí</a> <a id="1853" href="Data.Product.html#1369" class="Function">‚àÉ</a> <a id="1855" class="Symbol">Œª</a> <a id="1857" href="Application.NegativeAxioms.Canonicity.Erased.html#1857" class="Bound">u</a> <a id="1859" class="Symbol">‚Üí</a> <a id="1861" href="Definition.Untyped.html#9268" class="Datatype">Numeral</a> <a id="1869" href="Application.NegativeAxioms.Canonicity.Erased.html#1857" class="Bound">u</a> <a id="1871" href="Data.Product.html#1167" class="Function Operator">√ó</a> <a id="1873" href="Application.NegativeAxioms.Canonicity.Erased.html#910" class="Bound">Œì</a> <a id="1875" href="Definition.Typed.html#4261" class="Datatype Operator">‚ä¢</a> <a id="1877" href="Application.NegativeAxioms.Canonicity.Erased.html#1426" class="Generalizable">t</a> <a id="1879" href="Definition.Typed.html#4261" class="Datatype Operator">‚â°</a> <a id="1881" href="Application.NegativeAxioms.Canonicity.Erased.html#1857" class="Bound">u</a> <a id="1883" href="Definition.Typed.html#4261" class="Datatype Operator">‚à∑</a> <a id="1885" href="Definition.Untyped.html#2389" class="InductiveConstructor">‚Ñï</a>
<a id="1887" href="Application.NegativeAxioms.Canonicity.Erased.html#1798" class="Function">canonicityEq</a> <a id="1900" href="Application.NegativeAxioms.Canonicity.Erased.html#1900" class="Bound">‚ä¢t</a> <a id="1903" href="Application.NegativeAxioms.Canonicity.Erased.html#1903" class="Bound">ùüò‚ñ∏t</a> <a id="1907" class="Symbol">=</a>
  <a id="1911" class="Keyword">let</a> <a id="1915" href="Application.NegativeAxioms.Canonicity.Erased.html#1915" class="Bound">u</a> <a id="1917" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1919" href="Application.NegativeAxioms.Canonicity.Erased.html#1919" class="Bound">numU</a> <a id="1924" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1926" href="Application.NegativeAxioms.Canonicity.Erased.html#1926" class="Bound">d</a> <a id="1928" class="Symbol">=</a> <a id="1930" href="Application.NegativeAxioms.Canonicity.Erased.html#1550" class="Function">canonicityRed</a> <a id="1944" href="Application.NegativeAxioms.Canonicity.Erased.html#1900" class="Bound">‚ä¢t</a> <a id="1947" href="Application.NegativeAxioms.Canonicity.Erased.html#1903" class="Bound">ùüò‚ñ∏t</a>
  <a id="1953" class="Keyword">in</a>  <a id="1957" href="Application.NegativeAxioms.Canonicity.Erased.html#1915" class="Bound">u</a> <a id="1959" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1961" href="Application.NegativeAxioms.Canonicity.Erased.html#1919" class="Bound">numU</a> <a id="1966" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1968" href="Erasure.SucRed.html#1576" class="Function">subset*TermÀ¢</a> <a id="1981" href="Application.NegativeAxioms.Canonicity.Erased.html#1926" class="Bound">d</a>
</pre></body></html>