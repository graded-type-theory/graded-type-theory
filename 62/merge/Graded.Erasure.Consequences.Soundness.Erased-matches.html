<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Consequences.Soundness.Erased-matches</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Soundness of the extraction function in the presence of certain</a>
<a id="141" class="Comment">-- kinds of erased matches</a>
<a id="168" class="Comment">------------------------------------------------------------------------</a>

<a id="242" class="Keyword">import</a> <a id="249" href="Definition.Typed.html" class="Module">Definition.Typed</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>
<a id="308" class="Keyword">import</a> <a id="315" href="Definition.Untyped.html" class="Module">Definition.Untyped</a>
<a id="334" class="Keyword">open</a> <a id="339" class="Keyword">import</a> <a id="346" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a> <a id="368" class="Symbol">as</a> <a id="371" class="Module">T</a> <a id="373" class="Keyword">using</a> <a id="379" class="Symbol">(</a><a id="380" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="390" class="Symbol">)</a>
<a id="392" class="Keyword">open</a> <a id="397" class="Keyword">import</a> <a id="404" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="420" class="Keyword">import</a> <a id="427" href="Graded.Mode.html" class="Module">Graded.Mode</a>
<a id="439" class="Keyword">import</a> <a id="446" href="Graded.Restrictions.html" class="Module">Graded.Restrictions</a>
<a id="466" class="Keyword">open</a> <a id="471" class="Keyword">import</a> <a id="478" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="504" class="Keyword">open</a> <a id="509" class="Keyword">import</a> <a id="516" href="Tools.Bool.html" class="Module">Tools.Bool</a>
<a id="527" class="Keyword">open</a> <a id="532" class="Keyword">import</a> <a id="539" href="Tools.Nat.html" class="Module">Tools.Nat</a>

<a id="550" class="Keyword">module</a> <a id="557" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html" class="Module">Graded.Erasure.Consequences.Soundness.Erased-matches</a>
  <a id="612" class="Symbol">{</a><a id="613" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#613" class="Bound">a</a><a id="614" class="Symbol">}</a> <a id="616" class="Symbol">{</a><a id="617" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a> <a id="619" class="Symbol">:</a> <a id="621" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="625" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#613" class="Bound">a</a><a id="626" class="Symbol">}</a>
  <a id="630" class="Symbol">(</a><a id="631" class="Keyword">open</a> <a id="636" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="655" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a><a id="656" class="Symbol">)</a>
  <a id="660" class="Symbol">{</a><a id="661" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="663" class="Symbol">:</a> <a id="665" href="Graded.Modality.html#8202" class="Record">Modality</a> <a id="674" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a><a id="675" class="Symbol">}</a>
  <a id="679" class="Symbol">(</a><a id="680" class="Keyword">open</a> <a id="685" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="697" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="698" class="Symbol">)</a>
  <a id="702" class="Symbol">(</a><a id="703" class="Keyword">open</a> <a id="708" href="Graded.Restrictions.html" class="Module">Graded.Restrictions</a> <a id="728" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="729" class="Symbol">)</a>
  <a id="733" class="Symbol">(</a><a id="734" class="Keyword">open</a> <a id="739" href="Graded.Modality.html#8202" class="Module">Modality</a> <a id="748" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="749" class="Symbol">)</a>
  <a id="753" class="Symbol">(</a><a id="754" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="757" class="Symbol">:</a> <a id="759" href="Definition.Typed.Restrictions.html#831" class="Record">Type-restrictions</a> <a id="777" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="778" class="Symbol">)</a>
  <a id="782" class="Symbol">(</a><a id="783" class="Keyword">open</a> <a id="788" href="Definition.Typed.Restrictions.html#831" class="Module">Type-restrictions</a> <a id="806" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a><a id="808" class="Symbol">)</a>
  <a id="812" class="Symbol">(</a><a id="813" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a> <a id="816" class="Symbol">:</a> <a id="818" href="Graded.Usage.Restrictions.html#750" class="Record">Usage-restrictions</a> <a id="837" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="838" class="Symbol">)</a>
  <a id="842" class="Symbol">(</a><a id="843" class="Keyword">open</a> <a id="848" href="Graded.Usage.Restrictions.html#750" class="Module">Usage-restrictions</a> <a id="867" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a><a id="869" class="Symbol">)</a>
  <a id="873" class="Symbol">{</a><a id="874" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#874" class="Bound">k</a> <a id="876" class="Symbol">:</a> <a id="878" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="881" class="Symbol">}</a>
  <a id="885" class="Comment">-- A context.</a>
  <a id="901" class="Symbol">(</a><a id="902" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="904" class="Symbol">:</a> <a id="906" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="910" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="915" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#874" class="Bound">k</a><a id="916" class="Symbol">)</a>
  <a id="920" class="Comment">-- If erased matches are allowed for emptyrec when the mode is 𝟙ᵐ,</a>
  <a id="989" class="Comment">-- then Δ is consistent with respect to a variant of the type system</a>
  <a id="1060" class="Comment">-- for which η-equality is allowed for weak unit types.</a>
  <a id="1118" class="Symbol">(</a><a id="1119" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1119" class="Bound">consistent</a> <a id="1130" class="Symbol">:</a>
     <a id="1137" class="Keyword">let</a> <a id="1141" class="Keyword">open</a> <a id="1146" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="1163" class="Symbol">(</a><a id="1164" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="1167" href="Graded.Restrictions.html#5541" class="Function Operator">with-η-for-Unitʷ</a><a id="1183" class="Symbol">)</a> <a id="1185" class="Keyword">in</a>
     <a id="1193" href="Graded.Usage.Restrictions.html#1638" class="Field">Emptyrec-allowed</a> <a id="1210" href="Graded.Mode.html#1117" class="InductiveConstructor">𝟙ᵐ</a> <a id="1213" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="1215" class="Symbol">→</a>
     <a id="1222" href="Definition.Typed.html#18998" class="Function">Consistent</a> <a id="1233" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a><a id="1234" class="Symbol">)</a>
  <a id="1238" class="Comment">-- Certain erased matches are not allowed.</a>
  <a id="1283" class="Symbol">(</a><a id="1284" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1284" class="Bound">only-some-erased-matches</a> <a id="1309" class="Symbol">:</a> <a id="1311" href="Graded.Restrictions.html#10157" class="Function">Only-some-erased-matches</a> <a id="1336" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="1339" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a><a id="1341" class="Symbol">)</a>
  <a id="1345" class="Comment">-- Equality reflection is not allowed or Δ is empty.</a>
  <a id="1400" class="Symbol">⦃</a> <a id="1402" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1402" class="Bound">ok</a> <a id="1405" class="Symbol">:</a> <a id="1407" href="Definition.Typed.Restrictions.html#3219" class="Datatype">No-equality-reflection</a> <a id="1430" href="Definition.Untyped.NotParametrised.html#1265" class="Datatype Operator">or-empty</a> <a id="1439" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="1441" class="Symbol">⦄</a>
  <a id="1445" class="Comment">-- The variant of extraction that is used.</a>
  <a id="1490" class="Symbol">(</a><a id="1491" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1491" class="Bound">str</a> <a id="1495" class="Symbol">:</a> <a id="1497" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="1507" class="Symbol">)</a>
  <a id="1511" class="Comment">-- The modality&#39;s zero is well-behaved.</a>
  <a id="1553" class="Symbol">⦃</a> <a id="1555" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1555" class="Bound">𝟘-well-behaved</a> <a id="1570" class="Symbol">:</a> <a id="1572" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="1594" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a> <a id="1596" href="Graded.Modality.html#8343" class="Field">semiring-with-meet</a> <a id="1615" class="Symbol">⦄</a>
  <a id="1619" class="Keyword">where</a>

<a id="1626" class="Keyword">import</a> <a id="1633" href="Definition.Typed.QuantityTranslation.html" class="Module">Definition.Typed.QuantityTranslation</a> <a id="1670" class="Symbol">as</a> <a id="1673" class="Module">QT</a>
<a id="1676" class="Keyword">open</a> <a id="1681" class="Keyword">import</a> <a id="1688" href="Definition.Untyped.QuantityTranslation.html" class="Module">Definition.Untyped.QuantityTranslation</a>
<a id="1727" class="Keyword">open</a> <a id="1732" class="Keyword">import</a> <a id="1739" href="Definition.Untyped.QuantityTranslation.Identity.html" class="Module">Definition.Untyped.QuantityTranslation.Identity</a> <a id="1787" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a>

<a id="1790" class="Keyword">open</a> <a id="1795" class="Keyword">import</a> <a id="1802" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1817" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a>
<a id="1819" class="Keyword">open</a> <a id="1824" class="Keyword">import</a> <a id="1831" href="Graded.Modality.Morphism.html" class="Module">Graded.Modality.Morphism</a>
<a id="1856" class="Keyword">open</a> <a id="1861" class="Keyword">import</a> <a id="1868" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="1881" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="1883" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a>

<a id="1887" class="Keyword">import</a> <a id="1894" href="Graded.Erasure.Consequences.Soundness.html" class="Module">Graded.Erasure.Consequences.Soundness</a>
<a id="1932" class="Keyword">open</a> <a id="1937" class="Keyword">import</a> <a id="1944" href="Graded.Erasure.Extraction.html" class="Module">Graded.Erasure.Extraction</a> <a id="1970" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a>
<a id="1972" class="Keyword">import</a> <a id="1979" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a>

<a id="2002" class="Keyword">open</a> <a id="2007" class="Keyword">import</a> <a id="2014" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="2029" class="Keyword">open</a> <a id="2034" class="Keyword">import</a> <a id="2041" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="2055" class="Keyword">open</a> <a id="2060" class="Keyword">import</a> <a id="2067" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="2095" class="Symbol">as</a> <a id="2098" class="Module">PE</a>
<a id="2101" class="Keyword">open</a> <a id="2106" class="Keyword">import</a> <a id="2113" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="2124" class="Keyword">private</a> <a id="2132" class="Keyword">variable</a>
  <a id="2143" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2143" class="Generalizable">Γ</a>   <a id="2147" class="Symbol">:</a> <a id="2149" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="2153" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2158" class="Symbol">_</a>
  <a id="2162" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2162" class="Generalizable">A</a> <a id="2164" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2164" class="Generalizable">t</a> <a id="2166" class="Symbol">:</a> <a id="2168" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2173" class="Symbol">_</a>
  <a id="2177" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2177" class="Generalizable">s</a>   <a id="2181" class="Symbol">:</a> <a id="2183" href="Definition.Untyped.NotParametrised.html#1964" class="Datatype">Strength</a>
  <a id="2194" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2194" class="Generalizable">l</a>   <a id="2198" class="Symbol">:</a> <a id="2200" href="Definition.Untyped.NotParametrised.html#4244" class="Function">Universe-level</a>

<a id="2216" class="Comment">-- A variant of the type restrictions for which η-equality is allowed</a>
<a id="2286" class="Comment">-- for weak unit types.</a>

<a id="TR-η"></a><a id="2311" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2311" class="Function">TR-η</a> <a id="2316" class="Symbol">:</a> <a id="2318" href="Definition.Typed.Restrictions.html#831" class="Record">Type-restrictions</a> <a id="2336" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a>
<a id="2338" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2311" class="Function">TR-η</a> <a id="2343" class="Symbol">=</a> <a id="2345" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="2348" href="Graded.Restrictions.html#5541" class="Function Operator">with-η-for-Unitʷ</a>

<a id="2366" class="Comment">-- TR is used by default.</a>

<a id="2393" class="Keyword">open</a> <a id="2398" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="2415" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a>
<a id="2418" class="Keyword">open</a> <a id="2423" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a> <a id="2445" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a>

<a id="2449" class="Comment">-- The modules T-η and SR-η use TR-η.</a>

<a id="2488" class="Keyword">open</a> <a id="2493" class="Keyword">import</a> <a id="2500" href="Definition.Typed.EqRelInstance.html" class="Module">Definition.Typed.EqRelInstance</a> <a id="2531" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2311" class="Function">TR-η</a>

<a id="2537" class="Keyword">private</a>
  <a id="2547" class="Keyword">module</a> <a id="T-η"></a><a id="2554" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2554" class="Module">T-η</a>         <a id="2566" class="Symbol">=</a> <a id="2568" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="2585" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2311" class="Function">TR-η</a>
  <a id="2592" class="Keyword">module</a> <a id="SR-η"></a><a id="2599" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2599" class="Module">SR-η</a>        <a id="2611" class="Symbol">=</a> <a id="2613" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a> <a id="2635" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2311" class="Function">TR-η</a>
  <a id="2642" class="Keyword">module</a> <a id="Soundness-η"></a><a id="2649" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2649" class="Module">Soundness-η</a> <a id="2661" class="Symbol">=</a>
    <a id="2667" href="Graded.Erasure.Consequences.Soundness.html#6102" class="Module">Graded.Erasure.Consequences.Soundness.Soundness</a> <a id="2715" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2311" class="Function">TR-η</a> <a id="2720" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a>
      <a id="2729" class="Symbol">(</a><a id="2730" class="Keyword">record</a>
         <a id="2746" class="Symbol">{</a> <a id="2748" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1332" class="Field">consistent</a>                  <a id="2776" class="Symbol">=</a> <a id="2778" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1119" class="Bound">consistent</a>
         <a id="2798" class="Symbol">;</a> <a id="2800" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1453" class="Field">closed-or-no-erased-matches</a> <a id="2828" class="Symbol">=</a>
             <a id="2843" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2848" href="Function.Base.html#1974" class="Function Operator">$</a>
             <a id="2863" href="Graded.Restrictions.html#12652" class="Function">Only-some-erased-matches→No-erased-matches</a>
               <a id="2921" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2311" class="Function">TR-η</a> <a id="2926" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a> <a id="2929" class="Symbol">_</a> <a id="2931" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1284" class="Bound">only-some-erased-matches</a>
         <a id="2965" class="Symbol">;</a> <a id="2967" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1600" class="Field">inc</a> <a id="2971" class="Symbol">=</a>
             <a id="2986" href="Definition.Typed.Restrictions.html#3911" class="Function">Type-restrictions.No-equality-reflection-or-empty⇔</a> <a id="3037" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2311" class="Function">TR-η</a>
               <a id="3057" class="Symbol">.</a><a id="3058" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="3064" href="Function.Base.html#1974" class="Function Operator">$</a>
             <a id="3079" href="Definition.Typed.Restrictions.html#3911" class="Function">No-equality-reflection-or-empty⇔</a> <a id="3112" class="Symbol">.</a><a id="3113" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3119" href="Function.Base.html#1974" class="Function Operator">$</a>
             <a id="3134" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1402" class="Bound">ok</a>
         <a id="3146" class="Symbol">})</a>
      <a id="3155" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1491" class="Bound">str</a>

<a id="3160" class="Keyword">opaque</a>

  <a id="3170" class="Comment">-- The relation _⊢_∷_ is contained in T-η._⊢_∷_.</a>

  <a id="⊢∷→⊢∷-η"></a><a id="3222" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3222" class="Function">⊢∷→⊢∷-η</a> <a id="3230" class="Symbol">:</a> <a id="3232" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2143" class="Generalizable">Γ</a> <a id="3234" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3236" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2164" class="Generalizable">t</a> <a id="3238" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3240" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2162" class="Generalizable">A</a> <a id="3242" class="Symbol">→</a> <a id="3244" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2143" class="Generalizable">Γ</a> <a id="3246" href="Definition.Typed.html#1707" class="Datatype Operator">T-η.⊢</a> <a id="3252" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2164" class="Generalizable">t</a> <a id="3254" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3256" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2162" class="Generalizable">A</a>
  <a id="3260" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3222" class="Function">⊢∷→⊢∷-η</a> <a id="3268" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3268" class="Bound">⊢t</a> <a id="3271" class="Symbol">=</a>
    <a id="3277" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3282" href="Graded.Modality.Morphism.html#8499" class="Field">Is-order-embedding.tr-morphism</a> <a id="3313" href="Graded.Modality.Morphism.html#18098" class="Function">Is-order-embedding-id</a> <a id="3335" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3338" class="Symbol">λ</a>
      <a id="3346" class="Symbol">(</a><a id="3347" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3347" class="Bound">m</a> <a id="3349" class="Symbol">:</a> <a id="3351" href="Graded.Modality.Morphism.html#1400" class="Record">Is-morphism</a> <a id="3363" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="3365" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="3367" href="Function.Base.html#704" class="Function">idᶠ</a><a id="3370" class="Symbol">)</a> <a id="3372" class="Symbol">→</a>
    <a id="3378" href="Tools.PropositionalEquality.html#1583" class="Function">subst₃</a> <a id="3385" href="Definition.Typed.html#1707" class="Datatype Operator">T-η._⊢_∷_</a> <a id="3395" href="Definition.Untyped.QuantityTranslation.Identity.html#2823" class="Function">tr-Con-id</a> <a id="3405" href="Definition.Untyped.QuantityTranslation.Identity.html#2641" class="Function">tr-Term-id</a> <a id="3416" href="Definition.Untyped.QuantityTranslation.Identity.html#2641" class="Function">tr-Term-id</a> <a id="3427" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="3433" href="Definition.Typed.QuantityTranslation.html#3654" class="Function">QT.tr-⊢∷</a> <a id="3442" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="3445" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2311" class="Function">TR-η</a> <a id="3450" href="Function.Base.html#704" class="Function">idᶠ</a> <a id="3454" href="Function.Base.html#704" class="Function">idᶠ</a> <a id="3458" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3347" class="Bound">m</a> <a id="3460" class="Symbol">(</a><a id="3461" href="Graded.Modality.Morphism.html#16614" class="Function">Is-morphism→Is-Σ-morphism</a> <a id="3487" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3347" class="Bound">m</a><a id="3488" class="Symbol">)</a>
      <a id="3496" class="Symbol">(</a><a id="3497" class="Keyword">record</a>
         <a id="3513" class="Symbol">{</a> <a id="3515" href="Graded.Modality.Morphism.Type-restrictions.html#1522" class="Field">Unit-preserved</a> <a id="3530" class="Symbol">=</a> <a id="3532" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3545" class="Symbol">;</a> <a id="3547" href="Graded.Modality.Morphism.Type-restrictions.html#1679" class="Field">ΠΣ-preserved</a>   <a id="3562" class="Symbol">=</a>
             <a id="3577" class="Symbol">λ</a> <a id="3579" class="Symbol">{</a><a id="3580" class="Argument">b</a> <a id="3582" class="Symbol">=</a> <a id="3584" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3584" class="Bound">b</a><a id="3585" class="Symbol">}</a> <a id="3587" class="Symbol">→</a>
               <a id="3604" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="3610" class="Symbol">(</a><a id="3611" href="Function.Base.html#1638" class="Function">flip</a> <a id="3616" class="Symbol">(</a><a id="3617" href="Definition.Typed.Restrictions.html#1213" class="Field">ΠΣ-allowed</a> <a id="3628" class="Symbol">_)</a> <a id="3631" class="Symbol">_)</a> <a id="3634" href="Function.Base.html#1974" class="Function Operator">$</a>
               <a id="3651" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="3658" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3660" href="Definition.Untyped.QuantityTranslation.Identity.html#838" class="Function">tr-BinderMode-id</a> <a id="3677" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3584" class="Bound">b</a>
         <a id="3688" class="Symbol">;</a> <a id="3690" href="Graded.Modality.Morphism.Type-restrictions.html#1839" class="Field">K-preserved</a>                   <a id="3720" class="Symbol">=</a> <a id="3722" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3735" class="Symbol">;</a> <a id="3737" href="Graded.Modality.Morphism.Type-restrictions.html#1959" class="Field">[]-cong-preserved</a>             <a id="3767" class="Symbol">=</a> <a id="3769" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3782" class="Symbol">;</a> <a id="3784" href="Graded.Modality.Morphism.Type-restrictions.html#2116" class="Field">Equality-reflection-preserved</a> <a id="3814" class="Symbol">=</a> <a id="3816" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3829" class="Symbol">})</a>
      <a id="3838" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3268" class="Bound">⊢t</a>

<a id="3842" class="Keyword">opaque</a>

  <a id="3852" class="Comment">-- Soundness of erasure for natural numbers.</a>
  <a id="3899" class="Comment">--</a>
  <a id="3904" class="Comment">-- Note that SR-η._⊢_⇒ˢ*_∷ℕ is used in the statement of this</a>
  <a id="3967" class="Comment">-- theorem. This reduction relation uses the rule unitrec-β-η rather</a>
  <a id="4038" class="Comment">-- than unitrec-subst and unitrec-β.</a>

  <a id="soundness-ℕ"></a><a id="4078" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4078" class="Function">soundness-ℕ</a> <a id="4090" class="Symbol">:</a>
    <a id="4096" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="4098" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="4100" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2164" class="Generalizable">t</a> <a id="4102" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="4104" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="4106" class="Symbol">→</a> <a id="4108" href="Graded.Context.html#2534" class="Function">𝟘ᶜ</a> <a id="4111" href="Graded.Usage.html#8206" class="Datatype Operator">▸[</a> <a id="4114" class="InductiveConstructor">𝟙ᵐ</a> <a id="4117" href="Graded.Usage.html#8206" class="Datatype Operator">]</a> <a id="4119" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2164" class="Generalizable">t</a> <a id="4121" class="Symbol">→</a>
    <a id="4127" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="4129" class="Symbol">λ</a> <a id="4131" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4131" class="Bound">n</a> <a id="4133" class="Symbol">→</a> <a id="4135" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="4137" href="Graded.Erasure.SucRed.html#1475" class="Datatype Operator">SR-η.⊢</a> <a id="4144" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2164" class="Generalizable">t</a> <a id="4146" href="Graded.Erasure.SucRed.html#1475" class="Datatype Operator">⇒ˢ*</a> <a id="4150" href="Definition.Untyped.html#3643" class="Function">sucᵏ</a> <a id="4155" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4131" class="Bound">n</a> <a id="4157" href="Graded.Erasure.SucRed.html#1475" class="Datatype Operator">∷ℕ</a> <a id="4160" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4162" href="Graded.Erasure.Extraction.html#2119" class="Function">erase</a> <a id="4168" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1491" class="Bound">str</a> <a id="4172" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2164" class="Generalizable">t</a> <a id="4174" href="Graded.Erasure.SucRed.html#7467" class="Function Operator">⇒ˢ⟨</a> <a id="4178" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1491" class="Bound">str</a> <a id="4182" href="Graded.Erasure.SucRed.html#7467" class="Function Operator">⟩*</a> <a id="4185" href="Graded.Erasure.Target.html#6901" class="Function">T.sucᵏ</a> <a id="4192" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4131" class="Bound">n</a>
  <a id="4196" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4078" class="Function">soundness-ℕ</a> <a id="4208" class="Symbol">=</a> <a id="4210" href="Graded.Erasure.Consequences.Soundness.html#7054" class="Function">Soundness-η.soundness-ℕ</a> <a id="4234" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="4237" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3222" class="Function">⊢∷→⊢∷-η</a>

<a id="4246" class="Keyword">opaque</a>

  <a id="4256" class="Comment">-- Soundness of erasure for unit types.</a>
  <a id="4298" class="Comment">--</a>
  <a id="4303" class="Comment">-- Note that T-η._⊢_⇒*_∷_ is used in the statement of this theorem.</a>
  <a id="4373" class="Comment">-- This reduction relation uses the rule unitrec-β-η rather than</a>
  <a id="4440" class="Comment">-- unitrec-subst and unitrec-β.</a>

  <a id="soundness-Unit"></a><a id="4475" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4475" class="Function">soundness-Unit</a> <a id="4490" class="Symbol">:</a>
    <a id="4496" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="4498" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="4500" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2164" class="Generalizable">t</a> <a id="4502" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="4504" href="Definition.Untyped.html#1853" class="InductiveConstructor">Unit</a> <a id="4509" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2177" class="Generalizable">s</a> <a id="4511" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2194" class="Generalizable">l</a> <a id="4513" class="Symbol">→</a> <a id="4515" href="Graded.Context.html#2534" class="Function">𝟘ᶜ</a> <a id="4518" href="Graded.Usage.html#8206" class="Datatype Operator">▸[</a> <a id="4521" class="InductiveConstructor">𝟙ᵐ</a> <a id="4524" href="Graded.Usage.html#8206" class="Datatype Operator">]</a> <a id="4526" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2164" class="Generalizable">t</a> <a id="4528" class="Symbol">→</a>
    <a id="4534" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="4536" href="Definition.Typed.html#18322" class="Datatype Operator">T-η.⊢</a> <a id="4542" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2164" class="Generalizable">t</a> <a id="4544" href="Definition.Typed.html#18322" class="Datatype Operator">⇒*</a> <a id="4547" href="Definition.Untyped.html#1897" class="InductiveConstructor">star</a> <a id="4552" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2177" class="Generalizable">s</a> <a id="4554" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2194" class="Generalizable">l</a> <a id="4556" href="Definition.Typed.html#18322" class="Datatype Operator">∷</a> <a id="4558" href="Definition.Untyped.html#1853" class="InductiveConstructor">Unit</a> <a id="4563" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2177" class="Generalizable">s</a> <a id="4565" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2194" class="Generalizable">l</a> <a id="4567" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4569" href="Graded.Erasure.Extraction.html#2119" class="Function">erase</a> <a id="4575" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1491" class="Bound">str</a> <a id="4579" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2164" class="Generalizable">t</a> <a id="4581" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="4586" class="InductiveConstructor">T.star</a>
  <a id="4595" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4475" class="Function">soundness-Unit</a> <a id="4610" class="Symbol">=</a> <a id="4612" href="Graded.Erasure.Consequences.Soundness.html#8058" class="Function">Soundness-η.soundness-Unit</a> <a id="4639" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="4642" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3222" class="Function">⊢∷→⊢∷-η</a>
</pre></body></html>