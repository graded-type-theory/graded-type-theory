<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Target.Non-terminating</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- A non-terminating term</a>
<a id="100" class="Comment">------------------------------------------------------------------------</a>

<a id="174" class="Symbol">{-#</a> <a id="178" class="Keyword">OPTIONS</a> <a id="186" class="Pragma">--hidden-argument-puns</a> <a id="209" class="Symbol">#-}</a>

<a id="214" class="Keyword">module</a> <a id="221" href="Graded.Erasure.Target.Non-terminating.html" class="Module">Graded.Erasure.Target.Non-terminating</a> <a id="259" class="Keyword">where</a>

<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Definition.Untyped.NotParametrised.html" class="Module">Definition.Untyped.NotParametrised</a>

<a id="314" class="Keyword">open</a> <a id="319" class="Keyword">import</a> <a id="326" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a>
<a id="348" class="Keyword">open</a> <a id="353" class="Keyword">import</a> <a id="360" href="Graded.Erasure.Target.Properties.html" class="Module">Graded.Erasure.Target.Properties</a>

<a id="394" class="Keyword">open</a> <a id="399" class="Keyword">import</a> <a id="406" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="418" class="Keyword">open</a> <a id="423" class="Keyword">import</a> <a id="430" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="440" class="Keyword">open</a> <a id="445" class="Keyword">import</a> <a id="452" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="467" class="Keyword">open</a> <a id="472" class="Keyword">import</a> <a id="479" href="Tools.Nat.html" class="Module">Tools.Nat</a>
<a id="489" class="Keyword">open</a> <a id="494" class="Keyword">import</a> <a id="501" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="515" class="Keyword">open</a> <a id="520" class="Keyword">import</a> <a id="527" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="555" class="Keyword">open</a> <a id="560" class="Keyword">import</a> <a id="567" href="Tools.Relation.html" class="Module">Tools.Relation</a>

<a id="583" class="Keyword">private</a> <a id="591" class="Keyword">variable</a>
  <a id="602" href="Graded.Erasure.Target.Non-terminating.html#602" class="Generalizable">n</a>   <a id="606" class="Symbol">:</a> <a id="608" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="614" href="Graded.Erasure.Target.Non-terminating.html#614" class="Generalizable">x</a>   <a id="618" class="Symbol">:</a> <a id="620" href="Data.Fin.Base.html#1154" class="Datatype">Fin</a> <a id="624" class="Symbol">_</a>
  <a id="628" href="Graded.Erasure.Target.Non-terminating.html#628" class="Generalizable">t</a> <a id="630" href="Graded.Erasure.Target.Non-terminating.html#630" class="Generalizable">v</a> <a id="632" class="Symbol">:</a> <a id="634" href="Graded.Erasure.Target.html#1225" class="Datatype">Term</a> <a id="639" class="Symbol">_</a>
  <a id="643" href="Graded.Erasure.Target.Non-terminating.html#643" class="Generalizable">s</a>   <a id="647" class="Symbol">:</a> <a id="649" href="Graded.Erasure.Target.html#645" class="Datatype">Strictness</a>
  <a id="662" href="Graded.Erasure.Target.Non-terminating.html#662" class="Generalizable">ρ</a>   <a id="666" class="Symbol">:</a> <a id="668" href="Definition.Untyped.NotParametrised.html#2207" class="Datatype">Wk</a> <a id="671" class="Symbol">_</a> <a id="673" class="Symbol">_</a>
  <a id="677" href="Graded.Erasure.Target.Non-terminating.html#677" class="Generalizable">σ</a>   <a id="681" class="Symbol">:</a> <a id="683" href="Graded.Erasure.Target.html#3568" class="Function">Subst</a> <a id="689" class="Symbol">_</a> <a id="691" class="Symbol">_</a>

<a id="694" class="Keyword">opaque</a>

  <a id="704" class="Comment">-- A non-terminating term (which uses applications with the given</a>
  <a id="772" class="Comment">-- strictness).</a>

  <a id="loop"></a><a id="791" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="796" class="Symbol">:</a> <a id="798" href="Graded.Erasure.Target.html#645" class="Datatype">Strictness</a> <a id="809" class="Symbol">→</a> <a id="811" href="Graded.Erasure.Target.html#1225" class="Datatype">Term</a> <a id="816" href="Graded.Erasure.Target.Non-terminating.html#602" class="Generalizable">n</a>
  <a id="820" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="825" href="Graded.Erasure.Target.Non-terminating.html#825" class="Bound">s</a> <a id="827" class="Symbol">=</a> <a id="829" href="Graded.Erasure.Target.Non-terminating.html#854" class="Function">ω</a> <a id="831" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">∘⟨</a> <a id="834" href="Graded.Erasure.Target.Non-terminating.html#825" class="Bound">s</a> <a id="836" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="838" href="Graded.Erasure.Target.Non-terminating.html#854" class="Function">ω</a>
    <a id="844" class="Keyword">where</a>
    <a id="854" href="Graded.Erasure.Target.Non-terminating.html#854" class="Function">ω</a> <a id="856" class="Symbol">:</a> <a id="858" href="Graded.Erasure.Target.html#1225" class="Datatype">Term</a> <a id="863" href="Graded.Erasure.Target.Non-terminating.html#602" class="Generalizable">n</a>
    <a id="869" href="Graded.Erasure.Target.Non-terminating.html#854" class="Function">ω</a> <a id="871" class="Symbol">=</a> <a id="873" href="Graded.Erasure.Target.html#1283" class="InductiveConstructor">lam</a> <a id="877" class="Symbol">(</a><a id="878" href="Graded.Erasure.Target.html#1250" class="InductiveConstructor">var</a> <a id="882" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a> <a id="885" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">∘⟨</a> <a id="888" href="Graded.Erasure.Target.Non-terminating.html#825" class="Bound">s</a> <a id="890" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="892" href="Graded.Erasure.Target.html#1250" class="InductiveConstructor">var</a> <a id="896" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="898" class="Symbol">)</a>

<a id="901" class="Keyword">opaque</a>
  <a id="910" class="Keyword">unfolding</a> <a id="920" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a>

  <a id="928" class="Comment">-- The term loop s reduces in one step to itself.</a>

  <a id="loop⇒loop"></a><a id="981" href="Graded.Erasure.Target.Non-terminating.html#981" class="Function">loop⇒loop</a> <a id="991" class="Symbol">:</a> <a id="993" class="Symbol">(</a><a id="994" href="Graded.Erasure.Target.html#1225" class="Datatype">Term</a> <a id="999" href="Graded.Erasure.Target.Non-terminating.html#602" class="Generalizable">n</a> <a id="1001" href="Function.Base.html#4486" class="Function Operator">∋</a> <a id="1003" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="1008" href="Graded.Erasure.Target.Non-terminating.html#643" class="Generalizable">s</a><a id="1009" class="Symbol">)</a> <a id="1011" href="Graded.Erasure.Target.html#6788" class="Datatype Operator">⇒</a> <a id="1013" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="1018" href="Graded.Erasure.Target.Non-terminating.html#643" class="Generalizable">s</a>
  <a id="1022" href="Graded.Erasure.Target.Non-terminating.html#981" class="Function">loop⇒loop</a> <a id="1032" class="Symbol">=</a> <a id="1034" href="Graded.Erasure.Target.html#6971" class="InductiveConstructor">β-red</a> <a id="1040" class="Symbol">(</a><a id="1041" href="Graded.Erasure.Target.Properties.Reduction.html#4361" class="Function">Value→Value⟨⟩</a> <a id="1055" href="Graded.Erasure.Target.html#6069" class="InductiveConstructor">lam</a><a id="1058" class="Symbol">)</a>

<a id="1061" class="Keyword">opaque</a>

  <a id="1071" class="Comment">-- The term loop s only reduces to terms that can reduce further.</a>

  <a id="loop-reduces-forever"></a><a id="1140" href="Graded.Erasure.Target.Non-terminating.html#1140" class="Function">loop-reduces-forever</a> <a id="1161" class="Symbol">:</a> <a id="1163" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="1168" href="Graded.Erasure.Target.Non-terminating.html#643" class="Generalizable">s</a> <a id="1170" href="Graded.Erasure.Target.html#7627" class="Datatype Operator">⇒*</a> <a id="1173" href="Graded.Erasure.Target.Non-terminating.html#628" class="Generalizable">t</a> <a id="1175" class="Symbol">→</a> <a id="1177" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="1179" class="Symbol">λ</a> <a id="1181" href="Graded.Erasure.Target.Non-terminating.html#1181" class="Bound">u</a> <a id="1183" class="Symbol">→</a> <a id="1185" href="Graded.Erasure.Target.Non-terminating.html#628" class="Generalizable">t</a> <a id="1187" href="Graded.Erasure.Target.html#6788" class="Datatype Operator">⇒</a> <a id="1189" href="Graded.Erasure.Target.Non-terminating.html#1181" class="Bound">u</a>
  <a id="1193" href="Graded.Erasure.Target.Non-terminating.html#1140" class="Function">loop-reduces-forever</a> <a id="1214" href="Graded.Erasure.Target.html#7663" class="InductiveConstructor">refl</a> <a id="1219" class="Symbol">=</a>
    <a id="1225" class="Symbol">_</a> <a id="1227" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1229" href="Graded.Erasure.Target.Non-terminating.html#981" class="Function">loop⇒loop</a>
  <a id="1241" href="Graded.Erasure.Target.Non-terminating.html#1140" class="Function">loop-reduces-forever</a> <a id="1262" class="Symbol">(</a><a id="1263" href="Graded.Erasure.Target.html#7679" class="InductiveConstructor">trans</a> <a id="1269" href="Graded.Erasure.Target.Non-terminating.html#1269" class="Bound">nt⇒t</a> <a id="1274" href="Graded.Erasure.Target.Non-terminating.html#1274" class="Bound">t⇒*u</a><a id="1278" class="Symbol">)</a>
    <a id="1284" class="Keyword">rewrite</a> <a id="1292" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a> <a id="1296" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1298" href="Graded.Erasure.Target.Properties.Reduction.html#2099" class="Function">redDet</a> <a id="1305" class="Symbol">_</a> <a id="1307" href="Graded.Erasure.Target.Non-terminating.html#981" class="Function">loop⇒loop</a> <a id="1317" href="Graded.Erasure.Target.Non-terminating.html#1269" class="Bound">nt⇒t</a> <a id="1322" class="Symbol">=</a>
    <a id="1328" href="Graded.Erasure.Target.Non-terminating.html#1140" class="Function">loop-reduces-forever</a> <a id="1349" href="Graded.Erasure.Target.Non-terminating.html#1274" class="Bound">t⇒*u</a>

<a id="1355" class="Keyword">opaque</a>

  <a id="1365" class="Comment">-- The term loop s does not reduce to a value.</a>

  <a id="¬loop⇒*"></a><a id="1415" href="Graded.Erasure.Target.Non-terminating.html#1415" class="Function">¬loop⇒*</a> <a id="1423" class="Symbol">:</a> <a id="1425" href="Graded.Erasure.Target.html#6036" class="Datatype">Value</a> <a id="1431" href="Graded.Erasure.Target.Non-terminating.html#630" class="Generalizable">v</a> <a id="1433" class="Symbol">→</a> <a id="1435" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="1437" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="1442" href="Graded.Erasure.Target.Non-terminating.html#643" class="Generalizable">s</a> <a id="1444" href="Graded.Erasure.Target.html#7627" class="Datatype Operator">⇒*</a> <a id="1447" href="Graded.Erasure.Target.Non-terminating.html#630" class="Generalizable">v</a>
  <a id="1451" href="Graded.Erasure.Target.Non-terminating.html#1415" class="Function">¬loop⇒*</a> <a id="1459" class="Symbol">{</a><a id="1460" href="Graded.Erasure.Target.Non-terminating.html#1460" class="Bound">v</a><a id="1461" class="Symbol">}</a> <a id="1463" class="Symbol">{</a><a id="1464" href="Graded.Erasure.Target.Non-terminating.html#1464" class="Bound">s</a><a id="1465" class="Symbol">}</a> <a id="1467" href="Graded.Erasure.Target.Non-terminating.html#1467" class="Bound">v-val</a> <a id="1473" class="Symbol">=</a>
    <a id="1479" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="1484" href="Graded.Erasure.Target.Non-terminating.html#1464" class="Bound">s</a> <a id="1486" href="Graded.Erasure.Target.html#7627" class="Datatype Operator">⇒*</a> <a id="1489" href="Graded.Erasure.Target.Non-terminating.html#1460" class="Bound">v</a>        <a id="1498" href="Tools.Function.html#840" class="Function">→⟨</a> <a id="1501" href="Graded.Erasure.Target.Non-terminating.html#1140" class="Function">loop-reduces-forever</a> <a id="1522" href="Tools.Function.html#840" class="Function">⟩</a>
    <a id="1528" class="Symbol">(</a><a id="1529" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="1531" class="Symbol">λ</a> <a id="1533" href="Graded.Erasure.Target.Non-terminating.html#1533" class="Bound">v′</a> <a id="1536" class="Symbol">→</a> <a id="1538" href="Graded.Erasure.Target.Non-terminating.html#1460" class="Bound">v</a> <a id="1540" href="Graded.Erasure.Target.html#6788" class="Datatype Operator">⇒</a> <a id="1542" href="Graded.Erasure.Target.Non-terminating.html#1533" class="Bound">v′</a><a id="1544" class="Symbol">)</a>  <a id="1547" href="Tools.Function.html#840" class="Function">→⟨</a> <a id="1550" href="Graded.Erasure.Target.Properties.Reduction.html#1930" class="Function">Value→¬⇒</a> <a id="1559" href="Graded.Erasure.Target.Non-terminating.html#1467" class="Bound">v-val</a> <a id="1565" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="1568" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="1574" href="Tools.Function.html#840" class="Function">⟩</a>
    <a id="1580" href="Data.Empty.html#895" class="Function">⊥</a>                  <a id="1599" href="Tools.Function.html#1068" class="Function Operator">□</a>

<a id="1602" class="Keyword">opaque</a>
  <a id="1611" class="Keyword">unfolding</a> <a id="1621" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a>

  <a id="1629" class="Comment">-- The term loop s is closed.</a>

  <a id="loop-closed"></a><a id="1662" href="Graded.Erasure.Target.Non-terminating.html#1662" class="Function">loop-closed</a> <a id="1674" class="Symbol">:</a> <a id="1676" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="1678" href="Graded.Erasure.Target.html#2194" class="Datatype">HasX</a> <a id="1683" href="Graded.Erasure.Target.Non-terminating.html#614" class="Generalizable">x</a> <a id="1685" class="Symbol">(</a><a id="1686" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="1691" href="Graded.Erasure.Target.Non-terminating.html#643" class="Generalizable">s</a><a id="1692" class="Symbol">)</a>
  <a id="1696" href="Graded.Erasure.Target.Non-terminating.html#1662" class="Function">loop-closed</a> <a id="1708" class="Symbol">(</a><a id="1709" href="Graded.Erasure.Target.html#2304" class="InductiveConstructor">∘ₓˡ</a> <a id="1713" class="Symbol">(</a><a id="1714" href="Graded.Erasure.Target.html#2264" class="InductiveConstructor">lamₓ</a> <a id="1719" class="Symbol">(</a><a id="1720" href="Graded.Erasure.Target.html#2304" class="InductiveConstructor">∘ₓˡ</a> <a id="1724" class="Symbol">())))</a>
  <a id="1732" href="Graded.Erasure.Target.Non-terminating.html#1662" class="Function">loop-closed</a> <a id="1744" class="Symbol">(</a><a id="1745" href="Graded.Erasure.Target.html#2304" class="InductiveConstructor">∘ₓˡ</a> <a id="1749" class="Symbol">(</a><a id="1750" href="Graded.Erasure.Target.html#2264" class="InductiveConstructor">lamₓ</a> <a id="1755" class="Symbol">(</a><a id="1756" href="Graded.Erasure.Target.html#2343" class="InductiveConstructor">∘ₓʳ</a> <a id="1760" class="Symbol">())))</a>
  <a id="1768" href="Graded.Erasure.Target.Non-terminating.html#1662" class="Function">loop-closed</a> <a id="1780" class="Symbol">(</a><a id="1781" href="Graded.Erasure.Target.html#2343" class="InductiveConstructor">∘ₓʳ</a> <a id="1785" class="Symbol">(</a><a id="1786" href="Graded.Erasure.Target.html#2264" class="InductiveConstructor">lamₓ</a> <a id="1791" class="Symbol">(</a><a id="1792" href="Graded.Erasure.Target.html#2304" class="InductiveConstructor">∘ₓˡ</a> <a id="1796" class="Symbol">())))</a>
  <a id="1804" href="Graded.Erasure.Target.Non-terminating.html#1662" class="Function">loop-closed</a> <a id="1816" class="Symbol">(</a><a id="1817" href="Graded.Erasure.Target.html#2343" class="InductiveConstructor">∘ₓʳ</a> <a id="1821" class="Symbol">(</a><a id="1822" href="Graded.Erasure.Target.html#2264" class="InductiveConstructor">lamₓ</a> <a id="1827" class="Symbol">(</a><a id="1828" href="Graded.Erasure.Target.html#2343" class="InductiveConstructor">∘ₓʳ</a> <a id="1832" class="Symbol">())))</a>

<a id="1839" class="Keyword">opaque</a>
  <a id="1848" class="Keyword">unfolding</a> <a id="1858" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a>

  <a id="1866" class="Comment">-- The result of weakening loop s is loop s.</a>

  <a id="wk-loop"></a><a id="1914" href="Graded.Erasure.Target.Non-terminating.html#1914" class="Function">wk-loop</a> <a id="1922" class="Symbol">:</a> <a id="1924" href="Graded.Erasure.Target.html#2921" class="Function">wk</a> <a id="1927" href="Graded.Erasure.Target.Non-terminating.html#662" class="Generalizable">ρ</a> <a id="1929" class="Symbol">(</a><a id="1930" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="1935" href="Graded.Erasure.Target.Non-terminating.html#643" class="Generalizable">s</a><a id="1936" class="Symbol">)</a> <a id="1938" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1940" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="1945" href="Graded.Erasure.Target.Non-terminating.html#643" class="Generalizable">s</a>
  <a id="1949" href="Graded.Erasure.Target.Non-terminating.html#1914" class="Function">wk-loop</a> <a id="1957" class="Symbol">=</a> <a id="1959" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="1965" class="Keyword">opaque</a>
  <a id="1974" class="Keyword">unfolding</a> <a id="1984" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a>

  <a id="1992" class="Comment">-- The result of applying a substitution to loop s is loop s.</a>

  <a id="loop-[]"></a><a id="2057" href="Graded.Erasure.Target.Non-terminating.html#2057" class="Function">loop-[]</a> <a id="2065" class="Symbol">:</a> <a id="2067" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="2072" href="Graded.Erasure.Target.Non-terminating.html#643" class="Generalizable">s</a> <a id="2074" href="Graded.Erasure.Target.html#4782" class="Function Operator">[</a> <a id="2076" href="Graded.Erasure.Target.Non-terminating.html#677" class="Generalizable">σ</a> <a id="2078" href="Graded.Erasure.Target.html#4782" class="Function Operator">]</a> <a id="2080" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2082" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="2087" href="Graded.Erasure.Target.Non-terminating.html#643" class="Generalizable">s</a>
  <a id="2091" href="Graded.Erasure.Target.Non-terminating.html#2057" class="Function">loop-[]</a> <a id="2099" class="Symbol">=</a> <a id="2101" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre></body></html>