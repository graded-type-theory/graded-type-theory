<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Definition.Conversion.Reduction</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Weak head expansion of algorithmic equality.</a>
<a id="122" class="Comment">------------------------------------------------------------------------</a>

<a id="196" class="Keyword">open</a> <a id="201" class="Keyword">import</a> <a id="208" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>
<a id="238" class="Keyword">open</a> <a id="243" class="Keyword">import</a> <a id="250" href="Graded.Modality.html" class="Module">Graded.Modality</a>

<a id="267" class="Keyword">module</a> <a id="274" href="Definition.Conversion.Reduction.html" class="Module">Definition.Conversion.Reduction</a>
  <a id="308" class="Symbol">{</a><a id="309" href="Definition.Conversion.Reduction.html#309" class="Bound">a</a><a id="310" class="Symbol">}</a> <a id="312" class="Symbol">{</a><a id="313" href="Definition.Conversion.Reduction.html#313" class="Bound">M</a> <a id="315" class="Symbol">:</a> <a id="317" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="321" href="Definition.Conversion.Reduction.html#309" class="Bound">a</a><a id="322" class="Symbol">}</a>
  <a id="326" class="Symbol">{</a><a id="327" href="Definition.Conversion.Reduction.html#327" class="Bound">𝕄</a> <a id="329" class="Symbol">:</a> <a id="331" href="Graded.Modality.html#9626" class="Record">Modality</a> <a id="340" href="Definition.Conversion.Reduction.html#313" class="Bound">M</a><a id="341" class="Symbol">}</a>
  <a id="345" class="Symbol">(</a><a id="346" href="Definition.Conversion.Reduction.html#346" class="Bound">R</a> <a id="348" class="Symbol">:</a> <a id="350" href="Definition.Typed.Restrictions.html#831" class="Record">Type-restrictions</a> <a id="368" href="Definition.Conversion.Reduction.html#327" class="Bound">𝕄</a><a id="369" class="Symbol">)</a>
  <a id="373" class="Keyword">where</a>

<a id="380" class="Keyword">open</a> <a id="385" class="Keyword">import</a> <a id="392" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="411" href="Definition.Conversion.Reduction.html#313" class="Bound">M</a>
<a id="413" class="Keyword">open</a> <a id="418" class="Keyword">import</a> <a id="425" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="442" href="Definition.Conversion.Reduction.html#346" class="Bound">R</a>
<a id="444" class="Keyword">open</a> <a id="449" class="Keyword">import</a> <a id="456" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="484" href="Definition.Conversion.Reduction.html#346" class="Bound">R</a>
<a id="486" class="Keyword">open</a> <a id="491" class="Keyword">import</a> <a id="498" href="Definition.Conversion.html" class="Module">Definition.Conversion</a> <a id="520" href="Definition.Conversion.Reduction.html#346" class="Bound">R</a>

<a id="523" class="Keyword">open</a> <a id="528" class="Keyword">import</a> <a id="535" href="Tools.Nat.html" class="Module">Tools.Nat</a>
<a id="545" class="Keyword">open</a> <a id="550" class="Keyword">import</a> <a id="557" href="Tools.Product.html" class="Module">Tools.Product</a>

<a id="572" class="Keyword">private</a>
  <a id="582" class="Keyword">variable</a>
    <a id="595" href="Definition.Conversion.Reduction.html#595" class="Generalizable">n</a> <a id="597" class="Symbol">:</a> <a id="599" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
    <a id="607" href="Definition.Conversion.Reduction.html#607" class="Generalizable">Γ</a> <a id="609" class="Symbol">:</a> <a id="611" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="615" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="620" href="Definition.Conversion.Reduction.html#595" class="Generalizable">n</a>

<a id="623" class="Comment">-- Weak head expansion of algorithmic equality of types.</a>
<a id="reductionConv↑"></a><a id="680" href="Definition.Conversion.Reduction.html#680" class="Function">reductionConv↑</a> <a id="695" class="Symbol">:</a> <a id="697" class="Symbol">∀</a> <a id="699" class="Symbol">{</a><a id="700" href="Definition.Conversion.Reduction.html#700" class="Bound">A</a> <a id="702" href="Definition.Conversion.Reduction.html#702" class="Bound">A′</a> <a id="705" href="Definition.Conversion.Reduction.html#705" class="Bound">B</a> <a id="707" href="Definition.Conversion.Reduction.html#707" class="Bound">B′</a><a id="709" class="Symbol">}</a>
               <a id="726" class="Symbol">→</a> <a id="728" href="Definition.Conversion.Reduction.html#607" class="Generalizable">Γ</a> <a id="730" href="Definition.Typed.html#18537" class="Datatype Operator">⊢</a> <a id="732" href="Definition.Conversion.Reduction.html#700" class="Bound">A</a> <a id="734" href="Definition.Typed.html#18537" class="Datatype Operator">⇒*</a> <a id="737" href="Definition.Conversion.Reduction.html#702" class="Bound">A′</a>
               <a id="755" class="Symbol">→</a> <a id="757" href="Definition.Conversion.Reduction.html#607" class="Generalizable">Γ</a> <a id="759" href="Definition.Typed.html#18537" class="Datatype Operator">⊢</a> <a id="761" href="Definition.Conversion.Reduction.html#705" class="Bound">B</a> <a id="763" href="Definition.Typed.html#18537" class="Datatype Operator">⇒*</a> <a id="766" href="Definition.Conversion.Reduction.html#707" class="Bound">B′</a>
               <a id="784" class="Symbol">→</a> <a id="786" href="Definition.Conversion.Reduction.html#607" class="Generalizable">Γ</a> <a id="788" href="Definition.Conversion.html#4295" class="Record Operator">⊢</a> <a id="790" href="Definition.Conversion.Reduction.html#702" class="Bound">A′</a> <a id="793" href="Definition.Conversion.html#4295" class="Record Operator">[conv↑]</a> <a id="801" href="Definition.Conversion.Reduction.html#707" class="Bound">B′</a>
               <a id="819" class="Symbol">→</a> <a id="821" href="Definition.Conversion.Reduction.html#607" class="Generalizable">Γ</a> <a id="823" href="Definition.Conversion.html#4295" class="Record Operator">⊢</a> <a id="825" href="Definition.Conversion.Reduction.html#700" class="Bound">A</a>  <a id="828" href="Definition.Conversion.html#4295" class="Record Operator">[conv↑]</a> <a id="836" href="Definition.Conversion.Reduction.html#705" class="Bound">B</a>
<a id="838" href="Definition.Conversion.Reduction.html#680" class="Function">reductionConv↑</a> <a id="853" href="Definition.Conversion.Reduction.html#853" class="Bound">A⇒*</a> <a id="857" href="Definition.Conversion.Reduction.html#857" class="Bound">B⇒*</a> <a id="861" class="Symbol">(</a><a id="862" href="Definition.Conversion.html#4415" class="InductiveConstructor">[↑]</a> <a id="866" href="Definition.Conversion.Reduction.html#866" class="Bound">A″</a> <a id="869" href="Definition.Conversion.Reduction.html#869" class="Bound">B″</a> <a id="872" href="Definition.Conversion.Reduction.html#872" class="Bound">D</a> <a id="874" href="Definition.Conversion.Reduction.html#874" class="Bound">D′</a> <a id="877" href="Definition.Conversion.Reduction.html#877" class="Bound">A″&lt;&gt;B″</a><a id="883" class="Symbol">)</a> <a id="885" class="Symbol">=</a>
  <a id="889" href="Definition.Conversion.html#4415" class="InductiveConstructor">[↑]</a> <a id="893" href="Definition.Conversion.Reduction.html#866" class="Bound">A″</a> <a id="896" href="Definition.Conversion.Reduction.html#869" class="Bound">B″</a> <a id="899" class="Symbol">(</a><a id="900" href="Definition.Typed.Properties.Reduction.html#22690" class="Function">⇒*→↘→↘</a> <a id="907" href="Definition.Conversion.Reduction.html#853" class="Bound">A⇒*</a> <a id="911" href="Definition.Conversion.Reduction.html#872" class="Bound">D</a><a id="912" class="Symbol">)</a> <a id="914" class="Symbol">(</a><a id="915" href="Definition.Typed.Properties.Reduction.html#22690" class="Function">⇒*→↘→↘</a> <a id="922" href="Definition.Conversion.Reduction.html#857" class="Bound">B⇒*</a> <a id="926" href="Definition.Conversion.Reduction.html#874" class="Bound">D′</a><a id="928" class="Symbol">)</a> <a id="930" href="Definition.Conversion.Reduction.html#877" class="Bound">A″&lt;&gt;B″</a>

<a id="938" class="Comment">-- Weak head expansion of algorithmic equality of terms.</a>
<a id="reductionConv↑Term"></a><a id="995" href="Definition.Conversion.Reduction.html#995" class="Function">reductionConv↑Term</a> <a id="1014" class="Symbol">:</a> <a id="1016" class="Symbol">∀</a> <a id="1018" class="Symbol">{</a><a id="1019" href="Definition.Conversion.Reduction.html#1019" class="Bound">t</a> <a id="1021" href="Definition.Conversion.Reduction.html#1021" class="Bound">t′</a> <a id="1024" href="Definition.Conversion.Reduction.html#1024" class="Bound">u</a> <a id="1026" href="Definition.Conversion.Reduction.html#1026" class="Bound">u′</a> <a id="1029" href="Definition.Conversion.Reduction.html#1029" class="Bound">A</a> <a id="1031" href="Definition.Conversion.Reduction.html#1031" class="Bound">B</a><a id="1032" class="Symbol">}</a>
                   <a id="1053" class="Symbol">→</a> <a id="1055" href="Definition.Conversion.Reduction.html#607" class="Generalizable">Γ</a> <a id="1057" href="Definition.Typed.html#18537" class="Datatype Operator">⊢</a> <a id="1059" href="Definition.Conversion.Reduction.html#1029" class="Bound">A</a> <a id="1061" href="Definition.Typed.html#18537" class="Datatype Operator">⇒*</a> <a id="1064" href="Definition.Conversion.Reduction.html#1031" class="Bound">B</a>
                   <a id="1085" class="Symbol">→</a> <a id="1087" href="Definition.Conversion.Reduction.html#607" class="Generalizable">Γ</a> <a id="1089" href="Definition.Typed.html#18322" class="Datatype Operator">⊢</a> <a id="1091" href="Definition.Conversion.Reduction.html#1019" class="Bound">t</a> <a id="1093" href="Definition.Typed.html#18322" class="Datatype Operator">⇒*</a> <a id="1096" href="Definition.Conversion.Reduction.html#1021" class="Bound">t′</a> <a id="1099" href="Definition.Typed.html#18322" class="Datatype Operator">∷</a> <a id="1101" href="Definition.Conversion.Reduction.html#1031" class="Bound">B</a>
                   <a id="1122" class="Symbol">→</a> <a id="1124" href="Definition.Conversion.Reduction.html#607" class="Generalizable">Γ</a> <a id="1126" href="Definition.Typed.html#18322" class="Datatype Operator">⊢</a> <a id="1128" href="Definition.Conversion.Reduction.html#1024" class="Bound">u</a> <a id="1130" href="Definition.Typed.html#18322" class="Datatype Operator">⇒*</a> <a id="1133" href="Definition.Conversion.Reduction.html#1026" class="Bound">u′</a> <a id="1136" href="Definition.Typed.html#18322" class="Datatype Operator">∷</a> <a id="1138" href="Definition.Conversion.Reduction.html#1031" class="Bound">B</a>
                   <a id="1159" class="Symbol">→</a> <a id="1161" href="Definition.Conversion.Reduction.html#607" class="Generalizable">Γ</a> <a id="1163" href="Definition.Conversion.html#5323" class="Record Operator">⊢</a> <a id="1165" href="Definition.Conversion.Reduction.html#1021" class="Bound">t′</a> <a id="1168" href="Definition.Conversion.html#5323" class="Record Operator">[conv↑]</a> <a id="1176" href="Definition.Conversion.Reduction.html#1026" class="Bound">u′</a> <a id="1179" href="Definition.Conversion.html#5323" class="Record Operator">∷</a> <a id="1181" href="Definition.Conversion.Reduction.html#1031" class="Bound">B</a>
                   <a id="1202" class="Symbol">→</a> <a id="1204" href="Definition.Conversion.Reduction.html#607" class="Generalizable">Γ</a> <a id="1206" href="Definition.Conversion.html#5323" class="Record Operator">⊢</a> <a id="1208" href="Definition.Conversion.Reduction.html#1019" class="Bound">t</a>  <a id="1211" href="Definition.Conversion.html#5323" class="Record Operator">[conv↑]</a> <a id="1219" href="Definition.Conversion.Reduction.html#1024" class="Bound">u</a>  <a id="1222" href="Definition.Conversion.html#5323" class="Record Operator">∷</a> <a id="1224" href="Definition.Conversion.Reduction.html#1029" class="Bound">A</a>
<a id="1226" href="Definition.Conversion.Reduction.html#995" class="Function">reductionConv↑Term</a> <a id="1245" href="Definition.Conversion.Reduction.html#1245" class="Bound">A⇒*</a> <a id="1249" href="Definition.Conversion.Reduction.html#1249" class="Bound">t⇒*</a> <a id="1253" href="Definition.Conversion.Reduction.html#1253" class="Bound">u⇒*</a> <a id="1257" class="Symbol">(</a><a id="1258" href="Definition.Conversion.html#5447" class="InductiveConstructor">[↑]ₜ</a> <a id="1263" href="Definition.Conversion.Reduction.html#1263" class="Bound">B′</a> <a id="1266" href="Definition.Conversion.Reduction.html#1266" class="Bound">t″</a> <a id="1269" href="Definition.Conversion.Reduction.html#1269" class="Bound">u″</a> <a id="1272" href="Definition.Conversion.Reduction.html#1272" class="Bound">D</a><a id="1273" class="Symbol">@(</a><a id="1275" href="Definition.Conversion.Reduction.html#1275" class="Bound">D′</a> <a id="1278" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1280" class="Symbol">_)</a> <a id="1283" href="Definition.Conversion.Reduction.html#1283" class="Bound">d</a> <a id="1285" href="Definition.Conversion.Reduction.html#1285" class="Bound">d′</a> <a id="1288" href="Definition.Conversion.Reduction.html#1288" class="Bound">t″&lt;&gt;u″</a><a id="1294" class="Symbol">)</a> <a id="1296" class="Symbol">=</a>
  <a id="1300" href="Definition.Conversion.html#5447" class="InductiveConstructor">[↑]ₜ</a> <a id="1305" href="Definition.Conversion.Reduction.html#1263" class="Bound">B′</a> <a id="1308" href="Definition.Conversion.Reduction.html#1266" class="Bound">t″</a> <a id="1311" href="Definition.Conversion.Reduction.html#1269" class="Bound">u″</a>
       <a id="1321" class="Symbol">(</a><a id="1322" href="Definition.Typed.Properties.Reduction.html#22690" class="Function">⇒*→↘→↘</a> <a id="1329" href="Definition.Conversion.Reduction.html#1245" class="Bound">A⇒*</a> <a id="1333" href="Definition.Conversion.Reduction.html#1272" class="Bound">D</a><a id="1334" class="Symbol">)</a>
       <a id="1343" class="Symbol">(</a><a id="1344" href="Definition.Typed.Properties.Reduction.html#22852" class="Function">⇒*∷→↘∷→↘∷</a> <a id="1354" class="Symbol">(</a><a id="1355" href="Definition.Typed.Properties.Reduction.html#23099" class="Function">conv*</a> <a id="1361" href="Definition.Conversion.Reduction.html#1249" class="Bound">t⇒*</a> <a id="1365" class="Symbol">(</a><a id="1366" href="Definition.Typed.Properties.Reduction.html#8533" class="Function">subset*</a> <a id="1374" href="Definition.Conversion.Reduction.html#1275" class="Bound">D′</a><a id="1376" class="Symbol">))</a> <a id="1379" href="Definition.Conversion.Reduction.html#1283" class="Bound">d</a><a id="1380" class="Symbol">)</a>
       <a id="1389" class="Symbol">(</a><a id="1390" href="Definition.Typed.Properties.Reduction.html#22852" class="Function">⇒*∷→↘∷→↘∷</a> <a id="1400" class="Symbol">(</a><a id="1401" href="Definition.Typed.Properties.Reduction.html#23099" class="Function">conv*</a> <a id="1407" href="Definition.Conversion.Reduction.html#1253" class="Bound">u⇒*</a> <a id="1411" class="Symbol">(</a><a id="1412" href="Definition.Typed.Properties.Reduction.html#8533" class="Function">subset*</a> <a id="1420" href="Definition.Conversion.Reduction.html#1275" class="Bound">D′</a><a id="1422" class="Symbol">))</a> <a id="1425" href="Definition.Conversion.Reduction.html#1285" class="Bound">d′</a><a id="1427" class="Symbol">)</a>
       <a id="1436" href="Definition.Conversion.Reduction.html#1288" class="Bound">t″&lt;&gt;u″</a>
</pre></body></html>