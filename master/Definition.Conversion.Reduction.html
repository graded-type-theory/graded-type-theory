<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Definition.Conversion.Reduction</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Weak head expansion of algorithmic equality.</a>
<a id="122" class="Comment">------------------------------------------------------------------------</a>

<a id="196" class="Keyword">open</a> <a id="201" class="Keyword">import</a> <a id="208" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>
<a id="238" class="Keyword">open</a> <a id="243" class="Keyword">import</a> <a id="250" href="Graded.Modality.html" class="Module">Graded.Modality</a>

<a id="267" class="Keyword">module</a> <a id="274" href="Definition.Conversion.Reduction.html" class="Module">Definition.Conversion.Reduction</a>
  <a id="308" class="Symbol">{</a><a id="309" href="Definition.Conversion.Reduction.html#309" class="Bound">a</a><a id="310" class="Symbol">}</a> <a id="312" class="Symbol">{</a><a id="313" href="Definition.Conversion.Reduction.html#313" class="Bound">M</a> <a id="315" class="Symbol">:</a> <a id="317" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="321" href="Definition.Conversion.Reduction.html#309" class="Bound">a</a><a id="322" class="Symbol">}</a>
  <a id="326" class="Symbol">{</a><a id="327" href="Definition.Conversion.Reduction.html#327" class="Bound">ğ•„</a> <a id="329" class="Symbol">:</a> <a id="331" href="Graded.Modality.html#9574" class="Record">Modality</a> <a id="340" href="Definition.Conversion.Reduction.html#313" class="Bound">M</a><a id="341" class="Symbol">}</a>
  <a id="345" class="Symbol">(</a><a id="346" href="Definition.Conversion.Reduction.html#346" class="Bound">R</a> <a id="348" class="Symbol">:</a> <a id="350" href="Definition.Typed.Restrictions.html#808" class="Record">Type-restrictions</a> <a id="368" href="Definition.Conversion.Reduction.html#327" class="Bound">ğ•„</a><a id="369" class="Symbol">)</a>
  <a id="373" class="Keyword">where</a>

<a id="380" class="Keyword">open</a> <a id="385" class="Keyword">import</a> <a id="392" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="411" href="Definition.Conversion.Reduction.html#313" class="Bound">M</a>
<a id="413" class="Keyword">open</a> <a id="418" class="Keyword">import</a> <a id="425" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="442" href="Definition.Conversion.Reduction.html#346" class="Bound">R</a>
<a id="444" class="Keyword">open</a> <a id="449" class="Keyword">import</a> <a id="456" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="484" href="Definition.Conversion.Reduction.html#346" class="Bound">R</a>
<a id="486" class="Keyword">open</a> <a id="491" class="Keyword">import</a> <a id="498" href="Definition.Conversion.html" class="Module">Definition.Conversion</a> <a id="520" href="Definition.Conversion.Reduction.html#346" class="Bound">R</a>

<a id="523" class="Keyword">open</a> <a id="528" class="Keyword">import</a> <a id="535" href="Tools.Nat.html" class="Module">Tools.Nat</a>
<a id="545" class="Keyword">open</a> <a id="550" class="Keyword">import</a> <a id="557" href="Tools.Product.html" class="Module">Tools.Product</a>

<a id="572" class="Keyword">private</a> <a id="580" class="Keyword">variable</a>
  <a id="591" href="Definition.Conversion.Reduction.html#591" class="Generalizable">Î“</a> <a id="593" class="Symbol">:</a> <a id="595" href="Definition.Untyped.html#3577" class="Function">Cons</a> <a id="600" class="Symbol">_</a> <a id="602" class="Symbol">_</a>

<a id="605" class="Comment">-- Weak head expansion of algorithmic equality of types.</a>
<a id="reductionConvâ†‘"></a><a id="662" href="Definition.Conversion.Reduction.html#662" class="Function">reductionConvâ†‘</a> <a id="677" class="Symbol">:</a> <a id="679" class="Symbol">âˆ€</a> <a id="681" class="Symbol">{</a><a id="682" href="Definition.Conversion.Reduction.html#682" class="Bound">A</a> <a id="684" href="Definition.Conversion.Reduction.html#684" class="Bound">Aâ€²</a> <a id="687" href="Definition.Conversion.Reduction.html#687" class="Bound">B</a> <a id="689" href="Definition.Conversion.Reduction.html#689" class="Bound">Bâ€²</a><a id="691" class="Symbol">}</a>
               <a id="708" class="Symbol">â†’</a> <a id="710" href="Definition.Conversion.Reduction.html#591" class="Generalizable">Î“</a> <a id="712" href="Definition.Typed.html#20106" class="Datatype Operator">âŠ¢</a> <a id="714" href="Definition.Conversion.Reduction.html#682" class="Bound">A</a> <a id="716" href="Definition.Typed.html#20106" class="Datatype Operator">â‡’*</a> <a id="719" href="Definition.Conversion.Reduction.html#684" class="Bound">Aâ€²</a>
               <a id="737" class="Symbol">â†’</a> <a id="739" href="Definition.Conversion.Reduction.html#591" class="Generalizable">Î“</a> <a id="741" href="Definition.Typed.html#20106" class="Datatype Operator">âŠ¢</a> <a id="743" href="Definition.Conversion.Reduction.html#687" class="Bound">B</a> <a id="745" href="Definition.Typed.html#20106" class="Datatype Operator">â‡’*</a> <a id="748" href="Definition.Conversion.Reduction.html#689" class="Bound">Bâ€²</a>
               <a id="766" class="Symbol">â†’</a> <a id="768" href="Definition.Conversion.Reduction.html#591" class="Generalizable">Î“</a> <a id="770" href="Definition.Conversion.html#4593" class="Record Operator">âŠ¢</a> <a id="772" href="Definition.Conversion.Reduction.html#684" class="Bound">Aâ€²</a> <a id="775" href="Definition.Conversion.html#4593" class="Record Operator">[convâ†‘]</a> <a id="783" href="Definition.Conversion.Reduction.html#689" class="Bound">Bâ€²</a>
               <a id="801" class="Symbol">â†’</a> <a id="803" href="Definition.Conversion.Reduction.html#591" class="Generalizable">Î“</a> <a id="805" href="Definition.Conversion.html#4593" class="Record Operator">âŠ¢</a> <a id="807" href="Definition.Conversion.Reduction.html#682" class="Bound">A</a>  <a id="810" href="Definition.Conversion.html#4593" class="Record Operator">[convâ†‘]</a> <a id="818" href="Definition.Conversion.Reduction.html#687" class="Bound">B</a>
<a id="820" href="Definition.Conversion.Reduction.html#662" class="Function">reductionConvâ†‘</a> <a id="835" href="Definition.Conversion.Reduction.html#835" class="Bound">Aâ‡’*</a> <a id="839" href="Definition.Conversion.Reduction.html#839" class="Bound">Bâ‡’*</a> <a id="843" class="Symbol">(</a><a id="844" href="Definition.Conversion.html#4711" class="InductiveConstructor">[â†‘]</a> <a id="848" href="Definition.Conversion.Reduction.html#848" class="Bound">Aâ€³</a> <a id="851" href="Definition.Conversion.Reduction.html#851" class="Bound">Bâ€³</a> <a id="854" href="Definition.Conversion.Reduction.html#854" class="Bound">D</a> <a id="856" href="Definition.Conversion.Reduction.html#856" class="Bound">Dâ€²</a> <a id="859" href="Definition.Conversion.Reduction.html#859" class="Bound">Aâ€³&lt;&gt;Bâ€³</a><a id="865" class="Symbol">)</a> <a id="867" class="Symbol">=</a>
  <a id="871" href="Definition.Conversion.html#4711" class="InductiveConstructor">[â†‘]</a> <a id="875" href="Definition.Conversion.Reduction.html#848" class="Bound">Aâ€³</a> <a id="878" href="Definition.Conversion.Reduction.html#851" class="Bound">Bâ€³</a> <a id="881" class="Symbol">(</a><a id="882" href="Definition.Typed.Properties.Reduction.html#23680" class="Function">â‡’*â†’â†˜â†’â†˜</a> <a id="889" href="Definition.Conversion.Reduction.html#835" class="Bound">Aâ‡’*</a> <a id="893" href="Definition.Conversion.Reduction.html#854" class="Bound">D</a><a id="894" class="Symbol">)</a> <a id="896" class="Symbol">(</a><a id="897" href="Definition.Typed.Properties.Reduction.html#23680" class="Function">â‡’*â†’â†˜â†’â†˜</a> <a id="904" href="Definition.Conversion.Reduction.html#839" class="Bound">Bâ‡’*</a> <a id="908" href="Definition.Conversion.Reduction.html#856" class="Bound">Dâ€²</a><a id="910" class="Symbol">)</a> <a id="912" href="Definition.Conversion.Reduction.html#859" class="Bound">Aâ€³&lt;&gt;Bâ€³</a>

<a id="920" class="Comment">-- Weak head expansion of algorithmic equality of terms.</a>
<a id="reductionConvâ†‘Term"></a><a id="977" href="Definition.Conversion.Reduction.html#977" class="Function">reductionConvâ†‘Term</a> <a id="996" class="Symbol">:</a> <a id="998" class="Symbol">âˆ€</a> <a id="1000" class="Symbol">{</a><a id="1001" href="Definition.Conversion.Reduction.html#1001" class="Bound">t</a> <a id="1003" href="Definition.Conversion.Reduction.html#1003" class="Bound">tâ€²</a> <a id="1006" href="Definition.Conversion.Reduction.html#1006" class="Bound">u</a> <a id="1008" href="Definition.Conversion.Reduction.html#1008" class="Bound">uâ€²</a> <a id="1011" href="Definition.Conversion.Reduction.html#1011" class="Bound">A</a> <a id="1013" href="Definition.Conversion.Reduction.html#1013" class="Bound">B</a><a id="1014" class="Symbol">}</a>
                   <a id="1035" class="Symbol">â†’</a> <a id="1037" href="Definition.Conversion.Reduction.html#591" class="Generalizable">Î“</a> <a id="1039" href="Definition.Typed.html#20106" class="Datatype Operator">âŠ¢</a> <a id="1041" href="Definition.Conversion.Reduction.html#1011" class="Bound">A</a> <a id="1043" href="Definition.Typed.html#20106" class="Datatype Operator">â‡’*</a> <a id="1046" href="Definition.Conversion.Reduction.html#1013" class="Bound">B</a>
                   <a id="1067" class="Symbol">â†’</a> <a id="1069" href="Definition.Conversion.Reduction.html#591" class="Generalizable">Î“</a> <a id="1071" href="Definition.Typed.html#19849" class="Datatype Operator">âŠ¢</a> <a id="1073" href="Definition.Conversion.Reduction.html#1001" class="Bound">t</a> <a id="1075" href="Definition.Typed.html#19849" class="Datatype Operator">â‡’*</a> <a id="1078" href="Definition.Conversion.Reduction.html#1003" class="Bound">tâ€²</a> <a id="1081" href="Definition.Typed.html#19849" class="Datatype Operator">âˆ·</a> <a id="1083" href="Definition.Conversion.Reduction.html#1013" class="Bound">B</a>
                   <a id="1104" class="Symbol">â†’</a> <a id="1106" href="Definition.Conversion.Reduction.html#591" class="Generalizable">Î“</a> <a id="1108" href="Definition.Typed.html#19849" class="Datatype Operator">âŠ¢</a> <a id="1110" href="Definition.Conversion.Reduction.html#1006" class="Bound">u</a> <a id="1112" href="Definition.Typed.html#19849" class="Datatype Operator">â‡’*</a> <a id="1115" href="Definition.Conversion.Reduction.html#1008" class="Bound">uâ€²</a> <a id="1118" href="Definition.Typed.html#19849" class="Datatype Operator">âˆ·</a> <a id="1120" href="Definition.Conversion.Reduction.html#1013" class="Bound">B</a>
                   <a id="1141" class="Symbol">â†’</a> <a id="1143" href="Definition.Conversion.Reduction.html#591" class="Generalizable">Î“</a> <a id="1145" href="Definition.Conversion.html#5618" class="Record Operator">âŠ¢</a> <a id="1147" href="Definition.Conversion.Reduction.html#1003" class="Bound">tâ€²</a> <a id="1150" href="Definition.Conversion.html#5618" class="Record Operator">[convâ†‘]</a> <a id="1158" href="Definition.Conversion.Reduction.html#1008" class="Bound">uâ€²</a> <a id="1161" href="Definition.Conversion.html#5618" class="Record Operator">âˆ·</a> <a id="1163" href="Definition.Conversion.Reduction.html#1013" class="Bound">B</a>
                   <a id="1184" class="Symbol">â†’</a> <a id="1186" href="Definition.Conversion.Reduction.html#591" class="Generalizable">Î“</a> <a id="1188" href="Definition.Conversion.html#5618" class="Record Operator">âŠ¢</a> <a id="1190" href="Definition.Conversion.Reduction.html#1001" class="Bound">t</a>  <a id="1193" href="Definition.Conversion.html#5618" class="Record Operator">[convâ†‘]</a> <a id="1201" href="Definition.Conversion.Reduction.html#1006" class="Bound">u</a>  <a id="1204" href="Definition.Conversion.html#5618" class="Record Operator">âˆ·</a> <a id="1206" href="Definition.Conversion.Reduction.html#1011" class="Bound">A</a>
<a id="1208" href="Definition.Conversion.Reduction.html#977" class="Function">reductionConvâ†‘Term</a> <a id="1227" href="Definition.Conversion.Reduction.html#1227" class="Bound">Aâ‡’*</a> <a id="1231" href="Definition.Conversion.Reduction.html#1231" class="Bound">tâ‡’*</a> <a id="1235" href="Definition.Conversion.Reduction.html#1235" class="Bound">uâ‡’*</a> <a id="1239" class="Symbol">(</a><a id="1240" href="Definition.Conversion.html#5740" class="InductiveConstructor">[â†‘]â‚œ</a> <a id="1245" href="Definition.Conversion.Reduction.html#1245" class="Bound">Bâ€²</a> <a id="1248" href="Definition.Conversion.Reduction.html#1248" class="Bound">tâ€³</a> <a id="1251" href="Definition.Conversion.Reduction.html#1251" class="Bound">uâ€³</a> <a id="1254" href="Definition.Conversion.Reduction.html#1254" class="Bound">D</a><a id="1255" class="Symbol">@(</a><a id="1257" href="Definition.Conversion.Reduction.html#1257" class="Bound">Dâ€²</a> <a id="1260" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1262" class="Symbol">_)</a> <a id="1265" href="Definition.Conversion.Reduction.html#1265" class="Bound">d</a> <a id="1267" href="Definition.Conversion.Reduction.html#1267" class="Bound">dâ€²</a> <a id="1270" href="Definition.Conversion.Reduction.html#1270" class="Bound">tâ€³&lt;&gt;uâ€³</a><a id="1276" class="Symbol">)</a> <a id="1278" class="Symbol">=</a>
  <a id="1282" href="Definition.Conversion.html#5740" class="InductiveConstructor">[â†‘]â‚œ</a> <a id="1287" href="Definition.Conversion.Reduction.html#1245" class="Bound">Bâ€²</a> <a id="1290" href="Definition.Conversion.Reduction.html#1248" class="Bound">tâ€³</a> <a id="1293" href="Definition.Conversion.Reduction.html#1251" class="Bound">uâ€³</a>
       <a id="1303" class="Symbol">(</a><a id="1304" href="Definition.Typed.Properties.Reduction.html#23680" class="Function">â‡’*â†’â†˜â†’â†˜</a> <a id="1311" href="Definition.Conversion.Reduction.html#1227" class="Bound">Aâ‡’*</a> <a id="1315" href="Definition.Conversion.Reduction.html#1254" class="Bound">D</a><a id="1316" class="Symbol">)</a>
       <a id="1325" class="Symbol">(</a><a id="1326" href="Definition.Typed.Properties.Reduction.html#23842" class="Function">â‡’*âˆ·â†’â†˜âˆ·â†’â†˜âˆ·</a> <a id="1336" class="Symbol">(</a><a id="1337" href="Definition.Typed.Properties.Reduction.html#24089" class="Function">conv*</a> <a id="1343" href="Definition.Conversion.Reduction.html#1231" class="Bound">tâ‡’*</a> <a id="1347" class="Symbol">(</a><a id="1348" href="Definition.Typed.Properties.Reduction.html#9108" class="Function">subset*</a> <a id="1356" href="Definition.Conversion.Reduction.html#1257" class="Bound">Dâ€²</a><a id="1358" class="Symbol">))</a> <a id="1361" href="Definition.Conversion.Reduction.html#1265" class="Bound">d</a><a id="1362" class="Symbol">)</a>
       <a id="1371" class="Symbol">(</a><a id="1372" href="Definition.Typed.Properties.Reduction.html#23842" class="Function">â‡’*âˆ·â†’â†˜âˆ·â†’â†˜âˆ·</a> <a id="1382" class="Symbol">(</a><a id="1383" href="Definition.Typed.Properties.Reduction.html#24089" class="Function">conv*</a> <a id="1389" href="Definition.Conversion.Reduction.html#1235" class="Bound">uâ‡’*</a> <a id="1393" class="Symbol">(</a><a id="1394" href="Definition.Typed.Properties.Reduction.html#9108" class="Function">subset*</a> <a id="1402" href="Definition.Conversion.Reduction.html#1257" class="Bound">Dâ€²</a><a id="1404" class="Symbol">))</a> <a id="1407" href="Definition.Conversion.Reduction.html#1267" class="Bound">dâ€²</a><a id="1409" class="Symbol">)</a>
       <a id="1418" href="Definition.Conversion.Reduction.html#1270" class="Bound">tâ€³&lt;&gt;uâ€³</a>
</pre></body></html>