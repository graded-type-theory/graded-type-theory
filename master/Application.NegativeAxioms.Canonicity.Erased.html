<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Application.NegativeAxioms.Canonicity.Erased</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Proof that consistent erased axioms do not jeopardize canonicity</a>
<a id="142" class="Comment">-- if erased matches are not allowed.</a>
<a id="180" class="Comment">------------------------------------------------------------------------</a>

<a id="254" class="Keyword">import</a> <a id="261" href="Definition.Modality.Instances.Erasure.Modality.html" class="Module">Definition.Modality.Instances.Erasure.Modality</a>
<a id="308" class="Keyword">open</a> <a id="313" class="Keyword">import</a> <a id="320" href="Definition.Modality.Instances.Erasure.html" class="Module">Definition.Modality.Instances.Erasure</a>

<a id="359" class="Keyword">open</a> <a id="364" class="Keyword">import</a> <a id="371" href="Definition.Modality.Restrictions.html" class="Module">Definition.Modality.Restrictions</a>
<a id="404" class="Keyword">open</a> <a id="409" class="Keyword">import</a> <a id="416" href="Definition.Modality.Usage.Restrictions.html" class="Module">Definition.Modality.Usage.Restrictions</a> <a id="455" href="Definition.Modality.Instances.Erasure.html#397" class="Datatype">Erasure</a>
<a id="463" class="Keyword">open</a> <a id="468" class="Keyword">import</a> <a id="475" href="Definition.Mode.Restrictions.html" class="Module">Definition.Mode.Restrictions</a>
<a id="504" class="Keyword">import</a> <a id="511" href="Definition.Typed.html" class="Module">Definition.Typed</a>
<a id="528" class="Keyword">open</a> <a id="533" class="Keyword">import</a> <a id="540" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a> <a id="570" href="Definition.Modality.Instances.Erasure.html#397" class="Datatype">Erasure</a>
<a id="578" class="Keyword">open</a> <a id="583" class="Keyword">import</a> <a id="590" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="609" href="Definition.Modality.Instances.Erasure.html#397" class="Datatype">Erasure</a> <a id="617" class="Keyword">hiding</a> <a id="624" class="Symbol">(</a><a id="625" href="Definition.Untyped.NotParametrised.html#1138" class="InductiveConstructor Operator">_∷_</a><a id="628" class="Symbol">)</a>

<a id="631" class="Keyword">open</a> <a id="636" class="Keyword">import</a> <a id="643" href="Tools.Empty.html" class="Module">Tools.Empty</a>

<a id="656" class="Keyword">module</a> <a id="663" href="Application.NegativeAxioms.Canonicity.Erased.html" class="Module">Application.NegativeAxioms.Canonicity.Erased</a>
  <a id="710" class="Symbol">(</a><a id="711" href="Application.NegativeAxioms.Canonicity.Erased.html#711" class="Bound">mrs</a> <a id="715" class="Symbol">:</a> <a id="717" href="Definition.Mode.Restrictions.html#274" class="Record">Mode-restrictions</a><a id="734" class="Symbol">)</a>
  <a id="738" class="Symbol">(</a><a id="739" class="Keyword">open</a> <a id="744" href="Definition.Modality.Instances.Erasure.Modality.html" class="Module">Definition.Modality.Instances.Erasure.Modality</a> <a id="791" href="Application.NegativeAxioms.Canonicity.Erased.html#711" class="Bound">mrs</a><a id="794" class="Symbol">)</a>
  <a id="798" class="Symbol">(</a><a id="799" href="Application.NegativeAxioms.Canonicity.Erased.html#799" class="Bound">TR</a> <a id="802" class="Symbol">:</a> <a id="804" href="Definition.Typed.Restrictions.html#406" class="Record">Type-restrictions</a><a id="821" class="Symbol">)</a>
  <a id="825" class="Symbol">(</a><a id="826" class="Keyword">open</a> <a id="831" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="848" href="Application.NegativeAxioms.Canonicity.Erased.html#799" class="Bound">TR</a><a id="850" class="Symbol">)</a>
  <a id="854" class="Symbol">(</a><a id="855" href="Application.NegativeAxioms.Canonicity.Erased.html#855" class="Bound">UR</a> <a id="858" class="Symbol">:</a> <a id="860" href="Definition.Modality.Usage.Restrictions.html#329" class="Record">Usage-restrictions</a><a id="878" class="Symbol">)</a>
  <a id="882" class="Comment">-- Erased matches are not allowed.</a>
  <a id="919" class="Symbol">(</a><a id="920" href="Application.NegativeAxioms.Canonicity.Erased.html#920" class="Bound">no-erased-matches</a> <a id="938" class="Symbol">:</a> <a id="940" href="Definition.Modality.Restrictions.html#2239" class="Function">No-erased-matches</a> <a id="958" href="Definition.Modality.Instances.Erasure.Modality.html#1909" class="Function">ErasureModality</a> <a id="974" href="Application.NegativeAxioms.Canonicity.Erased.html#855" class="Bound">UR</a><a id="976" class="Symbol">)</a>
  <a id="980" class="Symbol">{</a><a id="981" href="Application.NegativeAxioms.Canonicity.Erased.html#981" class="Bound">m</a><a id="982" class="Symbol">}</a> <a id="984" class="Symbol">{</a><a id="985" href="Application.NegativeAxioms.Canonicity.Erased.html#985" class="Bound">Γ</a> <a id="987" class="Symbol">:</a> <a id="989" href="Definition.Untyped.NotParametrised.html#781" class="Datatype">Con</a> <a id="993" href="Definition.Untyped.html#1988" class="Datatype">Term</a> <a id="998" href="Application.NegativeAxioms.Canonicity.Erased.html#981" class="Bound">m</a><a id="999" class="Symbol">}</a> <a id="1001" class="Symbol">(</a><a id="1002" href="Application.NegativeAxioms.Canonicity.Erased.html#1002" class="Bound">consistent</a> <a id="1013" class="Symbol">:</a> <a id="1015" class="Symbol">∀{</a><a id="1017" href="Application.NegativeAxioms.Canonicity.Erased.html#1017" class="Bound">t</a><a id="1018" class="Symbol">}</a> <a id="1020" class="Symbol">→</a> <a id="1022" href="Application.NegativeAxioms.Canonicity.Erased.html#985" class="Bound">Γ</a> <a id="1024" href="Definition.Typed.html#1461" class="Datatype Operator">⊢</a> <a id="1026" href="Application.NegativeAxioms.Canonicity.Erased.html#1017" class="Bound">t</a> <a id="1028" href="Definition.Typed.html#1461" class="Datatype Operator">∷</a> <a id="1030" href="Definition.Untyped.html#2521" class="InductiveConstructor">Empty</a> <a id="1036" class="Symbol">→</a> <a id="1038" href="Data.Empty.html#526" class="Datatype">⊥</a><a id="1039" class="Symbol">)</a>
  <a id="1043" class="Keyword">where</a>

<a id="1050" class="Keyword">open</a> <a id="1055" class="Keyword">import</a> <a id="1062" href="Definition.Modality.Context.html" class="Module">Definition.Modality.Context</a> <a id="1090" href="Definition.Modality.Instances.Erasure.Modality.html#1909" class="Function">ErasureModality</a>
<a id="1106" class="Keyword">open</a> <a id="1111" class="Keyword">import</a> <a id="1118" href="Definition.Modality.Usage.html" class="Module">Definition.Modality.Usage</a> <a id="1144" href="Definition.Modality.Instances.Erasure.Modality.html#1909" class="Function">ErasureModality</a> <a id="1160" href="Application.NegativeAxioms.Canonicity.Erased.html#855" class="Bound">UR</a>
<a id="1163" class="Keyword">open</a> <a id="1168" class="Keyword">import</a> <a id="1175" href="Definition.Mode.html" class="Module">Definition.Mode</a> <a id="1191" href="Definition.Modality.Instances.Erasure.Modality.html#1909" class="Function">ErasureModality</a>
<a id="1207" class="Keyword">import</a> <a id="1214" href="Application.NegativeAxioms.Canonicity.NegativeErased.html" class="Module">Application.NegativeAxioms.Canonicity.NegativeErased</a>
  <a id="1269" href="Application.NegativeAxioms.Canonicity.Erased.html#711" class="Bound">mrs</a> <a id="1273" href="Application.NegativeAxioms.Canonicity.Erased.html#799" class="Bound">TR</a> <a id="1276" href="Application.NegativeAxioms.Canonicity.Erased.html#855" class="Bound">UR</a> <a id="1279" href="Application.NegativeAxioms.Canonicity.Erased.html#920" class="Bound">no-erased-matches</a>
  as <a id="NE"></a><a id="1302" href="Application.NegativeAxioms.Canonicity.Erased.html#1302" class="Module">NE</a>
<a id="1305" class="Keyword">open</a> <a id="1310" class="Keyword">import</a> <a id="1317" href="Application.NegativeAxioms.NegativeErasedContext.html" class="Module">Application.NegativeAxioms.NegativeErasedContext</a>
  <a id="1368" href="Definition.Modality.Instances.Erasure.Modality.html#1909" class="Function">ErasureModality</a> <a id="1384" class="Symbol">(λ</a> <a id="1387" class="Symbol">())</a> <a id="1391" href="Application.NegativeAxioms.Canonicity.Erased.html#799" class="Bound">TR</a>
<a id="1394" class="Keyword">open</a> <a id="1399" class="Keyword">import</a> <a id="1406" href="Erasure.SucRed.html" class="Module">Erasure.SucRed</a> <a id="1421" href="Application.NegativeAxioms.Canonicity.Erased.html#799" class="Bound">TR</a>

<a id="1425" class="Keyword">open</a> <a id="1430" class="Keyword">import</a> <a id="1437" href="Tools.Nat.html" class="Module">Tools.Nat</a>
<a id="1447" class="Keyword">open</a> <a id="1452" class="Keyword">import</a> <a id="1459" href="Tools.Product.html" class="Module">Tools.Product</a>

<a id="1474" class="Keyword">private</a>
  <a id="1484" class="Keyword">variable</a>
    <a id="1497" href="Application.NegativeAxioms.Canonicity.Erased.html#1497" class="Generalizable">n</a> <a id="1499" class="Symbol">:</a> <a id="1501" href="Agda.Builtin.Nat.html#186" class="Datatype">Nat</a>
    <a id="1509" href="Application.NegativeAxioms.Canonicity.Erased.html#1509" class="Generalizable">t</a> <a id="1511" href="Application.NegativeAxioms.Canonicity.Erased.html#1511" class="Generalizable">u</a> <a id="1513" class="Symbol">:</a> <a id="1515" href="Definition.Untyped.html#1988" class="Datatype">Term</a> <a id="1520" href="Application.NegativeAxioms.Canonicity.Erased.html#1497" class="Generalizable">n</a>

<a id="1523" class="Comment">-- Canonicity theorem: Any well-typed term Γ ⊢ t ∷ ℕ, γ ▸ t</a>
<a id="1583" class="Comment">-- reduces to a numeral under the ⇒ˢ* reduction.</a>

<a id="canonicityRed"></a><a id="1633" href="Application.NegativeAxioms.Canonicity.Erased.html#1633" class="Function">canonicityRed</a> <a id="1647" class="Symbol">:</a> <a id="1649" href="Application.NegativeAxioms.Canonicity.Erased.html#985" class="Bound">Γ</a> <a id="1651" href="Definition.Typed.html#1461" class="Datatype Operator">⊢</a> <a id="1653" href="Application.NegativeAxioms.Canonicity.Erased.html#1509" class="Generalizable">t</a> <a id="1655" href="Definition.Typed.html#1461" class="Datatype Operator">∷</a> <a id="1657" href="Definition.Untyped.html#2494" class="InductiveConstructor">ℕ</a> <a id="1659" class="Symbol">→</a> <a id="1661" href="Definition.Modality.Context.html#2011" class="Function">𝟘ᶜ</a> <a id="1664" href="Definition.Modality.Usage.html#1165" class="Datatype Operator">▸[</a> <a id="1667" href="Definition.Mode.html#1066" class="InductiveConstructor">𝟙ᵐ</a> <a id="1670" href="Definition.Modality.Usage.html#1165" class="Datatype Operator">]</a> <a id="1672" href="Application.NegativeAxioms.Canonicity.Erased.html#1509" class="Generalizable">t</a>
              <a id="1688" class="Symbol">→</a> <a id="1690" href="Data.Product.html#1369" class="Function">∃</a> <a id="1692" class="Symbol">λ</a> <a id="1694" href="Application.NegativeAxioms.Canonicity.Erased.html#1694" class="Bound">u</a> <a id="1696" class="Symbol">→</a> <a id="1698" href="Definition.Untyped.html#9373" class="Datatype">Numeral</a> <a id="1706" href="Application.NegativeAxioms.Canonicity.Erased.html#1694" class="Bound">u</a> <a id="1708" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1710" href="Application.NegativeAxioms.Canonicity.Erased.html#985" class="Bound">Γ</a> <a id="1712" href="Erasure.SucRed.html#926" class="Datatype Operator">⊢</a> <a id="1714" href="Application.NegativeAxioms.Canonicity.Erased.html#1509" class="Generalizable">t</a> <a id="1716" href="Erasure.SucRed.html#926" class="Datatype Operator">⇒ˢ*</a> <a id="1720" href="Application.NegativeAxioms.Canonicity.Erased.html#1694" class="Bound">u</a> <a id="1722" href="Erasure.SucRed.html#926" class="Datatype Operator">∷ℕ</a>
<a id="1725" href="Application.NegativeAxioms.Canonicity.Erased.html#1633" class="Function">canonicityRed</a> <a id="1739" href="Application.NegativeAxioms.Canonicity.Erased.html#1739" class="Bound">⊢t</a> <a id="1742" href="Application.NegativeAxioms.Canonicity.Erased.html#1742" class="Bound">𝟘▸t</a> <a id="1746" class="Symbol">=</a> <a id="1748" href="Application.NegativeAxioms.Canonicity.NegativeErased.html#7392" class="Function">NE.canonicityRed</a> <a id="1765" href="Application.NegativeAxioms.NegativeErasedContext.html#2001" class="Function">erasedContext</a> <a id="1779" href="Application.NegativeAxioms.Canonicity.Erased.html#1002" class="Bound">consistent</a> <a id="1790" href="Application.NegativeAxioms.Canonicity.Erased.html#1739" class="Bound">⊢t</a> <a id="1793" href="Application.NegativeAxioms.Canonicity.Erased.html#1742" class="Bound">𝟘▸t</a>

<a id="1798" class="Comment">-- Canonicity theorem: Any well-typed term Γ ⊢ t : ℕ is convertible to a numeral.</a>

<a id="canonicityEq"></a><a id="1881" href="Application.NegativeAxioms.Canonicity.Erased.html#1881" class="Function">canonicityEq</a> <a id="1894" class="Symbol">:</a> <a id="1896" href="Application.NegativeAxioms.Canonicity.Erased.html#985" class="Bound">Γ</a> <a id="1898" href="Definition.Typed.html#1461" class="Datatype Operator">⊢</a> <a id="1900" href="Application.NegativeAxioms.Canonicity.Erased.html#1509" class="Generalizable">t</a> <a id="1902" href="Definition.Typed.html#1461" class="Datatype Operator">∷</a> <a id="1904" href="Definition.Untyped.html#2494" class="InductiveConstructor">ℕ</a> <a id="1906" class="Symbol">→</a> <a id="1908" href="Definition.Modality.Context.html#2011" class="Function">𝟘ᶜ</a> <a id="1911" href="Definition.Modality.Usage.html#1165" class="Datatype Operator">▸[</a> <a id="1914" href="Definition.Mode.html#1066" class="InductiveConstructor">𝟙ᵐ</a> <a id="1917" href="Definition.Modality.Usage.html#1165" class="Datatype Operator">]</a> <a id="1919" href="Application.NegativeAxioms.Canonicity.Erased.html#1509" class="Generalizable">t</a>
             <a id="1934" class="Symbol">→</a> <a id="1936" href="Data.Product.html#1369" class="Function">∃</a> <a id="1938" class="Symbol">λ</a> <a id="1940" href="Application.NegativeAxioms.Canonicity.Erased.html#1940" class="Bound">u</a> <a id="1942" class="Symbol">→</a> <a id="1944" href="Definition.Untyped.html#9373" class="Datatype">Numeral</a> <a id="1952" href="Application.NegativeAxioms.Canonicity.Erased.html#1940" class="Bound">u</a> <a id="1954" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1956" href="Application.NegativeAxioms.Canonicity.Erased.html#985" class="Bound">Γ</a> <a id="1958" href="Definition.Typed.html#3933" class="Datatype Operator">⊢</a> <a id="1960" href="Application.NegativeAxioms.Canonicity.Erased.html#1509" class="Generalizable">t</a> <a id="1962" href="Definition.Typed.html#3933" class="Datatype Operator">≡</a> <a id="1964" href="Application.NegativeAxioms.Canonicity.Erased.html#1940" class="Bound">u</a> <a id="1966" href="Definition.Typed.html#3933" class="Datatype Operator">∷</a> <a id="1968" href="Definition.Untyped.html#2494" class="InductiveConstructor">ℕ</a>
<a id="1970" href="Application.NegativeAxioms.Canonicity.Erased.html#1881" class="Function">canonicityEq</a> <a id="1983" href="Application.NegativeAxioms.Canonicity.Erased.html#1983" class="Bound">⊢t</a> <a id="1986" href="Application.NegativeAxioms.Canonicity.Erased.html#1986" class="Bound">𝟘▸t</a> <a id="1990" class="Symbol">=</a>
  <a id="1994" class="Keyword">let</a> <a id="1998" href="Application.NegativeAxioms.Canonicity.Erased.html#1998" class="Bound">u</a> <a id="2000" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2002" href="Application.NegativeAxioms.Canonicity.Erased.html#2002" class="Bound">numU</a> <a id="2007" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2009" href="Application.NegativeAxioms.Canonicity.Erased.html#2009" class="Bound">d</a> <a id="2011" class="Symbol">=</a> <a id="2013" href="Application.NegativeAxioms.Canonicity.Erased.html#1633" class="Function">canonicityRed</a> <a id="2027" href="Application.NegativeAxioms.Canonicity.Erased.html#1983" class="Bound">⊢t</a> <a id="2030" href="Application.NegativeAxioms.Canonicity.Erased.html#1986" class="Bound">𝟘▸t</a>
  <a id="2036" class="Keyword">in</a>  <a id="2040" href="Application.NegativeAxioms.Canonicity.Erased.html#1998" class="Bound">u</a> <a id="2042" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2044" href="Application.NegativeAxioms.Canonicity.Erased.html#2002" class="Bound">numU</a> <a id="2049" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2051" href="Erasure.SucRed.html#1576" class="Function">subset*Termˢ</a> <a id="2064" href="Application.NegativeAxioms.Canonicity.Erased.html#2009" class="Bound">d</a>
</pre></body></html>