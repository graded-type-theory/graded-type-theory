<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Modality</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The modality structure.</a>
<a id="101" class="Comment">------------------------------------------------------------------------</a>

<a id="175" class="Keyword">open</a> <a id="180" class="Keyword">import</a> <a id="187" href="Tools.Level.html" class="Module">Tools.Level</a>
<a id="199" class="Keyword">open</a> <a id="204" class="Keyword">import</a> <a id="211" href="Tools.Relation.html" class="Module">Tools.Relation</a>

<a id="227" class="Keyword">module</a> <a id="234" href="Graded.Modality.html" class="Module">Graded.Modality</a> <a id="250" class="Symbol">{</a><a id="251" href="Graded.Modality.html#251" class="Bound">a</a><a id="252" class="Symbol">}</a> <a id="254" class="Symbol">(</a><a id="255" href="Graded.Modality.html#255" class="Bound">M</a> <a id="257" class="Symbol">:</a> <a id="259" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="263" href="Graded.Modality.html#251" class="Bound">a</a><a id="264" class="Symbol">)</a> <a id="266" class="Keyword">where</a>

<a id="273" class="Keyword">open</a> <a id="278" class="Keyword">import</a> <a id="285" href="Tools.Algebra.html" class="Module">Tools.Algebra</a> <a id="299" href="Graded.Modality.html#255" class="Bound">M</a>
<a id="301" class="Keyword">open</a> <a id="306" class="Keyword">import</a> <a id="313" href="Tools.Bool.html" class="Module">Tools.Bool</a> <a id="324" class="Keyword">using</a> <a id="330" class="Symbol">(</a><a id="331" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="335" class="Symbol">;</a> <a id="337" href="Data.Bool.Base.html#1460" class="Function">T</a><a id="338" class="Symbol">)</a>
<a id="340" class="Keyword">open</a> <a id="345" class="Keyword">import</a> <a id="352" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="366" class="Keyword">open</a> <a id="371" class="Keyword">import</a> <a id="378" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="406" class="Keyword">open</a> <a id="411" class="Keyword">import</a> <a id="418" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="429" class="Keyword">open</a> <a id="434" class="Keyword">import</a> <a id="441" href="Graded.Modality.Variant.html" class="Module">Graded.Modality.Variant</a> <a id="465" href="Graded.Modality.html#251" class="Bound">a</a>

<a id="468" class="Keyword">private</a> <a id="476" class="Keyword">variable</a>
  <a id="487" href="Graded.Modality.html#487" class="Generalizable">n</a> <a id="489" href="Graded.Modality.html#489" class="Generalizable">n₁</a> <a id="492" href="Graded.Modality.html#492" class="Generalizable">n₂</a> <a id="495" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="497" href="Graded.Modality.html#497" class="Generalizable">q</a> <a id="499" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="501" href="Graded.Modality.html#501" class="Generalizable">z</a> <a id="503" href="Graded.Modality.html#503" class="Generalizable">z₁</a> <a id="506" href="Graded.Modality.html#506" class="Generalizable">s</a> <a id="508" href="Graded.Modality.html#508" class="Generalizable">s₁</a> <a id="511" href="Graded.Modality.html#511" class="Generalizable">s₂</a> <a id="514" href="Graded.Modality.html#514" class="Generalizable">z₂</a> <a id="517" class="Symbol">:</a> <a id="519" href="Graded.Modality.html#255" class="Bound">M</a>

<a id="522" class="Comment">-- Semiring with meet</a>
<a id="544" class="Keyword">record</a> <a id="Semiring-with-meet"></a><a id="551" href="Graded.Modality.html#551" class="Record">Semiring-with-meet</a> <a id="570" class="Symbol">:</a> <a id="572" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="576" href="Graded.Modality.html#251" class="Bound">a</a> <a id="578" class="Keyword">where</a>
  <a id="586" class="Keyword">infixr</a> <a id="593" class="Number">40</a> <a id="596" href="Graded.Modality.html#747" class="Function Operator">_+_</a>
  <a id="602" class="Keyword">infixr</a> <a id="609" class="Number">40</a> <a id="612" href="Graded.Modality.html#809" class="Function Operator">_∧_</a>
  <a id="618" class="Keyword">infixr</a> <a id="625" class="Number">45</a> <a id="628" href="Graded.Modality.html#775" class="Function Operator">_·_</a>
  <a id="634" class="Keyword">infix</a>  <a id="641" class="Number">10</a> <a id="644" href="Graded.Modality.html#1305" class="Function Operator">_≤_</a> <a id="648" href="Graded.Modality.html#1390" class="Function Operator">_&lt;_</a>


  <a id="656" class="Keyword">field</a>
    <a id="666" class="Comment">-- A semiring with meet consists of a type M with three binary operations...</a>
    <a id="Semiring-with-meet._+_"></a><a id="747" href="Graded.Modality.html#747" class="Field Operator">_+_</a> <a id="751" class="Symbol">:</a> <a id="753" href="Algebra.Core.html#527" class="Function">Op₂</a> <a id="757" href="Graded.Modality.html#255" class="Bound">M</a> <a id="759" class="Comment">-- Addition</a>
    <a id="Semiring-with-meet._·_"></a><a id="775" href="Graded.Modality.html#775" class="Field Operator">_·_</a> <a id="779" class="Symbol">:</a> <a id="781" href="Algebra.Core.html#527" class="Function">Op₂</a> <a id="785" href="Graded.Modality.html#255" class="Bound">M</a> <a id="787" class="Comment">-- Multiplication</a>
    <a id="Semiring-with-meet._∧_"></a><a id="809" href="Graded.Modality.html#809" class="Field Operator">_∧_</a> <a id="813" class="Symbol">:</a> <a id="815" href="Algebra.Core.html#527" class="Function">Op₂</a> <a id="819" href="Graded.Modality.html#255" class="Bound">M</a> <a id="821" class="Comment">-- Meet</a>

    <a id="834" class="Comment">-- ... and two special elements</a>
    <a id="Semiring-with-meet.𝟘"></a><a id="870" href="Graded.Modality.html#870" class="Field">𝟘</a> <a id="872" class="Symbol">:</a> <a id="874" href="Graded.Modality.html#255" class="Bound">M</a>
    <a id="Semiring-with-meet.𝟙"></a><a id="880" href="Graded.Modality.html#880" class="Field">𝟙</a> <a id="882" class="Symbol">:</a> <a id="884" href="Graded.Modality.html#255" class="Bound">M</a>

    <a id="891" class="Comment">-- + and · form a semiring with 𝟙 as multiplicative unit and 𝟘 as zero</a>
    <a id="Semiring-with-meet.+-·-Semiring"></a><a id="966" href="Graded.Modality.html#966" class="Field">+-·-Semiring</a>  <a id="980" class="Symbol">:</a> <a id="982" href="Algebra.Structures.html#11370" class="Record">IsSemiring</a> <a id="993" href="Graded.Modality.html#747" class="Field Operator">_+_</a> <a id="997" href="Graded.Modality.html#775" class="Field Operator">_·_</a> <a id="1001" href="Graded.Modality.html#870" class="Field">𝟘</a> <a id="1003" href="Graded.Modality.html#880" class="Field">𝟙</a>
    <a id="1009" class="Comment">-- ∧ forms a semilattice</a>
    <a id="Semiring-with-meet.∧-Semilattice"></a><a id="1038" href="Graded.Modality.html#1038" class="Field">∧-Semilattice</a>       <a id="1058" class="Symbol">:</a> <a id="1060" href="Algebra.Structures.html#2399" class="Record">IsSemilattice</a> <a id="1074" href="Graded.Modality.html#809" class="Field Operator">_∧_</a>

    <a id="1083" class="Comment">-- Multiplation distributes over meet</a>
    <a id="Semiring-with-meet.·-distrib-∧"></a><a id="1125" href="Graded.Modality.html#1125" class="Field">·-distrib-∧</a>         <a id="1145" class="Symbol">:</a> <a id="1147" href="Graded.Modality.html#775" class="Field Operator">_·_</a> <a id="1151" href="Algebra.Definitions.html#2474" class="Function Operator">DistributesOver</a> <a id="1167" href="Graded.Modality.html#809" class="Field Operator">_∧_</a>
    <a id="1175" class="Comment">-- Addition distributes over meet</a>
    <a id="Semiring-with-meet.+-distrib-∧"></a><a id="1213" href="Graded.Modality.html#1213" class="Field">+-distrib-∧</a>         <a id="1233" class="Symbol">:</a> <a id="1235" href="Graded.Modality.html#747" class="Field Operator">_+_</a> <a id="1239" href="Algebra.Definitions.html#2474" class="Function Operator">DistributesOver</a> <a id="1255" href="Graded.Modality.html#809" class="Field Operator">_∧_</a>

  <a id="1262" class="Comment">-- Semilattice partial ordering relation</a>
  <a id="Semiring-with-meet._≤_"></a><a id="1305" href="Graded.Modality.html#1305" class="Function Operator">_≤_</a> <a id="1309" class="Symbol">:</a> <a id="1311" href="Relation.Binary.Core.html#891" class="Function">Rel</a> <a id="1315" href="Graded.Modality.html#255" class="Bound">M</a> <a id="1317" href="Graded.Modality.html#251" class="Bound">a</a>
  <a id="1321" href="Graded.Modality.html#1321" class="Bound">p</a> <a id="1323" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="1325" href="Graded.Modality.html#1325" class="Bound">q</a> <a id="1327" class="Symbol">=</a> <a id="1329" href="Graded.Modality.html#1321" class="Bound">p</a> <a id="1331" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1333" href="Graded.Modality.html#1321" class="Bound">p</a> <a id="1335" href="Graded.Modality.html#809" class="Field Operator">∧</a> <a id="1337" href="Graded.Modality.html#1325" class="Bound">q</a>

  <a id="1342" class="Comment">-- A strict variant of the ordering relation.</a>
  <a id="Semiring-with-meet._&lt;_"></a><a id="1390" href="Graded.Modality.html#1390" class="Function Operator">_&lt;_</a> <a id="1394" class="Symbol">:</a> <a id="1396" href="Relation.Binary.Core.html#891" class="Function">Rel</a> <a id="1400" href="Graded.Modality.html#255" class="Bound">M</a> <a id="1402" href="Graded.Modality.html#251" class="Bound">a</a>
  <a id="1406" href="Graded.Modality.html#1406" class="Bound">p</a> <a id="1408" href="Graded.Modality.html#1390" class="Function Operator">&lt;</a> <a id="1410" href="Graded.Modality.html#1410" class="Bound">q</a> <a id="1412" class="Symbol">=</a> <a id="1414" href="Graded.Modality.html#1406" class="Bound">p</a> <a id="1416" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="1418" href="Graded.Modality.html#1410" class="Bound">q</a> <a id="1420" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1422" href="Graded.Modality.html#1406" class="Bound">p</a> <a id="1424" href="Relation.Binary.PropositionalEquality.Core.html#839" class="Function Operator">≢</a> <a id="1426" href="Graded.Modality.html#1410" class="Bound">q</a>

  <a id="Semiring-with-meet.·-distribˡ-∧"></a><a id="1431" href="Graded.Modality.html#1431" class="Function">·-distribˡ-∧</a> <a id="1444" class="Symbol">:</a> <a id="1446" href="Graded.Modality.html#775" class="Field Operator">_·_</a> <a id="1450" href="Algebra.Definitions.html#2236" class="Function Operator">DistributesOverˡ</a> <a id="1467" href="Graded.Modality.html#809" class="Field Operator">_∧_</a>
  <a id="1473" href="Graded.Modality.html#1431" class="Function">·-distribˡ-∧</a> <a id="1486" class="Symbol">=</a> <a id="1488" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1494" href="Graded.Modality.html#1125" class="Field">·-distrib-∧</a>

  <a id="Semiring-with-meet.·-distribʳ-∧"></a><a id="1509" href="Graded.Modality.html#1509" class="Function">·-distribʳ-∧</a> <a id="1522" class="Symbol">:</a> <a id="1524" href="Graded.Modality.html#775" class="Field Operator">_·_</a> <a id="1528" href="Algebra.Definitions.html#2355" class="Function Operator">DistributesOverʳ</a> <a id="1545" href="Graded.Modality.html#809" class="Field Operator">_∧_</a>
  <a id="1551" href="Graded.Modality.html#1509" class="Function">·-distribʳ-∧</a> <a id="1564" class="Symbol">=</a> <a id="1566" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="1572" href="Graded.Modality.html#1125" class="Field">·-distrib-∧</a>

  <a id="Semiring-with-meet.+-distribˡ-∧"></a><a id="1587" href="Graded.Modality.html#1587" class="Function">+-distribˡ-∧</a> <a id="1600" class="Symbol">:</a> <a id="1602" href="Graded.Modality.html#747" class="Field Operator">_+_</a> <a id="1606" href="Algebra.Definitions.html#2236" class="Function Operator">DistributesOverˡ</a> <a id="1623" href="Graded.Modality.html#809" class="Field Operator">_∧_</a>
  <a id="1629" href="Graded.Modality.html#1587" class="Function">+-distribˡ-∧</a> <a id="1642" class="Symbol">=</a> <a id="1644" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1650" href="Graded.Modality.html#1213" class="Field">+-distrib-∧</a>

  <a id="Semiring-with-meet.+-distribʳ-∧"></a><a id="1665" href="Graded.Modality.html#1665" class="Function">+-distribʳ-∧</a> <a id="1678" class="Symbol">:</a> <a id="1680" href="Graded.Modality.html#747" class="Field Operator">_+_</a> <a id="1684" href="Algebra.Definitions.html#2355" class="Function Operator">DistributesOverʳ</a> <a id="1701" href="Graded.Modality.html#809" class="Field Operator">_∧_</a>
  <a id="1707" href="Graded.Modality.html#1665" class="Function">+-distribʳ-∧</a> <a id="1720" class="Symbol">=</a> <a id="1722" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="1728" href="Graded.Modality.html#1213" class="Field">+-distrib-∧</a>

  <a id="Semiring-with-meet.+-·-Semiring′"></a><a id="1743" href="Graded.Modality.html#1743" class="Function">+-·-Semiring′</a> <a id="1757" class="Symbol">:</a> <a id="1759" href="Algebra.Bundles.html#16253" class="Record">Semiring</a> <a id="1768" href="Graded.Modality.html#251" class="Bound">a</a> <a id="1770" href="Graded.Modality.html#251" class="Bound">a</a>
  <a id="1774" href="Graded.Modality.html#1743" class="Function">+-·-Semiring′</a> <a id="1788" class="Symbol">=</a> <a id="1790" class="Keyword">record</a>
    <a id="1801" class="Symbol">{</a> <a id="1803" href="Algebra.Bundles.html#16349" class="Field">Carrier</a> <a id="1811" class="Symbol">=</a> <a id="1813" href="Graded.Modality.html#255" class="Bound">M</a>
    <a id="1819" class="Symbol">;</a> <a id="1821" href="Algebra.Bundles.html#16372" class="Field Operator">_≈_</a> <a id="1825" class="Symbol">=</a> <a id="1827" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a>
    <a id="1835" class="Symbol">;</a> <a id="1837" href="Algebra.Bundles.html#16403" class="Field Operator">_+_</a> <a id="1841" class="Symbol">=</a> <a id="1843" href="Graded.Modality.html#747" class="Field Operator">_+_</a>
    <a id="1851" class="Symbol">;</a> <a id="1853" href="Algebra.Bundles.html#16432" class="Field Operator">_*_</a> <a id="1857" class="Symbol">=</a> <a id="1859" href="Graded.Modality.html#775" class="Field Operator">_·_</a>
    <a id="1867" class="Symbol">;</a> <a id="1869" href="Algebra.Bundles.html#16461" class="Field">0#</a> <a id="1872" class="Symbol">=</a> <a id="1874" href="Graded.Modality.html#870" class="Field">𝟘</a>
    <a id="1880" class="Symbol">;</a> <a id="1882" href="Algebra.Bundles.html#16486" class="Field">1#</a> <a id="1885" class="Symbol">=</a> <a id="1887" href="Graded.Modality.html#880" class="Field">𝟙</a>
    <a id="1893" class="Symbol">;</a> <a id="1895" href="Algebra.Bundles.html#16511" class="Field">isSemiring</a> <a id="1906" class="Symbol">=</a> <a id="1908" href="Graded.Modality.html#966" class="Field">+-·-Semiring</a>
    <a id="1925" class="Symbol">}</a>

  <a id="1930" class="Keyword">open</a> <a id="1935" href="Algebra.Structures.html#11370" class="Module">IsSemiring</a> <a id="1946" href="Graded.Modality.html#966" class="Field">+-·-Semiring</a> <a id="1959" class="Keyword">public</a>
    <a id="1970" class="Keyword">using</a> <a id="1976" class="Symbol">(</a>
            <a id="1990" href="Algebra.Structures.html#10471" class="Function">+-assoc</a><a id="1997" class="Symbol">;</a>
            <a id="2011" href="Algebra.Structures.html#10511" class="Function">+-cong</a><a id="2017" class="Symbol">;</a>
            <a id="2031" href="Algebra.Structures.html#10550" class="Function">+-congˡ</a><a id="2038" class="Symbol">;</a>
            <a id="2052" href="Algebra.Structures.html#10590" class="Function">+-congʳ</a><a id="2059" class="Symbol">;</a>
            <a id="2073" href="Algebra.Structures.html#10630" class="Function">+-identity</a><a id="2083" class="Symbol">;</a>
            <a id="2097" href="Algebra.Structures.html#10673" class="Function">+-identityˡ</a><a id="2108" class="Symbol">;</a>
            <a id="2122" href="Algebra.Structures.html#10717" class="Function">+-identityʳ</a><a id="2133" class="Symbol">;</a>
            <a id="2147" href="Algebra.Structures.html#10761" class="Function">+-comm</a>
          <a id="2164" class="Symbol">)</a>
    <a id="2170" class="Keyword">renaming</a> <a id="2179" class="Symbol">(</a>
              <a id="2195" href="Algebra.Structures.html#11097" class="Function">*-assoc</a> <a id="2203" class="Symbol">to</a> <a id="2206" class="Function">·-assoc</a><a id="2213" class="Symbol">;</a>
              <a id="2229" href="Algebra.Structures.html#11126" class="Function">*-cong</a> <a id="2236" class="Symbol">to</a> <a id="2239" class="Function">·-cong</a><a id="2245" class="Symbol">;</a>
              <a id="2261" href="Algebra.Structures.html#11154" class="Function">*-congˡ</a> <a id="2269" class="Symbol">to</a> <a id="2272" class="Function">·-congˡ</a><a id="2279" class="Symbol">;</a>
              <a id="2295" href="Algebra.Structures.html#11183" class="Function">*-congʳ</a> <a id="2303" class="Symbol">to</a> <a id="2306" class="Function">·-congʳ</a><a id="2313" class="Symbol">;</a>
              <a id="2329" href="Algebra.Structures.html#11212" class="Function">*-identity</a> <a id="2340" class="Symbol">to</a> <a id="2343" class="Function">·-identity</a><a id="2353" class="Symbol">;</a>
              <a id="2369" href="Algebra.Structures.html#11244" class="Function">*-identityˡ</a> <a id="2381" class="Symbol">to</a> <a id="2384" class="Function">·-identityˡ</a><a id="2395" class="Symbol">;</a>
              <a id="2411" href="Algebra.Structures.html#11277" class="Function">*-identityʳ</a> <a id="2423" class="Symbol">to</a> <a id="2426" class="Function">·-identityʳ</a><a id="2437" class="Symbol">;</a>

              <a id="2454" href="Algebra.Structures.html#10201" class="Function">distrib</a> <a id="2462" class="Symbol">to</a> <a id="2465" class="Function">·-distrib-+</a><a id="2476" class="Symbol">;</a>
              <a id="2492" href="Algebra.Structures.html#10248" class="Function">distribˡ</a> <a id="2501" class="Symbol">to</a> <a id="2504" class="Function">·-distribˡ-+</a><a id="2516" class="Symbol">;</a>
              <a id="2532" href="Algebra.Structures.html#10310" class="Function">distribʳ</a> <a id="2541" class="Symbol">to</a> <a id="2544" class="Function">·-distribʳ-+</a><a id="2556" class="Symbol">;</a>
              <a id="2572" href="Algebra.Structures.html#11529" class="Field">zero</a> <a id="2577" class="Symbol">to</a> <a id="2580" class="Field">·-zero</a><a id="2586" class="Symbol">;</a>
              <a id="2602" href="Algebra.Structures.html#8707" class="Function">zeroˡ</a> <a id="2608" class="Symbol">to</a> <a id="2611" class="Function">·-zeroˡ</a><a id="2618" class="Symbol">;</a>
              <a id="2634" href="Algebra.Structures.html#8753" class="Function">zeroʳ</a> <a id="2640" class="Symbol">to</a> <a id="2643" class="Function">·-zeroʳ</a>
             <a id="2664" class="Symbol">)</a>

  <a id="2669" class="Keyword">open</a> <a id="2674" href="Algebra.Structures.html#2399" class="Module">IsSemilattice</a> <a id="2688" href="Graded.Modality.html#1038" class="Field">∧-Semilattice</a> <a id="2702" class="Keyword">public</a>
    <a id="2713" class="Keyword">using</a> <a id="2719" class="Symbol">(</a><a id="2720" href="Algebra.Structures.html#2555" class="Function">∧-cong</a><a id="2726" class="Symbol">;</a> <a id="2728" href="Algebra.Structures.html#2574" class="Function">∧-congˡ</a><a id="2735" class="Symbol">;</a> <a id="2737" href="Algebra.Structures.html#2594" class="Function">∧-congʳ</a><a id="2744" class="Symbol">)</a>
    <a id="2750" class="Keyword">renaming</a> <a id="2759" class="Symbol">(</a><a id="2760" href="Algebra.Structures.html#2479" class="Field">comm</a> <a id="2765" class="Symbol">to</a> <a id="2768" class="Field">∧-comm</a><a id="2774" class="Symbol">;</a>
              <a id="2790" href="Algebra.Structures.html#2023" class="Function">idem</a> <a id="2795" class="Symbol">to</a> <a id="2798" class="Function">∧-idem</a><a id="2804" class="Symbol">;</a>
              <a id="2820" href="Algebra.Structures.html#1876" class="Function">assoc</a> <a id="2826" class="Symbol">to</a> <a id="2829" class="Function">∧-assoc</a>
             <a id="2850" class="Symbol">)</a>

<a id="2853" class="Comment">-- Meet-Semirings with well-behaved zero</a>
<a id="2894" class="Keyword">record</a> <a id="Has-well-behaved-zero"></a><a id="2901" href="Graded.Modality.html#2901" class="Record">Has-well-behaved-zero</a> <a id="2923" class="Symbol">(</a><a id="2924" href="Graded.Modality.html#2924" class="Bound">𝕄</a> <a id="2926" class="Symbol">:</a> <a id="2928" href="Graded.Modality.html#551" class="Record">Semiring-with-meet</a><a id="2946" class="Symbol">)</a> <a id="2948" class="Symbol">:</a> <a id="2950" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2954" href="Graded.Modality.html#251" class="Bound">a</a> <a id="2956" class="Keyword">where</a>
  <a id="2964" class="Keyword">open</a> <a id="2969" href="Graded.Modality.html#551" class="Module">Semiring-with-meet</a> <a id="2988" href="Graded.Modality.html#2924" class="Bound">𝕄</a>
  <a id="2992" class="Keyword">field</a>
    <a id="3002" class="Comment">-- 𝟙 is not equal to 𝟘.</a>
    <a id="Has-well-behaved-zero.𝟙≢𝟘"></a><a id="3030" href="Graded.Modality.html#3030" class="Field">𝟙≢𝟘</a> <a id="3034" class="Symbol">:</a> <a id="3036" href="Graded.Modality.html#880" class="Function">𝟙</a> <a id="3038" href="Relation.Binary.PropositionalEquality.Core.html#839" class="Function Operator">≢</a> <a id="3040" href="Graded.Modality.html#870" class="Function">𝟘</a>

    <a id="3047" class="Comment">-- It is decidable whether a value is equal to 𝟘.</a>
    <a id="Has-well-behaved-zero.is-𝟘?"></a><a id="3101" href="Graded.Modality.html#3101" class="Field">is-𝟘?</a> <a id="3107" class="Symbol">:</a> <a id="3109" class="Symbol">(</a><a id="3110" href="Graded.Modality.html#3110" class="Bound">p</a> <a id="3112" class="Symbol">:</a> <a id="3114" href="Graded.Modality.html#255" class="Bound">M</a><a id="3115" class="Symbol">)</a> <a id="3117" class="Symbol">→</a> <a id="3119" href="Relation.Nullary.html#1520" class="Record">Dec</a> <a id="3123" class="Symbol">(</a><a id="3124" href="Graded.Modality.html#3110" class="Bound">p</a> <a id="3126" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3128" href="Graded.Modality.html#870" class="Function">𝟘</a><a id="3129" class="Symbol">)</a>

    <a id="3136" class="Comment">-- The following two assumptions are based on assumptions from</a>
    <a id="3203" class="Comment">-- Conor McBride&#39;s &quot;I Got Plenty o’ Nuttin’&quot; and Robert Atkey&#39;s</a>
    <a id="3271" class="Comment">-- &quot;Syntax and Semantics of Quantitative Type Theory&quot;.</a>

    <a id="3331" class="Comment">-- The semiring has the zero-product property:</a>
    <a id="3382" class="Comment">-- if p · q is 𝟘, then either p is 𝟘 or q is 𝟘.</a>
    <a id="Has-well-behaved-zero.zero-product"></a><a id="3434" href="Graded.Modality.html#3434" class="Field">zero-product</a> <a id="3447" class="Symbol">:</a> <a id="3449" class="Symbol">{</a><a id="3450" href="Graded.Modality.html#3450" class="Bound">p</a> <a id="3452" href="Graded.Modality.html#3452" class="Bound">q</a> <a id="3454" class="Symbol">:</a> <a id="3456" href="Graded.Modality.html#255" class="Bound">M</a><a id="3457" class="Symbol">}</a> <a id="3459" class="Symbol">→</a> <a id="3461" href="Graded.Modality.html#3450" class="Bound">p</a> <a id="3463" href="Graded.Modality.html#775" class="Function Operator">·</a> <a id="3465" href="Graded.Modality.html#3452" class="Bound">q</a> <a id="3467" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3469" href="Graded.Modality.html#870" class="Function">𝟘</a> <a id="3471" class="Symbol">→</a> <a id="3473" href="Graded.Modality.html#3450" class="Bound">p</a> <a id="3475" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3477" href="Graded.Modality.html#870" class="Function">𝟘</a> <a id="3479" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="3481" href="Graded.Modality.html#3452" class="Bound">q</a> <a id="3483" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3485" href="Graded.Modality.html#870" class="Function">𝟘</a>

    <a id="3492" class="Comment">-- The semiring is positive (with respect to addition and meet):</a>

    <a id="3562" class="Comment">-- if p + q is 𝟘, then p and q are 𝟘. (The statement that p + q ≡ 𝟘</a>
    <a id="3634" class="Comment">-- implies q ≡ 𝟘 follows from the one below, see</a>
    <a id="3687" class="Comment">-- Definition.Modality.Properties.Has-well-behaved-zero.+-positiveʳ.)</a>
    <a id="Has-well-behaved-zero.+-positiveˡ"></a><a id="3761" href="Graded.Modality.html#3761" class="Field">+-positiveˡ</a> <a id="3773" class="Symbol">:</a> <a id="3775" class="Symbol">{</a><a id="3776" href="Graded.Modality.html#3776" class="Bound">p</a> <a id="3778" href="Graded.Modality.html#3778" class="Bound">q</a> <a id="3780" class="Symbol">:</a> <a id="3782" href="Graded.Modality.html#255" class="Bound">M</a><a id="3783" class="Symbol">}</a> <a id="3785" class="Symbol">→</a> <a id="3787" href="Graded.Modality.html#3776" class="Bound">p</a> <a id="3789" href="Graded.Modality.html#747" class="Function Operator">+</a> <a id="3791" href="Graded.Modality.html#3778" class="Bound">q</a> <a id="3793" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3795" href="Graded.Modality.html#870" class="Function">𝟘</a> <a id="3797" class="Symbol">→</a> <a id="3799" href="Graded.Modality.html#3776" class="Bound">p</a> <a id="3801" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3803" href="Graded.Modality.html#870" class="Function">𝟘</a>

    <a id="3810" class="Comment">-- If p ∧ q is equal to 𝟘, then p ≡ 𝟘.  (The statement that p ∧ q ≡ 𝟘</a>
    <a id="3884" class="Comment">-- implies q ≡ 𝟘 follows from the one below, see</a>
    <a id="3937" class="Comment">-- Definition.Modality.Properties.Has-well-behaved-zero.∧-positiveʳ.)</a>
    <a id="Has-well-behaved-zero.∧-positiveˡ"></a><a id="4011" href="Graded.Modality.html#4011" class="Field">∧-positiveˡ</a> <a id="4023" class="Symbol">:</a> <a id="4025" class="Symbol">{</a><a id="4026" href="Graded.Modality.html#4026" class="Bound">p</a> <a id="4028" href="Graded.Modality.html#4028" class="Bound">q</a> <a id="4030" class="Symbol">:</a> <a id="4032" href="Graded.Modality.html#255" class="Bound">M</a><a id="4033" class="Symbol">}</a> <a id="4035" class="Symbol">→</a> <a id="4037" href="Graded.Modality.html#4026" class="Bound">p</a> <a id="4039" href="Graded.Modality.html#809" class="Function Operator">∧</a> <a id="4041" href="Graded.Modality.html#4028" class="Bound">q</a> <a id="4043" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4045" href="Graded.Modality.html#870" class="Function">𝟘</a> <a id="4047" class="Symbol">→</a> <a id="4049" href="Graded.Modality.html#4026" class="Bound">p</a> <a id="4051" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4053" href="Graded.Modality.html#870" class="Function">𝟘</a>

<a id="4056" class="Comment">-- The property of having an nr function (a &quot;natrec usage function&quot;).</a>
<a id="4126" class="Comment">-- Such a function is used in one of the usage rules for natrec.</a>

<a id="4192" class="Keyword">record</a> <a id="Has-nr"></a><a id="4199" href="Graded.Modality.html#4199" class="Record">Has-nr</a> <a id="4206" class="Symbol">(</a><a id="4207" href="Graded.Modality.html#4207" class="Bound">𝕄</a> <a id="4209" class="Symbol">:</a> <a id="4211" href="Graded.Modality.html#551" class="Record">Semiring-with-meet</a><a id="4229" class="Symbol">)</a> <a id="4231" class="Symbol">:</a> <a id="4233" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4237" href="Graded.Modality.html#251" class="Bound">a</a> <a id="4239" class="Keyword">where</a>
  <a id="4247" class="Keyword">open</a> <a id="4252" href="Graded.Modality.html#551" class="Module">Semiring-with-meet</a> <a id="4271" href="Graded.Modality.html#4207" class="Bound">𝕄</a>

  <a id="4276" class="Keyword">field</a>
    <a id="4286" class="Comment">-- The nr function.</a>
    <a id="Has-nr.nr"></a><a id="4310" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="4313" class="Symbol">:</a> <a id="4315" href="Graded.Modality.html#255" class="Bound">M</a> <a id="4317" class="Symbol">→</a> <a id="4319" href="Graded.Modality.html#255" class="Bound">M</a> <a id="4321" class="Symbol">→</a> <a id="4323" href="Graded.Modality.html#255" class="Bound">M</a> <a id="4325" class="Symbol">→</a> <a id="4327" href="Graded.Modality.html#255" class="Bound">M</a> <a id="4329" class="Symbol">→</a> <a id="4331" href="Graded.Modality.html#255" class="Bound">M</a> <a id="4333" class="Symbol">→</a> <a id="4335" href="Graded.Modality.html#255" class="Bound">M</a>

    <a id="4342" class="Comment">-- The function is monotone in its last three arguments.</a>
    <a id="Has-nr.nr-monotone"></a><a id="4403" href="Graded.Modality.html#4403" class="Field">nr-monotone</a> <a id="4415" class="Symbol">:</a>
      <a id="4423" href="Graded.Modality.html#503" class="Generalizable">z₁</a> <a id="4426" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="4428" href="Graded.Modality.html#514" class="Generalizable">z₂</a> <a id="4431" class="Symbol">→</a> <a id="4433" href="Graded.Modality.html#508" class="Generalizable">s₁</a> <a id="4436" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="4438" href="Graded.Modality.html#511" class="Generalizable">s₂</a> <a id="4441" class="Symbol">→</a> <a id="4443" href="Graded.Modality.html#489" class="Generalizable">n₁</a> <a id="4446" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="4448" href="Graded.Modality.html#492" class="Generalizable">n₂</a> <a id="4451" class="Symbol">→</a>
      <a id="4459" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="4462" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="4464" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="4466" href="Graded.Modality.html#503" class="Generalizable">z₁</a> <a id="4469" href="Graded.Modality.html#508" class="Generalizable">s₁</a> <a id="4472" href="Graded.Modality.html#489" class="Generalizable">n₁</a> <a id="4475" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="4477" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="4480" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="4482" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="4484" href="Graded.Modality.html#514" class="Generalizable">z₂</a> <a id="4487" href="Graded.Modality.html#511" class="Generalizable">s₂</a> <a id="4490" href="Graded.Modality.html#492" class="Generalizable">n₂</a>

    <a id="4498" class="Comment">-- Multiplication from the right sub-distributes over nr p r.</a>
    <a id="Has-nr.nr-·"></a><a id="4564" href="Graded.Modality.html#4564" class="Field">nr-·</a> <a id="4569" class="Symbol">:</a> <a id="4571" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="4574" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="4576" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="4578" href="Graded.Modality.html#501" class="Generalizable">z</a> <a id="4580" href="Graded.Modality.html#506" class="Generalizable">s</a> <a id="4582" href="Graded.Modality.html#487" class="Generalizable">n</a> <a id="4584" href="Graded.Modality.html#775" class="Function Operator">·</a> <a id="4586" href="Graded.Modality.html#497" class="Generalizable">q</a> <a id="4588" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="4590" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="4593" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="4595" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="4597" class="Symbol">(</a><a id="4598" href="Graded.Modality.html#501" class="Generalizable">z</a> <a id="4600" href="Graded.Modality.html#775" class="Function Operator">·</a> <a id="4602" href="Graded.Modality.html#497" class="Generalizable">q</a><a id="4603" class="Symbol">)</a> <a id="4605" class="Symbol">(</a><a id="4606" href="Graded.Modality.html#506" class="Generalizable">s</a> <a id="4608" href="Graded.Modality.html#775" class="Function Operator">·</a> <a id="4610" href="Graded.Modality.html#497" class="Generalizable">q</a><a id="4611" class="Symbol">)</a> <a id="4613" class="Symbol">(</a><a id="4614" href="Graded.Modality.html#487" class="Generalizable">n</a> <a id="4616" href="Graded.Modality.html#775" class="Function Operator">·</a> <a id="4618" href="Graded.Modality.html#497" class="Generalizable">q</a><a id="4619" class="Symbol">)</a>

    <a id="4626" class="Comment">-- Addition is sub-interchangeable with nr p r.</a>
    <a id="Has-nr.nr-+"></a><a id="4678" href="Graded.Modality.html#4678" class="Field">nr-+</a> <a id="4683" class="Symbol">:</a>
      <a id="4691" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="4694" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="4696" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="4698" href="Graded.Modality.html#503" class="Generalizable">z₁</a> <a id="4701" href="Graded.Modality.html#508" class="Generalizable">s₁</a> <a id="4704" href="Graded.Modality.html#489" class="Generalizable">n₁</a> <a id="4707" href="Graded.Modality.html#747" class="Function Operator">+</a> <a id="4709" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="4712" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="4714" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="4716" href="Graded.Modality.html#514" class="Generalizable">z₂</a> <a id="4719" href="Graded.Modality.html#511" class="Generalizable">s₂</a> <a id="4722" href="Graded.Modality.html#492" class="Generalizable">n₂</a> <a id="4725" href="Graded.Modality.html#1305" class="Function Operator">≤</a>
      <a id="4733" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="4736" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="4738" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="4740" class="Symbol">(</a><a id="4741" href="Graded.Modality.html#503" class="Generalizable">z₁</a> <a id="4744" href="Graded.Modality.html#747" class="Function Operator">+</a> <a id="4746" href="Graded.Modality.html#514" class="Generalizable">z₂</a><a id="4748" class="Symbol">)</a> <a id="4750" class="Symbol">(</a><a id="4751" href="Graded.Modality.html#508" class="Generalizable">s₁</a> <a id="4754" href="Graded.Modality.html#747" class="Function Operator">+</a> <a id="4756" href="Graded.Modality.html#511" class="Generalizable">s₂</a><a id="4758" class="Symbol">)</a> <a id="4760" class="Symbol">(</a><a id="4761" href="Graded.Modality.html#489" class="Generalizable">n₁</a> <a id="4764" href="Graded.Modality.html#747" class="Function Operator">+</a> <a id="4766" href="Graded.Modality.html#492" class="Generalizable">n₂</a><a id="4768" class="Symbol">)</a>

    <a id="4775" class="Comment">-- The value of nr p r 𝟘 𝟘 𝟘 is 𝟘.</a>
    <a id="Has-nr.nr-𝟘"></a><a id="4814" href="Graded.Modality.html#4814" class="Field">nr-𝟘</a> <a id="4819" class="Symbol">:</a> <a id="4821" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="4824" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="4826" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="4828" href="Graded.Modality.html#870" class="Function">𝟘</a> <a id="4830" href="Graded.Modality.html#870" class="Function">𝟘</a> <a id="4832" href="Graded.Modality.html#870" class="Function">𝟘</a> <a id="4834" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4836" href="Graded.Modality.html#870" class="Function">𝟘</a>

    <a id="4843" class="Comment">-- If the zero is well-behaved, then nr p r is only 𝟘 for 𝟘, 𝟘</a>
    <a id="4910" class="Comment">-- and 𝟘.</a>
    <a id="Has-nr.nr-positive"></a><a id="4924" href="Graded.Modality.html#4924" class="Field">nr-positive</a> <a id="4936" class="Symbol">:</a>
      <a id="4944" href="Graded.Modality.html#2901" class="Record">Has-well-behaved-zero</a> <a id="4966" href="Graded.Modality.html#4207" class="Bound">𝕄</a> <a id="4968" class="Symbol">→</a>
      <a id="4976" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="4979" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="4981" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="4983" href="Graded.Modality.html#501" class="Generalizable">z</a> <a id="4985" href="Graded.Modality.html#506" class="Generalizable">s</a> <a id="4987" href="Graded.Modality.html#487" class="Generalizable">n</a> <a id="4989" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4991" href="Graded.Modality.html#870" class="Function">𝟘</a> <a id="4993" class="Symbol">→</a> <a id="4995" href="Graded.Modality.html#501" class="Generalizable">z</a> <a id="4997" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4999" href="Graded.Modality.html#870" class="Function">𝟘</a> <a id="5001" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="5003" href="Graded.Modality.html#506" class="Generalizable">s</a> <a id="5005" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5007" href="Graded.Modality.html#870" class="Function">𝟘</a> <a id="5009" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="5011" href="Graded.Modality.html#487" class="Generalizable">n</a> <a id="5013" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5015" href="Graded.Modality.html#870" class="Function">𝟘</a>

    <a id="5022" class="Comment">-- If n is bounded by 𝟘, then nr p r z s n is bounded by n. This</a>
    <a id="5091" class="Comment">-- property is used to prove that the reduction rule natrec-zero</a>
    <a id="5160" class="Comment">-- preserves usage.</a>
    <a id="Has-nr.nr-zero"></a><a id="5184" href="Graded.Modality.html#5184" class="Field">nr-zero</a> <a id="5192" class="Symbol">:</a> <a id="5194" href="Graded.Modality.html#487" class="Generalizable">n</a> <a id="5196" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="5198" href="Graded.Modality.html#870" class="Function">𝟘</a> <a id="5200" class="Symbol">→</a> <a id="5202" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="5205" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="5207" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="5209" href="Graded.Modality.html#501" class="Generalizable">z</a> <a id="5211" href="Graded.Modality.html#506" class="Generalizable">s</a> <a id="5213" href="Graded.Modality.html#487" class="Generalizable">n</a> <a id="5215" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="5217" href="Graded.Modality.html#501" class="Generalizable">z</a>

    <a id="5224" class="Comment">-- The value nr p r z s n is bounded by</a>
    <a id="5268" class="Comment">-- s + p · n + r · nr p r z s n. This property is used to prove</a>
    <a id="5336" class="Comment">-- that the reduction rule natrec-suc preserves usage.</a>
    <a id="Has-nr.nr-suc"></a><a id="5395" href="Graded.Modality.html#5395" class="Field">nr-suc</a> <a id="5402" class="Symbol">:</a> <a id="5404" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="5407" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="5409" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="5411" href="Graded.Modality.html#501" class="Generalizable">z</a> <a id="5413" href="Graded.Modality.html#506" class="Generalizable">s</a> <a id="5415" href="Graded.Modality.html#487" class="Generalizable">n</a> <a id="5417" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="5419" href="Graded.Modality.html#506" class="Generalizable">s</a> <a id="5421" href="Graded.Modality.html#747" class="Function Operator">+</a> <a id="5423" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="5425" href="Graded.Modality.html#775" class="Function Operator">·</a> <a id="5427" href="Graded.Modality.html#487" class="Generalizable">n</a> <a id="5429" href="Graded.Modality.html#747" class="Function Operator">+</a> <a id="5431" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="5433" href="Graded.Modality.html#775" class="Function Operator">·</a> <a id="5435" href="Graded.Modality.html#4310" class="Field">nr</a> <a id="5438" href="Graded.Modality.html#495" class="Generalizable">p</a> <a id="5440" href="Graded.Modality.html#499" class="Generalizable">r</a> <a id="5442" href="Graded.Modality.html#501" class="Generalizable">z</a> <a id="5444" href="Graded.Modality.html#506" class="Generalizable">s</a> <a id="5446" href="Graded.Modality.html#487" class="Generalizable">n</a>

<a id="5449" class="Comment">-- The property of having a natrec-star operator.</a>
<a id="5499" class="Keyword">record</a> <a id="Has-star"></a><a id="5506" href="Graded.Modality.html#5506" class="Record">Has-star</a> <a id="5515" class="Symbol">(</a><a id="5516" href="Graded.Modality.html#5516" class="Bound">r</a> <a id="5518" class="Symbol">:</a> <a id="5520" href="Graded.Modality.html#551" class="Record">Semiring-with-meet</a><a id="5538" class="Symbol">)</a> <a id="5540" class="Symbol">:</a> <a id="5542" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5546" href="Graded.Modality.html#251" class="Bound">a</a> <a id="5548" class="Keyword">where</a>
  <a id="5556" class="Keyword">open</a> <a id="5561" href="Graded.Modality.html#551" class="Module">Semiring-with-meet</a> <a id="5580" href="Graded.Modality.html#5516" class="Bound">r</a>

  <a id="5585" class="Keyword">infix</a> <a id="5591" class="Number">50</a> <a id="5594" href="Graded.Modality.html#5646" class="Field Operator">_⊛_▷_</a>

  <a id="5603" class="Keyword">field</a>
    <a id="5613" class="Comment">-- The natrec-star operator.</a>
    <a id="Has-star._⊛_▷_"></a><a id="5646" href="Graded.Modality.html#5646" class="Field Operator">_⊛_▷_</a> <a id="5652" class="Symbol">:</a> <a id="5654" href="Tools.Algebra.html#1235" class="Function">Op₃</a> <a id="5658" href="Graded.Modality.html#255" class="Bound">M</a>

    <a id="5665" class="Comment">-- ⊛ is a solution to the following system of inequalities</a>
    <a id="Has-star.⊛-ineq"></a><a id="5728" href="Graded.Modality.html#5728" class="Field">⊛-ineq</a> <a id="5735" class="Symbol">:</a> <a id="5737" class="Symbol">((</a><a id="5739" href="Graded.Modality.html#5739" class="Bound">p</a> <a id="5741" href="Graded.Modality.html#5741" class="Bound">q</a> <a id="5743" href="Graded.Modality.html#5743" class="Bound">r</a> <a id="5745" class="Symbol">:</a> <a id="5747" href="Graded.Modality.html#255" class="Bound">M</a><a id="5748" class="Symbol">)</a> <a id="5750" class="Symbol">→</a> <a id="5752" href="Graded.Modality.html#5739" class="Bound">p</a> <a id="5754" href="Graded.Modality.html#5646" class="Field Operator">⊛</a> <a id="5756" href="Graded.Modality.html#5741" class="Bound">q</a> <a id="5758" href="Graded.Modality.html#5646" class="Field Operator">▷</a> <a id="5760" href="Graded.Modality.html#5743" class="Bound">r</a> <a id="5762" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="5764" href="Graded.Modality.html#5741" class="Bound">q</a> <a id="5766" href="Graded.Modality.html#747" class="Function Operator">+</a> <a id="5768" href="Graded.Modality.html#5743" class="Bound">r</a> <a id="5770" href="Graded.Modality.html#775" class="Function Operator">·</a> <a id="5772" href="Graded.Modality.html#5739" class="Bound">p</a> <a id="5774" href="Graded.Modality.html#5646" class="Field Operator">⊛</a> <a id="5776" href="Graded.Modality.html#5741" class="Bound">q</a> <a id="5778" href="Graded.Modality.html#5646" class="Field Operator">▷</a> <a id="5780" href="Graded.Modality.html#5743" class="Bound">r</a><a id="5781" class="Symbol">)</a>
           <a id="5794" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="5796" class="Symbol">((</a><a id="5798" href="Graded.Modality.html#5798" class="Bound">p</a> <a id="5800" href="Graded.Modality.html#5800" class="Bound">q</a> <a id="5802" href="Graded.Modality.html#5802" class="Bound">r</a> <a id="5804" class="Symbol">:</a> <a id="5806" href="Graded.Modality.html#255" class="Bound">M</a><a id="5807" class="Symbol">)</a> <a id="5809" class="Symbol">→</a> <a id="5811" href="Graded.Modality.html#5798" class="Bound">p</a> <a id="5813" href="Graded.Modality.html#5646" class="Field Operator">⊛</a> <a id="5815" href="Graded.Modality.html#5800" class="Bound">q</a> <a id="5817" href="Graded.Modality.html#5646" class="Field Operator">▷</a> <a id="5819" href="Graded.Modality.html#5802" class="Bound">r</a> <a id="5821" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="5823" href="Graded.Modality.html#5798" class="Bound">p</a><a id="5824" class="Symbol">)</a>

    <a id="5831" class="Comment">-- addition is sub-interchangeable over ⊛ w.r.t the first two arguments</a>
    <a id="Has-star.+-sub-interchangeable-⊛"></a><a id="5907" href="Graded.Modality.html#5907" class="Field">+-sub-interchangeable-⊛</a> <a id="5931" class="Symbol">:</a> <a id="5933" class="Symbol">(</a><a id="5934" href="Graded.Modality.html#5934" class="Bound">r</a> <a id="5936" class="Symbol">:</a> <a id="5938" href="Graded.Modality.html#255" class="Bound">M</a><a id="5939" class="Symbol">)</a> <a id="5941" class="Symbol">→</a> <a id="5943" href="Graded.Modality.html#747" class="Function Operator">_+_</a> <a id="5947" href="Tools.Algebra.html#1773" class="Function Operator">SubInterchangeable</a> <a id="5966" class="Symbol">(</a><a id="5967" href="Graded.Modality.html#5646" class="Field Operator">_⊛_▷</a> <a id="5972" href="Graded.Modality.html#5934" class="Bound">r</a><a id="5973" class="Symbol">)</a> <a id="5975" href="Tools.Algebra.html#1773" class="Function Operator">by</a> <a id="5978" href="Graded.Modality.html#1305" class="Function Operator">_≤_</a>
    <a id="5986" class="Comment">-- multiplication is right sub-distributive over ⊛ w.r.t the first two arguments</a>
    <a id="Has-star.·-sub-distribʳ-⊛"></a><a id="6071" href="Graded.Modality.html#6071" class="Field">·-sub-distribʳ-⊛</a> <a id="6088" class="Symbol">:</a> <a id="6090" class="Symbol">(</a><a id="6091" href="Graded.Modality.html#6091" class="Bound">r</a> <a id="6093" class="Symbol">:</a> <a id="6095" href="Graded.Modality.html#255" class="Bound">M</a><a id="6096" class="Symbol">)</a> <a id="6098" class="Symbol">→</a> <a id="6100" href="Graded.Modality.html#775" class="Function Operator">_·_</a> <a id="6104" href="Tools.Algebra.html#1454" class="Function Operator">SubDistributesOverʳ</a> <a id="6124" class="Symbol">(</a><a id="6125" href="Graded.Modality.html#5646" class="Field Operator">_⊛_▷</a> <a id="6130" href="Graded.Modality.html#6091" class="Bound">r</a><a id="6131" class="Symbol">)</a> <a id="6133" href="Tools.Algebra.html#1454" class="Function Operator">by</a> <a id="6136" href="Graded.Modality.html#1305" class="Function Operator">_≤_</a>
    <a id="6144" class="Comment">-- ⊛ is sub-distributive over meet w.r.t the first two arguments</a>
    <a id="Has-star.⊛-sub-distrib-∧"></a><a id="6213" href="Graded.Modality.html#6213" class="Field">⊛-sub-distrib-∧</a>    <a id="6232" class="Symbol">:</a> <a id="6234" class="Symbol">(</a><a id="6235" href="Graded.Modality.html#6235" class="Bound">r</a> <a id="6237" class="Symbol">:</a> <a id="6239" href="Graded.Modality.html#255" class="Bound">M</a><a id="6240" class="Symbol">)</a> <a id="6242" class="Symbol">→</a> <a id="6244" class="Symbol">(</a><a id="6245" href="Graded.Modality.html#5646" class="Field Operator">_⊛_▷</a> <a id="6250" href="Graded.Modality.html#6235" class="Bound">r</a><a id="6251" class="Symbol">)</a> <a id="6253" href="Tools.Algebra.html#1599" class="Function Operator">SubDistributesOver</a> <a id="6272" href="Graded.Modality.html#809" class="Function Operator">_∧_</a> <a id="6276" href="Tools.Algebra.html#1599" class="Function Operator">by</a> <a id="6279" href="Graded.Modality.html#1305" class="Function Operator">_≤_</a>

  <a id="Has-star.⊛-ineq₁"></a><a id="6286" href="Graded.Modality.html#6286" class="Function">⊛-ineq₁</a> <a id="6294" class="Symbol">:</a> <a id="6296" class="Symbol">(</a><a id="6297" href="Graded.Modality.html#6297" class="Bound">p</a> <a id="6299" href="Graded.Modality.html#6299" class="Bound">q</a> <a id="6301" href="Graded.Modality.html#6301" class="Bound">r</a> <a id="6303" class="Symbol">:</a> <a id="6305" href="Graded.Modality.html#255" class="Bound">M</a><a id="6306" class="Symbol">)</a> <a id="6308" class="Symbol">→</a> <a id="6310" href="Graded.Modality.html#6297" class="Bound">p</a> <a id="6312" href="Graded.Modality.html#5646" class="Field Operator">⊛</a> <a id="6314" href="Graded.Modality.html#6299" class="Bound">q</a> <a id="6316" href="Graded.Modality.html#5646" class="Field Operator">▷</a> <a id="6318" href="Graded.Modality.html#6301" class="Bound">r</a> <a id="6320" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="6322" href="Graded.Modality.html#6299" class="Bound">q</a> <a id="6324" href="Graded.Modality.html#747" class="Function Operator">+</a> <a id="6326" href="Graded.Modality.html#6301" class="Bound">r</a> <a id="6328" href="Graded.Modality.html#775" class="Function Operator">·</a> <a id="6330" class="Symbol">(</a><a id="6331" href="Graded.Modality.html#6297" class="Bound">p</a> <a id="6333" href="Graded.Modality.html#5646" class="Field Operator">⊛</a> <a id="6335" href="Graded.Modality.html#6299" class="Bound">q</a> <a id="6337" href="Graded.Modality.html#5646" class="Field Operator">▷</a> <a id="6339" href="Graded.Modality.html#6301" class="Bound">r</a><a id="6340" class="Symbol">)</a>
  <a id="6344" href="Graded.Modality.html#6286" class="Function">⊛-ineq₁</a> <a id="6352" class="Symbol">=</a> <a id="6354" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="6360" href="Graded.Modality.html#5728" class="Field">⊛-ineq</a>

  <a id="Has-star.⊛-ineq₂"></a><a id="6370" href="Graded.Modality.html#6370" class="Function">⊛-ineq₂</a> <a id="6378" class="Symbol">:</a> <a id="6380" class="Symbol">(</a><a id="6381" href="Graded.Modality.html#6381" class="Bound">p</a> <a id="6383" href="Graded.Modality.html#6383" class="Bound">q</a> <a id="6385" href="Graded.Modality.html#6385" class="Bound">r</a> <a id="6387" class="Symbol">:</a> <a id="6389" href="Graded.Modality.html#255" class="Bound">M</a><a id="6390" class="Symbol">)</a> <a id="6392" class="Symbol">→</a> <a id="6394" href="Graded.Modality.html#6381" class="Bound">p</a> <a id="6396" href="Graded.Modality.html#5646" class="Field Operator">⊛</a> <a id="6398" href="Graded.Modality.html#6383" class="Bound">q</a> <a id="6400" href="Graded.Modality.html#5646" class="Field Operator">▷</a> <a id="6402" href="Graded.Modality.html#6385" class="Bound">r</a> <a id="6404" href="Graded.Modality.html#1305" class="Function Operator">≤</a> <a id="6406" href="Graded.Modality.html#6381" class="Bound">p</a>
  <a id="6410" href="Graded.Modality.html#6370" class="Function">⊛-ineq₂</a> <a id="6418" class="Symbol">=</a> <a id="6420" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="6426" href="Graded.Modality.html#5728" class="Field">⊛-ineq</a>

  <a id="Has-star.⊛-sub-distribˡ-∧"></a><a id="6436" href="Graded.Modality.html#6436" class="Function">⊛-sub-distribˡ-∧</a> <a id="6453" class="Symbol">:</a> <a id="6455" class="Symbol">(</a><a id="6456" href="Graded.Modality.html#6456" class="Bound">r</a> <a id="6458" class="Symbol">:</a> <a id="6460" href="Graded.Modality.html#255" class="Bound">M</a><a id="6461" class="Symbol">)</a> <a id="6463" class="Symbol">→</a> <a id="6465" class="Symbol">(</a><a id="6466" href="Graded.Modality.html#5646" class="Field Operator">_⊛_▷</a> <a id="6471" href="Graded.Modality.html#6456" class="Bound">r</a><a id="6472" class="Symbol">)</a> <a id="6474" href="Tools.Algebra.html#1309" class="Function Operator">SubDistributesOverˡ</a> <a id="6494" href="Graded.Modality.html#809" class="Function Operator">_∧_</a> <a id="6498" href="Tools.Algebra.html#1309" class="Function Operator">by</a> <a id="6501" href="Graded.Modality.html#1305" class="Function Operator">_≤_</a>
  <a id="6507" href="Graded.Modality.html#6436" class="Function">⊛-sub-distribˡ-∧</a> <a id="6524" href="Graded.Modality.html#6524" class="Bound">r</a> <a id="6526" class="Symbol">=</a> <a id="6528" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="6534" class="Symbol">(</a><a id="6535" href="Graded.Modality.html#6213" class="Field">⊛-sub-distrib-∧</a> <a id="6551" href="Graded.Modality.html#6524" class="Bound">r</a><a id="6552" class="Symbol">)</a>

  <a id="Has-star.⊛-sub-distribʳ-∧"></a><a id="6557" href="Graded.Modality.html#6557" class="Function">⊛-sub-distribʳ-∧</a> <a id="6574" class="Symbol">:</a> <a id="6576" class="Symbol">(</a><a id="6577" href="Graded.Modality.html#6577" class="Bound">r</a> <a id="6579" class="Symbol">:</a> <a id="6581" href="Graded.Modality.html#255" class="Bound">M</a><a id="6582" class="Symbol">)</a> <a id="6584" class="Symbol">→</a> <a id="6586" class="Symbol">(</a><a id="6587" href="Graded.Modality.html#5646" class="Field Operator">_⊛_▷</a> <a id="6592" href="Graded.Modality.html#6577" class="Bound">r</a><a id="6593" class="Symbol">)</a> <a id="6595" href="Tools.Algebra.html#1454" class="Function Operator">SubDistributesOverʳ</a> <a id="6615" href="Graded.Modality.html#809" class="Function Operator">_∧_</a> <a id="6619" href="Tools.Algebra.html#1454" class="Function Operator">by</a> <a id="6622" href="Graded.Modality.html#1305" class="Function Operator">_≤_</a>
  <a id="6628" href="Graded.Modality.html#6557" class="Function">⊛-sub-distribʳ-∧</a> <a id="6645" href="Graded.Modality.html#6645" class="Bound">r</a> <a id="6647" class="Symbol">=</a> <a id="6649" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="6655" class="Symbol">(</a><a id="6656" href="Graded.Modality.html#6213" class="Field">⊛-sub-distrib-∧</a> <a id="6672" href="Graded.Modality.html#6645" class="Bound">r</a><a id="6673" class="Symbol">)</a>

<a id="6676" class="Comment">-- The modality structure</a>
<a id="6702" class="Keyword">record</a> <a id="Modality"></a><a id="6709" href="Graded.Modality.html#6709" class="Record">Modality</a> <a id="6718" class="Symbol">:</a> <a id="6720" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="6724" class="Symbol">(</a><a id="6725" href="Agda.Primitive.html#774" class="Primitive">lsuc</a> <a id="6730" href="Graded.Modality.html#251" class="Bound">a</a><a id="6731" class="Symbol">)</a> <a id="6733" class="Keyword">where</a>
  <a id="6741" class="Keyword">field</a>
    <a id="6751" class="Comment">-- The modality variant.</a>
    <a id="Modality.variant"></a><a id="6780" href="Graded.Modality.html#6780" class="Field">variant</a>            <a id="6799" class="Symbol">:</a> <a id="6801" href="Graded.Modality.Variant.html#710" class="Record">Modality-variant</a>
    <a id="Modality.semiring-with-meet"></a><a id="6822" href="Graded.Modality.html#6822" class="Field">semiring-with-meet</a> <a id="6841" class="Symbol">:</a> <a id="6843" href="Graded.Modality.html#551" class="Record">Semiring-with-meet</a>

  <a id="6865" class="Keyword">open</a> <a id="6870" href="Graded.Modality.html#551" class="Module">Semiring-with-meet</a> <a id="6889" href="Graded.Modality.html#6822" class="Field">semiring-with-meet</a> <a id="6908" class="Keyword">public</a>
  <a id="6917" class="Keyword">open</a> <a id="6922" href="Graded.Modality.Variant.html#710" class="Module">Modality-variant</a> <a id="6939" href="Graded.Modality.html#6780" class="Field">variant</a> <a id="6947" class="Keyword">public</a>

  <a id="6957" class="Keyword">field</a>
    <a id="6967" class="Comment">-- If the mode 𝟘ᵐ is allowed, then the zero is well-behaved</a>
    <a id="Modality.𝟘-well-behaved"></a><a id="7031" href="Graded.Modality.html#7031" class="Field">𝟘-well-behaved</a> <a id="7046" class="Symbol">:</a> <a id="7048" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="7050" href="Graded.Modality.Variant.html#791" class="Function">𝟘ᵐ-allowed</a> <a id="7061" class="Symbol">→</a> <a id="7063" href="Graded.Modality.html#2901" class="Record">Has-well-behaved-zero</a> <a id="7085" href="Graded.Modality.html#6822" class="Field">semiring-with-meet</a>

    <a id="7109" class="Comment">-- If the modality is supposed to come with a dedicated nr</a>
    <a id="7172" class="Comment">-- function, then such a function is available.</a>
    <a id="Modality.has-nr"></a><a id="7224" href="Graded.Modality.html#7224" class="Field">has-nr</a> <a id="7231" class="Symbol">:</a> <a id="7233" href="Graded.Modality.Variant.html#926" class="Function">Nr-available</a> <a id="7246" class="Symbol">→</a> <a id="7248" href="Graded.Modality.html#4199" class="Record">Has-nr</a> <a id="7255" href="Graded.Modality.html#6822" class="Field">semiring-with-meet</a>
</pre></body></html>