<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Application.NegativeOrErasedAxioms.Canonicity.Erased</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Proof that consistent erased axioms do not jeopardize canonicity</a>
<a id="142" class="Comment">-- if erased matches are not allowed.</a>
<a id="180" class="Comment">------------------------------------------------------------------------</a>

<a id="254" class="Keyword">open</a> <a id="259" class="Keyword">import</a> <a id="266" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="278" class="Keyword">open</a> <a id="283" class="Keyword">import</a> <a id="290" href="Tools.Level.html" class="Module">Tools.Level</a>

<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Graded.Modality.Instances.Erasure.Modality.html" class="Module">Graded.Modality.Instances.Erasure.Modality</a>
<a id="358" class="Keyword">open</a> <a id="363" class="Keyword">import</a> <a id="370" href="Graded.Modality.Instances.Erasure.html" class="Module">Graded.Modality.Instances.Erasure</a>

<a id="405" class="Keyword">open</a> <a id="410" class="Keyword">import</a> <a id="417" href="Graded.Restrictions.html" class="Module">Graded.Restrictions</a>
<a id="437" class="Keyword">open</a> <a id="442" class="Keyword">import</a> <a id="449" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a> <a id="475" href="Graded.Modality.Instances.Erasure.html#393" class="Datatype">Erasure</a>
<a id="483" class="Keyword">open</a> <a id="488" class="Keyword">import</a> <a id="495" href="Graded.Modality.Variant.html" class="Module">Graded.Modality.Variant</a> <a id="519" href="Agda.Primitive.html#758" class="Primitive">lzero</a>
<a id="525" class="Keyword">import</a> <a id="532" href="Definition.Typed.html" class="Module">Definition.Typed</a>
<a id="549" class="Keyword">open</a> <a id="554" class="Keyword">import</a> <a id="561" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a> <a id="591" href="Graded.Modality.Instances.Erasure.html#393" class="Datatype">Erasure</a>
<a id="599" class="Keyword">open</a> <a id="604" class="Keyword">import</a> <a id="611" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="630" href="Graded.Modality.Instances.Erasure.html#393" class="Datatype">Erasure</a> <a id="638" class="Keyword">hiding</a> <a id="645" class="Symbol">(</a><a id="646" href="Definition.Untyped.NotParametrised.html#1148" class="InductiveConstructor Operator">_∷_</a><a id="649" class="Symbol">)</a>

<a id="652" class="Keyword">module</a> <a id="659" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html" class="Module">Application.NegativeOrErasedAxioms.Canonicity.Erased</a>
  <a id="714" class="Symbol">(</a><a id="715" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#715" class="Bound">variant</a> <a id="723" class="Symbol">:</a> <a id="725" href="Graded.Modality.Variant.html#724" class="Record">Modality-variant</a><a id="741" class="Symbol">)</a>
  <a id="745" class="Symbol">(</a><a id="746" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#746" class="Bound">TR</a> <a id="749" class="Symbol">:</a> <a id="751" href="Definition.Typed.Restrictions.html#406" class="Record">Type-restrictions</a><a id="768" class="Symbol">)</a>
  <a id="772" class="Symbol">(</a><a id="773" class="Keyword">open</a> <a id="778" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="795" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#746" class="Bound">TR</a><a id="797" class="Symbol">)</a>
  <a id="801" class="Symbol">(</a><a id="802" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#802" class="Bound">UR</a> <a id="805" class="Symbol">:</a> <a id="807" href="Graded.Usage.Restrictions.html#316" class="Record">Usage-restrictions</a><a id="825" class="Symbol">)</a>
  <a id="829" class="Comment">-- Erased matches are not allowed.</a>
  <a id="866" class="Symbol">(</a><a id="867" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#867" class="Bound">no-erased-matches</a> <a id="885" class="Symbol">:</a> <a id="887" href="Graded.Restrictions.html#2193" class="Function">No-erased-matches</a> <a id="905" class="Symbol">(</a><a id="906" href="Graded.Modality.Instances.Erasure.Modality.html#1866" class="Function">ErasureModality</a> <a id="922" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#715" class="Bound">variant</a><a id="929" class="Symbol">)</a> <a id="931" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#802" class="Bound">UR</a><a id="933" class="Symbol">)</a>
  <a id="937" class="Symbol">{</a><a id="938" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#938" class="Bound">m</a><a id="939" class="Symbol">}</a> <a id="941" class="Symbol">{</a><a id="942" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#942" class="Bound">Γ</a> <a id="944" class="Symbol">:</a> <a id="946" href="Definition.Untyped.NotParametrised.html#791" class="Datatype">Con</a> <a id="950" href="Definition.Untyped.html#2121" class="Datatype">Term</a> <a id="955" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#938" class="Bound">m</a><a id="956" class="Symbol">}</a> <a id="958" class="Symbol">(</a><a id="959" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#959" class="Bound">consistent</a> <a id="970" class="Symbol">:</a> <a id="972" class="Symbol">∀{</a><a id="974" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#974" class="Bound">t</a><a id="975" class="Symbol">}</a> <a id="977" class="Symbol">→</a> <a id="979" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#942" class="Bound">Γ</a> <a id="981" href="Definition.Typed.html#1453" class="Datatype Operator">⊢</a> <a id="983" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#974" class="Bound">t</a> <a id="985" href="Definition.Typed.html#1453" class="Datatype Operator">∷</a> <a id="987" href="Definition.Untyped.html#2654" class="InductiveConstructor">Empty</a> <a id="993" class="Symbol">→</a> <a id="995" href="Data.Empty.html#526" class="Datatype">⊥</a><a id="996" class="Symbol">)</a>
  <a id="1000" class="Keyword">where</a>

<a id="1007" class="Keyword">open</a> <a id="1012" class="Keyword">import</a> <a id="1019" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1034" class="Symbol">(</a><a id="1035" href="Graded.Modality.Instances.Erasure.Modality.html#1866" class="Function">ErasureModality</a> <a id="1051" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#715" class="Bound">variant</a><a id="1058" class="Symbol">)</a>
<a id="1060" class="Keyword">open</a> <a id="1065" class="Keyword">import</a> <a id="1072" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="1085" class="Symbol">(</a><a id="1086" href="Graded.Modality.Instances.Erasure.Modality.html#1866" class="Function">ErasureModality</a> <a id="1102" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#715" class="Bound">variant</a><a id="1109" class="Symbol">)</a> <a id="1111" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#802" class="Bound">UR</a>
<a id="1114" class="Keyword">open</a> <a id="1119" class="Keyword">import</a> <a id="1126" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="1138" class="Symbol">(</a><a id="1139" href="Graded.Modality.Instances.Erasure.Modality.html#1866" class="Function">ErasureModality</a> <a id="1155" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#715" class="Bound">variant</a><a id="1162" class="Symbol">)</a>
<a id="1164" class="Keyword">import</a> <a id="1171" href="Application.NegativeOrErasedAxioms.Canonicity.html" class="Module">Application.NegativeOrErasedAxioms.Canonicity</a>
  <a id="1219" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#715" class="Bound">variant</a> <a id="1227" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#746" class="Bound">TR</a> <a id="1230" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#802" class="Bound">UR</a> <a id="1233" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#867" class="Bound">no-erased-matches</a>
  as <a id="NE"></a><a id="1256" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1256" class="Module">NE</a>
<a id="1259" class="Keyword">open</a> <a id="1264" class="Keyword">import</a> <a id="1271" href="Application.NegativeOrErasedAxioms.NegativeOrErasedContext.html" class="Module">Application.NegativeOrErasedAxioms.NegativeOrErasedContext</a>
  <a id="1332" class="Symbol">(</a><a id="1333" href="Graded.Modality.Instances.Erasure.Modality.html#1866" class="Function">ErasureModality</a> <a id="1349" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#715" class="Bound">variant</a><a id="1356" class="Symbol">)</a> <a id="1358" class="Symbol">(λ</a> <a id="1361" class="Symbol">())</a> <a id="1365" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#746" class="Bound">TR</a>
<a id="1368" class="Keyword">open</a> <a id="1373" class="Keyword">import</a> <a id="1380" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a> <a id="1402" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#746" class="Bound">TR</a>

<a id="1406" class="Keyword">open</a> <a id="1411" class="Keyword">import</a> <a id="1418" href="Tools.Nat.html" class="Module">Tools.Nat</a>
<a id="1428" class="Keyword">open</a> <a id="1433" class="Keyword">import</a> <a id="1440" href="Tools.Product.html" class="Module">Tools.Product</a>

<a id="1455" class="Keyword">private</a>
  <a id="1465" class="Keyword">variable</a>
    <a id="1478" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1478" class="Generalizable">n</a> <a id="1480" class="Symbol">:</a> <a id="1482" href="Agda.Builtin.Nat.html#186" class="Datatype">Nat</a>
    <a id="1490" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1490" class="Generalizable">t</a> <a id="1492" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1492" class="Generalizable">u</a> <a id="1494" class="Symbol">:</a> <a id="1496" href="Definition.Untyped.html#2121" class="Datatype">Term</a> <a id="1501" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1478" class="Generalizable">n</a>

<a id="1504" class="Comment">-- Canonicity theorem: Any well-typed term Γ ⊢ t ∷ ℕ, γ ▸ t</a>
<a id="1564" class="Comment">-- reduces to a numeral under the ⇒ˢ* reduction.</a>

<a id="canonicityRed"></a><a id="1614" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1614" class="Function">canonicityRed</a> <a id="1628" class="Symbol">:</a> <a id="1630" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#942" class="Bound">Γ</a> <a id="1632" href="Definition.Typed.html#1453" class="Datatype Operator">⊢</a> <a id="1634" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1490" class="Generalizable">t</a> <a id="1636" href="Definition.Typed.html#1453" class="Datatype Operator">∷</a> <a id="1638" href="Definition.Untyped.html#2627" class="InductiveConstructor">ℕ</a> <a id="1640" class="Symbol">→</a> <a id="1642" href="Graded.Context.html#2211" class="Function">𝟘ᶜ</a> <a id="1645" href="Graded.Usage.html#2186" class="Datatype Operator">▸[</a> <a id="1648" href="Graded.Mode.html#1101" class="InductiveConstructor">𝟙ᵐ</a> <a id="1651" href="Graded.Usage.html#2186" class="Datatype Operator">]</a> <a id="1653" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1490" class="Generalizable">t</a>
              <a id="1669" class="Symbol">→</a> <a id="1671" href="Data.Product.html#1369" class="Function">∃</a> <a id="1673" class="Symbol">λ</a> <a id="1675" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1675" class="Bound">u</a> <a id="1677" class="Symbol">→</a> <a id="1679" href="Definition.Untyped.html#9506" class="Datatype">Numeral</a> <a id="1687" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1675" class="Bound">u</a> <a id="1689" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1691" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#942" class="Bound">Γ</a> <a id="1693" href="Graded.Erasure.SucRed.html#1166" class="Datatype Operator">⊢</a> <a id="1695" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1490" class="Generalizable">t</a> <a id="1697" href="Graded.Erasure.SucRed.html#1166" class="Datatype Operator">⇒ˢ*</a> <a id="1701" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1675" class="Bound">u</a> <a id="1703" href="Graded.Erasure.SucRed.html#1166" class="Datatype Operator">∷ℕ</a>
<a id="1706" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1614" class="Function">canonicityRed</a> <a id="1720" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1720" class="Bound">⊢t</a> <a id="1723" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1723" class="Bound">𝟘▸t</a> <a id="1727" class="Symbol">=</a> <a id="1729" href="Application.NegativeOrErasedAxioms.Canonicity.html#8142" class="Function">NE.canonicityRed</a> <a id="1746" href="Application.NegativeOrErasedAxioms.NegativeOrErasedContext.html#2010" class="Function">erasedContext</a> <a id="1760" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#959" class="Bound">consistent</a> <a id="1771" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1720" class="Bound">⊢t</a> <a id="1774" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1723" class="Bound">𝟘▸t</a>

<a id="1779" class="Comment">-- Canonicity theorem: Any well-typed term Γ ⊢ t : ℕ is convertible to a numeral.</a>

<a id="canonicityEq"></a><a id="1862" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1862" class="Function">canonicityEq</a> <a id="1875" class="Symbol">:</a> <a id="1877" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#942" class="Bound">Γ</a> <a id="1879" href="Definition.Typed.html#1453" class="Datatype Operator">⊢</a> <a id="1881" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1490" class="Generalizable">t</a> <a id="1883" href="Definition.Typed.html#1453" class="Datatype Operator">∷</a> <a id="1885" href="Definition.Untyped.html#2627" class="InductiveConstructor">ℕ</a> <a id="1887" class="Symbol">→</a> <a id="1889" href="Graded.Context.html#2211" class="Function">𝟘ᶜ</a> <a id="1892" href="Graded.Usage.html#2186" class="Datatype Operator">▸[</a> <a id="1895" href="Graded.Mode.html#1101" class="InductiveConstructor">𝟙ᵐ</a> <a id="1898" href="Graded.Usage.html#2186" class="Datatype Operator">]</a> <a id="1900" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1490" class="Generalizable">t</a>
             <a id="1915" class="Symbol">→</a> <a id="1917" href="Data.Product.html#1369" class="Function">∃</a> <a id="1919" class="Symbol">λ</a> <a id="1921" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1921" class="Bound">u</a> <a id="1923" class="Symbol">→</a> <a id="1925" href="Definition.Untyped.html#9506" class="Datatype">Numeral</a> <a id="1933" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1921" class="Bound">u</a> <a id="1935" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1937" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#942" class="Bound">Γ</a> <a id="1939" href="Definition.Typed.html#3898" class="Datatype Operator">⊢</a> <a id="1941" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1490" class="Generalizable">t</a> <a id="1943" href="Definition.Typed.html#3898" class="Datatype Operator">≡</a> <a id="1945" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1921" class="Bound">u</a> <a id="1947" href="Definition.Typed.html#3898" class="Datatype Operator">∷</a> <a id="1949" href="Definition.Untyped.html#2627" class="InductiveConstructor">ℕ</a>
<a id="1951" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1862" class="Function">canonicityEq</a> <a id="1964" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1964" class="Bound">⊢t</a> <a id="1967" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1967" class="Bound">𝟘▸t</a> <a id="1971" class="Symbol">=</a>
  <a id="1975" class="Keyword">let</a> <a id="1979" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1979" class="Bound">u</a> <a id="1981" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1983" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1983" class="Bound">numU</a> <a id="1988" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1990" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1990" class="Bound">d</a> <a id="1992" class="Symbol">=</a> <a id="1994" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1614" class="Function">canonicityRed</a> <a id="2008" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1964" class="Bound">⊢t</a> <a id="2011" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1967" class="Bound">𝟘▸t</a>
  <a id="2017" class="Keyword">in</a>  <a id="2021" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1979" class="Bound">u</a> <a id="2023" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2025" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1983" class="Bound">numU</a> <a id="2030" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2032" href="Graded.Erasure.SucRed.html#1816" class="Function">subset*Termˢ</a> <a id="2045" href="Application.NegativeOrErasedAxioms.Canonicity.Erased.html#1990" class="Bound">d</a>
</pre></body></html>