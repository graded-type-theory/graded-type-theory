<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Heap.Typed.Substitution</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Properties of well-formed heaps as substitutions</a>
<a id="126" class="Comment">------------------------------------------------------------------------</a>

<a id="200" class="Keyword">open</a> <a id="205" class="Keyword">import</a> <a id="212" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="228" class="Keyword">open</a> <a id="233" class="Keyword">import</a> <a id="240" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>
<a id="308" class="Keyword">open</a> <a id="313" class="Keyword">import</a> <a id="320" href="Graded.Usage.Restrictions.Natrec.html" class="Module">Graded.Usage.Restrictions.Natrec</a>

<a id="354" class="Keyword">module</a> <a id="361" href="Graded.Heap.Typed.Substitution.html" class="Module">Graded.Heap.Typed.Substitution</a>
  <a id="394" class="Symbol">{</a><a id="395" href="Graded.Heap.Typed.Substitution.html#395" class="Bound">a</a><a id="396" class="Symbol">}</a> <a id="398" class="Symbol">{</a><a id="399" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a> <a id="401" class="Symbol">:</a> <a id="403" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="407" href="Graded.Heap.Typed.Substitution.html#395" class="Bound">a</a><a id="408" class="Symbol">}</a> <a id="410" class="Symbol">{</a><a id="411" href="Graded.Heap.Typed.Substitution.html#411" class="Bound">𝕄</a> <a id="413" class="Symbol">:</a> <a id="415" href="Graded.Modality.html#9576" class="Record">Modality</a> <a id="424" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a><a id="425" class="Symbol">}</a>
  <a id="429" class="Symbol">(</a><a id="430" href="Graded.Heap.Typed.Substitution.html#430" class="Bound">UR</a> <a id="433" class="Symbol">:</a> <a id="435" href="Graded.Usage.Restrictions.html#812" class="Record">Usage-restrictions</a> <a id="454" href="Graded.Heap.Typed.Substitution.html#411" class="Bound">𝕄</a><a id="455" class="Symbol">)</a>
  <a id="459" class="Symbol">(</a><a id="460" href="Graded.Heap.Typed.Substitution.html#460" class="Bound">TR</a> <a id="463" class="Symbol">:</a> <a id="465" href="Definition.Typed.Restrictions.html#808" class="Record">Type-restrictions</a> <a id="483" href="Graded.Heap.Typed.Substitution.html#411" class="Bound">𝕄</a><a id="484" class="Symbol">)</a>
  <a id="488" class="Symbol">(</a><a id="489" class="Keyword">open</a> <a id="494" href="Graded.Usage.Restrictions.html#812" class="Module">Usage-restrictions</a> <a id="513" href="Graded.Heap.Typed.Substitution.html#430" class="Bound">UR</a><a id="515" class="Symbol">)</a>
  <a id="519" class="Symbol">(</a><a id="520" href="Graded.Heap.Typed.Substitution.html#520" class="Bound">factoring-nr</a> <a id="533" class="Symbol">:</a>
    <a id="539" class="Symbol">⦃</a> <a id="541" href="Graded.Heap.Typed.Substitution.html#541" class="Bound">has-nr</a> <a id="548" class="Symbol">:</a> <a id="550" href="Graded.Usage.Restrictions.html#3510" class="Function">Nr-available</a> <a id="563" class="Symbol">⦄</a> <a id="565" class="Symbol">→</a>
    <a id="571" href="Graded.Modality.html#7252" class="Record">Is-factoring-nr</a> <a id="587" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a> <a id="589" class="Symbol">(</a><a id="590" href="Graded.Usage.Restrictions.Natrec.html#2196" class="Function">Natrec-mode-Has-nr</a> <a id="609" href="Graded.Heap.Typed.Substitution.html#411" class="Bound">𝕄</a> <a id="611" href="Graded.Heap.Typed.Substitution.html#541" class="Bound">has-nr</a><a id="617" class="Symbol">))</a>
  <a id="622" class="Keyword">where</a>

<a id="629" class="Keyword">open</a> <a id="634" href="Definition.Typed.Restrictions.html#808" class="Module">Type-restrictions</a> <a id="652" href="Graded.Heap.Typed.Substitution.html#460" class="Bound">TR</a>

<a id="656" class="Keyword">open</a> <a id="661" class="Keyword">import</a> <a id="668" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="687" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a>
<a id="689" class="Keyword">open</a> <a id="694" class="Keyword">import</a> <a id="701" href="Definition.Untyped.Properties.html" class="Module">Definition.Untyped.Properties</a> <a id="731" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a>
<a id="733" class="Keyword">open</a> <a id="738" class="Keyword">import</a> <a id="745" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="762" href="Graded.Heap.Typed.Substitution.html#460" class="Bound">TR</a>
<a id="765" class="Keyword">open</a> <a id="770" class="Keyword">import</a> <a id="777" href="Definition.Typed.Substitution.html" class="Module">Definition.Typed.Substitution</a> <a id="807" href="Graded.Heap.Typed.Substitution.html#460" class="Bound">TR</a>

<a id="811" class="Keyword">open</a> <a id="816" class="Keyword">import</a> <a id="823" href="Graded.Heap.Typed.html" class="Module">Graded.Heap.Typed</a> <a id="841" href="Graded.Heap.Typed.Substitution.html#430" class="Bound">UR</a> <a id="844" href="Graded.Heap.Typed.Substitution.html#460" class="Bound">TR</a> <a id="847" href="Graded.Heap.Typed.Substitution.html#520" class="Bound">factoring-nr</a>
<a id="860" class="Keyword">open</a> <a id="865" class="Keyword">import</a> <a id="872" href="Graded.Heap.Untyped.html" class="Module">Graded.Heap.Untyped</a> <a id="892" href="Definition.Typed.Restrictions.html#932" class="Function">type-variant</a> <a id="905" href="Graded.Heap.Typed.Substitution.html#430" class="Bound">UR</a> <a id="908" href="Graded.Heap.Typed.Substitution.html#520" class="Bound">factoring-nr</a>

<a id="922" class="Keyword">open</a> <a id="927" class="Keyword">import</a> <a id="934" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="949" class="Keyword">open</a> <a id="954" class="Keyword">import</a> <a id="961" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="975" class="Keyword">import</a> <a id="982" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="1010" class="Symbol">as</a> <a id="1013" class="Module">PE</a>

<a id="1017" class="Keyword">private</a> <a id="1025" class="Keyword">variable</a>
  <a id="1036" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="1038" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="1040" class="Symbol">:</a> <a id="1042" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="1046" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1051" class="Symbol">_</a>
  <a id="1055" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="1057" href="Graded.Heap.Typed.Substitution.html#1057" class="Generalizable">H′</a> <a id="1060" class="Symbol">:</a> <a id="1062" href="Graded.Heap.Untyped.html#8372" class="Datatype">Heap</a> <a id="1067" class="Symbol">_</a> <a id="1069" class="Symbol">_</a>
  <a id="1073" href="Graded.Heap.Typed.Substitution.html#1073" class="Generalizable">ρ</a> <a id="1075" class="Symbol">:</a> <a id="1077" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="1080" class="Symbol">_</a> <a id="1082" class="Symbol">_</a>
  <a id="1086" href="Graded.Heap.Typed.Substitution.html#1086" class="Generalizable">t</a> <a id="1088" href="Graded.Heap.Typed.Substitution.html#1088" class="Generalizable">u</a> <a id="1090" href="Graded.Heap.Typed.Substitution.html#1090" class="Generalizable">A</a> <a id="1092" href="Graded.Heap.Typed.Substitution.html#1092" class="Generalizable">B</a> <a id="1094" class="Symbol">:</a> <a id="1096" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1101" class="Symbol">_</a>
  <a id="1105" href="Graded.Heap.Typed.Substitution.html#1105" class="Generalizable">y</a> <a id="1107" class="Symbol">:</a> <a id="1109" href="Graded.Heap.Untyped.html#1818" class="Function">Ptr</a> <a id="1113" class="Symbol">_</a>
  <a id="1117" href="Graded.Heap.Typed.Substitution.html#1117" class="Generalizable">c</a> <a id="1119" class="Symbol">:</a> <a id="1121" href="Graded.Heap.Untyped.html#2050" class="Function">Entry</a> <a id="1127" class="Symbol">_</a> <a id="1129" class="Symbol">_</a>
  <a id="1133" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">p</a> <a id="1135" class="Symbol">:</a> <a id="1137" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a>
  <a id="1141" href="Graded.Heap.Typed.Substitution.html#1141" class="Generalizable">e</a> <a id="1143" class="Symbol">:</a> <a id="1145" href="Graded.Heap.Untyped.html#2597" class="Datatype">Elim</a> <a id="1150" class="Symbol">_</a>
  <a id="1154" href="Graded.Heap.Typed.Substitution.html#1154" class="Generalizable">S</a> <a id="1156" class="Symbol">:</a> <a id="1158" href="Graded.Heap.Untyped.html#5716" class="Datatype">Stack</a> <a id="1164" class="Symbol">_</a>
  <a id="1168" href="Graded.Heap.Typed.Substitution.html#1168" class="Generalizable">σ</a> <a id="1170" class="Symbol">:</a> <a id="1172" href="Definition.Untyped.html#11546" class="Function">Subst</a> <a id="1178" class="Symbol">_</a> <a id="1180" class="Symbol">_</a>

<a id="1183" class="Keyword">opaque</a> <a id="1190" class="Keyword">mutual</a>

  <a id="1200" class="Comment">-- A well-formed heap is a well-formed substitution</a>

  <a id="⊢ʰ→⊢ˢʷ"></a><a id="1255" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1262" class="Symbol">:</a> <a id="1264" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="1266" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="1269" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="1271" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="1273" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="1275" class="Symbol">→</a> <a id="1277" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="1279" href="Definition.Typed.Substitution.Primitive.Primitive.html#3155" class="Function Operator">⊢ˢʷ</a> <a id="1283" href="Graded.Heap.Untyped.html#10433" class="Function">toSubstₕ</a> <a id="1292" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="1294" href="Definition.Typed.Substitution.Primitive.Primitive.html#3155" class="Function Operator">∷</a> <a id="1296" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a>
  <a id="1300" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1307" href="Graded.Heap.Typed.html#1233" class="InductiveConstructor">ε</a> <a id="1309" class="Symbol">=</a> <a id="1311" href="Definition.Typed.Substitution.Primitive.Primitive.html#3447" class="Function">⊢ˢʷ∷ε⇔</a> <a id="1318" class="Symbol">.</a><a id="1319" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="1325" href="Definition.Typed.html#1198" class="InductiveConstructor">ε</a>
  <a id="1329" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1336" class="Symbol">(</a><a id="1337" href="Graded.Heap.Typed.Substitution.html#1337" class="Bound">⊢H</a> <a id="1340" href="Graded.Heap.Typed.html#1250" class="InductiveConstructor Operator">∙</a> <a id="1342" href="Graded.Heap.Typed.Substitution.html#1342" class="Bound">⊢t</a><a id="1344" class="Symbol">)</a> <a id="1346" class="Symbol">=</a>
    <a id="1352" href="Definition.Typed.Substitution.Primitive.Primitive.html#3819" class="Function">→⊢ˢʷ∷∙</a> <a id="1359" class="Symbol">(</a><a id="1360" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1367" href="Graded.Heap.Typed.Substitution.html#1337" class="Bound">⊢H</a><a id="1369" class="Symbol">)</a> <a id="1371" href="Graded.Heap.Typed.Substitution.html#1342" class="Bound">⊢t</a>
  <a id="1376" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1383" class="Symbol">(</a><a id="1384" href="Graded.Heap.Typed.html#1331" class="InductiveConstructor Operator">_∙●_</a> <a id="1389" class="Symbol">{</a><a id="1390" href="Graded.Heap.Typed.Substitution.html#1390" class="Bound">Δ</a><a id="1391" class="Symbol">}</a> <a id="1393" class="Symbol">{</a><a id="1394" href="Graded.Heap.Typed.Substitution.html#1394" class="Bound">H</a><a id="1395" class="Symbol">}</a> <a id="1397" class="Symbol">{</a><a id="1398" href="Graded.Heap.Typed.Substitution.html#1398" class="Bound">A</a><a id="1399" class="Symbol">}</a> <a id="1401" href="Graded.Heap.Typed.Substitution.html#1401" class="Bound">⊢H</a> <a id="1404" href="Graded.Heap.Typed.Substitution.html#1404" class="Bound">⊢A</a><a id="1406" class="Symbol">)</a> <a id="1408" class="Symbol">=</a>
    <a id="1414" class="Keyword">let</a> <a id="1418" href="Graded.Heap.Typed.Substitution.html#1418" class="Bound">⊢σ</a> <a id="1421" class="Symbol">=</a> <a id="1423" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1430" href="Graded.Heap.Typed.Substitution.html#1401" class="Bound">⊢H</a>
        <a id="1441" href="Graded.Heap.Typed.Substitution.html#1441" class="Bound">⊢σA</a> <a id="1445" class="Symbol">=</a> <a id="1447" href="Definition.Typed.Substitution.Primitive.Primitive.html#53661" class="Function">subst-⊢</a> <a id="1455" href="Graded.Heap.Typed.Substitution.html#1404" class="Bound">⊢A</a> <a id="1458" href="Graded.Heap.Typed.Substitution.html#1418" class="Bound">⊢σ</a>
    <a id="1465" class="Keyword">in</a>
    <a id="1472" href="Definition.Typed.Substitution.Primitive.Primitive.html#3819" class="Function">→⊢ˢʷ∷∙</a> <a id="1479" class="Symbol">(</a><a id="1480" href="Definition.Typed.Substitution.Primitive.Primitive.html#7174" class="Function">⊢ˢʷ∷-wk1Subst</a> <a id="1494" href="Graded.Heap.Typed.Substitution.html#1441" class="Bound">⊢σA</a> <a id="1498" href="Graded.Heap.Typed.Substitution.html#1418" class="Bound">⊢σ</a><a id="1500" class="Symbol">)</a> <a id="1502" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="1508" href="Definition.Typed.html#2177" class="InductiveConstructor">var</a> <a id="1512" class="Symbol">(</a><a id="1513" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="1515" href="Graded.Heap.Typed.Substitution.html#1441" class="Bound">⊢σA</a><a id="1518" class="Symbol">)</a>
      <a id="1526" class="Symbol">(</a><a id="1527" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">PE.subst</a> <a id="1536" class="Symbol">(</a><a id="1537" href="Graded.Heap.Untyped.html#1853" class="InductiveConstructor">y0</a> <a id="1540" href="Definition.Typed.html#969" class="Datatype Operator">∷_∈</a> <a id="1544" href="Graded.Heap.Typed.Substitution.html#1390" class="Bound">Δ</a> <a id="1546" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="1548" href="Graded.Heap.Typed.Substitution.html#1398" class="Bound">A</a> <a id="1550" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="1552" href="Graded.Heap.Typed.Substitution.html#1394" class="Bound">H</a> <a id="1554" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a><a id="1556" class="Symbol">)</a> <a id="1558" class="Symbol">(</a><a id="1559" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="1566" class="Symbol">(</a><a id="1567" href="Definition.Untyped.Properties.html#23009" class="Function">wk1Subst-wk1</a> <a id="1580" href="Graded.Heap.Typed.Substitution.html#1398" class="Bound">A</a><a id="1581" class="Symbol">))</a> <a id="1584" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="1588" class="Symbol">)</a>

  <a id="1593" class="Comment">-- Well-formed contexts from well-formed heaps</a>

  <a id="wfHeap"></a><a id="1643" href="Graded.Heap.Typed.Substitution.html#1643" class="Function">wfHeap</a> <a id="1650" class="Symbol">:</a> <a id="1652" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="1654" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="1657" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="1659" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="1661" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="1663" class="Symbol">→</a> <a id="1665" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="1667" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a>
  <a id="1671" href="Graded.Heap.Typed.Substitution.html#1643" class="Function">wfHeap</a> <a id="1678" class="Symbol">{</a><a id="1679" class="Argument">Δ</a> <a id="1681" class="Symbol">=</a> <a id="1683" href="Definition.Untyped.NotParametrised.html#926" class="InductiveConstructor">ε</a><a id="1684" class="Symbol">}</a> <a id="1686" href="Graded.Heap.Typed.html#1233" class="InductiveConstructor">ε</a> <a id="1688" class="Symbol">=</a> <a id="1690" href="Definition.Typed.html#1198" class="InductiveConstructor">ε</a>
  <a id="1694" href="Graded.Heap.Typed.Substitution.html#1643" class="CatchallClause Function">wfHeap</a><a id="1700" class="CatchallClause"> </a><a id="1701" class="CatchallClause Symbol">(</a><a id="1702" href="Graded.Heap.Typed.Substitution.html#1702" class="CatchallClause Bound">⊢H</a><a id="1704" class="CatchallClause"> </a><a id="1705" href="Graded.Heap.Typed.html#1250" class="CatchallClause InductiveConstructor Operator">∙</a><a id="1706" class="CatchallClause"> </a><a id="1707" href="Graded.Heap.Typed.Substitution.html#1707" class="CatchallClause Bound">⊢t</a><a id="1709" class="CatchallClause Symbol">)</a> <a id="1711" class="Symbol">=</a> <a id="1713" href="Graded.Heap.Typed.Substitution.html#1643" class="Function">wfHeap</a> <a id="1720" href="Graded.Heap.Typed.Substitution.html#1702" class="Bound">⊢H</a>
  <a id="1725" href="Graded.Heap.Typed.Substitution.html#1643" class="Function">wfHeap</a> <a id="1732" class="Symbol">(</a><a id="1733" href="Graded.Heap.Typed.Substitution.html#1733" class="Bound">⊢H</a> <a id="1736" href="Graded.Heap.Typed.html#1331" class="InductiveConstructor Operator">∙●</a> <a id="1739" href="Graded.Heap.Typed.Substitution.html#1739" class="Bound">⊢A</a><a id="1741" class="Symbol">)</a> <a id="1743" class="Symbol">=</a>
    <a id="1749" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="1751" href="Definition.Typed.Substitution.Primitive.Primitive.html#53661" class="Function">subst-⊢</a> <a id="1759" href="Graded.Heap.Typed.Substitution.html#1739" class="Bound">⊢A</a> <a id="1762" class="Symbol">(</a><a id="1763" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1770" href="Graded.Heap.Typed.Substitution.html#1733" class="Bound">⊢H</a><a id="1772" class="Symbol">)</a>

<a id="1775" class="Keyword">opaque</a>

  <a id="1785" class="Comment">-- A well-formed type applied to a well-formed heap (as a substitution)</a>
  <a id="1859" class="Comment">-- is well-formed</a>

  <a id="substHeap"></a><a id="1880" href="Graded.Heap.Typed.Substitution.html#1880" class="Function">substHeap</a> <a id="1890" class="Symbol">:</a> <a id="1892" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="1894" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="1897" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="1899" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="1901" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="1903" class="Symbol">→</a> <a id="1905" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="1907" href="Definition.Typed.html#1262" class="Datatype Operator">⊢</a> <a id="1909" href="Graded.Heap.Typed.Substitution.html#1090" class="Generalizable">A</a> <a id="1911" class="Symbol">→</a> <a id="1913" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="1915" href="Definition.Typed.html#1262" class="Datatype Operator">⊢</a> <a id="1917" href="Graded.Heap.Typed.Substitution.html#1090" class="Generalizable">A</a> <a id="1919" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="1921" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="1923" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a>
  <a id="1928" href="Graded.Heap.Typed.Substitution.html#1880" class="Function">substHeap</a> <a id="1938" href="Graded.Heap.Typed.Substitution.html#1938" class="Bound">⊢H</a> <a id="1941" href="Graded.Heap.Typed.Substitution.html#1941" class="Bound">⊢A</a> <a id="1944" class="Symbol">=</a>
    <a id="1950" href="Definition.Typed.Substitution.Primitive.Primitive.html#53661" class="Function">subst-⊢</a> <a id="1958" href="Graded.Heap.Typed.Substitution.html#1941" class="Bound">⊢A</a> <a id="1961" class="Symbol">(</a><a id="1962" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1969" href="Graded.Heap.Typed.Substitution.html#1938" class="Bound">⊢H</a><a id="1971" class="Symbol">)</a>

<a id="1974" class="Keyword">opaque</a>

  <a id="1984" class="Comment">-- A well-formed term applied to a well-formed heap (as a substitution)</a>
  <a id="2058" class="Comment">-- is well-formed</a>

  <a id="substHeapTerm"></a><a id="2079" href="Graded.Heap.Typed.Substitution.html#2079" class="Function">substHeapTerm</a> <a id="2093" class="Symbol">:</a> <a id="2095" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="2097" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="2100" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2102" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="2104" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="2106" class="Symbol">→</a> <a id="2108" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="2110" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2112" href="Graded.Heap.Typed.Substitution.html#1086" class="Generalizable">t</a> <a id="2114" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2116" href="Graded.Heap.Typed.Substitution.html#1090" class="Generalizable">A</a> <a id="2118" class="Symbol">→</a> <a id="2120" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="2122" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2124" href="Graded.Heap.Typed.Substitution.html#1086" class="Generalizable">t</a> <a id="2126" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="2128" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2130" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a> <a id="2133" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2135" href="Graded.Heap.Typed.Substitution.html#1090" class="Generalizable">A</a> <a id="2137" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="2139" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2141" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a>
  <a id="2146" href="Graded.Heap.Typed.Substitution.html#2079" class="Function">substHeapTerm</a> <a id="2160" href="Graded.Heap.Typed.Substitution.html#2160" class="Bound">⊢H</a> <a id="2163" href="Graded.Heap.Typed.Substitution.html#2163" class="Bound">⊢t</a> <a id="2166" class="Symbol">=</a>
    <a id="2172" href="Definition.Typed.Substitution.Primitive.Primitive.html#54020" class="Function">subst-⊢∷</a> <a id="2181" href="Graded.Heap.Typed.Substitution.html#2163" class="Bound">⊢t</a> <a id="2184" class="Symbol">(</a><a id="2185" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2192" href="Graded.Heap.Typed.Substitution.html#2160" class="Bound">⊢H</a><a id="2194" class="Symbol">)</a>

<a id="2197" class="Keyword">opaque</a>

  <a id="2207" class="Comment">-- A well-formed type equality applied to a well-formed heap</a>
  <a id="2270" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEq"></a><a id="2311" href="Graded.Heap.Typed.Substitution.html#2311" class="Function">substHeapEq</a> <a id="2323" class="Symbol">:</a> <a id="2325" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="2327" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="2330" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2332" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="2334" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="2336" class="Symbol">→</a> <a id="2338" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="2340" href="Definition.Typed.html#4647" class="Datatype Operator">⊢</a> <a id="2342" href="Graded.Heap.Typed.Substitution.html#1090" class="Generalizable">A</a> <a id="2344" href="Definition.Typed.html#4647" class="Datatype Operator">≡</a> <a id="2346" href="Graded.Heap.Typed.Substitution.html#1092" class="Generalizable">B</a> <a id="2348" class="Symbol">→</a> <a id="2350" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="2352" href="Definition.Typed.html#4647" class="Datatype Operator">⊢</a> <a id="2354" href="Graded.Heap.Typed.Substitution.html#1090" class="Generalizable">A</a> <a id="2356" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="2358" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2360" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a> <a id="2363" href="Definition.Typed.html#4647" class="Datatype Operator">≡</a> <a id="2365" href="Graded.Heap.Typed.Substitution.html#1092" class="Generalizable">B</a> <a id="2367" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="2369" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2371" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a>
  <a id="2376" href="Graded.Heap.Typed.Substitution.html#2311" class="Function">substHeapEq</a> <a id="2388" href="Graded.Heap.Typed.Substitution.html#2388" class="Bound">⊢H</a> <a id="2391" href="Graded.Heap.Typed.Substitution.html#2391" class="Bound">⊢A≡B</a> <a id="2396" class="Symbol">=</a>
    <a id="2402" href="Definition.Typed.Substitution.Primitive.Primitive.html#53818" class="Function">subst-⊢≡</a> <a id="2411" href="Graded.Heap.Typed.Substitution.html#2391" class="Bound">⊢A≡B</a> <a id="2416" class="Symbol">(</a><a id="2417" href="Definition.Typed.Substitution.Primitive.Primitive.html#6148" class="Function">refl-⊢ˢʷ≡∷</a> <a id="2428" class="Symbol">(</a><a id="2429" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2436" href="Graded.Heap.Typed.Substitution.html#2388" class="Bound">⊢H</a><a id="2438" class="Symbol">))</a>

<a id="2442" class="Keyword">opaque</a>

  <a id="2452" class="Comment">-- A well-formed term equality  applied to a well-formed heap</a>
  <a id="2516" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEqTerm"></a><a id="2557" href="Graded.Heap.Typed.Substitution.html#2557" class="Function">substHeapEqTerm</a> <a id="2573" class="Symbol">:</a> <a id="2575" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="2577" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="2580" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2582" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="2584" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="2586" class="Symbol">→</a> <a id="2588" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="2590" href="Definition.Typed.html#5241" class="Datatype Operator">⊢</a> <a id="2592" href="Graded.Heap.Typed.Substitution.html#1086" class="Generalizable">t</a> <a id="2594" href="Definition.Typed.html#5241" class="Datatype Operator">≡</a> <a id="2596" href="Graded.Heap.Typed.Substitution.html#1088" class="Generalizable">u</a> <a id="2598" href="Definition.Typed.html#5241" class="Datatype Operator">∷</a> <a id="2600" href="Graded.Heap.Typed.Substitution.html#1090" class="Generalizable">A</a>
                  <a id="2620" class="Symbol">→</a> <a id="2622" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="2624" href="Definition.Typed.html#5241" class="Datatype Operator">⊢</a> <a id="2626" href="Graded.Heap.Typed.Substitution.html#1086" class="Generalizable">t</a> <a id="2628" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="2630" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2632" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a> <a id="2635" href="Definition.Typed.html#5241" class="Datatype Operator">≡</a> <a id="2637" href="Graded.Heap.Typed.Substitution.html#1088" class="Generalizable">u</a> <a id="2639" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="2641" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2643" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a> <a id="2646" href="Definition.Typed.html#5241" class="Datatype Operator">∷</a> <a id="2648" href="Graded.Heap.Typed.Substitution.html#1090" class="Generalizable">A</a> <a id="2650" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="2652" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2654" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a>
  <a id="2659" href="Graded.Heap.Typed.Substitution.html#2557" class="Function">substHeapEqTerm</a> <a id="2675" href="Graded.Heap.Typed.Substitution.html#2675" class="Bound">⊢H</a> <a id="2678" href="Graded.Heap.Typed.Substitution.html#2678" class="Bound">⊢t≡u</a> <a id="2683" class="Symbol">=</a>
    <a id="2689" href="Definition.Typed.Substitution.Primitive.Primitive.html#54196" class="Function">subst-⊢≡∷</a> <a id="2699" href="Graded.Heap.Typed.Substitution.html#2678" class="Bound">⊢t≡u</a> <a id="2704" class="Symbol">(</a><a id="2705" href="Definition.Typed.Substitution.Primitive.Primitive.html#6148" class="Function">refl-⊢ˢʷ≡∷</a> <a id="2716" class="Symbol">(</a><a id="2717" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2724" href="Graded.Heap.Typed.Substitution.html#2675" class="Bound">⊢H</a><a id="2726" class="Symbol">))</a>

<a id="2730" class="Keyword">opaque</a>

  <a id="2740" class="Comment">-- Applying a well-formed heap as a substitution to a reduction</a>

  <a id="substHeapRedTerm"></a><a id="2807" href="Graded.Heap.Typed.Substitution.html#2807" class="Function">substHeapRedTerm</a> <a id="2824" class="Symbol">:</a> <a id="2826" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="2828" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="2831" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2833" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="2835" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="2837" class="Symbol">→</a> <a id="2839" href="Graded.Heap.Typed.Substitution.html#1036" class="Generalizable">Γ</a> <a id="2841" href="Definition.Typed.html#12828" class="Datatype Operator">⊢</a> <a id="2843" href="Graded.Heap.Typed.Substitution.html#1086" class="Generalizable">t</a> <a id="2845" href="Definition.Typed.html#12828" class="Datatype Operator">⇒</a> <a id="2847" href="Graded.Heap.Typed.Substitution.html#1088" class="Generalizable">u</a> <a id="2849" href="Definition.Typed.html#12828" class="Datatype Operator">∷</a> <a id="2851" href="Graded.Heap.Typed.Substitution.html#1090" class="Generalizable">A</a>
                   <a id="2872" class="Symbol">→</a> <a id="2874" href="Graded.Heap.Typed.Substitution.html#1038" class="Generalizable">Δ</a> <a id="2876" href="Definition.Typed.html#12828" class="Datatype Operator">⊢</a> <a id="2878" href="Graded.Heap.Typed.Substitution.html#1086" class="Generalizable">t</a> <a id="2880" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="2882" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2884" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a> <a id="2887" href="Definition.Typed.html#12828" class="Datatype Operator">⇒</a> <a id="2889" href="Graded.Heap.Typed.Substitution.html#1088" class="Generalizable">u</a> <a id="2891" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="2893" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2895" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a> <a id="2898" href="Definition.Typed.html#12828" class="Datatype Operator">∷</a> <a id="2900" href="Graded.Heap.Typed.Substitution.html#1090" class="Generalizable">A</a> <a id="2902" href="Graded.Heap.Untyped.html#10660" class="Function Operator">[</a> <a id="2904" href="Graded.Heap.Typed.Substitution.html#1055" class="Generalizable">H</a> <a id="2906" href="Graded.Heap.Untyped.html#10660" class="Function Operator">]ₕ</a>
  <a id="2911" href="Graded.Heap.Typed.Substitution.html#2807" class="Function">substHeapRedTerm</a> <a id="2928" href="Graded.Heap.Typed.Substitution.html#2928" class="Bound">⊢H</a> <a id="2931" href="Graded.Heap.Typed.Substitution.html#2931" class="Bound">d</a> <a id="2933" class="Symbol">=</a>
    <a id="2939" href="Definition.Typed.Substitution.html#910" class="Function">subst-⊢⇒∷</a> <a id="2949" href="Graded.Heap.Typed.Substitution.html#2931" class="Bound">d</a> <a id="2951" class="Symbol">(</a><a id="2952" href="Graded.Heap.Typed.Substitution.html#1255" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2959" href="Graded.Heap.Typed.Substitution.html#2928" class="Bound">⊢H</a><a id="2961" class="Symbol">)</a>
</pre></body></html>