<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Heap.Typed.Substitution</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Properties of well-formed heaps as substitutions</a>
<a id="126" class="Comment">------------------------------------------------------------------------</a>

<a id="200" class="Keyword">open</a> <a id="205" class="Keyword">import</a> <a id="212" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="228" class="Keyword">open</a> <a id="233" class="Keyword">import</a> <a id="240" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>
<a id="308" class="Keyword">open</a> <a id="313" class="Keyword">import</a> <a id="320" href="Tools.Bool.html" class="Module">Tools.Bool</a>

<a id="332" class="Keyword">module</a> <a id="339" href="Graded.Heap.Typed.Substitution.html" class="Module">Graded.Heap.Typed.Substitution</a>
  <a id="372" class="Symbol">{</a><a id="373" href="Graded.Heap.Typed.Substitution.html#373" class="Bound">a</a><a id="374" class="Symbol">}</a> <a id="376" class="Symbol">{</a><a id="377" href="Graded.Heap.Typed.Substitution.html#377" class="Bound">M</a> <a id="379" class="Symbol">:</a> <a id="381" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="385" href="Graded.Heap.Typed.Substitution.html#373" class="Bound">a</a><a id="386" class="Symbol">}</a> <a id="388" class="Symbol">{</a><a id="389" href="Graded.Heap.Typed.Substitution.html#389" class="Bound">𝕄</a> <a id="391" class="Symbol">:</a> <a id="393" href="Graded.Modality.html#8058" class="Record">Modality</a> <a id="402" href="Graded.Heap.Typed.Substitution.html#377" class="Bound">M</a><a id="403" class="Symbol">}</a>
  <a id="407" class="Symbol">(</a><a id="408" href="Graded.Heap.Typed.Substitution.html#408" class="Bound">UR</a> <a id="411" class="Symbol">:</a> <a id="413" href="Graded.Usage.Restrictions.html#750" class="Record">Usage-restrictions</a> <a id="432" href="Graded.Heap.Typed.Substitution.html#389" class="Bound">𝕄</a><a id="433" class="Symbol">)</a>
  <a id="437" class="Symbol">(</a><a id="438" href="Graded.Heap.Typed.Substitution.html#438" class="Bound">TR</a> <a id="441" class="Symbol">:</a> <a id="443" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="461" href="Graded.Heap.Typed.Substitution.html#389" class="Bound">𝕄</a><a id="462" class="Symbol">)</a>
  <a id="466" class="Symbol">(</a><a id="467" href="Graded.Heap.Typed.Substitution.html#467" class="Bound">ℕ-fullred</a> <a id="477" class="Symbol">:</a> <a id="479" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="483" class="Symbol">)</a>
  <a id="487" class="Keyword">where</a>

<a id="494" class="Keyword">open</a> <a id="499" href="Definition.Typed.Restrictions.html#752" class="Module">Type-restrictions</a> <a id="517" href="Graded.Heap.Typed.Substitution.html#438" class="Bound">TR</a>

<a id="521" class="Keyword">open</a> <a id="526" class="Keyword">import</a> <a id="533" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="552" href="Graded.Heap.Typed.Substitution.html#377" class="Bound">M</a>
<a id="554" class="Keyword">open</a> <a id="559" class="Keyword">import</a> <a id="566" href="Definition.Untyped.Properties.html" class="Module">Definition.Untyped.Properties</a> <a id="596" href="Graded.Heap.Typed.Substitution.html#377" class="Bound">M</a>
<a id="598" class="Keyword">open</a> <a id="603" class="Keyword">import</a> <a id="610" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="627" href="Graded.Heap.Typed.Substitution.html#438" class="Bound">TR</a>
<a id="630" class="Keyword">open</a> <a id="635" class="Keyword">import</a> <a id="642" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="670" href="Graded.Heap.Typed.Substitution.html#438" class="Bound">TR</a>
<a id="673" class="Keyword">open</a> <a id="678" class="Keyword">import</a> <a id="685" href="Definition.Typed.Consequences.Substitution.html" class="Module">Definition.Typed.Consequences.Substitution</a> <a id="728" href="Graded.Heap.Typed.Substitution.html#438" class="Bound">TR</a>

<a id="732" class="Keyword">open</a> <a id="737" class="Keyword">import</a> <a id="744" href="Graded.Heap.Typed.html" class="Module">Graded.Heap.Typed</a> <a id="762" href="Graded.Heap.Typed.Substitution.html#408" class="Bound">UR</a> <a id="765" href="Graded.Heap.Typed.Substitution.html#438" class="Bound">TR</a> <a id="768" href="Graded.Heap.Typed.Substitution.html#467" class="Bound">ℕ-fullred</a>
<a id="778" class="Keyword">open</a> <a id="783" class="Keyword">import</a> <a id="790" href="Graded.Heap.Untyped.html" class="Module">Graded.Heap.Untyped</a> <a id="810" href="Definition.Typed.Restrictions.html#876" class="Function">type-variant</a> <a id="823" href="Graded.Heap.Typed.Substitution.html#408" class="Bound">UR</a>

<a id="827" class="Keyword">import</a> <a id="834" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="862" class="Symbol">as</a> <a id="865" class="Module">PE</a>

<a id="869" class="Keyword">private</a> <a id="877" class="Keyword">variable</a>
  <a id="888" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="890" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="892" class="Symbol">:</a> <a id="894" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="898" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="903" class="Symbol">_</a>
  <a id="907" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="909" href="Graded.Heap.Typed.Substitution.html#909" class="Generalizable">H′</a> <a id="912" class="Symbol">:</a> <a id="914" href="Graded.Heap.Untyped.html#5863" class="Datatype">Heap</a> <a id="919" class="Symbol">_</a> <a id="921" class="Symbol">_</a>
  <a id="925" href="Graded.Heap.Typed.Substitution.html#925" class="Generalizable">ρ</a> <a id="927" class="Symbol">:</a> <a id="929" href="Definition.Untyped.NotParametrised.html#2601" class="Datatype">Wk</a> <a id="932" class="Symbol">_</a> <a id="934" class="Symbol">_</a>
  <a id="938" href="Graded.Heap.Typed.Substitution.html#938" class="Generalizable">t</a> <a id="940" href="Graded.Heap.Typed.Substitution.html#940" class="Generalizable">u</a> <a id="942" href="Graded.Heap.Typed.Substitution.html#942" class="Generalizable">A</a> <a id="944" href="Graded.Heap.Typed.Substitution.html#944" class="Generalizable">B</a> <a id="946" class="Symbol">:</a> <a id="948" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="953" class="Symbol">_</a>
  <a id="957" href="Graded.Heap.Typed.Substitution.html#957" class="Generalizable">y</a> <a id="959" class="Symbol">:</a> <a id="961" href="Graded.Heap.Untyped.html#1224" class="Function">Ptr</a> <a id="965" class="Symbol">_</a>
  <a id="969" href="Graded.Heap.Typed.Substitution.html#969" class="Generalizable">c</a> <a id="971" class="Symbol">:</a> <a id="973" href="Graded.Heap.Untyped.html#1456" class="Function">Entry</a> <a id="979" class="Symbol">_</a> <a id="981" class="Symbol">_</a>
  <a id="985" href="Graded.Heap.Typed.Substitution.html#985" class="Generalizable">p</a> <a id="987" class="Symbol">:</a> <a id="989" href="Graded.Heap.Typed.Substitution.html#377" class="Bound">M</a>
  <a id="993" href="Graded.Heap.Typed.Substitution.html#993" class="Generalizable">e</a> <a id="995" class="Symbol">:</a> <a id="997" href="Graded.Heap.Untyped.html#2003" class="Datatype">Elim</a> <a id="1002" class="Symbol">_</a>
  <a id="1006" href="Graded.Heap.Typed.Substitution.html#1006" class="Generalizable">S</a> <a id="1008" class="Symbol">:</a> <a id="1010" href="Graded.Heap.Untyped.html#4594" class="Datatype">Stack</a> <a id="1016" class="Symbol">_</a>
  <a id="1020" href="Graded.Heap.Typed.Substitution.html#1020" class="Generalizable">σ</a> <a id="1022" class="Symbol">:</a> <a id="1024" href="Definition.Untyped.html#11525" class="Function">Subst</a> <a id="1030" class="Symbol">_</a> <a id="1032" class="Symbol">_</a>

<a id="1035" class="Keyword">opaque</a> <a id="1042" class="Keyword">mutual</a>

  <a id="1052" class="Comment">-- A well-formed heap is a well-formed substitution</a>

  <a id="⊢ʰ→⊢ˢ"></a><a id="1107" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="1113" class="Symbol">:</a> <a id="1115" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="1117" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">⊢ʰ</a> <a id="1120" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="1122" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">∷</a> <a id="1124" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="1126" class="Symbol">→</a> <a id="1128" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="1130" href="Definition.Typed.html#20829" class="Datatype Operator">⊢ˢ</a> <a id="1133" href="Graded.Heap.Untyped.html#7729" class="Function">toSubstₕ</a> <a id="1142" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="1144" href="Definition.Typed.html#20829" class="Datatype Operator">∷</a> <a id="1146" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a>
  <a id="1150" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="1156" href="Graded.Heap.Typed.html#1089" class="InductiveConstructor">ε</a> <a id="1158" class="Symbol">=</a> <a id="1160" href="Definition.Typed.html#20915" class="InductiveConstructor">id</a>
  <a id="1165" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="1171" class="Symbol">(</a><a id="1172" href="Graded.Heap.Typed.Substitution.html#1172" class="Bound">⊢H</a> <a id="1175" href="Graded.Heap.Typed.html#1106" class="InductiveConstructor Operator">∙</a> <a id="1177" href="Graded.Heap.Typed.Substitution.html#1177" class="Bound">⊢t</a><a id="1179" class="Symbol">)</a> <a id="1181" class="Symbol">=</a>
    <a id="1187" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="1193" href="Graded.Heap.Typed.Substitution.html#1172" class="Bound">⊢H</a> <a id="1196" href="Definition.Typed.html#20934" class="InductiveConstructor Operator">,</a> <a id="1198" href="Graded.Heap.Typed.Substitution.html#1177" class="Bound">⊢t</a>
  <a id="1203" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="1209" class="Symbol">(</a><a id="1210" href="Graded.Heap.Typed.html#1187" class="InductiveConstructor Operator">_∙●_</a> <a id="1215" class="Symbol">{</a><a id="1216" href="Graded.Heap.Typed.Substitution.html#1216" class="Bound">Δ</a><a id="1217" class="Symbol">}</a> <a id="1219" class="Symbol">{</a><a id="1220" href="Graded.Heap.Typed.Substitution.html#1220" class="Bound">H</a><a id="1221" class="Symbol">}</a> <a id="1223" class="Symbol">{</a><a id="1224" href="Graded.Heap.Typed.Substitution.html#1224" class="Bound">A</a><a id="1225" class="Symbol">}</a> <a id="1227" href="Graded.Heap.Typed.Substitution.html#1227" class="Bound">⊢H</a> <a id="1230" href="Graded.Heap.Typed.Substitution.html#1230" class="Bound">⊢A</a><a id="1232" class="Symbol">)</a> <a id="1234" class="Symbol">=</a>
    <a id="1240" class="Keyword">let</a> <a id="1244" href="Graded.Heap.Typed.Substitution.html#1244" class="Bound">⊢σ</a> <a id="1247" class="Symbol">=</a> <a id="1249" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="1255" href="Graded.Heap.Typed.Substitution.html#1227" class="Bound">⊢H</a>
        <a id="1266" href="Graded.Heap.Typed.Substitution.html#1266" class="Bound">⊢Δ</a> <a id="1269" class="Symbol">=</a> <a id="1271" href="Graded.Heap.Typed.Substitution.html#1486" class="Function">wfHeap</a> <a id="1278" href="Graded.Heap.Typed.Substitution.html#1227" class="Bound">⊢H</a>
        <a id="1289" href="Graded.Heap.Typed.Substitution.html#1289" class="Bound">⊢σA</a> <a id="1293" class="Symbol">=</a> <a id="1295" href="Definition.Typed.Consequences.Substitution.html#1294" class="Function">substitution</a> <a id="1308" href="Graded.Heap.Typed.Substitution.html#1230" class="Bound">⊢A</a> <a id="1311" href="Graded.Heap.Typed.Substitution.html#1244" class="Bound">⊢σ</a> <a id="1314" href="Graded.Heap.Typed.Substitution.html#1266" class="Bound">⊢Δ</a>
    <a id="1321" class="Keyword">in</a>    <a id="1327" href="Definition.Typed.Consequences.Substitution.html#2811" class="Function">wk1Subst′</a> <a id="1337" href="Graded.Heap.Typed.Substitution.html#1289" class="Bound">⊢σA</a> <a id="1341" href="Graded.Heap.Typed.Substitution.html#1244" class="Bound">⊢σ</a>
        <a id="1352" href="Definition.Typed.html#20934" class="InductiveConstructor Operator">,</a> <a id="1354" href="Definition.Typed.html#2225" class="InductiveConstructor">var</a> <a id="1358" class="Symbol">(</a><a id="1359" href="Graded.Heap.Typed.Substitution.html#1266" class="Bound">⊢Δ</a> <a id="1362" href="Definition.Typed.html#1232" class="InductiveConstructor Operator">∙</a> <a id="1364" href="Graded.Heap.Typed.Substitution.html#1289" class="Bound">⊢σA</a><a id="1367" class="Symbol">)</a> <a id="1369" class="Symbol">(</a><a id="1370" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">PE.subst</a> <a id="1379" class="Symbol">(</a><a id="1380" href="Graded.Heap.Untyped.html#1259" class="InductiveConstructor">y0</a> <a id="1383" href="Definition.Typed.html#989" class="Datatype Operator">∷_∈</a> <a id="1387" href="Graded.Heap.Typed.Substitution.html#1216" class="Bound">Δ</a> <a id="1389" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="1391" href="Graded.Heap.Typed.Substitution.html#1224" class="Bound">A</a> <a id="1393" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="1395" href="Graded.Heap.Typed.Substitution.html#1220" class="Bound">H</a> <a id="1397" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a><a id="1399" class="Symbol">)</a> <a id="1401" class="Symbol">(</a><a id="1402" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="1409" class="Symbol">(</a><a id="1410" href="Definition.Untyped.Properties.html#23115" class="Function">wk1Subst-wk1</a> <a id="1423" href="Graded.Heap.Typed.Substitution.html#1224" class="Bound">A</a><a id="1424" class="Symbol">))</a> <a id="1427" href="Definition.Typed.html#1055" class="InductiveConstructor">here</a><a id="1431" class="Symbol">)</a>

  <a id="1436" class="Comment">-- Well-formed contexts from well-formed heaps</a>

  <a id="wfHeap"></a><a id="1486" href="Graded.Heap.Typed.Substitution.html#1486" class="Function">wfHeap</a> <a id="1493" class="Symbol">:</a> <a id="1495" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="1497" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">⊢ʰ</a> <a id="1500" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="1502" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">∷</a> <a id="1504" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="1506" class="Symbol">→</a> <a id="1508" href="Definition.Typed.html#1184" class="Datatype Operator">⊢</a> <a id="1510" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a>
  <a id="1514" href="Graded.Heap.Typed.Substitution.html#1486" class="Function">wfHeap</a> <a id="1521" class="Symbol">{</a><a id="1522" class="Argument">Δ</a> <a id="1524" class="Symbol">=</a> <a id="1526" href="Definition.Untyped.NotParametrised.html#926" class="InductiveConstructor">ε</a><a id="1527" class="Symbol">}</a> <a id="1529" href="Graded.Heap.Typed.html#1089" class="InductiveConstructor">ε</a> <a id="1531" class="Symbol">=</a> <a id="1533" href="Definition.Typed.html#1218" class="InductiveConstructor">ε</a>
  <a id="1537" href="Graded.Heap.Typed.Substitution.html#1486" class="CatchallClause Function">wfHeap</a><a id="1543" class="CatchallClause"> </a><a id="1544" class="CatchallClause Symbol">(</a><a id="1545" href="Graded.Heap.Typed.Substitution.html#1545" class="CatchallClause Bound">⊢H</a><a id="1547" class="CatchallClause"> </a><a id="1548" href="Graded.Heap.Typed.html#1106" class="CatchallClause InductiveConstructor Operator">∙</a><a id="1549" class="CatchallClause"> </a><a id="1550" href="Graded.Heap.Typed.Substitution.html#1550" class="CatchallClause Bound">⊢t</a><a id="1552" class="CatchallClause Symbol">)</a> <a id="1554" class="Symbol">=</a> <a id="1556" href="Graded.Heap.Typed.Substitution.html#1486" class="Function">wfHeap</a> <a id="1563" href="Graded.Heap.Typed.Substitution.html#1545" class="Bound">⊢H</a>
  <a id="1568" href="Graded.Heap.Typed.Substitution.html#1486" class="Function">wfHeap</a> <a id="1575" class="Symbol">(</a><a id="1576" href="Graded.Heap.Typed.Substitution.html#1576" class="Bound">⊢H</a> <a id="1579" href="Graded.Heap.Typed.html#1187" class="InductiveConstructor Operator">∙●</a> <a id="1582" href="Graded.Heap.Typed.Substitution.html#1582" class="Bound">⊢A</a><a id="1584" class="Symbol">)</a> <a id="1586" class="Symbol">=</a>
    <a id="1592" class="Keyword">let</a> <a id="1596" href="Graded.Heap.Typed.Substitution.html#1596" class="Bound">⊢Δ</a> <a id="1599" class="Symbol">=</a> <a id="1601" href="Graded.Heap.Typed.Substitution.html#1486" class="Function">wfHeap</a> <a id="1608" href="Graded.Heap.Typed.Substitution.html#1576" class="Bound">⊢H</a>
    <a id="1615" class="Keyword">in</a>  <a id="1619" href="Graded.Heap.Typed.Substitution.html#1596" class="Bound">⊢Δ</a> <a id="1622" href="Definition.Typed.html#1232" class="InductiveConstructor Operator">∙</a> <a id="1624" href="Definition.Typed.Consequences.Substitution.html#1294" class="Function">substitution</a> <a id="1637" href="Graded.Heap.Typed.Substitution.html#1582" class="Bound">⊢A</a> <a id="1640" class="Symbol">(</a><a id="1641" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="1647" href="Graded.Heap.Typed.Substitution.html#1576" class="Bound">⊢H</a><a id="1649" class="Symbol">)</a> <a id="1651" href="Graded.Heap.Typed.Substitution.html#1596" class="Bound">⊢Δ</a>

<a id="1655" class="Keyword">opaque</a>

  <a id="1665" class="Comment">-- A well-formed type applied to a well-formed heap (as a substitution)</a>
  <a id="1739" class="Comment">-- is well-formed</a>

  <a id="substHeap"></a><a id="1760" href="Graded.Heap.Typed.Substitution.html#1760" class="Function">substHeap</a> <a id="1770" class="Symbol">:</a> <a id="1772" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="1774" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">⊢ʰ</a> <a id="1777" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="1779" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">∷</a> <a id="1781" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="1783" class="Symbol">→</a> <a id="1785" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="1787" href="Definition.Typed.html#1306" class="Datatype Operator">⊢</a> <a id="1789" href="Graded.Heap.Typed.Substitution.html#942" class="Generalizable">A</a> <a id="1791" class="Symbol">→</a> <a id="1793" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="1795" href="Definition.Typed.html#1306" class="Datatype Operator">⊢</a> <a id="1797" href="Graded.Heap.Typed.Substitution.html#942" class="Generalizable">A</a> <a id="1799" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="1801" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="1803" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a>
  <a id="1808" href="Graded.Heap.Typed.Substitution.html#1760" class="Function">substHeap</a> <a id="1818" href="Graded.Heap.Typed.Substitution.html#1818" class="Bound">⊢H</a> <a id="1821" href="Graded.Heap.Typed.Substitution.html#1821" class="Bound">⊢A</a> <a id="1824" class="Symbol">=</a>
    <a id="1830" href="Definition.Typed.Consequences.Substitution.html#1294" class="Function">substitution</a> <a id="1843" href="Graded.Heap.Typed.Substitution.html#1821" class="Bound">⊢A</a> <a id="1846" class="Symbol">(</a><a id="1847" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="1853" href="Graded.Heap.Typed.Substitution.html#1818" class="Bound">⊢H</a><a id="1855" class="Symbol">)</a> <a id="1857" class="Symbol">(</a><a id="1858" href="Graded.Heap.Typed.Substitution.html#1486" class="Function">wfHeap</a> <a id="1865" href="Graded.Heap.Typed.Substitution.html#1818" class="Bound">⊢H</a><a id="1867" class="Symbol">)</a>

<a id="1870" class="Keyword">opaque</a>

  <a id="1880" class="Comment">-- A well-formed term applied to a well-formed heap (as a substitution)</a>
  <a id="1954" class="Comment">-- is well-formed</a>

  <a id="substHeapTerm"></a><a id="1975" href="Graded.Heap.Typed.Substitution.html#1975" class="Function">substHeapTerm</a> <a id="1989" class="Symbol">:</a> <a id="1991" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="1993" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">⊢ʰ</a> <a id="1996" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="1998" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">∷</a> <a id="2000" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="2002" class="Symbol">→</a> <a id="2004" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="2006" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="2008" href="Graded.Heap.Typed.Substitution.html#938" class="Generalizable">t</a> <a id="2010" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="2012" href="Graded.Heap.Typed.Substitution.html#942" class="Generalizable">A</a> <a id="2014" class="Symbol">→</a> <a id="2016" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="2018" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="2020" href="Graded.Heap.Typed.Substitution.html#938" class="Generalizable">t</a> <a id="2022" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="2024" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2026" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a> <a id="2029" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="2031" href="Graded.Heap.Typed.Substitution.html#942" class="Generalizable">A</a> <a id="2033" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="2035" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2037" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a>
  <a id="2042" href="Graded.Heap.Typed.Substitution.html#1975" class="Function">substHeapTerm</a> <a id="2056" href="Graded.Heap.Typed.Substitution.html#2056" class="Bound">⊢H</a> <a id="2059" href="Graded.Heap.Typed.Substitution.html#2059" class="Bound">⊢t</a> <a id="2062" class="Symbol">=</a>
    <a id="2068" href="Definition.Typed.Consequences.Substitution.html#1788" class="Function">substitutionTerm</a> <a id="2085" href="Graded.Heap.Typed.Substitution.html#2059" class="Bound">⊢t</a> <a id="2088" class="Symbol">(</a><a id="2089" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="2095" href="Graded.Heap.Typed.Substitution.html#2056" class="Bound">⊢H</a><a id="2097" class="Symbol">)</a> <a id="2099" class="Symbol">(</a><a id="2100" href="Graded.Heap.Typed.Substitution.html#1486" class="Function">wfHeap</a> <a id="2107" href="Graded.Heap.Typed.Substitution.html#2056" class="Bound">⊢H</a><a id="2109" class="Symbol">)</a>

<a id="2112" class="Keyword">opaque</a>

  <a id="2122" class="Comment">-- A well-formed type equality applied to a well-formed heap</a>
  <a id="2185" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEq"></a><a id="2226" href="Graded.Heap.Typed.Substitution.html#2226" class="Function">substHeapEq</a> <a id="2238" class="Symbol">:</a> <a id="2240" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="2242" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">⊢ʰ</a> <a id="2245" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2247" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">∷</a> <a id="2249" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="2251" class="Symbol">→</a> <a id="2253" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="2255" href="Definition.Typed.html#4865" class="Datatype Operator">⊢</a> <a id="2257" href="Graded.Heap.Typed.Substitution.html#942" class="Generalizable">A</a> <a id="2259" href="Definition.Typed.html#4865" class="Datatype Operator">≡</a> <a id="2261" href="Graded.Heap.Typed.Substitution.html#944" class="Generalizable">B</a> <a id="2263" class="Symbol">→</a> <a id="2265" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="2267" href="Definition.Typed.html#4865" class="Datatype Operator">⊢</a> <a id="2269" href="Graded.Heap.Typed.Substitution.html#942" class="Generalizable">A</a> <a id="2271" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="2273" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2275" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a> <a id="2278" href="Definition.Typed.html#4865" class="Datatype Operator">≡</a> <a id="2280" href="Graded.Heap.Typed.Substitution.html#944" class="Generalizable">B</a> <a id="2282" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="2284" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2286" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a>
  <a id="2291" href="Graded.Heap.Typed.Substitution.html#2226" class="Function">substHeapEq</a> <a id="2303" href="Graded.Heap.Typed.Substitution.html#2303" class="Bound">⊢H</a> <a id="2306" href="Graded.Heap.Typed.Substitution.html#2306" class="Bound">⊢A≡B</a> <a id="2311" class="Symbol">=</a>
    <a id="2317" href="Definition.Typed.Consequences.Substitution.html#1518" class="Function">substitutionEq</a> <a id="2332" href="Graded.Heap.Typed.Substitution.html#2306" class="Bound">⊢A≡B</a> <a id="2337" class="Symbol">(</a><a id="2338" href="Definition.Typed.Consequences.Substitution.html#2347" class="Function">substRefl</a> <a id="2348" class="Symbol">(</a><a id="2349" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="2355" href="Graded.Heap.Typed.Substitution.html#2303" class="Bound">⊢H</a><a id="2357" class="Symbol">))</a> <a id="2360" class="Symbol">(</a><a id="2361" href="Graded.Heap.Typed.Substitution.html#1486" class="Function">wfHeap</a> <a id="2368" href="Graded.Heap.Typed.Substitution.html#2303" class="Bound">⊢H</a><a id="2370" class="Symbol">)</a>

<a id="2373" class="Keyword">opaque</a>

  <a id="2383" class="Comment">-- A well-formed term equality  applied to a well-formed heap</a>
  <a id="2447" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEqTerm"></a><a id="2488" href="Graded.Heap.Typed.Substitution.html#2488" class="Function">substHeapEqTerm</a> <a id="2504" class="Symbol">:</a> <a id="2506" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="2508" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">⊢ʰ</a> <a id="2511" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2513" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">∷</a> <a id="2515" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="2517" class="Symbol">→</a> <a id="2519" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="2521" href="Definition.Typed.html#5482" class="Datatype Operator">⊢</a> <a id="2523" href="Graded.Heap.Typed.Substitution.html#938" class="Generalizable">t</a> <a id="2525" href="Definition.Typed.html#5482" class="Datatype Operator">≡</a> <a id="2527" href="Graded.Heap.Typed.Substitution.html#940" class="Generalizable">u</a> <a id="2529" href="Definition.Typed.html#5482" class="Datatype Operator">∷</a> <a id="2531" href="Graded.Heap.Typed.Substitution.html#942" class="Generalizable">A</a>
                  <a id="2551" class="Symbol">→</a> <a id="2553" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="2555" href="Definition.Typed.html#5482" class="Datatype Operator">⊢</a> <a id="2557" href="Graded.Heap.Typed.Substitution.html#938" class="Generalizable">t</a> <a id="2559" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="2561" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2563" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a> <a id="2566" href="Definition.Typed.html#5482" class="Datatype Operator">≡</a> <a id="2568" href="Graded.Heap.Typed.Substitution.html#940" class="Generalizable">u</a> <a id="2570" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="2572" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2574" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a> <a id="2577" href="Definition.Typed.html#5482" class="Datatype Operator">∷</a> <a id="2579" href="Graded.Heap.Typed.Substitution.html#942" class="Generalizable">A</a> <a id="2581" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="2583" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2585" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a>
  <a id="2590" href="Graded.Heap.Typed.Substitution.html#2488" class="Function">substHeapEqTerm</a> <a id="2606" href="Graded.Heap.Typed.Substitution.html#2606" class="Bound">⊢H</a> <a id="2609" href="Graded.Heap.Typed.Substitution.html#2609" class="Bound">⊢t≡u</a> <a id="2614" class="Symbol">=</a>
    <a id="2620" href="Definition.Typed.Consequences.Substitution.html#2048" class="Function">substitutionEqTerm</a> <a id="2639" href="Graded.Heap.Typed.Substitution.html#2609" class="Bound">⊢t≡u</a> <a id="2644" class="Symbol">(</a><a id="2645" href="Definition.Typed.Consequences.Substitution.html#2347" class="Function">substRefl</a> <a id="2655" class="Symbol">(</a><a id="2656" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="2662" href="Graded.Heap.Typed.Substitution.html#2606" class="Bound">⊢H</a><a id="2664" class="Symbol">))</a> <a id="2667" class="Symbol">(</a><a id="2668" href="Graded.Heap.Typed.Substitution.html#1486" class="Function">wfHeap</a> <a id="2675" href="Graded.Heap.Typed.Substitution.html#2606" class="Bound">⊢H</a><a id="2677" class="Symbol">)</a>

<a id="2680" class="Keyword">opaque</a>

  <a id="2690" class="Comment">-- Applying a well-formed heap as a substitution to a reduction</a>

  <a id="substHeapRedTerm"></a><a id="2757" href="Graded.Heap.Typed.Substitution.html#2757" class="Function">substHeapRedTerm</a> <a id="2774" class="Symbol">:</a> <a id="2776" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="2778" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">⊢ʰ</a> <a id="2781" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2783" href="Graded.Heap.Typed.html#1015" class="Datatype Operator">∷</a> <a id="2785" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="2787" class="Symbol">→</a> <a id="2789" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">Γ</a> <a id="2791" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="2793" href="Graded.Heap.Typed.Substitution.html#938" class="Generalizable">t</a> <a id="2795" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="2797" href="Graded.Heap.Typed.Substitution.html#940" class="Generalizable">u</a> <a id="2799" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="2801" href="Graded.Heap.Typed.Substitution.html#942" class="Generalizable">A</a>
                   <a id="2822" class="Symbol">→</a> <a id="2824" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">Δ</a> <a id="2826" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="2828" href="Graded.Heap.Typed.Substitution.html#938" class="Generalizable">t</a> <a id="2830" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="2832" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2834" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a> <a id="2837" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="2839" href="Graded.Heap.Typed.Substitution.html#940" class="Generalizable">u</a> <a id="2841" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="2843" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2845" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a> <a id="2848" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="2850" href="Graded.Heap.Typed.Substitution.html#942" class="Generalizable">A</a> <a id="2852" href="Graded.Heap.Untyped.html#7956" class="Function Operator">[</a> <a id="2854" href="Graded.Heap.Typed.Substitution.html#907" class="Generalizable">H</a> <a id="2856" href="Graded.Heap.Untyped.html#7956" class="Function Operator">]ₕ</a>
  <a id="2861" href="Graded.Heap.Typed.Substitution.html#2757" class="Function">substHeapRedTerm</a> <a id="2878" href="Graded.Heap.Typed.Substitution.html#2878" class="Bound">⊢H</a> <a id="2881" href="Graded.Heap.Typed.Substitution.html#2881" class="Bound">d</a> <a id="2883" class="Symbol">=</a>
    <a id="2889" href="Definition.Typed.Consequences.Substitution.html#12240" class="Function">substitutionRedTerm</a> <a id="2909" href="Graded.Heap.Typed.Substitution.html#2881" class="Bound">d</a> <a id="2911" class="Symbol">(</a><a id="2912" href="Graded.Heap.Typed.Substitution.html#1107" class="Function">⊢ʰ→⊢ˢ</a> <a id="2918" href="Graded.Heap.Typed.Substitution.html#2878" class="Bound">⊢H</a><a id="2920" class="Symbol">)</a> <a id="2922" class="Symbol">(</a><a id="2923" href="Graded.Heap.Typed.Substitution.html#1486" class="Function">wfHeap</a> <a id="2930" href="Graded.Heap.Typed.Substitution.html#2878" class="Bound">⊢H</a><a id="2932" class="Symbol">)</a>
</pre></body></html>