<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Modality.Instances.Examples</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Some examples which are used to illustrate properties of modality</a>
<a id="143" class="Comment">-- instances</a>
<a id="156" class="Comment">------------------------------------------------------------------------</a>

<a id="230" class="Keyword">open</a> <a id="235" class="Keyword">import</a> <a id="242" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="273" class="Keyword">import</a> <a id="280" href="Graded.Modality.html" class="Module">Graded.Modality</a>

<a id="297" class="Keyword">module</a> <a id="304" href="Graded.Modality.Instances.Examples.html" class="Module">Graded.Modality.Instances.Examples</a>
  <a id="341" class="Symbol">{</a><a id="342" href="Graded.Modality.Instances.Examples.html#342" class="Bound">a</a><a id="343" class="Symbol">}</a> <a id="345" class="Symbol">{</a><a id="346" href="Graded.Modality.Instances.Examples.html#346" class="Bound">M</a> <a id="348" class="Symbol">:</a> <a id="350" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="354" href="Graded.Modality.Instances.Examples.html#342" class="Bound">a</a><a id="355" class="Symbol">}</a>
  <a id="359" class="Symbol">(</a><a id="360" class="Keyword">open</a> <a id="365" href="Graded.Modality.html" class="Module">Graded.Modality</a> <a id="381" href="Graded.Modality.Instances.Examples.html#346" class="Bound">M</a><a id="382" class="Symbol">)</a>
  <a id="386" class="Symbol">{</a><a id="387" href="Graded.Modality.Instances.Examples.html#387" class="Bound">𝕄</a> <a id="389" class="Symbol">:</a> <a id="391" href="Graded.Modality.html#9576" class="Record">Modality</a><a id="399" class="Symbol">}</a>
  <a id="403" class="Symbol">(</a><a id="404" class="Keyword">open</a> <a id="409" href="Graded.Modality.html#9576" class="Module">Modality</a> <a id="418" href="Graded.Modality.Instances.Examples.html#387" class="Bound">𝕄</a><a id="419" class="Symbol">)</a>
  <a id="423" class="Symbol">(</a><a id="424" href="Graded.Modality.Instances.Examples.html#424" class="Bound">R</a> <a id="426" class="Symbol">:</a> <a id="428" href="Definition.Typed.Restrictions.html#808" class="Record">Type-restrictions</a> <a id="446" href="Graded.Modality.Instances.Examples.html#387" class="Bound">𝕄</a><a id="447" class="Symbol">)</a>
  <a id="451" class="Symbol">(</a><a id="452" class="Keyword">open</a> <a id="457" href="Definition.Typed.Restrictions.html#808" class="Module">Type-restrictions</a> <a id="475" href="Graded.Modality.Instances.Examples.html#424" class="Bound">R</a><a id="476" class="Symbol">)</a>
  <a id="480" class="Comment">-- It is assumed that &quot;Π 𝟙 , 𝟘&quot; is allowed.</a>
  <a id="526" class="Symbol">(</a><a id="527" href="Graded.Modality.Instances.Examples.html#527" class="Bound">Π-𝟙-𝟘</a> <a id="533" class="Symbol">:</a> <a id="535" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="545" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="547" href="Graded.Modality.html#945" class="Function">𝟘</a><a id="548" class="Symbol">)</a>
  <a id="552" class="Keyword">where</a>

<a id="559" class="Keyword">open</a> <a id="564" class="Keyword">import</a> <a id="571" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="581" class="Keyword">open</a> <a id="586" class="Keyword">import</a> <a id="593" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="608" class="Keyword">open</a> <a id="613" class="Keyword">import</a> <a id="620" href="Tools.Nat.html" class="Module">Tools.Nat</a>
<a id="630" class="Keyword">import</a> <a id="637" href="Tools.Reasoning.PartialOrder.html" class="Module">Tools.Reasoning.PartialOrder</a>

<a id="667" class="Keyword">open</a> <a id="672" class="Keyword">import</a> <a id="679" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="696" href="Graded.Modality.Instances.Examples.html#424" class="Bound">R</a>
<a id="698" class="Keyword">open</a> <a id="703" class="Keyword">import</a> <a id="710" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="738" href="Graded.Modality.Instances.Examples.html#424" class="Bound">R</a>
<a id="740" class="Keyword">open</a> <a id="745" class="Keyword">import</a> <a id="752" href="Definition.Typed.Weakening.html" class="Module">Definition.Typed.Weakening</a> <a id="779" href="Graded.Modality.Instances.Examples.html#424" class="Bound">R</a>
<a id="781" class="Keyword">open</a> <a id="786" class="Keyword">import</a> <a id="793" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="812" href="Graded.Modality.Instances.Examples.html#346" class="Bound">M</a>

<a id="815" class="Keyword">private</a> <a id="823" class="Keyword">variable</a>
  <a id="834" href="Graded.Modality.Instances.Examples.html#834" class="Generalizable">n</a>   <a id="838" class="Symbol">:</a> <a id="840" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="846" href="Graded.Modality.Instances.Examples.html#846" class="Generalizable">Γ</a>   <a id="850" class="Symbol">:</a> <a id="852" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="856" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="861" class="Symbol">_</a>
  <a id="865" href="Graded.Modality.Instances.Examples.html#865" class="Generalizable">t</a> <a id="867" href="Graded.Modality.Instances.Examples.html#867" class="Generalizable">u</a> <a id="869" class="Symbol">:</a> <a id="871" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="876" class="Symbol">_</a>
  <a id="880" href="Graded.Modality.Instances.Examples.html#880" class="Generalizable">p</a>   <a id="884" class="Symbol">:</a> <a id="886" href="Graded.Modality.Instances.Examples.html#346" class="Bound">M</a>

<a id="889" class="Keyword">private</a>

  <a id="900" class="Comment">-- Some lemmas used below.</a>

  <a id="⊢ℕ"></a><a id="930" href="Graded.Modality.Instances.Examples.html#930" class="Function">⊢ℕ</a> <a id="933" class="Symbol">:</a> <a id="935" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="937" class="InductiveConstructor">ε</a> <a id="939" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="941" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
  <a id="945" href="Graded.Modality.Instances.Examples.html#930" class="Function">⊢ℕ</a>  <a id="949" class="Symbol">=</a> <a id="951" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="953" href="Definition.Typed.html#1555" class="InductiveConstructor">ℕⱼ</a> <a id="956" href="Definition.Typed.html#1198" class="InductiveConstructor">ε</a>

  <a id="⊢ℕℕ"></a><a id="961" href="Graded.Modality.Instances.Examples.html#961" class="Function">⊢ℕℕ</a> <a id="965" class="Symbol">:</a> <a id="967" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="969" class="InductiveConstructor">ε</a> <a id="971" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="973" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="975" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="977" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
  <a id="981" href="Graded.Modality.Instances.Examples.html#961" class="Function">⊢ℕℕ</a> <a id="985" class="Symbol">=</a> <a id="987" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="989" href="Definition.Typed.html#1555" class="InductiveConstructor">ℕⱼ</a> <a id="992" href="Graded.Modality.Instances.Examples.html#930" class="Function">⊢ℕ</a>

  <a id="⊢ℕℕℕ"></a><a id="998" href="Graded.Modality.Instances.Examples.html#998" class="Function">⊢ℕℕℕ</a> <a id="1003" class="Symbol">:</a> <a id="1005" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="1007" class="InductiveConstructor">ε</a> <a id="1009" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="1011" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="1013" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="1015" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="1017" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="1019" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
  <a id="1023" href="Graded.Modality.Instances.Examples.html#998" class="Function">⊢ℕℕℕ</a> <a id="1028" class="Symbol">=</a> <a id="1030" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="1032" href="Definition.Typed.html#1555" class="InductiveConstructor">ℕⱼ</a> <a id="1035" href="Graded.Modality.Instances.Examples.html#961" class="Function">⊢ℕℕ</a>

<a id="1040" class="Comment">-- A program that takes a natural number and adds it to itself:</a>
<a id="1104" class="Comment">-- λ n. n + n. This program should presumably not be seen as linear,</a>
<a id="1173" class="Comment">-- because the variable &quot;n&quot; is used twice.</a>

<a id="double"></a><a id="1217" href="Graded.Modality.Instances.Examples.html#1217" class="Function">double</a> <a id="1224" class="Symbol">:</a> <a id="1226" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1231" class="Number">0</a>
<a id="1233" href="Graded.Modality.Instances.Examples.html#1217" class="Function">double</a> <a id="1240" class="Symbol">=</a> <a id="1242" href="Definition.Untyped.html#1613" class="InductiveConstructor">lam</a> <a id="1246" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="1248" class="Symbol">(</a><a id="1249" href="Definition.Untyped.html#1991" class="InductiveConstructor">natrec</a> <a id="1256" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="1258" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="1260" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="1262" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="1264" class="Symbol">(</a><a id="1265" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="1269" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="1271" class="Symbol">)</a> <a id="1273" class="Symbol">(</a><a id="1274" href="Definition.Untyped.html#1961" class="InductiveConstructor">suc</a> <a id="1278" class="Symbol">(</a><a id="1279" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="1283" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="1285" class="Symbol">))</a> <a id="1288" class="Symbol">(</a><a id="1289" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="1293" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="1295" class="Symbol">))</a>

<a id="1299" class="Comment">-- The term double is well-typed.</a>
<a id="1333" class="Comment">--</a>
<a id="1336" class="Comment">-- Note that the term can be given a linear type.</a>
<a id="1386" class="Comment">--</a>
<a id="1389" class="Comment">-- With a certain &quot;linearity&quot; modality the term is also</a>
<a id="1445" class="Comment">-- well-resourced, see</a>
<a id="1468" class="Comment">-- Graded.Modality.Instances.Linearity.Bad.▸double. However, with</a>
<a id="1534" class="Comment">-- another linearity modality the term is not well-resourced, see</a>
<a id="1600" class="Comment">-- Graded.Modality.Instances.Linearity.Good.¬▸double.</a>

<a id="⊢double"></a><a id="1655" href="Graded.Modality.Instances.Examples.html#1655" class="Function">⊢double</a> <a id="1663" class="Symbol">:</a> <a id="1665" class="InductiveConstructor">ε</a> <a id="1667" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="1669" href="Graded.Modality.Instances.Examples.html#1217" class="Function">double</a> <a id="1676" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="1678" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="1680" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="1682" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="1684" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="1686" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="1688" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="1690" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="1692" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
<a id="1694" href="Graded.Modality.Instances.Examples.html#1655" class="Function">⊢double</a> <a id="1702" class="Symbol">=</a>
  <a id="1706" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="1712" href="Graded.Modality.Instances.Examples.html#527" class="Bound">Π-𝟙-𝟘</a> <a id="1718" href="Function.Base.html#1974" class="Function Operator">$</a>
  <a id="1722" href="Definition.Typed.html#3563" class="InductiveConstructor">natrecⱼ</a> <a id="1730" class="Symbol">(</a><a id="1731" href="Definition.Typed.html#1845" class="InductiveConstructor">var</a> <a id="1735" href="Graded.Modality.Instances.Examples.html#930" class="Function">⊢ℕ</a> <a id="1738" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="1742" class="Symbol">)</a>
    <a id="1748" class="Symbol">(</a><a id="1749" href="Definition.Typed.html#3481" class="InductiveConstructor">sucⱼ</a> <a id="1754" class="Symbol">(</a><a id="1755" href="Definition.Typed.html#1845" class="InductiveConstructor">var</a> <a id="1759" href="Graded.Modality.Instances.Examples.html#998" class="Function">⊢ℕℕℕ</a> <a id="1764" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="1768" class="Symbol">))</a>
    <a id="1775" class="Symbol">(</a><a id="1776" href="Definition.Typed.html#1845" class="InductiveConstructor">var</a> <a id="1780" href="Graded.Modality.Instances.Examples.html#930" class="Function">⊢ℕ</a> <a id="1783" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="1787" class="Symbol">)</a>

<a id="1790" class="Comment">-- A term used to define plus</a>

<a id="plus′"></a><a id="1821" href="Graded.Modality.Instances.Examples.html#1821" class="Function">plus′</a> <a id="1827" class="Symbol">:</a> <a id="1829" class="Symbol">(</a><a id="1830" href="Graded.Modality.Instances.Examples.html#1830" class="Bound">t</a> <a id="1832" href="Graded.Modality.Instances.Examples.html#1832" class="Bound">u</a> <a id="1834" class="Symbol">:</a> <a id="1836" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1841" href="Graded.Modality.Instances.Examples.html#834" class="Generalizable">n</a><a id="1842" class="Symbol">)</a> <a id="1844" class="Symbol">→</a> <a id="1846" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1851" href="Graded.Modality.Instances.Examples.html#834" class="Generalizable">n</a>
<a id="1853" href="Graded.Modality.Instances.Examples.html#1821" class="Function">plus′</a> <a id="1859" href="Graded.Modality.Instances.Examples.html#1859" class="Bound">t</a> <a id="1861" href="Graded.Modality.Instances.Examples.html#1861" class="Bound">u</a> <a id="1863" class="Symbol">=</a> <a id="1865" href="Definition.Untyped.html#1991" class="InductiveConstructor">natrec</a> <a id="1872" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="1874" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="1876" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="1878" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="1880" href="Graded.Modality.Instances.Examples.html#1859" class="Bound">t</a> <a id="1882" class="Symbol">(</a><a id="1883" href="Definition.Untyped.html#1961" class="InductiveConstructor">suc</a> <a id="1887" class="Symbol">(</a><a id="1888" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="1892" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="1894" class="Symbol">))</a> <a id="1897" href="Graded.Modality.Instances.Examples.html#1861" class="Bound">u</a>

<a id="1900" class="Comment">-- A program that takes two natural numbers and adds them:</a>
<a id="1959" class="Comment">-- λ m n. m + n. It might make sense to see this program as linear in</a>
<a id="2029" class="Comment">-- both arguments.</a>

<a id="plus"></a><a id="2049" href="Graded.Modality.Instances.Examples.html#2049" class="Function">plus</a> <a id="2054" class="Symbol">:</a> <a id="2056" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2061" class="Number">0</a>
<a id="2063" href="Graded.Modality.Instances.Examples.html#2049" class="Function">plus</a> <a id="2068" class="Symbol">=</a> <a id="2070" href="Definition.Untyped.html#1613" class="InductiveConstructor">lam</a> <a id="2074" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="2076" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2078" href="Definition.Untyped.html#1613" class="InductiveConstructor">lam</a> <a id="2082" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="2084" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2086" href="Graded.Modality.Instances.Examples.html#1821" class="Function">plus′</a> <a id="2092" class="Symbol">(</a><a id="2093" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="2097" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="2099" class="Symbol">)</a> <a id="2101" class="Symbol">(</a><a id="2102" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="2106" href="Tools.Fin.html#439" class="Function">x1</a><a id="2108" class="Symbol">)</a>

<a id="2111" class="Keyword">opaque</a>

  <a id="2121" class="Comment">-- A typing rule for plus′.</a>

  <a id="⊢plus′"></a><a id="2152" href="Graded.Modality.Instances.Examples.html#2152" class="Function">⊢plus′</a> <a id="2159" class="Symbol">:</a> <a id="2161" href="Graded.Modality.Instances.Examples.html#846" class="Generalizable">Γ</a> <a id="2163" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2165" href="Graded.Modality.Instances.Examples.html#865" class="Generalizable">t</a> <a id="2167" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2169" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="2171" class="Symbol">→</a> <a id="2173" href="Graded.Modality.Instances.Examples.html#846" class="Generalizable">Γ</a> <a id="2175" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2177" href="Graded.Modality.Instances.Examples.html#867" class="Generalizable">u</a> <a id="2179" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2181" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="2183" class="Symbol">→</a> <a id="2185" href="Graded.Modality.Instances.Examples.html#846" class="Generalizable">Γ</a> <a id="2187" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2189" href="Graded.Modality.Instances.Examples.html#1821" class="Function">plus′</a> <a id="2195" href="Graded.Modality.Instances.Examples.html#865" class="Generalizable">t</a> <a id="2197" href="Graded.Modality.Instances.Examples.html#867" class="Generalizable">u</a> <a id="2199" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2201" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
  <a id="2205" href="Graded.Modality.Instances.Examples.html#2152" class="Function">⊢plus′</a> <a id="2212" href="Graded.Modality.Instances.Examples.html#2212" class="Bound">⊢t</a> <a id="2215" href="Graded.Modality.Instances.Examples.html#2215" class="Bound">⊢u</a> <a id="2218" class="Symbol">=</a> <a id="2220" href="Definition.Typed.html#3563" class="InductiveConstructor">natrecⱼ</a> <a id="2228" href="Graded.Modality.Instances.Examples.html#2212" class="Bound">⊢t</a> <a id="2231" class="Symbol">(</a><a id="2232" href="Definition.Typed.html#3481" class="InductiveConstructor">sucⱼ</a> <a id="2237" class="Symbol">(</a><a id="2238" href="Definition.Typed.Properties.Admissible.Var.html#599" class="Function">var₀</a> <a id="2243" class="Symbol">(</a><a id="2244" href="Definition.Typed.html#1555" class="InductiveConstructor">ℕⱼ</a> <a id="2247" class="Symbol">(</a><a id="2248" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="2250" href="Definition.Typed.html#1555" class="InductiveConstructor">ℕⱼ</a> <a id="2253" class="Symbol">(</a><a id="2254" href="Definition.Typed.Properties.Well-formed.html#10731" class="Function">wfTerm</a> <a id="2261" href="Graded.Modality.Instances.Examples.html#2212" class="Bound">⊢t</a><a id="2263" class="Symbol">)))))</a> <a id="2269" href="Graded.Modality.Instances.Examples.html#2215" class="Bound">⊢u</a>

<a id="2273" class="Comment">-- The term plus is well-typed.</a>
<a id="2305" class="Comment">--</a>
<a id="2308" class="Comment">-- With a certain linearity modality the term is also well-resourced,</a>
<a id="2378" class="Comment">-- see Graded.Modality.Instances.Linearity.Good.▸plus. However, with</a>
<a id="2447" class="Comment">-- another &quot;linearity&quot; modality the term is not well-resourced, see</a>
<a id="2515" class="Comment">-- Graded.Modality.Instances.Linearity.Bad.¬▸plus.</a>

<a id="⊢plus"></a><a id="2567" href="Graded.Modality.Instances.Examples.html#2567" class="Function">⊢plus</a> <a id="2573" class="Symbol">:</a> <a id="2575" class="InductiveConstructor">ε</a> <a id="2577" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2579" href="Graded.Modality.Instances.Examples.html#2049" class="Function">plus</a> <a id="2584" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2586" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="2588" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="2590" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="2592" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="2594" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="2596" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="2598" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="2600" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="2602" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="2604" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="2606" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="2608" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="2610" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="2612" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="2614" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
<a id="2616" href="Graded.Modality.Instances.Examples.html#2567" class="Function">⊢plus</a> <a id="2622" class="Symbol">=</a>
  <a id="2626" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="2632" href="Graded.Modality.Instances.Examples.html#527" class="Bound">Π-𝟙-𝟘</a> <a id="2638" href="Function.Base.html#1974" class="Function Operator">$</a>
  <a id="2642" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="2648" href="Graded.Modality.Instances.Examples.html#527" class="Bound">Π-𝟙-𝟘</a> <a id="2654" href="Function.Base.html#1974" class="Function Operator">$</a>
  <a id="2658" href="Graded.Modality.Instances.Examples.html#2152" class="Function">⊢plus′</a> <a id="2665" class="Symbol">(</a><a id="2666" href="Definition.Typed.html#1845" class="InductiveConstructor">var</a> <a id="2670" href="Graded.Modality.Instances.Examples.html#961" class="Function">⊢ℕℕ</a> <a id="2674" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="2678" class="Symbol">)</a> <a id="2680" class="Symbol">(</a><a id="2681" href="Definition.Typed.html#1845" class="InductiveConstructor">var</a> <a id="2685" href="Graded.Modality.Instances.Examples.html#961" class="Function">⊢ℕℕ</a> <a id="2689" class="Symbol">(</a><a id="2690" href="Definition.Typed.html#1080" class="InductiveConstructor">there</a> <a id="2696" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="2700" class="Symbol">))</a>

<a id="2704" class="Keyword">opaque</a>

  <a id="2714" class="Comment">-- A term used to define f below.</a>

  <a id="f′"></a><a id="2751" href="Graded.Modality.Instances.Examples.html#2751" class="Function">f′</a> <a id="2754" class="Symbol">:</a> <a id="2756" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2761" href="Graded.Modality.Instances.Examples.html#834" class="Generalizable">n</a> <a id="2763" class="Symbol">→</a> <a id="2765" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2770" href="Graded.Modality.Instances.Examples.html#834" class="Generalizable">n</a> <a id="2772" class="Symbol">→</a> <a id="2774" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2779" href="Graded.Modality.Instances.Examples.html#834" class="Generalizable">n</a>
  <a id="2783" href="Graded.Modality.Instances.Examples.html#2751" class="Function">f′</a> <a id="2786" href="Graded.Modality.Instances.Examples.html#2786" class="Bound">t</a> <a id="2788" href="Graded.Modality.Instances.Examples.html#2788" class="Bound">u</a> <a id="2790" class="Symbol">=</a> <a id="2792" href="Definition.Untyped.html#1991" class="InductiveConstructor">natrec</a> <a id="2799" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="2801" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="2803" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="2805" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="2807" href="Graded.Modality.Instances.Examples.html#2786" class="Bound">t</a> <a id="2809" class="Symbol">(</a><a id="2810" href="Graded.Modality.Instances.Examples.html#1821" class="Function">plus′</a> <a id="2816" class="Symbol">(</a><a id="2817" href="Definition.Untyped.html#10994" class="Function">wk₂</a> <a id="2821" href="Graded.Modality.Instances.Examples.html#2786" class="Bound">t</a><a id="2822" class="Symbol">)</a> <a id="2824" class="Symbol">(</a><a id="2825" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="2829" href="Tools.Fin.html#439" class="Function">x1</a><a id="2831" class="Symbol">))</a> <a id="2834" href="Graded.Modality.Instances.Examples.html#2788" class="Bound">u</a>

<a id="2837" class="Keyword">opaque</a>

  <a id="2847" class="Comment">-- An implementation of something like the following Agda code:</a>
  <a id="2913" class="Comment">--</a>
  <a id="2918" class="Comment">--   f : ℕ → ℕ → ℕ</a>
  <a id="2939" class="Comment">--   f m zero    = m</a>
  <a id="2962" class="Comment">--   f m (suc n) = m + n</a>

  <a id="f"></a><a id="2990" href="Graded.Modality.Instances.Examples.html#2990" class="Function">f</a> <a id="2992" class="Symbol">:</a> <a id="2994" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2999" class="Number">0</a>
  <a id="3003" href="Graded.Modality.Instances.Examples.html#2990" class="Function">f</a> <a id="3005" class="Symbol">=</a> <a id="3007" href="Definition.Untyped.html#1613" class="InductiveConstructor">lam</a> <a id="3011" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="3013" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3015" href="Definition.Untyped.html#1613" class="InductiveConstructor">lam</a> <a id="3019" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="3021" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3023" href="Graded.Modality.Instances.Examples.html#2751" class="Function">f′</a> <a id="3026" class="Symbol">(</a><a id="3027" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="3031" href="Tools.Fin.html#439" class="Function">x1</a><a id="3033" class="Symbol">)</a> <a id="3035" class="Symbol">(</a><a id="3036" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="3040" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="3042" class="Symbol">)</a>

<a id="3045" class="Keyword">opaque</a>
  <a id="3054" class="Keyword">unfolding</a> <a id="3064" href="Graded.Modality.Instances.Examples.html#2751" class="Function">f′</a>

  <a id="3070" class="Comment">-- A typing rule for f′.</a>

  <a id="⊢f′"></a><a id="3098" href="Graded.Modality.Instances.Examples.html#3098" class="Function">⊢f′</a> <a id="3102" class="Symbol">:</a> <a id="3104" href="Graded.Modality.Instances.Examples.html#846" class="Generalizable">Γ</a> <a id="3106" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3108" href="Graded.Modality.Instances.Examples.html#865" class="Generalizable">t</a> <a id="3110" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3112" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="3114" class="Symbol">→</a> <a id="3116" href="Graded.Modality.Instances.Examples.html#846" class="Generalizable">Γ</a> <a id="3118" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3120" href="Graded.Modality.Instances.Examples.html#867" class="Generalizable">u</a> <a id="3122" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3124" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="3126" class="Symbol">→</a> <a id="3128" href="Graded.Modality.Instances.Examples.html#846" class="Generalizable">Γ</a> <a id="3130" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3132" href="Graded.Modality.Instances.Examples.html#2751" class="Function">f′</a> <a id="3135" href="Graded.Modality.Instances.Examples.html#865" class="Generalizable">t</a> <a id="3137" href="Graded.Modality.Instances.Examples.html#867" class="Generalizable">u</a> <a id="3139" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3141" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
  <a id="3145" href="Graded.Modality.Instances.Examples.html#3098" class="Function">⊢f′</a> <a id="3149" href="Graded.Modality.Instances.Examples.html#3149" class="Bound">⊢t</a> <a id="3152" href="Graded.Modality.Instances.Examples.html#3152" class="Bound">⊢u</a> <a id="3155" class="Symbol">=</a>
    <a id="3161" class="Keyword">let</a> <a id="3165" href="Graded.Modality.Instances.Examples.html#3165" class="Bound">⊢ℕ</a> <a id="3168" class="Symbol">=</a> <a id="3170" href="Definition.Typed.html#1555" class="InductiveConstructor">ℕⱼ</a> <a id="3173" class="Symbol">(</a><a id="3174" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="3176" href="Definition.Typed.html#1555" class="InductiveConstructor">ℕⱼ</a> <a id="3179" class="Symbol">(</a><a id="3180" href="Definition.Typed.Properties.Well-formed.html#10731" class="Function">wfTerm</a> <a id="3187" href="Graded.Modality.Instances.Examples.html#3149" class="Bound">⊢t</a><a id="3189" class="Symbol">))</a> <a id="3192" class="Keyword">in</a>
    <a id="3199" href="Definition.Typed.html#3563" class="InductiveConstructor">natrecⱼ</a> <a id="3207" href="Graded.Modality.Instances.Examples.html#3149" class="Bound">⊢t</a>
      <a id="3216" class="Symbol">(</a><a id="3217" href="Graded.Modality.Instances.Examples.html#2152" class="Function">⊢plus′</a> <a id="3224" class="Symbol">(</a><a id="3225" href="Definition.Typed.Weakening.html#26854" class="Function">wkTerm</a> <a id="3232" class="Symbol">(</a><a id="3233" href="Definition.Typed.Weakening.html#2529" class="Function">∷⊇→∷ʷ⊇</a> <a id="3240" class="Symbol">(</a><a id="3241" href="Definition.Typed.Weakening.html#1395" class="InductiveConstructor">step</a> <a id="3246" class="Symbol">(</a><a id="3247" href="Definition.Typed.Weakening.html#1395" class="InductiveConstructor">step</a> <a id="3252" href="Definition.Typed.Weakening.html#1348" class="InductiveConstructor">id</a><a id="3254" class="Symbol">))</a> <a id="3257" class="Symbol">(</a><a id="3258" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="3260" href="Graded.Modality.Instances.Examples.html#3165" class="Bound">⊢ℕ</a><a id="3262" class="Symbol">))</a> <a id="3265" href="Graded.Modality.Instances.Examples.html#3149" class="Bound">⊢t</a><a id="3267" class="Symbol">)</a> <a id="3269" class="Symbol">(</a><a id="3270" href="Definition.Typed.Properties.Admissible.Var.html#712" class="Function">var₁</a> <a id="3275" href="Graded.Modality.Instances.Examples.html#3165" class="Bound">⊢ℕ</a><a id="3277" class="Symbol">))</a> <a id="3280" href="Graded.Modality.Instances.Examples.html#3152" class="Bound">⊢u</a>

<a id="3284" class="Keyword">opaque</a>
  <a id="3293" class="Keyword">unfolding</a> <a id="3303" href="Graded.Modality.Instances.Examples.html#2990" class="Function">f</a>

  <a id="3308" class="Comment">-- A typing rule for f.</a>

  <a id="⊢f"></a><a id="3335" href="Graded.Modality.Instances.Examples.html#3335" class="Function">⊢f</a> <a id="3338" class="Symbol">:</a>
    <a id="3344" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="3354" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="3356" href="Graded.Modality.Instances.Examples.html#880" class="Generalizable">p</a> <a id="3358" class="Symbol">→</a>
    <a id="3364" class="InductiveConstructor">ε</a> <a id="3366" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3368" href="Graded.Modality.Instances.Examples.html#2990" class="Function">f</a> <a id="3370" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3372" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="3374" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="3376" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="3378" href="Graded.Modality.Instances.Examples.html#880" class="Generalizable">p</a> <a id="3380" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="3382" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="3384" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="3386" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="3388" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="3390" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="3392" href="Graded.Modality.Instances.Examples.html#880" class="Generalizable">p</a> <a id="3394" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="3396" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="3398" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="3400" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
  <a id="3404" href="Graded.Modality.Instances.Examples.html#3335" class="Function">⊢f</a> <a id="3407" href="Graded.Modality.Instances.Examples.html#3407" class="Bound">ok</a> <a id="3410" class="Symbol">=</a>
    <a id="3416" class="Keyword">let</a> <a id="3420" href="Graded.Modality.Instances.Examples.html#3420" class="Bound">⊢ℕ</a> <a id="3423" class="Symbol">=</a> <a id="3425" href="Definition.Typed.html#1555" class="InductiveConstructor">ℕⱼ</a> <a id="3428" href="Graded.Modality.Instances.Examples.html#930" class="Function">⊢ℕ</a> <a id="3431" class="Keyword">in</a>
    <a id="3438" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="3444" href="Graded.Modality.Instances.Examples.html#3407" class="Bound">ok</a> <a id="3447" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="3453" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="3459" href="Graded.Modality.Instances.Examples.html#3407" class="Bound">ok</a> <a id="3462" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="3468" href="Graded.Modality.Instances.Examples.html#3098" class="Function">⊢f′</a> <a id="3472" class="Symbol">(</a><a id="3473" href="Definition.Typed.Properties.Admissible.Var.html#712" class="Function">var₁</a> <a id="3478" href="Graded.Modality.Instances.Examples.html#3420" class="Bound">⊢ℕ</a><a id="3480" class="Symbol">)</a> <a id="3482" class="Symbol">(</a><a id="3483" href="Definition.Typed.Properties.Admissible.Var.html#599" class="Function">var₀</a> <a id="3488" href="Graded.Modality.Instances.Examples.html#3420" class="Bound">⊢ℕ</a><a id="3490" class="Symbol">)</a>
</pre></body></html>