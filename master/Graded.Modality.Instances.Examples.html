<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Modality.Instances.Examples</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Some examples which are used to illustrate properties of modality</a>
<a id="143" class="Comment">-- instances</a>
<a id="156" class="Comment">------------------------------------------------------------------------</a>

<a id="230" class="Keyword">open</a> <a id="235" class="Keyword">import</a> <a id="242" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="273" class="Keyword">import</a> <a id="280" href="Graded.Modality.html" class="Module">Graded.Modality</a>

<a id="297" class="Keyword">module</a> <a id="304" href="Graded.Modality.Instances.Examples.html" class="Module">Graded.Modality.Instances.Examples</a>
  <a id="341" class="Symbol">{</a><a id="342" href="Graded.Modality.Instances.Examples.html#342" class="Bound">a</a><a id="343" class="Symbol">}</a> <a id="345" class="Symbol">{</a><a id="346" href="Graded.Modality.Instances.Examples.html#346" class="Bound">M</a> <a id="348" class="Symbol">:</a> <a id="350" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="354" href="Graded.Modality.Instances.Examples.html#342" class="Bound">a</a><a id="355" class="Symbol">}</a>
  <a id="359" class="Symbol">(</a><a id="360" class="Keyword">open</a> <a id="365" href="Graded.Modality.html" class="Module">Graded.Modality</a> <a id="381" href="Graded.Modality.Instances.Examples.html#346" class="Bound">M</a><a id="382" class="Symbol">)</a>
  <a id="386" class="Symbol">{</a><a id="387" href="Graded.Modality.Instances.Examples.html#387" class="Bound">𝕄</a> <a id="389" class="Symbol">:</a> <a id="391" href="Graded.Modality.html#9626" class="Record">Modality</a><a id="399" class="Symbol">}</a>
  <a id="403" class="Symbol">(</a><a id="404" class="Keyword">open</a> <a id="409" href="Graded.Modality.html#9626" class="Module">Modality</a> <a id="418" href="Graded.Modality.Instances.Examples.html#387" class="Bound">𝕄</a><a id="419" class="Symbol">)</a>
  <a id="423" class="Symbol">(</a><a id="424" href="Graded.Modality.Instances.Examples.html#424" class="Bound">R</a> <a id="426" class="Symbol">:</a> <a id="428" href="Definition.Typed.Restrictions.html#831" class="Record">Type-restrictions</a> <a id="446" href="Graded.Modality.Instances.Examples.html#387" class="Bound">𝕄</a><a id="447" class="Symbol">)</a>
  <a id="451" class="Symbol">(</a><a id="452" class="Keyword">open</a> <a id="457" href="Definition.Typed.Restrictions.html#831" class="Module">Type-restrictions</a> <a id="475" href="Graded.Modality.Instances.Examples.html#424" class="Bound">R</a><a id="476" class="Symbol">)</a>
  <a id="480" class="Comment">-- It is assumed that &quot;Π 𝟙 , 𝟘&quot; is allowed.</a>
  <a id="526" class="Symbol">(</a><a id="527" href="Graded.Modality.Instances.Examples.html#527" class="Bound">Π-𝟙-𝟘</a> <a id="533" class="Symbol">:</a> <a id="535" href="Definition.Typed.Restrictions.html#1583" class="Function">Π-allowed</a> <a id="545" href="Graded.Modality.html#997" class="Function">𝟙</a> <a id="547" href="Graded.Modality.html#995" class="Function">𝟘</a><a id="548" class="Symbol">)</a>
  <a id="552" class="Keyword">where</a>

<a id="559" class="Keyword">open</a> <a id="564" class="Keyword">import</a> <a id="571" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="581" class="Keyword">open</a> <a id="586" class="Keyword">import</a> <a id="593" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="608" class="Keyword">import</a> <a id="615" href="Tools.Reasoning.PartialOrder.html" class="Module">Tools.Reasoning.PartialOrder</a>

<a id="645" class="Keyword">open</a> <a id="650" class="Keyword">import</a> <a id="657" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="674" href="Graded.Modality.Instances.Examples.html#424" class="Bound">R</a>
<a id="676" class="Keyword">open</a> <a id="681" class="Keyword">import</a> <a id="688" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="716" href="Graded.Modality.Instances.Examples.html#424" class="Bound">R</a>
<a id="718" class="Keyword">open</a> <a id="723" class="Keyword">import</a> <a id="730" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="749" href="Graded.Modality.Instances.Examples.html#346" class="Bound">M</a>

<a id="752" class="Keyword">private</a>

  <a id="763" class="Comment">-- Some lemmas used below.</a>

  <a id="⊢ℕ"></a><a id="793" href="Graded.Modality.Instances.Examples.html#793" class="Function">⊢ℕ</a> <a id="796" class="Symbol">:</a> <a id="798" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="800" class="InductiveConstructor">ε</a> <a id="802" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="804" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
  <a id="808" href="Graded.Modality.Instances.Examples.html#793" class="Function">⊢ℕ</a>  <a id="812" class="Symbol">=</a> <a id="814" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="816" href="Definition.Typed.html#1337" class="InductiveConstructor">ℕⱼ</a> <a id="819" href="Definition.Typed.html#1198" class="InductiveConstructor">ε</a>

  <a id="⊢ℕℕ"></a><a id="824" href="Graded.Modality.Instances.Examples.html#824" class="Function">⊢ℕℕ</a> <a id="828" class="Symbol">:</a> <a id="830" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="832" class="InductiveConstructor">ε</a> <a id="834" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="836" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="838" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="840" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
  <a id="844" href="Graded.Modality.Instances.Examples.html#824" class="Function">⊢ℕℕ</a> <a id="848" class="Symbol">=</a> <a id="850" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="852" href="Definition.Typed.html#1337" class="InductiveConstructor">ℕⱼ</a> <a id="855" href="Graded.Modality.Instances.Examples.html#793" class="Function">⊢ℕ</a>

  <a id="⊢ℕℕℕ"></a><a id="861" href="Graded.Modality.Instances.Examples.html#861" class="Function">⊢ℕℕℕ</a> <a id="866" class="Symbol">:</a> <a id="868" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="870" class="InductiveConstructor">ε</a> <a id="872" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="874" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="876" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="878" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="880" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="882" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
  <a id="886" href="Graded.Modality.Instances.Examples.html#861" class="Function">⊢ℕℕℕ</a> <a id="891" class="Symbol">=</a> <a id="893" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="895" href="Definition.Typed.html#1337" class="InductiveConstructor">ℕⱼ</a> <a id="898" href="Graded.Modality.Instances.Examples.html#824" class="Function">⊢ℕℕ</a>

  <a id="⊢ℕℕℕℕ"></a><a id="905" href="Graded.Modality.Instances.Examples.html#905" class="Function">⊢ℕℕℕℕ</a> <a id="911" class="Symbol">:</a> <a id="913" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="915" class="InductiveConstructor">ε</a> <a id="917" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="919" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="921" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="923" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="925" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="927" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="929" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="931" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
  <a id="935" href="Graded.Modality.Instances.Examples.html#905" class="Function">⊢ℕℕℕℕ</a> <a id="941" class="Symbol">=</a> <a id="943" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="945" href="Definition.Typed.html#1337" class="InductiveConstructor">ℕⱼ</a> <a id="948" href="Graded.Modality.Instances.Examples.html#861" class="Function">⊢ℕℕℕ</a>

<a id="954" class="Comment">-- A program that takes a natural number and adds it to itself:</a>
<a id="1018" class="Comment">-- λ n. n + n. This program should presumably not be seen as linear,</a>
<a id="1087" class="Comment">-- because the variable &quot;n&quot; is used twice.</a>

<a id="double"></a><a id="1131" href="Graded.Modality.Instances.Examples.html#1131" class="Function">double</a> <a id="1138" class="Symbol">:</a> <a id="1140" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1145" class="Number">0</a>
<a id="1147" href="Graded.Modality.Instances.Examples.html#1131" class="Function">double</a> <a id="1154" class="Symbol">=</a> <a id="1156" href="Definition.Untyped.html#1370" class="InductiveConstructor">lam</a> <a id="1160" href="Graded.Modality.html#997" class="Function">𝟙</a> <a id="1162" class="Symbol">(</a><a id="1163" href="Definition.Untyped.html#1748" class="InductiveConstructor">natrec</a> <a id="1170" href="Graded.Modality.html#995" class="Function">𝟘</a> <a id="1172" href="Graded.Modality.html#995" class="Function">𝟘</a> <a id="1174" href="Graded.Modality.html#997" class="Function">𝟙</a> <a id="1176" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="1178" class="Symbol">(</a><a id="1179" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="1183" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="1185" class="Symbol">)</a> <a id="1187" class="Symbol">(</a><a id="1188" href="Definition.Untyped.html#1718" class="InductiveConstructor">suc</a> <a id="1192" class="Symbol">(</a><a id="1193" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="1197" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="1199" class="Symbol">))</a> <a id="1202" class="Symbol">(</a><a id="1203" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="1207" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="1209" class="Symbol">))</a>

<a id="1213" class="Comment">-- The term double is well-typed.</a>
<a id="1247" class="Comment">--</a>
<a id="1250" class="Comment">-- Note that the term can be given a linear type.</a>
<a id="1300" class="Comment">--</a>
<a id="1303" class="Comment">-- With a certain &quot;linearity&quot; modality the term is also</a>
<a id="1359" class="Comment">-- well-resourced, see</a>
<a id="1382" class="Comment">-- Graded.Modality.Instances.Linearity.Bad.▸double. However, with</a>
<a id="1448" class="Comment">-- another linearity modality the term is not well-resourced, see</a>
<a id="1514" class="Comment">-- Graded.Modality.Instances.Linearity.Good.¬▸double.</a>

<a id="⊢double"></a><a id="1569" href="Graded.Modality.Instances.Examples.html#1569" class="Function">⊢double</a> <a id="1577" class="Symbol">:</a> <a id="1579" class="InductiveConstructor">ε</a> <a id="1581" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="1583" href="Graded.Modality.Instances.Examples.html#1131" class="Function">double</a> <a id="1590" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="1592" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="1594" href="Graded.Modality.html#997" class="Function">𝟙</a> <a id="1596" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="1598" href="Graded.Modality.html#995" class="Function">𝟘</a> <a id="1600" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="1602" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="1604" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="1606" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
<a id="1608" href="Graded.Modality.Instances.Examples.html#1569" class="Function">⊢double</a> <a id="1616" class="Symbol">=</a>
  <a id="1620" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="1626" href="Graded.Modality.Instances.Examples.html#527" class="Bound">Π-𝟙-𝟘</a> <a id="1632" href="Function.Base.html#1974" class="Function Operator">$</a>
  <a id="1636" href="Definition.Typed.html#3249" class="InductiveConstructor">natrecⱼ</a> <a id="1644" class="Symbol">(</a><a id="1645" href="Definition.Typed.html#2177" class="InductiveConstructor">var</a> <a id="1649" href="Graded.Modality.Instances.Examples.html#793" class="Function">⊢ℕ</a> <a id="1652" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="1656" class="Symbol">)</a>
    <a id="1662" class="Symbol">(</a><a id="1663" href="Definition.Typed.html#3167" class="InductiveConstructor">sucⱼ</a> <a id="1668" class="Symbol">(</a><a id="1669" href="Definition.Typed.html#2177" class="InductiveConstructor">var</a> <a id="1673" href="Graded.Modality.Instances.Examples.html#861" class="Function">⊢ℕℕℕ</a> <a id="1678" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="1682" class="Symbol">))</a>
    <a id="1689" class="Symbol">(</a><a id="1690" href="Definition.Typed.html#2177" class="InductiveConstructor">var</a> <a id="1694" href="Graded.Modality.Instances.Examples.html#793" class="Function">⊢ℕ</a> <a id="1697" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="1701" class="Symbol">)</a>

<a id="1704" class="Comment">-- A program that takes two natural numbers and adds them:</a>
<a id="1763" class="Comment">-- λ m n. m + n. It might make sense to see this program as linear in</a>
<a id="1833" class="Comment">-- both arguments.</a>

<a id="plus"></a><a id="1853" href="Graded.Modality.Instances.Examples.html#1853" class="Function">plus</a> <a id="1858" class="Symbol">:</a> <a id="1860" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1865" class="Number">0</a>
<a id="1867" href="Graded.Modality.Instances.Examples.html#1853" class="Function">plus</a> <a id="1872" class="Symbol">=</a> <a id="1874" href="Definition.Untyped.html#1370" class="InductiveConstructor">lam</a> <a id="1878" href="Graded.Modality.html#997" class="Function">𝟙</a> <a id="1880" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1882" href="Definition.Untyped.html#1370" class="InductiveConstructor">lam</a> <a id="1886" href="Graded.Modality.html#997" class="Function">𝟙</a> <a id="1888" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1890" href="Definition.Untyped.html#1748" class="InductiveConstructor">natrec</a> <a id="1897" href="Graded.Modality.html#995" class="Function">𝟘</a> <a id="1899" href="Graded.Modality.html#995" class="Function">𝟘</a> <a id="1901" href="Graded.Modality.html#997" class="Function">𝟙</a> <a id="1903" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="1905" class="Symbol">(</a><a id="1906" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="1910" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="1912" class="Symbol">)</a> <a id="1914" class="Symbol">(</a><a id="1915" href="Definition.Untyped.html#1718" class="InductiveConstructor">suc</a> <a id="1919" class="Symbol">(</a><a id="1920" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="1924" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="1926" class="Symbol">))</a> <a id="1929" class="Symbol">(</a><a id="1930" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="1934" href="Tools.Fin.html#439" class="Function">x1</a><a id="1936" class="Symbol">)</a>

<a id="1939" class="Comment">-- The term plus is well-typed.</a>
<a id="1971" class="Comment">--</a>
<a id="1974" class="Comment">-- With a certain linearity modality the term is also well-resourced,</a>
<a id="2044" class="Comment">-- see Graded.Modality.Instances.Linearity.Good.▸plus. However, with</a>
<a id="2113" class="Comment">-- another &quot;linearity&quot; modality the term is not well-resourced, see</a>
<a id="2181" class="Comment">-- Graded.Modality.Instances.Linearity.Bad.¬▸plus.</a>

<a id="⊢plus"></a><a id="2233" href="Graded.Modality.Instances.Examples.html#2233" class="Function">⊢plus</a> <a id="2239" class="Symbol">:</a> <a id="2241" class="InductiveConstructor">ε</a> <a id="2243" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2245" href="Graded.Modality.Instances.Examples.html#1853" class="Function">plus</a> <a id="2250" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2252" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="2254" href="Graded.Modality.html#997" class="Function">𝟙</a> <a id="2256" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="2258" href="Graded.Modality.html#995" class="Function">𝟘</a> <a id="2260" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="2262" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="2264" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="2266" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="2268" href="Graded.Modality.html#997" class="Function">𝟙</a> <a id="2270" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="2272" href="Graded.Modality.html#995" class="Function">𝟘</a> <a id="2274" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="2276" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a> <a id="2278" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="2280" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
<a id="2282" href="Graded.Modality.Instances.Examples.html#2233" class="Function">⊢plus</a> <a id="2288" class="Symbol">=</a>
  <a id="2292" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="2298" href="Graded.Modality.Instances.Examples.html#527" class="Bound">Π-𝟙-𝟘</a> <a id="2304" href="Function.Base.html#1974" class="Function Operator">$</a>
  <a id="2308" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="2314" href="Graded.Modality.Instances.Examples.html#527" class="Bound">Π-𝟙-𝟘</a> <a id="2320" href="Function.Base.html#1974" class="Function Operator">$</a>
  <a id="2324" href="Definition.Typed.html#3249" class="InductiveConstructor">natrecⱼ</a> <a id="2332" class="Symbol">(</a><a id="2333" href="Definition.Typed.html#2177" class="InductiveConstructor">var</a> <a id="2337" href="Graded.Modality.Instances.Examples.html#824" class="Function">⊢ℕℕ</a> <a id="2341" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="2345" class="Symbol">)</a>
    <a id="2351" class="Symbol">(</a><a id="2352" href="Definition.Typed.html#3167" class="InductiveConstructor">sucⱼ</a> <a id="2357" class="Symbol">(</a><a id="2358" href="Definition.Typed.html#2177" class="InductiveConstructor">var</a> <a id="2362" href="Graded.Modality.Instances.Examples.html#905" class="Function">⊢ℕℕℕℕ</a> <a id="2368" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="2372" class="Symbol">))</a>
    <a id="2379" class="Symbol">(</a><a id="2380" href="Definition.Typed.html#2177" class="InductiveConstructor">var</a> <a id="2384" href="Graded.Modality.Instances.Examples.html#824" class="Function">⊢ℕℕ</a> <a id="2388" class="Symbol">(</a><a id="2389" href="Definition.Typed.html#1080" class="InductiveConstructor">there</a> <a id="2395" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="2399" class="Symbol">))</a>
</pre></body></html>