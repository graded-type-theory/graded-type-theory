<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Definition.Typed.Reasoning.Reduction</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- &quot;Equational&quot; reasoning combinators for _⊢_⇒*_∷_</a>
<a id="125" class="Comment">------------------------------------------------------------------------</a>

<a id="199" class="Keyword">open</a> <a id="204" class="Keyword">import</a> <a id="211" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>
<a id="241" class="Keyword">open</a> <a id="246" class="Keyword">import</a> <a id="253" href="Graded.Modality.html" class="Module">Graded.Modality</a>

<a id="270" class="Keyword">module</a> <a id="277" href="Definition.Typed.Reasoning.Reduction.html" class="Module">Definition.Typed.Reasoning.Reduction</a>
  <a id="316" class="Symbol">{</a><a id="317" href="Definition.Typed.Reasoning.Reduction.html#317" class="Bound">ℓ</a><a id="318" class="Symbol">}</a> <a id="320" class="Symbol">{</a><a id="321" href="Definition.Typed.Reasoning.Reduction.html#321" class="Bound">M</a> <a id="323" class="Symbol">:</a> <a id="325" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="329" href="Definition.Typed.Reasoning.Reduction.html#317" class="Bound">ℓ</a><a id="330" class="Symbol">}</a>
  <a id="334" class="Symbol">{</a><a id="335" href="Definition.Typed.Reasoning.Reduction.html#335" class="Bound">𝕄</a> <a id="337" class="Symbol">:</a> <a id="339" href="Graded.Modality.html#8058" class="Record">Modality</a> <a id="348" href="Definition.Typed.Reasoning.Reduction.html#321" class="Bound">M</a><a id="349" class="Symbol">}</a>
  <a id="353" class="Symbol">(</a><a id="354" href="Definition.Typed.Reasoning.Reduction.html#354" class="Bound">R</a> <a id="356" class="Symbol">:</a> <a id="358" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="376" href="Definition.Typed.Reasoning.Reduction.html#335" class="Bound">𝕄</a><a id="377" class="Symbol">)</a>
  <a id="381" class="Keyword">where</a>

<a id="388" class="Keyword">open</a> <a id="393" class="Keyword">import</a> <a id="400" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="417" href="Definition.Typed.Reasoning.Reduction.html#354" class="Bound">R</a>
<a id="419" class="Keyword">open</a> <a id="424" class="Keyword">import</a> <a id="431" href="Definition.Typed.Consequences.Reduction.html" class="Module">Definition.Typed.Consequences.Reduction</a> <a id="471" href="Definition.Typed.Reasoning.Reduction.html#354" class="Bound">R</a>
<a id="473" class="Keyword">import</a> <a id="480" href="Definition.Typed.Reasoning.Reduction.Primitive.html" class="Module">Definition.Typed.Reasoning.Reduction.Primitive</a>
<a id="527" class="Keyword">open</a> <a id="532" class="Keyword">import</a> <a id="539" href="Definition.Typed.RedSteps.html" class="Module">Definition.Typed.RedSteps</a> <a id="565" href="Definition.Typed.Reasoning.Reduction.html#354" class="Bound">R</a>
<a id="567" class="Keyword">open</a> <a id="572" class="Keyword">import</a> <a id="579" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="598" href="Definition.Typed.Reasoning.Reduction.html#321" class="Bound">M</a>

<a id="601" class="Keyword">import</a> <a id="608" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="636" class="Symbol">as</a> <a id="639" class="Module">PE</a>

<a id="643" class="Keyword">open</a> <a id="648" href="Definition.Typed.Reasoning.Reduction.Primitive.html" class="Module">Definition.Typed.Reasoning.Reduction.Primitive</a> <a id="695" href="Definition.Typed.Reasoning.Reduction.html#354" class="Bound">R</a> <a id="697" class="Keyword">public</a>
  <a id="706" class="Keyword">hiding</a> <a id="713" class="Symbol">(</a><a id="714" href="Definition.Typed.Reasoning.Reduction.Primitive.html#1563" class="Function">finally-⇒</a><a id="723" class="Symbol">;</a> <a id="725" href="Definition.Typed.Reasoning.Reduction.Primitive.html#2067" class="Function">finally-⇒≡</a><a id="735" class="Symbol">;</a>
          <a id="747" href="Definition.Typed.Reasoning.Reduction.Primitive.html#6277" class="Function">finally-⇒∷</a><a id="757" class="Symbol">;</a> <a id="759" href="Definition.Typed.Reasoning.Reduction.Primitive.html#6814" class="Function">finally-⇒∷≡</a><a id="770" class="Symbol">;</a>
          <a id="782" href="Definition.Typed.Reasoning.Reduction.Primitive.html#2455" class="Function">step-⇐</a><a id="788" class="Symbol">;</a> <a id="790" href="Definition.Typed.Reasoning.Reduction.Primitive.html#3160" class="Function">finally-⇐</a><a id="799" class="Symbol">;</a> <a id="801" href="Definition.Typed.Reasoning.Reduction.Primitive.html#3664" class="Function">finally-⇐≡</a><a id="811" class="Symbol">;</a>
          <a id="823" href="Definition.Typed.Reasoning.Reduction.Primitive.html#7280" class="Function">step-⇐∷</a><a id="830" class="Symbol">;</a> <a id="832" href="Definition.Typed.Reasoning.Reduction.Primitive.html#8633" class="Function">finally-⇐∷</a><a id="842" class="Symbol">;</a> <a id="844" href="Definition.Typed.Reasoning.Reduction.Primitive.html#9170" class="Function">finally-⇐∷≡</a><a id="855" class="Symbol">)</a>

<a id="858" class="Keyword">private</a> <a id="866" class="Keyword">variable</a>
  <a id="877" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a> <a id="879" href="Definition.Typed.Reasoning.Reduction.html#879" class="Generalizable">t</a> <a id="881" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="883" href="Definition.Typed.Reasoning.Reduction.html#883" class="Generalizable">v</a> <a id="885" class="Symbol">:</a> <a id="887" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="892" class="Symbol">_</a>
  <a id="896" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a>       <a id="904" class="Symbol">:</a> <a id="906" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="910" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="915" class="Symbol">_</a>

<a id="918" class="Comment">------------------------------------------------------------------------</a>
<a id="991" class="Comment">-- Combinators for left-to-right reductions</a>

<a id="1036" class="Keyword">infix</a> <a id="1042" class="Number">-1</a> <a id="1045" href="Definition.Typed.Reasoning.Reduction.html#1258" class="Function">finally-⇒</a> <a id="1055" href="Definition.Typed.Reasoning.Reduction.html#1556" class="Function">finally-⇒≡</a>

<a id="1067" class="Keyword">opaque</a>

  <a id="1077" class="Comment">-- The reflexivity proof requires one to prove that the term is</a>
  <a id="1143" class="Comment">-- well-formed. In a non-empty chain of reasoning steps one can</a>
  <a id="1209" class="Comment">-- instead end with the following combinator.</a>

  <a id="finally-⇒"></a><a id="1258" href="Definition.Typed.Reasoning.Reduction.html#1258" class="Function">finally-⇒</a> <a id="1268" class="Symbol">:</a> <a id="1270" class="Symbol">∀</a> <a id="1272" href="Definition.Typed.Reasoning.Reduction.html#1272" class="Bound">t</a> <a id="1274" href="Definition.Typed.Reasoning.Reduction.html#1274" class="Bound">u</a> <a id="1276" class="Symbol">→</a> <a id="1278" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="1280" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="1282" href="Definition.Typed.Reasoning.Reduction.html#1272" class="Bound">t</a> <a id="1284" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="1286" href="Definition.Typed.Reasoning.Reduction.html#1274" class="Bound">u</a> <a id="1288" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="1290" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a> <a id="1292" class="Symbol">→</a> <a id="1294" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="1296" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="1298" href="Definition.Typed.Reasoning.Reduction.html#1272" class="Bound">t</a> <a id="1300" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="1303" href="Definition.Typed.Reasoning.Reduction.html#1274" class="Bound">u</a> <a id="1305" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="1307" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a>
  <a id="1311" href="Definition.Typed.Reasoning.Reduction.html#1258" class="Function">finally-⇒</a> <a id="1321" class="Symbol">_</a> <a id="1323" class="Symbol">_</a> <a id="1325" href="Definition.Typed.Reasoning.Reduction.html#1325" class="Bound">t⇒u</a> <a id="1329" class="Symbol">=</a> <a id="1331" href="Definition.Typed.Consequences.Reduction.html#10552" class="Function">redMany</a> <a id="1339" href="Definition.Typed.Reasoning.Reduction.html#1325" class="Bound">t⇒u</a>

  <a id="1346" class="Keyword">syntax</a> <a id="1353" href="Definition.Typed.Reasoning.Reduction.html#1258" class="Function">finally-⇒</a> <a id="1363" class="Bound">t</a> <a id="1365" class="Bound">u</a> <a id="1367" class="Bound">t⇒u</a> <a id="1371" class="Symbol">=</a> <a id="1373" class="Bound">t</a> <a id="1375" class="Function">⇒⟨</a> <a id="1378" class="Bound">t⇒u</a> <a id="1382" class="Function">⟩∎</a> <a id="1385" class="Bound">u</a> <a id="1387" class="Function">∎</a>

<a id="1390" class="Keyword">opaque</a>

  <a id="1400" class="Comment">-- A variant of finally-⇒ that makes it possible to end the chain of</a>
  <a id="1471" class="Comment">-- reasoning steps with a propositional equality, without the use of</a>
  <a id="1542" class="Comment">-- _∎⟨_⟩⇒.</a>

  <a id="finally-⇒≡"></a><a id="1556" href="Definition.Typed.Reasoning.Reduction.html#1556" class="Function">finally-⇒≡</a> <a id="1567" class="Symbol">:</a> <a id="1569" class="Symbol">∀</a> <a id="1571" href="Definition.Typed.Reasoning.Reduction.html#1571" class="Bound">t</a> <a id="1573" class="Symbol">→</a> <a id="1575" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="1577" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">PE.≡</a> <a id="1582" href="Definition.Typed.Reasoning.Reduction.html#883" class="Generalizable">v</a> <a id="1584" class="Symbol">→</a> <a id="1586" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="1588" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="1590" href="Definition.Typed.Reasoning.Reduction.html#1571" class="Bound">t</a> <a id="1592" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="1594" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="1596" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="1598" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a> <a id="1600" class="Symbol">→</a> <a id="1602" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="1604" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="1606" href="Definition.Typed.Reasoning.Reduction.html#1571" class="Bound">t</a> <a id="1608" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="1611" href="Definition.Typed.Reasoning.Reduction.html#883" class="Generalizable">v</a> <a id="1613" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="1615" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a>
  <a id="1619" href="Definition.Typed.Reasoning.Reduction.html#1556" class="Function">finally-⇒≡</a> <a id="1630" class="Symbol">_</a> <a id="1632" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a> <a id="1640" href="Definition.Typed.Reasoning.Reduction.html#1640" class="Bound">t⇒u</a> <a id="1644" class="Symbol">=</a> <a id="1646" href="Definition.Typed.Consequences.Reduction.html#10552" class="Function">redMany</a> <a id="1654" href="Definition.Typed.Reasoning.Reduction.html#1640" class="Bound">t⇒u</a>

  <a id="1661" class="Keyword">syntax</a> <a id="1668" href="Definition.Typed.Reasoning.Reduction.html#1556" class="Function">finally-⇒≡</a> <a id="1679" class="Bound">t</a> <a id="1681" class="Bound">u≡v</a> <a id="1685" class="Bound">t⇒u</a> <a id="1689" class="Symbol">=</a> <a id="1691" class="Bound">t</a> <a id="1693" class="Function">⇒⟨</a> <a id="1696" class="Bound">t⇒u</a> <a id="1700" class="Function">⟩∎≡</a> <a id="1704" class="Bound">u≡v</a>

<a id="1709" class="Comment">------------------------------------------------------------------------</a>
<a id="1782" class="Comment">-- Combinators for left-to-right reductions with explicit types</a>

<a id="1847" class="Keyword">infix</a> <a id="1853" class="Number">-1</a> <a id="1856" href="Definition.Typed.Reasoning.Reduction.html#2071" class="Function">finally-⇒∷</a> <a id="1867" href="Definition.Typed.Reasoning.Reduction.html#2386" class="Function">finally-⇒∷≡</a>

<a id="1880" class="Keyword">opaque</a>

  <a id="1890" class="Comment">-- The reflexivity proof requires one to prove that the term is</a>
  <a id="1956" class="Comment">-- well-formed. In a non-empty chain of reasoning steps one can</a>
  <a id="2022" class="Comment">-- instead end with the following combinator.</a>

  <a id="finally-⇒∷"></a><a id="2071" href="Definition.Typed.Reasoning.Reduction.html#2071" class="Function">finally-⇒∷</a> <a id="2082" class="Symbol">:</a> <a id="2084" class="Symbol">∀</a> <a id="2086" href="Definition.Typed.Reasoning.Reduction.html#2086" class="Bound">t</a> <a id="2088" href="Definition.Typed.Reasoning.Reduction.html#2088" class="Bound">A</a> <a id="2090" href="Definition.Typed.Reasoning.Reduction.html#2090" class="Bound">u</a> <a id="2092" class="Symbol">→</a> <a id="2094" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="2096" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="2098" href="Definition.Typed.Reasoning.Reduction.html#2086" class="Bound">t</a> <a id="2100" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="2102" href="Definition.Typed.Reasoning.Reduction.html#2090" class="Bound">u</a> <a id="2104" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="2106" href="Definition.Typed.Reasoning.Reduction.html#2088" class="Bound">A</a> <a id="2108" class="Symbol">→</a> <a id="2110" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="2112" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="2114" href="Definition.Typed.Reasoning.Reduction.html#2086" class="Bound">t</a> <a id="2116" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="2119" href="Definition.Typed.Reasoning.Reduction.html#2090" class="Bound">u</a> <a id="2121" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="2123" href="Definition.Typed.Reasoning.Reduction.html#2088" class="Bound">A</a>
  <a id="2127" href="Definition.Typed.Reasoning.Reduction.html#2071" class="Function">finally-⇒∷</a> <a id="2138" class="Symbol">_</a> <a id="2140" class="Symbol">_</a> <a id="2142" class="Symbol">_</a> <a id="2144" href="Definition.Typed.Reasoning.Reduction.html#2144" class="Bound">t⇒u</a> <a id="2148" class="Symbol">=</a> <a id="2150" href="Definition.Typed.Consequences.Reduction.html#10552" class="Function">redMany</a> <a id="2158" href="Definition.Typed.Reasoning.Reduction.html#2144" class="Bound">t⇒u</a>

  <a id="2165" class="Keyword">syntax</a> <a id="2172" href="Definition.Typed.Reasoning.Reduction.html#2071" class="Function">finally-⇒∷</a> <a id="2183" class="Bound">t</a> <a id="2185" class="Bound">A</a> <a id="2187" class="Bound">u</a> <a id="2189" class="Bound">t⇒u</a> <a id="2193" class="Symbol">=</a> <a id="2195" class="Bound">t</a> <a id="2197" class="Function">∷</a> <a id="2199" class="Bound">A</a> <a id="2201" class="Function">⇒⟨</a> <a id="2204" class="Bound">t⇒u</a> <a id="2208" class="Function">⟩∎∷</a> <a id="2212" class="Bound">u</a> <a id="2214" class="Function">∎</a>

<a id="2217" class="Keyword">opaque</a>

  <a id="2227" class="Comment">-- A variant of finally-⇒∷ that makes it possible to end the chain</a>
  <a id="2296" class="Comment">-- of reasoning steps with a propositional equality, without the use</a>
  <a id="2367" class="Comment">-- of _∷_∎⟨_⟩⇒.</a>

  <a id="finally-⇒∷≡"></a><a id="2386" href="Definition.Typed.Reasoning.Reduction.html#2386" class="Function">finally-⇒∷≡</a> <a id="2398" class="Symbol">:</a> <a id="2400" class="Symbol">∀</a> <a id="2402" href="Definition.Typed.Reasoning.Reduction.html#2402" class="Bound">t</a> <a id="2404" href="Definition.Typed.Reasoning.Reduction.html#2404" class="Bound">A</a> <a id="2406" class="Symbol">→</a> <a id="2408" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="2410" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">PE.≡</a> <a id="2415" href="Definition.Typed.Reasoning.Reduction.html#883" class="Generalizable">v</a> <a id="2417" class="Symbol">→</a> <a id="2419" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="2421" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="2423" href="Definition.Typed.Reasoning.Reduction.html#2402" class="Bound">t</a> <a id="2425" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="2427" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="2429" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="2431" href="Definition.Typed.Reasoning.Reduction.html#2404" class="Bound">A</a> <a id="2433" class="Symbol">→</a> <a id="2435" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="2437" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="2439" href="Definition.Typed.Reasoning.Reduction.html#2402" class="Bound">t</a> <a id="2441" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="2444" href="Definition.Typed.Reasoning.Reduction.html#883" class="Generalizable">v</a> <a id="2446" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="2448" href="Definition.Typed.Reasoning.Reduction.html#2404" class="Bound">A</a>
  <a id="2452" href="Definition.Typed.Reasoning.Reduction.html#2386" class="Function">finally-⇒∷≡</a> <a id="2464" class="Symbol">_</a> <a id="2466" class="Symbol">_</a> <a id="2468" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a> <a id="2476" href="Definition.Typed.Reasoning.Reduction.html#2476" class="Bound">t⇒u</a> <a id="2480" class="Symbol">=</a> <a id="2482" href="Definition.Typed.Consequences.Reduction.html#10552" class="Function">redMany</a> <a id="2490" href="Definition.Typed.Reasoning.Reduction.html#2476" class="Bound">t⇒u</a>

  <a id="2497" class="Keyword">syntax</a> <a id="2504" href="Definition.Typed.Reasoning.Reduction.html#2386" class="Function">finally-⇒∷≡</a> <a id="2516" class="Bound">t</a> <a id="2518" class="Bound">A</a> <a id="2520" class="Bound">u≡v</a> <a id="2524" class="Bound">t⇒u</a> <a id="2528" class="Symbol">=</a> <a id="2530" class="Bound">t</a> <a id="2532" class="Function">∷</a> <a id="2534" class="Bound">A</a> <a id="2536" class="Function">⇒⟨</a> <a id="2539" class="Bound">t⇒u</a> <a id="2543" class="Function">⟩∎∷≡</a> <a id="2548" class="Bound">u≡v</a>

<a id="2553" class="Comment">------------------------------------------------------------------------</a>
<a id="2626" class="Comment">-- Combinators for right-to-left reductions</a>

<a id="2671" class="Keyword">infix</a>  <a id="2678" class="Number">-1</a> <a id="2681" href="Definition.Typed.Reasoning.Reduction.html#3095" class="Function">finally-⇐</a>
<a id="2691" class="Keyword">infixr</a> <a id="2698" class="Number">-2</a> <a id="2701" href="Definition.Typed.Reasoning.Reduction.html#2751" class="Function">step-⇐</a> <a id="2708" href="Definition.Typed.Reasoning.Reduction.html#3393" class="Function">finally-⇐≡</a>

<a id="2720" class="Keyword">opaque</a>

  <a id="2730" class="Comment">-- A single step.</a>

  <a id="step-⇐"></a><a id="2751" href="Definition.Typed.Reasoning.Reduction.html#2751" class="Function">step-⇐</a> <a id="2758" class="Symbol">:</a>
    <a id="2764" class="Symbol">∀</a> <a id="2766" href="Definition.Typed.Reasoning.Reduction.html#2766" class="Bound">v</a> <a id="2768" class="Symbol">→</a> <a id="2770" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="2772" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="2774" href="Definition.Typed.Reasoning.Reduction.html#879" class="Generalizable">t</a> <a id="2776" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="2779" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="2781" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="2783" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a> <a id="2785" class="Symbol">→</a> <a id="2787" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="2789" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="2791" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="2793" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="2795" href="Definition.Typed.Reasoning.Reduction.html#2766" class="Bound">v</a> <a id="2797" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="2799" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a> <a id="2801" class="Symbol">→</a> <a id="2803" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="2805" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="2807" href="Definition.Typed.Reasoning.Reduction.html#879" class="Generalizable">t</a> <a id="2809" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="2812" href="Definition.Typed.Reasoning.Reduction.html#2766" class="Bound">v</a> <a id="2814" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="2816" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a>
  <a id="2820" href="Definition.Typed.Reasoning.Reduction.html#2751" class="Function">step-⇐</a> <a id="2827" class="Symbol">_</a> <a id="2829" href="Definition.Typed.Reasoning.Reduction.html#2829" class="Bound">t⇒u</a> <a id="2833" href="Definition.Typed.Reasoning.Reduction.html#2833" class="Bound">u⇒v</a> <a id="2837" class="Symbol">=</a> <a id="2839" href="Definition.Typed.Reasoning.Reduction.html#2829" class="Bound">t⇒u</a> <a id="2843" href="Definition.Typed.RedSteps.html#1115" class="Function Operator">⇨∷*</a> <a id="2847" href="Definition.Typed.Consequences.Reduction.html#10552" class="Function">redMany</a> <a id="2855" href="Definition.Typed.Reasoning.Reduction.html#2833" class="Bound">u⇒v</a>

  <a id="2862" class="Keyword">syntax</a> <a id="2869" href="Definition.Typed.Reasoning.Reduction.html#2751" class="Function">step-⇐</a> <a id="2876" class="Bound">v</a> <a id="2878" class="Bound">t⇒u</a> <a id="2882" class="Bound">u⇒v</a> <a id="2886" class="Symbol">=</a> <a id="2888" class="Bound">v</a> <a id="2890" class="Function">⇐⟨</a> <a id="2893" class="Bound">u⇒v</a> <a id="2897" class="Function">⟩</a> <a id="2899" class="Bound">t⇒u</a>

<a id="2904" class="Keyword">opaque</a>

  <a id="2914" class="Comment">-- The reflexivity proof requires one to prove that the term is</a>
  <a id="2980" class="Comment">-- well-formed. In a non-empty chain of reasoning steps one can</a>
  <a id="3046" class="Comment">-- instead end with the following combinator.</a>

  <a id="finally-⇐"></a><a id="3095" href="Definition.Typed.Reasoning.Reduction.html#3095" class="Function">finally-⇐</a> <a id="3105" class="Symbol">:</a> <a id="3107" class="Symbol">∀</a> <a id="3109" href="Definition.Typed.Reasoning.Reduction.html#3109" class="Bound">u</a> <a id="3111" href="Definition.Typed.Reasoning.Reduction.html#3111" class="Bound">t</a> <a id="3113" class="Symbol">→</a> <a id="3115" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="3117" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="3119" href="Definition.Typed.Reasoning.Reduction.html#3111" class="Bound">t</a> <a id="3121" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="3123" href="Definition.Typed.Reasoning.Reduction.html#3109" class="Bound">u</a> <a id="3125" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="3127" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a> <a id="3129" class="Symbol">→</a> <a id="3131" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="3133" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="3135" href="Definition.Typed.Reasoning.Reduction.html#3111" class="Bound">t</a> <a id="3137" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="3140" href="Definition.Typed.Reasoning.Reduction.html#3109" class="Bound">u</a> <a id="3142" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="3144" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a>
  <a id="3148" href="Definition.Typed.Reasoning.Reduction.html#3095" class="Function">finally-⇐</a> <a id="3158" class="Symbol">_</a> <a id="3160" class="Symbol">_</a> <a id="3162" href="Definition.Typed.Reasoning.Reduction.html#3162" class="Bound">t⇒u</a> <a id="3166" class="Symbol">=</a> <a id="3168" href="Definition.Typed.Consequences.Reduction.html#10552" class="Function">redMany</a> <a id="3176" href="Definition.Typed.Reasoning.Reduction.html#3162" class="Bound">t⇒u</a>

  <a id="3183" class="Keyword">syntax</a> <a id="3190" href="Definition.Typed.Reasoning.Reduction.html#3095" class="Function">finally-⇐</a> <a id="3200" class="Bound">u</a> <a id="3202" class="Bound">t</a> <a id="3204" class="Bound">t⇒u</a> <a id="3208" class="Symbol">=</a> <a id="3210" class="Bound">u</a> <a id="3212" class="Function">⇐⟨</a> <a id="3215" class="Bound">t⇒u</a> <a id="3219" class="Function">⟩∎</a> <a id="3222" class="Bound">t</a> <a id="3224" class="Function">∎</a>

<a id="3227" class="Keyword">opaque</a>

  <a id="3237" class="Comment">-- A variant of finally-⇐ that makes it possible to end the chain of</a>
  <a id="3308" class="Comment">-- reasoning steps with a propositional equality, without the use of</a>
  <a id="3379" class="Comment">-- _∎⟨_⟩⇒.</a>

  <a id="finally-⇐≡"></a><a id="3393" href="Definition.Typed.Reasoning.Reduction.html#3393" class="Function">finally-⇐≡</a> <a id="3404" class="Symbol">:</a> <a id="3406" class="Symbol">∀</a> <a id="3408" href="Definition.Typed.Reasoning.Reduction.html#3408" class="Bound">v</a> <a id="3410" class="Symbol">→</a> <a id="3412" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="3414" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">PE.≡</a> <a id="3419" href="Definition.Typed.Reasoning.Reduction.html#879" class="Generalizable">t</a> <a id="3421" class="Symbol">→</a> <a id="3423" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="3425" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="3427" href="Definition.Typed.Reasoning.Reduction.html#3408" class="Bound">v</a> <a id="3429" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="3431" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="3433" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="3435" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a> <a id="3437" class="Symbol">→</a> <a id="3439" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="3441" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="3443" href="Definition.Typed.Reasoning.Reduction.html#3408" class="Bound">v</a> <a id="3445" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="3448" href="Definition.Typed.Reasoning.Reduction.html#879" class="Generalizable">t</a> <a id="3450" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="3452" href="Definition.Typed.Reasoning.Reduction.html#877" class="Generalizable">A</a>
  <a id="3456" href="Definition.Typed.Reasoning.Reduction.html#3393" class="Function">finally-⇐≡</a> <a id="3467" class="Symbol">_</a> <a id="3469" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a> <a id="3477" href="Definition.Typed.Reasoning.Reduction.html#3477" class="Bound">t⇒u</a> <a id="3481" class="Symbol">=</a> <a id="3483" href="Definition.Typed.Consequences.Reduction.html#10552" class="Function">redMany</a> <a id="3491" href="Definition.Typed.Reasoning.Reduction.html#3477" class="Bound">t⇒u</a>

  <a id="3498" class="Keyword">syntax</a> <a id="3505" href="Definition.Typed.Reasoning.Reduction.html#3393" class="Function">finally-⇐≡</a> <a id="3516" class="Bound">v</a> <a id="3518" class="Bound">u≡t</a> <a id="3522" class="Bound">v⇒u</a> <a id="3526" class="Symbol">=</a> <a id="3528" class="Bound">v</a> <a id="3530" class="Function">⇐⟨</a> <a id="3533" class="Bound">v⇒u</a> <a id="3537" class="Function">⟩∎≡</a> <a id="3541" class="Bound">u≡t</a>

<a id="3546" class="Comment">------------------------------------------------------------------------</a>
<a id="3619" class="Comment">-- Combinators for right-to-left reductions with explicit types</a>

<a id="3684" class="Keyword">infix</a>  <a id="3691" class="Number">-1</a> <a id="3694" href="Definition.Typed.Reasoning.Reduction.html#4106" class="Function">finally-⇐∷</a>
<a id="3705" class="Keyword">infixr</a> <a id="3712" class="Number">-2</a> <a id="3715" href="Definition.Typed.Reasoning.Reduction.html#3767" class="Function">step-⇐∷</a> <a id="3723" href="Definition.Typed.Reasoning.Reduction.html#4419" class="Function">finally-⇐∷≡</a>

<a id="3736" class="Keyword">opaque</a>

  <a id="3746" class="Comment">-- A single step.</a>

  <a id="step-⇐∷"></a><a id="3767" href="Definition.Typed.Reasoning.Reduction.html#3767" class="Function">step-⇐∷</a> <a id="3775" class="Symbol">:</a>
    <a id="3781" class="Symbol">∀</a> <a id="3783" href="Definition.Typed.Reasoning.Reduction.html#3783" class="Bound">v</a> <a id="3785" href="Definition.Typed.Reasoning.Reduction.html#3785" class="Bound">A</a> <a id="3787" class="Symbol">→</a> <a id="3789" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="3791" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="3793" href="Definition.Typed.Reasoning.Reduction.html#879" class="Generalizable">t</a> <a id="3795" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="3798" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="3800" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="3802" href="Definition.Typed.Reasoning.Reduction.html#3785" class="Bound">A</a> <a id="3804" class="Symbol">→</a> <a id="3806" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="3808" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="3810" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="3812" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="3814" href="Definition.Typed.Reasoning.Reduction.html#3783" class="Bound">v</a> <a id="3816" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="3818" href="Definition.Typed.Reasoning.Reduction.html#3785" class="Bound">A</a> <a id="3820" class="Symbol">→</a> <a id="3822" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="3824" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="3826" href="Definition.Typed.Reasoning.Reduction.html#879" class="Generalizable">t</a> <a id="3828" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="3831" href="Definition.Typed.Reasoning.Reduction.html#3783" class="Bound">v</a> <a id="3833" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="3835" href="Definition.Typed.Reasoning.Reduction.html#3785" class="Bound">A</a>
  <a id="3839" href="Definition.Typed.Reasoning.Reduction.html#3767" class="Function">step-⇐∷</a> <a id="3847" class="Symbol">_</a> <a id="3849" class="Symbol">_</a> <a id="3851" class="Symbol">=</a> <a id="3853" href="Definition.Typed.Reasoning.Reduction.html#2751" class="Function">step-⇐</a> <a id="3860" class="Symbol">_</a>

  <a id="3865" class="Keyword">syntax</a> <a id="3872" href="Definition.Typed.Reasoning.Reduction.html#3767" class="Function">step-⇐∷</a> <a id="3880" class="Bound">v</a> <a id="3882" class="Bound">A</a> <a id="3884" class="Bound">t⇒u</a> <a id="3888" class="Bound">u⇒v</a> <a id="3892" class="Symbol">=</a> <a id="3894" class="Bound">v</a> <a id="3896" class="Function">∷</a> <a id="3898" class="Bound">A</a> <a id="3900" class="Function">⇐⟨</a> <a id="3903" class="Bound">u⇒v</a> <a id="3907" class="Function">⟩∷</a> <a id="3910" class="Bound">t⇒u</a>

<a id="3915" class="Keyword">opaque</a>

  <a id="3925" class="Comment">-- The reflexivity proof requires one to prove that the term is</a>
  <a id="3991" class="Comment">-- well-formed. In a non-empty chain of reasoning steps one can</a>
  <a id="4057" class="Comment">-- instead end with the following combinator.</a>

  <a id="finally-⇐∷"></a><a id="4106" href="Definition.Typed.Reasoning.Reduction.html#4106" class="Function">finally-⇐∷</a> <a id="4117" class="Symbol">:</a> <a id="4119" class="Symbol">∀</a> <a id="4121" href="Definition.Typed.Reasoning.Reduction.html#4121" class="Bound">u</a> <a id="4123" href="Definition.Typed.Reasoning.Reduction.html#4123" class="Bound">A</a> <a id="4125" href="Definition.Typed.Reasoning.Reduction.html#4125" class="Bound">t</a> <a id="4127" class="Symbol">→</a> <a id="4129" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="4131" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="4133" href="Definition.Typed.Reasoning.Reduction.html#4125" class="Bound">t</a> <a id="4135" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="4137" href="Definition.Typed.Reasoning.Reduction.html#4121" class="Bound">u</a> <a id="4139" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="4141" href="Definition.Typed.Reasoning.Reduction.html#4123" class="Bound">A</a> <a id="4143" class="Symbol">→</a> <a id="4145" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="4147" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="4149" href="Definition.Typed.Reasoning.Reduction.html#4125" class="Bound">t</a> <a id="4151" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="4154" href="Definition.Typed.Reasoning.Reduction.html#4121" class="Bound">u</a> <a id="4156" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="4158" href="Definition.Typed.Reasoning.Reduction.html#4123" class="Bound">A</a>
  <a id="4162" href="Definition.Typed.Reasoning.Reduction.html#4106" class="Function">finally-⇐∷</a> <a id="4173" class="Symbol">_</a> <a id="4175" class="Symbol">_</a> <a id="4177" class="Symbol">_</a> <a id="4179" class="Symbol">=</a> <a id="4181" href="Definition.Typed.Reasoning.Reduction.html#3095" class="Function">finally-⇐</a> <a id="4191" class="Symbol">_</a> <a id="4193" class="Symbol">_</a>

  <a id="4198" class="Keyword">syntax</a> <a id="4205" href="Definition.Typed.Reasoning.Reduction.html#4106" class="Function">finally-⇐∷</a> <a id="4216" class="Bound">u</a> <a id="4218" class="Bound">A</a> <a id="4220" class="Bound">t</a> <a id="4222" class="Bound">t⇒u</a> <a id="4226" class="Symbol">=</a> <a id="4228" class="Bound">u</a> <a id="4230" class="Function">∷</a> <a id="4232" class="Bound">A</a> <a id="4234" class="Function">⇐⟨</a> <a id="4237" class="Bound">t⇒u</a> <a id="4241" class="Function">⟩∎∷</a> <a id="4245" class="Bound">t</a> <a id="4247" class="Function">∎</a>

<a id="4250" class="Keyword">opaque</a>

  <a id="4260" class="Comment">-- A variant of finally-⇐∷ that makes it possible to end the chain</a>
  <a id="4329" class="Comment">-- of reasoning steps with a propositional equality, without the use</a>
  <a id="4400" class="Comment">-- of _∷_∎⟨_⟩⇒.</a>

  <a id="finally-⇐∷≡"></a><a id="4419" href="Definition.Typed.Reasoning.Reduction.html#4419" class="Function">finally-⇐∷≡</a> <a id="4431" class="Symbol">:</a> <a id="4433" class="Symbol">∀</a> <a id="4435" href="Definition.Typed.Reasoning.Reduction.html#4435" class="Bound">v</a> <a id="4437" href="Definition.Typed.Reasoning.Reduction.html#4437" class="Bound">A</a> <a id="4439" class="Symbol">→</a> <a id="4441" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="4443" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">PE.≡</a> <a id="4448" href="Definition.Typed.Reasoning.Reduction.html#879" class="Generalizable">t</a> <a id="4450" class="Symbol">→</a> <a id="4452" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="4454" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="4456" href="Definition.Typed.Reasoning.Reduction.html#4435" class="Bound">v</a> <a id="4458" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="4460" href="Definition.Typed.Reasoning.Reduction.html#881" class="Generalizable">u</a> <a id="4462" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="4464" href="Definition.Typed.Reasoning.Reduction.html#4437" class="Bound">A</a> <a id="4466" class="Symbol">→</a> <a id="4468" href="Definition.Typed.Reasoning.Reduction.html#896" class="Generalizable">Γ</a> <a id="4470" href="Definition.Typed.html#19323" class="Datatype Operator">⊢</a> <a id="4472" href="Definition.Typed.Reasoning.Reduction.html#4435" class="Bound">v</a> <a id="4474" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="4477" href="Definition.Typed.Reasoning.Reduction.html#879" class="Generalizable">t</a> <a id="4479" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="4481" href="Definition.Typed.Reasoning.Reduction.html#4437" class="Bound">A</a>
  <a id="4485" href="Definition.Typed.Reasoning.Reduction.html#4419" class="Function">finally-⇐∷≡</a> <a id="4497" class="Symbol">_</a> <a id="4499" class="Symbol">_</a> <a id="4501" class="Symbol">=</a> <a id="4503" href="Definition.Typed.Reasoning.Reduction.html#3393" class="Function">finally-⇐≡</a> <a id="4514" class="Symbol">_</a>

  <a id="4519" class="Keyword">syntax</a> <a id="4526" href="Definition.Typed.Reasoning.Reduction.html#4419" class="Function">finally-⇐∷≡</a> <a id="4538" class="Bound">v</a> <a id="4540" class="Bound">A</a> <a id="4542" class="Bound">u≡t</a> <a id="4546" class="Bound">v⇒u</a> <a id="4550" class="Symbol">=</a> <a id="4552" class="Bound">v</a> <a id="4554" class="Function">∷</a> <a id="4556" class="Bound">A</a> <a id="4558" class="Function">⇐⟨</a> <a id="4561" class="Bound">v⇒u</a> <a id="4565" class="Function">⟩∎∷≡</a> <a id="4570" class="Bound">u≡t</a>
</pre></body></html>