<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Extraction.Non-terminating</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- If the extraction function uses strict applications and removes</a>
<a id="141" class="Comment">-- erasable arguments entirely, then it may be the case that</a>
<a id="202" class="Comment">-- well-typed and well-resourced terms extract to terms that do not</a>
<a id="270" class="Comment">-- terminate</a>
<a id="283" class="Comment">------------------------------------------------------------------------</a>

<a id="357" class="Comment">-- In &quot;A New Extraction for Coq&quot; Letouzey points out that uses of the</a>
<a id="427" class="Comment">-- eliminator for the empty type False can lead to problems similar to</a>
<a id="498" class="Comment">-- the one presented below if all logical arguments are removed</a>
<a id="562" class="Comment">-- entirely, given that the eliminator is replaced with code that</a>
<a id="628" class="Comment">-- throws an exception. However, the example discussed below does not</a>
<a id="698" class="Comment">-- rely on how emptyrec is extracted, but is more similar to one in</a>
<a id="766" class="Comment">-- Mishra-Linger&#39;s PhD thesis (see Figure 5.1).</a>
<a id="814" class="Comment">--</a>
<a id="817" class="Comment">-- The example looks roughly like this:</a>
<a id="857" class="Comment">--</a>
<a id="860" class="Comment">--   (λ^ω _. zero)</a>
<a id="879" class="Comment">--     (λ⁰ (bot : ⊥).</a>
<a id="901" class="Comment">--        (λ^ω x. cast bot x x) (cast bot (λ^ω x. cast bot x x)))</a>
<a id="967" class="Comment">--</a>
<a id="970" class="Comment">-- If erased arguments are removed entirely, then we end up with a</a>
<a id="1037" class="Comment">-- term like the following one:</a>
<a id="1069" class="Comment">--</a>
<a id="1072" class="Comment">--   (λ _. zero) ((λ x. x x) (λ x. x x))</a>
<a id="1113" class="Comment">--</a>
<a id="1116" class="Comment">-- If strict applications are used, then this program does not</a>
<a id="1179" class="Comment">-- terminate.</a>

<a id="1194" class="Symbol">{-#</a> <a id="1198" class="Keyword">OPTIONS</a> <a id="1206" class="Pragma">--hidden-argument-puns</a> <a id="1229" class="Symbol">#-}</a>

<a id="1234" class="Keyword">open</a> <a id="1239" class="Keyword">import</a> <a id="1246" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="1262" class="Keyword">open</a> <a id="1267" class="Keyword">import</a> <a id="1274" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="1300" class="Keyword">open</a> <a id="1305" class="Keyword">import</a> <a id="1312" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="1343" class="Keyword">module</a> <a id="1350" href="Graded.Erasure.Extraction.Non-terminating.html" class="Module">Graded.Erasure.Extraction.Non-terminating</a>
  <a id="1394" class="Symbol">{</a><a id="1395" href="Graded.Erasure.Extraction.Non-terminating.html#1395" class="Bound">a</a><a id="1396" class="Symbol">}</a> <a id="1398" class="Symbol">{</a><a id="1399" href="Graded.Erasure.Extraction.Non-terminating.html#1399" class="Bound">M</a> <a id="1401" class="Symbol">:</a> <a id="1403" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1407" href="Graded.Erasure.Extraction.Non-terminating.html#1395" class="Bound">a</a><a id="1408" class="Symbol">}</a>
  <a id="1412" class="Symbol">{</a><a id="1413" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a> <a id="1415" class="Symbol">:</a> <a id="1417" href="Graded.Modality.html#7127" class="Record">Modality</a> <a id="1426" href="Graded.Erasure.Extraction.Non-terminating.html#1399" class="Bound">M</a><a id="1427" class="Symbol">}</a>
  <a id="1431" class="Symbol">(</a><a id="1432" href="Graded.Erasure.Extraction.Non-terminating.html#1432" class="Bound">TR</a> <a id="1435" class="Symbol">:</a> <a id="1437" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a> <a id="1455" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a><a id="1456" class="Symbol">)</a>
  <a id="1460" class="Symbol">(</a><a id="1461" href="Graded.Erasure.Extraction.Non-terminating.html#1461" class="Bound">UR</a> <a id="1464" class="Symbol">:</a> <a id="1466" href="Graded.Usage.Restrictions.html#688" class="Record">Usage-restrictions</a> <a id="1485" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a><a id="1486" class="Symbol">)</a>
  <a id="1490" class="Keyword">where</a>

<a id="1497" class="Keyword">open</a> <a id="1502" href="Graded.Modality.html#7127" class="Module">Modality</a> <a id="1511" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a>
<a id="1513" class="Keyword">open</a> <a id="1518" href="Definition.Typed.Restrictions.html#524" class="Module">Type-restrictions</a> <a id="1536" href="Graded.Erasure.Extraction.Non-terminating.html#1432" class="Bound">TR</a>

<a id="1540" class="Keyword">open</a> <a id="1545" class="Keyword">import</a> <a id="1552" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="1569" href="Graded.Erasure.Extraction.Non-terminating.html#1432" class="Bound">TR</a>
<a id="1572" class="Keyword">open</a> <a id="1577" class="Keyword">import</a> <a id="1584" href="Definition.Typed.Consequences.DerivedRules.html" class="Module">Definition.Typed.Consequences.DerivedRules</a> <a id="1627" href="Graded.Erasure.Extraction.Non-terminating.html#1432" class="Bound">TR</a>
<a id="1630" class="Keyword">open</a> <a id="1635" class="Keyword">import</a> <a id="1642" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="1670" href="Graded.Erasure.Extraction.Non-terminating.html#1432" class="Bound">TR</a>
<a id="1673" class="Keyword">open</a> <a id="1678" class="Keyword">import</a> <a id="1685" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="1704" href="Graded.Erasure.Extraction.Non-terminating.html#1399" class="Bound">M</a> <a id="1706" class="Keyword">hiding</a> <a id="1713" class="Symbol">(</a><a id="1714" href="Definition.Untyped.NotParametrised.html#1148" class="InductiveConstructor Operator">_∷_</a><a id="1717" class="Symbol">)</a>
<a id="1719" class="Keyword">open</a> <a id="1724" class="Keyword">import</a> <a id="1731" href="Definition.Untyped.Identity.html" class="Module">Definition.Untyped.Identity</a> <a id="1759" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a>

<a id="1762" class="Keyword">open</a> <a id="1767" class="Keyword">import</a> <a id="1774" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1789" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a>
<a id="1791" class="Keyword">open</a> <a id="1796" class="Keyword">import</a> <a id="1803" href="Graded.Context.Properties.html" class="Module">Graded.Context.Properties</a> <a id="1829" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a>
<a id="1831" class="Keyword">open</a> <a id="1836" class="Keyword">import</a> <a id="1843" href="Graded.Derived.Identity.html" class="Module">Graded.Derived.Identity</a> <a id="1867" href="Graded.Erasure.Extraction.Non-terminating.html#1461" class="Bound">UR</a>
<a id="1870" class="Keyword">open</a> <a id="1875" class="Keyword">import</a> <a id="1882" href="Graded.Erasure.Extraction.html" class="Module">Graded.Erasure.Extraction</a> <a id="1908" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a>
<a id="1910" class="Keyword">open</a> <a id="1915" class="Keyword">import</a> <a id="1922" href="Graded.Erasure.Extraction.Properties.html" class="Module">Graded.Erasure.Extraction.Properties</a> <a id="1959" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a>
<a id="1961" class="Keyword">open</a> <a id="1966" class="Keyword">import</a> <a id="1973" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a> <a id="1995" class="Symbol">as</a> <a id="1998" class="Module">T</a> <a id="2000" class="Keyword">using</a> <a id="2006" class="Symbol">(</a><a id="2007" href="Graded.Erasure.Target.html#645" class="Datatype">Strictness</a><a id="2017" class="Symbol">;</a> <a id="2019" href="Graded.Erasure.Target.html#670" class="InductiveConstructor">strict</a><a id="2025" class="Symbol">)</a>
<a id="2027" class="Keyword">open</a> <a id="2032" class="Keyword">import</a> <a id="2039" href="Graded.Erasure.Target.Non-terminating.html" class="Module">Graded.Erasure.Target.Non-terminating</a>
<a id="2077" class="Keyword">open</a> <a id="2082" class="Keyword">import</a> <a id="2089" href="Graded.Erasure.Target.Properties.html" class="Module">Graded.Erasure.Target.Properties</a>
<a id="2122" class="Keyword">open</a> <a id="2127" class="Keyword">import</a> <a id="2134" href="Graded.Modality.Properties.html" class="Module">Graded.Modality.Properties</a> <a id="2161" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a>
<a id="2163" class="Keyword">open</a> <a id="2168" class="Keyword">import</a> <a id="2175" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="2187" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a>
<a id="2189" class="Keyword">open</a> <a id="2194" class="Keyword">import</a> <a id="2201" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="2214" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a> <a id="2216" href="Graded.Erasure.Extraction.Non-terminating.html#1461" class="Bound">UR</a>
<a id="2219" class="Keyword">open</a> <a id="2224" class="Keyword">import</a> <a id="2231" href="Graded.Usage.Properties.html" class="Module">Graded.Usage.Properties</a> <a id="2255" href="Graded.Erasure.Extraction.Non-terminating.html#1413" class="Bound">𝕄</a> <a id="2257" href="Graded.Erasure.Extraction.Non-terminating.html#1461" class="Bound">UR</a>

<a id="2261" class="Keyword">open</a> <a id="2266" class="Keyword">import</a> <a id="2273" href="Tools.Bool.html" class="Module">Tools.Bool</a> <a id="2284" class="Keyword">using</a> <a id="2290" class="Symbol">(</a><a id="2291" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="2295" class="Symbol">;</a> <a id="2297" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="2301" class="Symbol">)</a>
<a id="2303" class="Keyword">open</a> <a id="2308" class="Keyword">import</a> <a id="2315" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="2327" class="Keyword">open</a> <a id="2332" class="Keyword">import</a> <a id="2339" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="2349" class="Keyword">open</a> <a id="2354" class="Keyword">import</a> <a id="2361" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="2376" class="Keyword">open</a> <a id="2381" class="Keyword">import</a> <a id="2388" href="Tools.Nat.html" class="Module">Tools.Nat</a> <a id="2398" class="Keyword">using</a> <a id="2404" class="Symbol">(</a><a id="2405" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="2408" class="Symbol">;</a> <a id="2410" href="Tools.Nat.html#1726" class="InductiveConstructor">1+</a><a id="2412" class="Symbol">)</a>
<a id="2414" class="Keyword">open</a> <a id="2419" class="Keyword">import</a> <a id="2426" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="2440" class="Keyword">open</a> <a id="2445" class="Keyword">import</a> <a id="2452" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="2480" class="Symbol">as</a> <a id="2483" class="Module">PE</a> <a id="2486" class="Keyword">using</a> <a id="2492" class="Symbol">(</a><a id="2493" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="2496" class="Symbol">;</a> <a id="2498" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">_≢_</a><a id="2501" class="Symbol">)</a>
<a id="2503" class="Keyword">import</a> <a id="2510" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>
<a id="2548" class="Keyword">open</a> <a id="2553" class="Keyword">import</a> <a id="2560" href="Tools.Relation.html" class="Module">Tools.Relation</a>
<a id="2575" class="Keyword">open</a> <a id="2580" class="Keyword">import</a> <a id="2587" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="2598" class="Keyword">private</a> <a id="2606" class="Keyword">variable</a>
  <a id="2617" href="Graded.Erasure.Extraction.Non-terminating.html#2617" class="Generalizable">b</a>           <a id="2629" class="Symbol">:</a> <a id="2631" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
  <a id="2638" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a>           <a id="2650" class="Symbol">:</a> <a id="2652" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="2658" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a>           <a id="2670" class="Symbol">:</a> <a id="2672" href="Definition.Untyped.NotParametrised.html#791" class="Datatype">Con</a> <a id="2676" href="Definition.Untyped.html#2457" class="Datatype">Term</a> <a id="2681" class="Symbol">_</a>
  <a id="2685" href="Graded.Erasure.Extraction.Non-terminating.html#2685" class="Generalizable">A</a> <a id="2687" href="Graded.Erasure.Extraction.Non-terminating.html#2687" class="Generalizable">B</a> <a id="2689" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">t</a> <a id="2691" href="Graded.Erasure.Extraction.Non-terminating.html#2691" class="Generalizable">u</a>     <a id="2697" class="Symbol">:</a> <a id="2699" href="Definition.Untyped.html#2457" class="Datatype">Term</a> <a id="2704" class="Symbol">_</a>
  <a id="2708" href="Graded.Erasure.Extraction.Non-terminating.html#2708" class="Generalizable">γ₁</a> <a id="2711" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">γ₂</a> <a id="2714" href="Graded.Erasure.Extraction.Non-terminating.html#2714" class="Generalizable">γ₃</a> <a id="2717" href="Graded.Erasure.Extraction.Non-terminating.html#2717" class="Generalizable">γ₄</a> <a id="2720" class="Symbol">:</a> <a id="2722" href="Graded.Context.html#692" class="Datatype">Conₘ</a> <a id="2727" class="Symbol">_</a>
  <a id="2731" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="2733" href="Graded.Erasure.Extraction.Non-terminating.html#2733" class="Generalizable">q</a>         <a id="2743" class="Symbol">:</a> <a id="2745" href="Graded.Erasure.Extraction.Non-terminating.html#1399" class="Bound">M</a>
  <a id="2749" href="Graded.Erasure.Extraction.Non-terminating.html#2749" class="Generalizable">v</a>           <a id="2761" class="Symbol">:</a> <a id="2763" href="Graded.Erasure.Target.html#1225" class="Datatype">T.Term</a> <a id="2770" class="Symbol">_</a>
  <a id="2774" href="Graded.Erasure.Extraction.Non-terminating.html#2774" class="Generalizable">s</a>           <a id="2786" class="Symbol">:</a> <a id="2788" href="Graded.Erasure.Target.html#645" class="Datatype">Strictness</a>

<a id="2800" class="Comment">-- Some lemmas used below.</a>

<a id="2828" class="Keyword">private</a> <a id="2836" class="Keyword">module</a> <a id="Lemmas"></a><a id="2843" href="Graded.Erasure.Extraction.Non-terminating.html#2843" class="Module">Lemmas</a> <a id="2850" class="Symbol">(</a><a id="2851" href="Graded.Erasure.Extraction.Non-terminating.html#2851" class="Bound">⊢Γ</a> <a id="2854" class="Symbol">:</a> <a id="2856" href="Definition.Typed.html#1137" class="Datatype Operator">⊢</a> <a id="2858" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a><a id="2859" class="Symbol">)</a> <a id="2861" class="Keyword">where</a> <a id="2867" class="Keyword">opaque</a>

  <a id="Lemmas.Empty⊢ℕ∷U"></a><a id="2877" href="Graded.Erasure.Extraction.Non-terminating.html#2877" class="Function">Empty⊢ℕ∷U</a> <a id="2887" class="Symbol">:</a> <a id="2889" href="Graded.Erasure.Extraction.Non-terminating.html#2858" class="Bound">Γ</a> <a id="2891" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="2893" href="Definition.Untyped.html#3002" class="InductiveConstructor">Empty</a> <a id="2899" href="Definition.Typed.html#1702" class="Datatype Operator">⊢</a> <a id="2901" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="2903" href="Definition.Typed.html#1702" class="Datatype Operator">∷</a> <a id="2905" href="Definition.Untyped.html#2950" class="InductiveConstructor">U</a>
  <a id="2909" href="Graded.Erasure.Extraction.Non-terminating.html#2877" class="Function">Empty⊢ℕ∷U</a> <a id="2919" class="Symbol">=</a> <a id="2921" href="Definition.Typed.html#1904" class="InductiveConstructor">ℕⱼ</a> <a id="2924" class="Symbol">(</a><a id="2925" href="Graded.Erasure.Extraction.Non-terminating.html#2851" class="Bound">⊢Γ</a> <a id="2928" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">∙[</a> <a id="2931" href="Definition.Typed.html#1357" class="InductiveConstructor">Emptyⱼ</a> <a id="2938" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">]</a><a id="2939" class="Symbol">)</a>

  <a id="Lemmas.Empty⊢ℕ"></a><a id="2944" href="Graded.Erasure.Extraction.Non-terminating.html#2944" class="Function">Empty⊢ℕ</a> <a id="2952" class="Symbol">:</a> <a id="2954" href="Graded.Erasure.Extraction.Non-terminating.html#2858" class="Bound">Γ</a> <a id="2956" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="2958" href="Definition.Untyped.html#3002" class="InductiveConstructor">Empty</a> <a id="2964" href="Definition.Typed.html#1259" class="Datatype Operator">⊢</a> <a id="2966" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a>
  <a id="2970" href="Graded.Erasure.Extraction.Non-terminating.html#2944" class="Function">Empty⊢ℕ</a> <a id="2978" class="Symbol">=</a> <a id="2980" href="Definition.Typed.html#1624" class="InductiveConstructor">univ</a> <a id="2985" href="Graded.Erasure.Extraction.Non-terminating.html#2877" class="Function">Empty⊢ℕ∷U</a>

  <a id="Lemmas.Empty∙ℕ⊢ℕ∷U"></a><a id="2998" href="Graded.Erasure.Extraction.Non-terminating.html#2998" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="3010" class="Symbol">:</a> <a id="3012" href="Graded.Erasure.Extraction.Non-terminating.html#2858" class="Bound">Γ</a> <a id="3014" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="3016" href="Definition.Untyped.html#3002" class="InductiveConstructor">Empty</a> <a id="3022" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="3024" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="3026" href="Definition.Typed.html#1702" class="Datatype Operator">⊢</a> <a id="3028" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="3030" href="Definition.Typed.html#1702" class="Datatype Operator">∷</a> <a id="3032" href="Definition.Untyped.html#2950" class="InductiveConstructor">U</a>
  <a id="3036" href="Graded.Erasure.Extraction.Non-terminating.html#2998" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="3048" class="Symbol">=</a> <a id="3050" href="Definition.Typed.html#1904" class="InductiveConstructor">ℕⱼ</a> <a id="3053" class="Symbol">(</a><a id="3054" href="Graded.Erasure.Extraction.Non-terminating.html#2851" class="Bound">⊢Γ</a> <a id="3057" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">∙[</a> <a id="3060" href="Definition.Typed.html#1357" class="InductiveConstructor">Emptyⱼ</a> <a id="3067" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">]</a> <a id="3069" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">∙[</a> <a id="3072" href="Definition.Typed.html#1332" class="InductiveConstructor">ℕⱼ</a> <a id="3075" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">]</a><a id="3076" class="Symbol">)</a>

  <a id="Lemmas.Empty∙ℕ∙ℕ⊢ℕ∷U"></a><a id="3081" href="Graded.Erasure.Extraction.Non-terminating.html#3081" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="3095" class="Symbol">:</a> <a id="3097" href="Graded.Erasure.Extraction.Non-terminating.html#2858" class="Bound">Γ</a> <a id="3099" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="3101" href="Definition.Untyped.html#3002" class="InductiveConstructor">Empty</a> <a id="3107" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="3109" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="3111" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="3113" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="3115" href="Definition.Typed.html#1702" class="Datatype Operator">⊢</a> <a id="3117" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="3119" href="Definition.Typed.html#1702" class="Datatype Operator">∷</a> <a id="3121" href="Definition.Untyped.html#2950" class="InductiveConstructor">U</a>
  <a id="3125" href="Graded.Erasure.Extraction.Non-terminating.html#3081" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="3139" class="Symbol">=</a> <a id="3141" href="Definition.Typed.html#1904" class="InductiveConstructor">ℕⱼ</a> <a id="3144" class="Symbol">(</a><a id="3145" href="Graded.Erasure.Extraction.Non-terminating.html#2851" class="Bound">⊢Γ</a> <a id="3148" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">∙[</a> <a id="3151" href="Definition.Typed.html#1357" class="InductiveConstructor">Emptyⱼ</a> <a id="3158" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">]</a> <a id="3160" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">∙[</a> <a id="3163" href="Definition.Typed.html#1332" class="InductiveConstructor">ℕⱼ</a> <a id="3166" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">]</a> <a id="3168" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">∙[</a> <a id="3171" href="Definition.Typed.html#1332" class="InductiveConstructor">ℕⱼ</a> <a id="3174" href="Definition.Typed.Properties.Well-formed.html#3690" class="Function Operator">]</a><a id="3175" class="Symbol">)</a>

<a id="3178" class="Keyword">opaque</a>

  <a id="3188" class="Comment">-- Another lemma used below.</a>

  <a id="▸Πℕℕ"></a><a id="3220" href="Graded.Erasure.Extraction.Non-terminating.html#3220" class="Function">▸Πℕℕ</a> <a id="3225" class="Symbol">:</a> <a id="3227" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="3229" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="3231" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="3233" class="Symbol">→</a> <a id="3235" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3238" class="Symbol">{</a><a id="3239" class="Argument">n</a> <a id="3241" class="Symbol">=</a> <a id="3243" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a><a id="3244" class="Symbol">}</a> <a id="3246" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="3249" class="InductiveConstructor">𝟙ᵐ</a> <a id="3252" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="3254" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">Π</a> <a id="3256" href="Graded.Modality.html#851" class="Function">ω</a> <a id="3258" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">,</a> <a id="3260" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="3262" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▷</a> <a id="3264" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="3266" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▹</a> <a id="3268" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a>
  <a id="3272" href="Graded.Erasure.Extraction.Non-terminating.html#3220" class="Function">▸Πℕℕ</a> <a id="3277" class="Symbol">{</a><a id="3278" href="Graded.Erasure.Extraction.Non-terminating.html#3278" class="Bound">p</a><a id="3279" class="Symbol">}</a> <a id="3281" href="Graded.Erasure.Extraction.Non-terminating.html#3281" class="Bound">p≤𝟘</a> <a id="3285" class="Symbol">=</a> <a id="3287" href="Graded.Usage.html#14282" class="InductiveConstructor">sub</a>
    <a id="3295" class="Symbol">(</a><a id="3296" href="Graded.Usage.html#8359" class="InductiveConstructor">ΠΣₘ</a> <a id="3300" href="Graded.Usage.html#8271" class="InductiveConstructor">ℕₘ</a> <a id="3303" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3305" href="Graded.Usage.html#14282" class="InductiveConstructor">sub</a> <a id="3309" href="Graded.Usage.html#8271" class="InductiveConstructor">ℕₘ</a> <a id="3312" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3314" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
        <a id="3328" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3331" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="3333" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="3335" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="3337" href="Graded.Erasure.Extraction.Non-terminating.html#3278" class="Bound">p</a>  <a id="3340" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">≈⟨</a> <a id="3343" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="3351" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="3353" href="Graded.Modality.html#2857" class="Function">·-identityˡ</a> <a id="3365" class="Symbol">_</a> <a id="3367" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">⟩</a>
        <a id="3377" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3380" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="3382" href="Graded.Erasure.Extraction.Non-terminating.html#3278" class="Bound">p</a>      <a id="3389" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">≤⟨</a> <a id="3392" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="3400" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="3402" href="Graded.Erasure.Extraction.Non-terminating.html#3281" class="Bound">p≤𝟘</a> <a id="3406" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">⟩</a>
        <a id="3416" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>          <a id="3428" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="3429" class="Symbol">)</a>
    <a id="3435" class="Symbol">(</a><a id="3436" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
       <a id="3449" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>        <a id="3459" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="3463" href="Graded.Context.Properties.Addition.html#926" class="Function">+ᶜ-identityʳ</a> <a id="3476" class="Symbol">_</a> <a id="3478" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
       <a id="3487" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3490" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="3493" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="3497" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="3498" class="Symbol">)</a>
    <a id="3504" class="Keyword">where</a>
    <a id="3514" class="Keyword">open</a> <a id="3519" href="Graded.Context.Properties.PartialOrder.html#1954" class="Module">≤ᶜ-reasoning</a>

<a id="3533" class="Comment">------------------------------------------------------------------------</a>
<a id="3606" class="Comment">-- The term former cast</a>

<a id="3631" class="Keyword">opaque</a>

  <a id="3641" class="Comment">-- A cast lemma.</a>

  <a id="cast"></a><a id="3661" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="3666" class="Symbol">:</a> <a id="3668" href="Definition.Untyped.html#2457" class="Datatype">Term</a> <a id="3673" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a> <a id="3675" class="Symbol">→</a> <a id="3677" href="Definition.Untyped.html#2457" class="Datatype">Term</a> <a id="3682" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a> <a id="3684" class="Symbol">→</a> <a id="3686" href="Definition.Untyped.html#2457" class="Datatype">Term</a> <a id="3691" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a> <a id="3693" class="Symbol">→</a> <a id="3695" href="Definition.Untyped.html#2457" class="Datatype">Term</a> <a id="3700" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a> <a id="3702" class="Symbol">→</a> <a id="3704" href="Definition.Untyped.html#2457" class="Datatype">Term</a> <a id="3709" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a>
  <a id="3713" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="3718" href="Graded.Erasure.Extraction.Non-terminating.html#3718" class="Bound">t</a> <a id="3720" href="Graded.Erasure.Extraction.Non-terminating.html#3720" class="Bound">A</a> <a id="3722" href="Graded.Erasure.Extraction.Non-terminating.html#3722" class="Bound">B</a> <a id="3724" href="Graded.Erasure.Extraction.Non-terminating.html#3724" class="Bound">u</a> <a id="3726" class="Symbol">=</a>
    <a id="3732" href="Definition.Untyped.Identity.html#916" class="Function">subst</a> <a id="3738" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="3740" href="Definition.Untyped.html#2950" class="InductiveConstructor">U</a> <a id="3742" class="Symbol">(</a><a id="3743" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="3747" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="3749" class="Symbol">)</a> <a id="3751" href="Graded.Erasure.Extraction.Non-terminating.html#3720" class="Bound">A</a> <a id="3753" href="Graded.Erasure.Extraction.Non-terminating.html#3722" class="Bound">B</a> <a id="3755" class="Symbol">(</a><a id="3756" href="Definition.Untyped.html#4473" class="InductiveConstructor">emptyrec</a> <a id="3765" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="3767" class="Symbol">(</a><a id="3768" href="Definition.Untyped.html#4533" class="InductiveConstructor">Id</a> <a id="3771" href="Definition.Untyped.html#2950" class="InductiveConstructor">U</a> <a id="3773" href="Graded.Erasure.Extraction.Non-terminating.html#3720" class="Bound">A</a> <a id="3775" href="Graded.Erasure.Extraction.Non-terminating.html#3722" class="Bound">B</a><a id="3776" class="Symbol">)</a> <a id="3778" href="Graded.Erasure.Extraction.Non-terminating.html#3718" class="Bound">t</a><a id="3779" class="Symbol">)</a> <a id="3781" href="Graded.Erasure.Extraction.Non-terminating.html#3724" class="Bound">u</a>

<a id="3784" class="Keyword">opaque</a>
  <a id="3793" class="Keyword">unfolding</a> <a id="3803" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="3808" href="Definition.Untyped.Identity.html#916" class="Function">subst</a>

  <a id="3817" class="Comment">-- An extraction lemma for cast.</a>

  <a id="erase-cast"></a><a id="3853" href="Graded.Erasure.Extraction.Non-terminating.html#3853" class="Function">erase-cast</a> <a id="3864" class="Symbol">:</a> <a id="3866" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="3873" href="Graded.Erasure.Extraction.Non-terminating.html#2617" class="Generalizable">b</a> <a id="3875" href="Graded.Erasure.Extraction.Non-terminating.html#2774" class="Generalizable">s</a> <a id="3877" class="Symbol">(</a><a id="3878" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="3883" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">t</a> <a id="3885" href="Graded.Erasure.Extraction.Non-terminating.html#2685" class="Generalizable">A</a> <a id="3887" href="Graded.Erasure.Extraction.Non-terminating.html#2687" class="Generalizable">B</a> <a id="3889" href="Graded.Erasure.Extraction.Non-terminating.html#2691" class="Generalizable">u</a><a id="3890" class="Symbol">)</a> <a id="3892" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3894" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="3901" href="Graded.Erasure.Extraction.Non-terminating.html#2617" class="Generalizable">b</a> <a id="3903" href="Graded.Erasure.Extraction.Non-terminating.html#2774" class="Generalizable">s</a> <a id="3905" href="Graded.Erasure.Extraction.Non-terminating.html#2691" class="Generalizable">u</a>
  <a id="3909" href="Graded.Erasure.Extraction.Non-terminating.html#3853" class="Function">erase-cast</a> <a id="3920" class="Symbol">=</a> <a id="3922" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a>

<a id="3931" class="Keyword">opaque</a>
  <a id="3940" class="Keyword">unfolding</a> <a id="3950" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a>

  <a id="3958" class="Comment">-- A typing rule for cast.</a>

  <a id="⊢cast"></a><a id="3988" href="Graded.Erasure.Extraction.Non-terminating.html#3988" class="Function">⊢cast</a> <a id="3994" class="Symbol">:</a>
    <a id="4000" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a> <a id="4002" href="Definition.Typed.html#1702" class="Datatype Operator">⊢</a> <a id="4004" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">t</a> <a id="4006" href="Definition.Typed.html#1702" class="Datatype Operator">∷</a> <a id="4008" href="Definition.Untyped.html#3002" class="InductiveConstructor">Empty</a> <a id="4014" class="Symbol">→</a>
    <a id="4020" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a> <a id="4022" href="Definition.Typed.html#1702" class="Datatype Operator">⊢</a> <a id="4024" href="Graded.Erasure.Extraction.Non-terminating.html#2685" class="Generalizable">A</a> <a id="4026" href="Definition.Typed.html#1702" class="Datatype Operator">∷</a> <a id="4028" href="Definition.Untyped.html#2950" class="InductiveConstructor">U</a> <a id="4030" class="Symbol">→</a>
    <a id="4036" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a> <a id="4038" href="Definition.Typed.html#1702" class="Datatype Operator">⊢</a> <a id="4040" href="Graded.Erasure.Extraction.Non-terminating.html#2687" class="Generalizable">B</a> <a id="4042" href="Definition.Typed.html#1702" class="Datatype Operator">∷</a> <a id="4044" href="Definition.Untyped.html#2950" class="InductiveConstructor">U</a> <a id="4046" class="Symbol">→</a>
    <a id="4052" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a> <a id="4054" href="Definition.Typed.html#1702" class="Datatype Operator">⊢</a> <a id="4056" href="Graded.Erasure.Extraction.Non-terminating.html#2691" class="Generalizable">u</a> <a id="4058" href="Definition.Typed.html#1702" class="Datatype Operator">∷</a> <a id="4060" href="Graded.Erasure.Extraction.Non-terminating.html#2685" class="Generalizable">A</a> <a id="4062" class="Symbol">→</a>
    <a id="4068" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a> <a id="4070" href="Definition.Typed.html#1702" class="Datatype Operator">⊢</a> <a id="4072" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="4077" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">t</a> <a id="4079" href="Graded.Erasure.Extraction.Non-terminating.html#2685" class="Generalizable">A</a> <a id="4081" href="Graded.Erasure.Extraction.Non-terminating.html#2687" class="Generalizable">B</a> <a id="4083" href="Graded.Erasure.Extraction.Non-terminating.html#2691" class="Generalizable">u</a> <a id="4085" href="Definition.Typed.html#1702" class="Datatype Operator">∷</a> <a id="4087" href="Graded.Erasure.Extraction.Non-terminating.html#2687" class="Generalizable">B</a>
  <a id="4091" href="Graded.Erasure.Extraction.Non-terminating.html#3988" class="Function">⊢cast</a> <a id="4097" href="Graded.Erasure.Extraction.Non-terminating.html#4097" class="Bound">⊢t</a> <a id="4100" href="Graded.Erasure.Extraction.Non-terminating.html#4100" class="Bound">⊢A</a> <a id="4103" href="Graded.Erasure.Extraction.Non-terminating.html#4103" class="Bound">⊢B</a> <a id="4106" class="Symbol">=</a>
    <a id="4112" href="Definition.Typed.Consequences.DerivedRules.Identity.html#11322" class="Function">⊢subst</a> <a id="4119" class="Symbol">(</a><a id="4120" href="Definition.Typed.html#1624" class="InductiveConstructor">univ</a> <a id="4125" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4127" href="Definition.Typed.Properties.html#17014" class="Function">var₀</a> <a id="4132" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4134" href="Definition.Typed.html#1307" class="InductiveConstructor">Uⱼ</a> <a id="4137" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4139" href="Definition.Typed.Properties.Well-formed.html#767" class="Function">wfTerm</a> <a id="4146" href="Graded.Erasure.Extraction.Non-terminating.html#4097" class="Bound">⊢t</a><a id="4148" class="Symbol">)</a> <a id="4150" class="Symbol">(</a><a id="4151" href="Definition.Typed.html#3536" class="InductiveConstructor">emptyrecⱼ</a> <a id="4161" class="Symbol">(</a><a id="4162" href="Definition.Typed.html#1552" class="InductiveConstructor">Idⱼ</a> <a id="4166" href="Graded.Erasure.Extraction.Non-terminating.html#4100" class="Bound">⊢A</a> <a id="4169" href="Graded.Erasure.Extraction.Non-terminating.html#4103" class="Bound">⊢B</a><a id="4171" class="Symbol">)</a> <a id="4173" href="Graded.Erasure.Extraction.Non-terminating.html#4097" class="Bound">⊢t</a><a id="4175" class="Symbol">)</a>

<a id="4178" class="Keyword">opaque</a>
  <a id="4187" class="Keyword">unfolding</a> <a id="4197" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a>

  <a id="4205" class="Comment">-- A usage rule for cast.</a>

  <a id="▸cast"></a><a id="4234" href="Graded.Erasure.Extraction.Non-terminating.html#4234" class="Function">▸cast</a> <a id="4240" class="Symbol">:</a>
    <a id="4246" href="Graded.Erasure.Extraction.Non-terminating.html#2708" class="Generalizable">γ₁</a> <a id="4249" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="4252" href="Graded.Mode.html#3379" class="Function">𝟘ᵐ?</a> <a id="4256" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="4258" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">t</a> <a id="4260" class="Symbol">→</a>
    <a id="4266" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">γ₂</a> <a id="4269" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="4272" class="InductiveConstructor">𝟙ᵐ</a> <a id="4275" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="4277" href="Graded.Erasure.Extraction.Non-terminating.html#2685" class="Generalizable">A</a> <a id="4279" class="Symbol">→</a>
    <a id="4285" href="Graded.Erasure.Extraction.Non-terminating.html#2714" class="Generalizable">γ₃</a> <a id="4288" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="4291" class="InductiveConstructor">𝟙ᵐ</a> <a id="4294" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="4296" href="Graded.Erasure.Extraction.Non-terminating.html#2687" class="Generalizable">B</a> <a id="4298" class="Symbol">→</a>
    <a id="4304" href="Graded.Erasure.Extraction.Non-terminating.html#2717" class="Generalizable">γ₄</a> <a id="4307" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="4310" class="InductiveConstructor">𝟙ᵐ</a> <a id="4313" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="4315" href="Graded.Erasure.Extraction.Non-terminating.html#2691" class="Generalizable">u</a> <a id="4317" class="Symbol">→</a>
    <a id="4323" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4326" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="4329" href="Graded.Modality.html#851" class="Function">ω</a> <a id="4331" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="4334" class="Symbol">(</a><a id="4335" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">γ₂</a> <a id="4338" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="4341" href="Graded.Erasure.Extraction.Non-terminating.html#2714" class="Generalizable">γ₃</a> <a id="4344" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="4347" href="Graded.Erasure.Extraction.Non-terminating.html#2717" class="Generalizable">γ₄</a><a id="4349" class="Symbol">)</a> <a id="4351" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="4354" class="InductiveConstructor">𝟙ᵐ</a> <a id="4357" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="4359" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="4364" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">t</a> <a id="4366" href="Graded.Erasure.Extraction.Non-terminating.html#2685" class="Generalizable">A</a> <a id="4368" href="Graded.Erasure.Extraction.Non-terminating.html#2687" class="Generalizable">B</a> <a id="4370" href="Graded.Erasure.Extraction.Non-terminating.html#2691" class="Generalizable">u</a>
  <a id="4374" href="Graded.Erasure.Extraction.Non-terminating.html#4234" class="Function">▸cast</a> <a id="4380" class="Symbol">{</a><a id="4381" href="Graded.Erasure.Extraction.Non-terminating.html#4381" class="Bound">γ₁</a><a id="4383" class="Symbol">}</a> <a id="4385" class="Symbol">{</a><a id="4386" href="Graded.Erasure.Extraction.Non-terminating.html#4386" class="Bound">γ₂</a><a id="4388" class="Symbol">}</a> <a id="4390" class="Symbol">{</a><a id="4391" href="Graded.Erasure.Extraction.Non-terminating.html#4391" class="Bound">γ₃</a><a id="4393" class="Symbol">}</a> <a id="4395" class="Symbol">{</a><a id="4396" href="Graded.Erasure.Extraction.Non-terminating.html#4396" class="Bound">γ₄</a><a id="4398" class="Symbol">}</a> <a id="4400" href="Graded.Erasure.Extraction.Non-terminating.html#4400" class="Bound">▸t</a> <a id="4403" href="Graded.Erasure.Extraction.Non-terminating.html#4403" class="Bound">▸A</a> <a id="4406" href="Graded.Erasure.Extraction.Non-terminating.html#4406" class="Bound">▸B</a> <a id="4409" href="Graded.Erasure.Extraction.Non-terminating.html#4409" class="Bound">▸u</a> <a id="4412" class="Symbol">=</a>
    <a id="4418" href="Graded.Usage.html#14282" class="InductiveConstructor">sub</a> <a id="4422" class="Symbol">(</a><a id="4423" href="Graded.Derived.Identity.html#1222" class="Function">▸subst</a> <a id="4430" href="Graded.Usage.html#8245" class="InductiveConstructor">Uₘ</a>
           <a id="4444" class="Symbol">(</a><a id="4445" href="Graded.Usage.html#14282" class="InductiveConstructor">sub</a> <a id="4449" href="Graded.Usage.html#8477" class="InductiveConstructor">var</a> <a id="4453" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4455" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
              <a id="4475" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4478" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="4480" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="4482" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="4484" href="Graded.Modality.html#849" class="Function">𝟙</a>   <a id="4488" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">≈⟨</a> <a id="4491" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="4499" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="4501" href="Graded.Modality.html#2899" class="Function">·-identityʳ</a> <a id="4513" class="Symbol">_</a> <a id="4515" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">⟩</a>
              <a id="4531" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4534" href="Graded.Context.html#1107" class="Function Operator">,</a> <a id="4536" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a> <a id="4539" href="Graded.Context.html#1107" class="Function Operator">≔</a> <a id="4541" href="Graded.Modality.html#849" class="Function">𝟙</a>  <a id="4544" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="4545" class="Symbol">)</a>
           <a id="4558" href="Graded.Erasure.Extraction.Non-terminating.html#4403" class="Bound">▸A</a> <a id="4561" href="Graded.Erasure.Extraction.Non-terminating.html#4406" class="Bound">▸B</a>
           <a id="4575" class="Symbol">(</a><a id="4576" href="Graded.Usage.html#11580" class="InductiveConstructor">emptyrecₘ</a> <a id="4586" class="Symbol">(</a><a id="4587" href="Graded.Usage.Properties.html#2604" class="Function">▸-cong</a> <a id="4594" class="Symbol">(</a><a id="4595" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">PE.sym</a> <a id="4602" href="Graded.Mode.html#17925" class="Function">⌞𝟘⌟≡𝟘ᵐ?</a><a id="4609" class="Symbol">)</a> <a id="4611" href="Graded.Erasure.Extraction.Non-terminating.html#4400" class="Bound">▸t</a><a id="4613" class="Symbol">)</a> <a id="4615" href="Function.Base.html#1974" class="Function Operator">$</a>
            <a id="4629" href="Graded.Usage.Properties.html#48847" class="Function">Idₘ-generalised</a> <a id="4645" href="Graded.Usage.html#8245" class="InductiveConstructor">Uₘ</a> <a id="4648" class="Symbol">(</a><a id="4649" href="Graded.Usage.Properties.html#3686" class="Function">▸-𝟘ᵐ?</a> <a id="4655" href="Graded.Erasure.Extraction.Non-terminating.html#4403" class="Bound">▸A</a> <a id="4658" class="Symbol">.</a><a id="4659" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4664" class="Symbol">)</a> <a id="4666" class="Symbol">(</a><a id="4667" href="Graded.Usage.Properties.html#3686" class="Function">▸-𝟘ᵐ?</a> <a id="4673" href="Graded.Erasure.Extraction.Non-terminating.html#4406" class="Bound">▸B</a> <a id="4676" class="Symbol">.</a><a id="4677" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4682" class="Symbol">)</a>
              <a id="4698" class="Symbol">(λ</a> <a id="4701" href="Graded.Erasure.Extraction.Non-terminating.html#4701" class="Bound">_</a> <a id="4703" class="Symbol">→</a> <a id="4705" href="Graded.Context.Properties.Meet.html#2368" class="Function">∧ᶜ-decreasingˡ</a> <a id="4720" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4723" class="Symbol">_)</a>
              <a id="4740" class="Symbol">(λ</a> <a id="4743" href="Graded.Erasure.Extraction.Non-terminating.html#4743" class="Bound">_</a> <a id="4745" class="Symbol">→</a> <a id="4747" href="Graded.Context.Properties.Meet.html#2582" class="Function">∧ᶜ-decreasingʳ</a> <a id="4762" class="Symbol">_</a> <a id="4764" class="Symbol">_))</a>
           <a id="4779" href="Graded.Erasure.Extraction.Non-terminating.html#4409" class="Bound">▸u</a><a id="4781" class="Symbol">)</a>
    <a id="4787" class="Symbol">(</a><a id="4788" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
       <a id="4801" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4804" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="4807" href="Graded.Modality.html#851" class="Function">ω</a> <a id="4809" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="4812" class="Symbol">(</a><a id="4813" href="Graded.Erasure.Extraction.Non-terminating.html#4386" class="Bound">γ₂</a> <a id="4816" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="4819" href="Graded.Erasure.Extraction.Non-terminating.html#4391" class="Bound">γ₃</a> <a id="4822" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="4825" href="Graded.Erasure.Extraction.Non-terminating.html#4396" class="Bound">γ₄</a><a id="4827" class="Symbol">)</a>             <a id="4841" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="4845" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="4854" class="Symbol">(</a><a id="4855" href="Graded.Context.Properties.Multiplication.html#2175" class="Function">·ᶜ-distribˡ-∧ᶜ</a> <a id="4870" class="Symbol">_</a> <a id="4872" class="Symbol">_</a> <a id="4874" class="Symbol">_)</a> <a id="4877" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="4930" href="Graded.Context.Properties.Meet.html#1530" class="Function">∧ᶜ-congʳ</a> <a id="4939" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4941" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="4950" class="Symbol">_</a> <a id="4952" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
       <a id="4961" href="Graded.Modality.html#851" class="Function">ω</a> <a id="4963" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="4966" class="Symbol">(</a><a id="4967" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4970" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="4973" href="Graded.Erasure.Extraction.Non-terminating.html#4386" class="Bound">γ₂</a> <a id="4976" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="4979" href="Graded.Erasure.Extraction.Non-terminating.html#4391" class="Bound">γ₃</a> <a id="4982" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="4985" href="Graded.Erasure.Extraction.Non-terminating.html#4396" class="Bound">γ₄</a><a id="4987" class="Symbol">)</a>             <a id="5001" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="5005" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="5014" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5067" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a>
                                                     <a id="5129" class="Symbol">(</a><a id="5130" href="Graded.Context.Properties.Meet.html#1380" class="Function">∧ᶜ-congˡ</a> <a id="5139" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                      <a id="5195" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a>
                                                        <a id="5260" class="Symbol">(</a><a id="5261" href="Graded.Context.Properties.Meet.html#1380" class="Function">∧ᶜ-congˡ</a> <a id="5270" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                         <a id="5329" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="5338" class="Symbol">(</a><a id="5339" href="Graded.Context.Properties.Meet.html#1380" class="Function">∧ᶜ-congˡ</a> <a id="5348" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5350" href="Graded.Context.Properties.Meet.html#1530" class="Function">∧ᶜ-congʳ</a> <a id="5359" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5361" href="Graded.Context.Properties.Multiplication.html#898" class="Function">·ᶜ-zeroˡ</a> <a id="5370" class="Symbol">_)</a> <a id="5373" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                         <a id="5432" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="5441" class="Symbol">(</a><a id="5442" href="Graded.Context.Properties.Equivalence.html#932" class="Function">≈ᶜ-sym</a> <a id="5449" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5451" href="Graded.Context.Properties.Meet.html#929" class="Function">∧ᶜ-assoc</a> <a id="5460" class="Symbol">_</a> <a id="5462" class="Symbol">_</a> <a id="5464" class="Symbol">_)</a> <a id="5467" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                         <a id="5526" href="Graded.Context.Properties.Meet.html#1530" class="Function">∧ᶜ-congʳ</a> <a id="5535" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5537" href="Graded.Context.Properties.Meet.html#748" class="Function">∧ᶜ-comm</a> <a id="5545" class="Symbol">_</a> <a id="5547" class="Symbol">_)</a> <a id="5550" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                      <a id="5606" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="5615" class="Symbol">(</a><a id="5616" href="Graded.Context.Properties.Meet.html#1380" class="Function">∧ᶜ-congˡ</a> <a id="5625" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5627" href="Graded.Context.Properties.Meet.html#929" class="Function">∧ᶜ-assoc</a> <a id="5636" class="Symbol">_</a> <a id="5638" class="Symbol">_</a> <a id="5640" class="Symbol">_)</a> <a id="5643" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                      <a id="5699" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="5708" class="Symbol">(</a><a id="5709" href="Graded.Context.Properties.Equivalence.html#932" class="Function">≈ᶜ-sym</a> <a id="5716" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5718" href="Graded.Context.Properties.Meet.html#929" class="Function">∧ᶜ-assoc</a> <a id="5727" class="Symbol">_</a> <a id="5729" class="Symbol">_</a> <a id="5731" class="Symbol">_)</a> <a id="5734" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                      <a id="5790" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="5799" class="Symbol">(</a><a id="5800" href="Graded.Context.Properties.Meet.html#1530" class="Function">∧ᶜ-congʳ</a> <a id="5809" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5811" href="Graded.Context.Properties.Meet.html#748" class="Function">∧ᶜ-comm</a> <a id="5819" class="Symbol">_</a> <a id="5821" class="Symbol">_)</a> <a id="5824" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                      <a id="5880" href="Graded.Context.Properties.Meet.html#929" class="Function">∧ᶜ-assoc</a> <a id="5889" class="Symbol">_</a> <a id="5891" class="Symbol">_</a> <a id="5893" class="Symbol">_)</a> <a id="5896" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5949" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="5958" class="Symbol">(</a><a id="5959" href="Graded.Context.Properties.Equivalence.html#932" class="Function">≈ᶜ-sym</a> <a id="5966" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5968" href="Graded.Context.Properties.Meet.html#929" class="Function">∧ᶜ-assoc</a> <a id="5977" class="Symbol">_</a> <a id="5979" class="Symbol">_</a> <a id="5981" class="Symbol">_)</a> <a id="5984" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="6037" href="Graded.Context.Properties.Meet.html#1530" class="Function">∧ᶜ-congʳ</a> <a id="6046" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6048" href="Graded.Context.Properties.Meet.html#603" class="Function">∧ᶜ-idem</a> <a id="6056" class="Symbol">_</a> <a id="6058" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
       <a id="6067" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6069" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="6072" class="Symbol">(</a><a id="6073" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="6076" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="6079" href="Graded.Erasure.Extraction.Non-terminating.html#4386" class="Bound">γ₂</a> <a id="6082" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="6085" href="Graded.Erasure.Extraction.Non-terminating.html#4391" class="Bound">γ₃</a> <a id="6088" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="6091" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="6093" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="6096" href="Graded.Erasure.Extraction.Non-terminating.html#4381" class="Bound">γ₁</a> <a id="6099" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="6102" href="Graded.Erasure.Extraction.Non-terminating.html#4396" class="Bound">γ₄</a><a id="6104" class="Symbol">)</a>  <a id="6107" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="6108" class="Symbol">)</a>
    <a id="6114" class="Keyword">where</a>
    <a id="6124" class="Keyword">open</a> <a id="6129" href="Graded.Context.Properties.PartialOrder.html#1954" class="Module">≤ᶜ-reasoning</a>

<a id="6143" class="Comment">------------------------------------------------------------------------</a>
<a id="6216" class="Comment">-- The term former λx∙xx</a>

<a id="6242" class="Keyword">opaque</a>

  <a id="6252" class="Comment">-- A term that is roughly &quot;λ x. x x&quot;.</a>

  <a id="λx∙xx"></a><a id="6293" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="6299" class="Symbol">:</a> <a id="6301" href="Graded.Erasure.Extraction.Non-terminating.html#1399" class="Bound">M</a> <a id="6303" class="Symbol">→</a> <a id="6305" href="Definition.Untyped.html#2457" class="Datatype">Term</a> <a id="6310" class="Symbol">(</a><a id="6311" href="Tools.Nat.html#1726" class="InductiveConstructor">1+</a> <a id="6314" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a><a id="6315" class="Symbol">)</a>
  <a id="6319" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="6325" href="Graded.Erasure.Extraction.Non-terminating.html#6325" class="Bound">p</a> <a id="6327" class="Symbol">=</a>
    <a id="6333" href="Definition.Untyped.html#3601" class="InductiveConstructor">lam</a> <a id="6337" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6339" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6341" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="6346" class="Symbol">(</a><a id="6347" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="6351" href="Tools.Fin.html#439" class="Function">x1</a><a id="6353" class="Symbol">)</a> <a id="6355" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="6357" class="Symbol">(</a><a id="6358" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">Π</a> <a id="6360" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6362" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">,</a> <a id="6364" href="Graded.Erasure.Extraction.Non-terminating.html#6325" class="Bound">p</a> <a id="6366" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▷</a> <a id="6368" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="6370" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▹</a> <a id="6372" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a><a id="6373" class="Symbol">)</a> <a id="6375" class="Symbol">(</a><a id="6376" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="6380" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="6382" class="Symbol">)</a> <a id="6384" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">∘⟨</a> <a id="6387" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6389" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">⟩</a> <a id="6391" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="6395" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a>

<a id="6399" class="Keyword">opaque</a>
  <a id="6408" class="Keyword">unfolding</a> <a id="6418" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a>

  <a id="6427" class="Comment">-- An extraction lemma for λx∙xx.</a>

  <a id="erase-λx∙xx"></a><a id="6464" href="Graded.Erasure.Extraction.Non-terminating.html#6464" class="Function">erase-λx∙xx</a> <a id="6476" class="Symbol">:</a>
    <a id="6482" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6484" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="6486" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="6488" class="Symbol">→</a>
    <a id="6494" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="6501" href="Graded.Erasure.Extraction.Non-terminating.html#2617" class="Generalizable">b</a> <a id="6503" href="Graded.Erasure.Extraction.Non-terminating.html#2774" class="Generalizable">s</a> <a id="6505" class="Symbol">(</a><a id="6506" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="6512" class="Symbol">{</a><a id="6513" class="Argument">n</a> <a id="6515" class="Symbol">=</a> <a id="6517" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a><a id="6518" class="Symbol">}</a> <a id="6520" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a><a id="6521" class="Symbol">)</a> <a id="6523" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="6529" class="InductiveConstructor">T.lam</a> <a id="6535" class="Symbol">(</a><a id="6536" href="Graded.Erasure.Target.html#1250" class="InductiveConstructor">T.var</a> <a id="6542" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a> <a id="6545" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6550" href="Graded.Erasure.Extraction.Non-terminating.html#2774" class="Generalizable">s</a> <a id="6552" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="6554" href="Graded.Erasure.Target.html#1250" class="InductiveConstructor">T.var</a> <a id="6560" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="6562" class="Symbol">)</a>
  <a id="6566" href="Graded.Erasure.Extraction.Non-terminating.html#6464" class="Function">erase-λx∙xx</a> <a id="6578" class="Symbol">{</a><a id="6579" href="Graded.Erasure.Extraction.Non-terminating.html#6579" class="Bound">b</a><a id="6580" class="Symbol">}</a> <a id="6582" class="Symbol">{</a><a id="6583" href="Graded.Erasure.Extraction.Non-terminating.html#6583" class="Bound">s</a><a id="6584" class="Symbol">}</a> <a id="6586" class="Symbol">{</a><a id="6587" href="Graded.Erasure.Extraction.Non-terminating.html#6587" class="Bound">p</a><a id="6588" class="Symbol">}</a> <a id="6590" href="Graded.Erasure.Extraction.Non-terminating.html#6590" class="Bound">ω≢𝟘</a> <a id="6594" class="Symbol">=</a>
    <a id="6600" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="6607" href="Graded.Erasure.Extraction.Non-terminating.html#6579" class="Bound">b</a> <a id="6609" href="Graded.Erasure.Extraction.Non-terminating.html#6583" class="Bound">s</a> <a id="6611" class="Symbol">(</a><a id="6612" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="6618" href="Graded.Erasure.Extraction.Non-terminating.html#6587" class="Bound">p</a><a id="6619" class="Symbol">)</a>                                          <a id="6662" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="6665" href="Graded.Erasure.Extraction.Properties.html#2930" class="Function">lam-≢𝟘</a> <a id="6672" href="Graded.Erasure.Extraction.Non-terminating.html#6579" class="Bound">b</a> <a id="6674" href="Graded.Erasure.Extraction.Non-terminating.html#6590" class="Bound">ω≢𝟘</a> <a id="6678" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>

    <a id="6685" href="Graded.Erasure.Target.html#1283" class="InductiveConstructor">T.lam</a>
      <a id="6697" class="Symbol">(</a><a id="6698" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="6705" href="Graded.Erasure.Extraction.Non-terminating.html#6579" class="Bound">b</a> <a id="6707" href="Graded.Erasure.Extraction.Non-terminating.html#6583" class="Bound">s</a> <a id="6709" href="Function.Base.html#1974" class="Function Operator">$</a>
       <a id="6718" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="6723" class="Symbol">(</a><a id="6724" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="6728" href="Tools.Fin.html#439" class="Function">x1</a><a id="6730" class="Symbol">)</a> <a id="6732" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="6734" class="Symbol">(</a><a id="6735" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">Π</a> <a id="6737" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6739" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">,</a> <a id="6741" href="Graded.Erasure.Extraction.Non-terminating.html#6587" class="Bound">p</a> <a id="6743" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▷</a> <a id="6745" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="6747" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▹</a> <a id="6749" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a><a id="6750" class="Symbol">)</a> <a id="6752" class="Symbol">(</a><a id="6753" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="6757" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="6759" class="Symbol">)</a> <a id="6761" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">∘⟨</a> <a id="6764" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6766" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">⟩</a> <a id="6768" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="6772" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="6774" class="Symbol">)</a>  <a id="6777" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="6780" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a> <a id="6788" href="Graded.Erasure.Target.html#1283" class="InductiveConstructor">T.lam</a> <a id="6794" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6796" href="Graded.Erasure.Extraction.Properties.html#2751" class="Function">∘-≢𝟘</a> <a id="6801" href="Graded.Erasure.Extraction.Non-terminating.html#6590" class="Bound">ω≢𝟘</a> <a id="6805" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>

    <a id="6812" href="Graded.Erasure.Target.html#1283" class="InductiveConstructor">T.lam</a>
      <a id="6824" class="Symbol">(</a><a id="6825" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="6832" href="Graded.Erasure.Extraction.Non-terminating.html#6579" class="Bound">b</a> <a id="6834" href="Graded.Erasure.Extraction.Non-terminating.html#6583" class="Bound">s</a>
         <a id="6845" class="Symbol">(</a><a id="6846" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="6851" class="Symbol">(</a><a id="6852" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="6856" href="Tools.Fin.html#439" class="Function">x1</a><a id="6858" class="Symbol">)</a> <a id="6860" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="6862" class="Symbol">(</a><a id="6863" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">Π</a> <a id="6865" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6867" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">,</a> <a id="6869" href="Graded.Erasure.Extraction.Non-terminating.html#6587" class="Bound">p</a> <a id="6871" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▷</a> <a id="6873" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="6875" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▹</a> <a id="6877" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a><a id="6878" class="Symbol">)</a> <a id="6880" class="Symbol">(</a><a id="6881" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="6885" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="6887" class="Symbol">))</a>
         <a id="6899" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6904" href="Graded.Erasure.Extraction.Non-terminating.html#6583" class="Bound">s</a> <a id="6906" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="6908" href="Graded.Erasure.Target.html#1250" class="InductiveConstructor">T.var</a> <a id="6914" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="6916" class="Symbol">)</a>                                       <a id="6956" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="6959" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a> <a id="6967" class="Symbol">(λ</a> <a id="6970" href="Graded.Erasure.Extraction.Non-terminating.html#6970" class="Bound">t</a> <a id="6972" class="Symbol">→</a> <a id="6974" href="Graded.Erasure.Target.html#1283" class="InductiveConstructor">T.lam</a> <a id="6980" class="Symbol">(</a><a id="6981" href="Graded.Erasure.Extraction.Non-terminating.html#6970" class="Bound">t</a> <a id="6983" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6988" class="Symbol">_</a> <a id="6990" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="6992" class="Symbol">_))</a> <a id="6996" href="Graded.Erasure.Extraction.Non-terminating.html#3853" class="Function">erase-cast</a> <a id="7007" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>

    <a id="7014" href="Graded.Erasure.Target.html#1283" class="InductiveConstructor">T.lam</a> <a id="7020" class="Symbol">(</a><a id="7021" href="Graded.Erasure.Target.html#1250" class="InductiveConstructor">T.var</a> <a id="7027" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a> <a id="7030" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="7035" href="Graded.Erasure.Extraction.Non-terminating.html#6583" class="Bound">s</a> <a id="7037" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="7039" href="Graded.Erasure.Target.html#1250" class="InductiveConstructor">T.var</a> <a id="7045" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="7047" class="Symbol">)</a>                            <a id="7076" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a>
    <a id="7082" class="Keyword">where</a>
    <a id="7092" class="Keyword">open</a> <a id="7097" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="7136" class="Keyword">opaque</a>
  <a id="7145" class="Keyword">unfolding</a> <a id="7155" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a>

  <a id="7164" class="Comment">-- A typing rule for λx∙xx.</a>

  <a id="⊢λx∙xx"></a><a id="7195" href="Graded.Erasure.Extraction.Non-terminating.html#7195" class="Function">⊢λx∙xx</a> <a id="7202" class="Symbol">:</a>
    <a id="7208" href="Definition.Typed.Restrictions.html#1152" class="Function">Π-allowed</a> <a id="7218" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7220" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="7222" class="Symbol">→</a>
    <a id="7228" href="Definition.Typed.html#1137" class="Datatype Operator">⊢</a> <a id="7230" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a> <a id="7232" class="Symbol">→</a>
    <a id="7238" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a> <a id="7240" class="InductiveConstructor Operator">∙</a> <a id="7242" href="Definition.Untyped.html#3002" class="InductiveConstructor">Empty</a> <a id="7248" href="Definition.Typed.html#1702" class="Datatype Operator">⊢</a> <a id="7250" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="7256" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="7258" href="Definition.Typed.html#1702" class="Datatype Operator">∷</a> <a id="7260" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">Π</a> <a id="7262" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7264" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">,</a> <a id="7266" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="7268" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▷</a> <a id="7270" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="7272" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▹</a> <a id="7274" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a>
  <a id="7278" href="Graded.Erasure.Extraction.Non-terminating.html#7195" class="Function">⊢λx∙xx</a> <a id="7285" href="Graded.Erasure.Extraction.Non-terminating.html#7285" class="Bound">ω-ok</a> <a id="7290" href="Graded.Erasure.Extraction.Non-terminating.html#7290" class="Bound">⊢Γ</a> <a id="7293" class="Symbol">=</a>
    <a id="7299" href="Definition.Typed.Consequences.DerivedRules.Pi.html#1492" class="Function">lamⱼ′</a> <a id="7305" href="Graded.Erasure.Extraction.Non-terminating.html#7285" class="Bound">ω-ok</a> <a id="7310" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="7316" href="Graded.Erasure.Extraction.Non-terminating.html#3988" class="Function">⊢cast</a> <a id="7322" class="Symbol">(</a><a id="7323" href="Definition.Typed.Properties.html#17133" class="Function">var₁</a> <a id="7328" href="Graded.Erasure.Extraction.Non-terminating.html#2944" class="Function">Empty⊢ℕ</a><a id="7335" class="Symbol">)</a> <a id="7337" href="Graded.Erasure.Extraction.Non-terminating.html#2998" class="Function">Empty∙ℕ⊢ℕ∷U</a>
      <a id="7355" class="Symbol">(</a><a id="7356" href="Definition.Typed.html#1761" class="InductiveConstructor">ΠΣⱼ</a> <a id="7360" href="Graded.Erasure.Extraction.Non-terminating.html#2998" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="7372" href="Graded.Erasure.Extraction.Non-terminating.html#3081" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="7386" href="Graded.Erasure.Extraction.Non-terminating.html#7285" class="Bound">ω-ok</a><a id="7390" class="Symbol">)</a> <a id="7392" class="Symbol">(</a><a id="7393" href="Definition.Typed.Properties.html#17014" class="Function">var₀</a> <a id="7398" href="Graded.Erasure.Extraction.Non-terminating.html#2944" class="Function">Empty⊢ℕ</a><a id="7405" class="Symbol">)</a> <a id="7407" href="Definition.Typed.html#2319" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="7414" href="Definition.Typed.Properties.html#17014" class="Function">var₀</a> <a id="7419" href="Graded.Erasure.Extraction.Non-terminating.html#2944" class="Function">Empty⊢ℕ</a>
    <a id="7431" class="Keyword">where</a>
    <a id="7441" class="Keyword">open</a> <a id="7446" href="Graded.Erasure.Extraction.Non-terminating.html#2843" class="Module">Lemmas</a> <a id="7453" href="Graded.Erasure.Extraction.Non-terminating.html#7290" class="Bound">⊢Γ</a>

<a id="7457" class="Keyword">opaque</a>
  <a id="7466" class="Keyword">unfolding</a> <a id="7476" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a>

  <a id="7485" class="Comment">-- A usage rule for λx∙xx.</a>

  <a id="▸λx∙xx"></a><a id="7515" href="Graded.Erasure.Extraction.Non-terminating.html#7515" class="Function">▸λx∙xx</a> <a id="7522" class="Symbol">:</a>
    <a id="7528" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7530" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="7532" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="7534" class="Symbol">→</a>
    <a id="7540" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7542" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="7544" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7546" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="7548" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7550" class="Symbol">→</a>
    <a id="7556" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="7558" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="7560" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="7562" class="Symbol">→</a>
    <a id="7568" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7571" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="7574" class="InductiveConstructor">𝟙ᵐ</a> <a id="7577" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="7579" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="7585" class="Symbol">{</a><a id="7586" class="Argument">n</a> <a id="7588" class="Symbol">=</a> <a id="7590" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a><a id="7591" class="Symbol">}</a> <a id="7593" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a>
  <a id="7597" href="Graded.Erasure.Extraction.Non-terminating.html#7515" class="Function">▸λx∙xx</a> <a id="7604" class="Symbol">{</a><a id="7605" href="Graded.Erasure.Extraction.Non-terminating.html#7605" class="Bound">p</a><a id="7606" class="Symbol">}</a> <a id="7608" href="Graded.Erasure.Extraction.Non-terminating.html#7608" class="Bound">ω≤𝟘</a> <a id="7612" href="Graded.Erasure.Extraction.Non-terminating.html#7612" class="Bound">ω≤ω+ω</a> <a id="7618" href="Graded.Erasure.Extraction.Non-terminating.html#7618" class="Bound">p≤𝟘</a> <a id="7622" class="Symbol">=</a>
    <a id="7628" href="Graded.Usage.html#8522" class="InductiveConstructor">lamₘ</a> <a id="7633" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="7635" href="Graded.Usage.html#14282" class="InductiveConstructor">sub</a> <a id="7639" class="Symbol">(</a><a id="7640" href="Graded.Erasure.Extraction.Non-terminating.html#4234" class="Function">▸cast</a> <a id="7646" href="Graded.Usage.html#8477" class="InductiveConstructor">var</a> <a id="7650" href="Graded.Usage.html#8271" class="InductiveConstructor">ℕₘ</a> <a id="7653" class="Symbol">(</a><a id="7654" href="Graded.Erasure.Extraction.Non-terminating.html#3220" class="Function">▸Πℕℕ</a> <a id="7659" href="Graded.Erasure.Extraction.Non-terminating.html#7618" class="Bound">p≤𝟘</a><a id="7662" class="Symbol">)</a> <a id="7664" href="Graded.Usage.html#8477" class="InductiveConstructor">var</a> <a id="7668" href="Graded.Usage.html#8591" class="InductiveConstructor Operator">∘ₘ</a> <a id="7671" href="Graded.Usage.html#8477" class="InductiveConstructor">var</a><a id="7674" class="Symbol">)</a> <a id="7676" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="7678" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
      <a id="7690" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7693" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7695" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="7697" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="7699" href="Graded.Modality.html#851" class="Function">ω</a>                              <a id="7730" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">≈⟨</a> <a id="7733" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="7741" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="7743" href="Graded.Modality.html#2857" class="Function">·-identityˡ</a> <a id="7755" class="Symbol">_</a> <a id="7757" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">⟩</a>

      <a id="7766" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7769" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7771" href="Graded.Modality.html#851" class="Function">ω</a>                                  <a id="7806" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">≤⟨</a> <a id="7809" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="7817" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="7819" href="Graded.Erasure.Extraction.Non-terminating.html#7612" class="Bound">ω≤ω+ω</a> <a id="7825" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">⟩</a>

      <a id="7834" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7837" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7839" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7841" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="7843" href="Graded.Modality.html#851" class="Function">ω</a>                              <a id="7874" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="7878" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="7886" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="7888" href="Algebra.Structures.html#11704" class="Function">+-congʳ</a> <a id="7896" class="Symbol">(</a><a id="7897" href="Graded.Modality.html#3275" class="Function">∧-idem</a> <a id="7904" class="Symbol">_)</a> <a id="7907" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>

      <a id="7916" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7919" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7921" class="Symbol">(</a><a id="7922" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7924" href="Graded.Modality.html#831" class="Function Operator">∧</a> <a id="7926" href="Graded.Modality.html#851" class="Function">ω</a><a id="7927" class="Symbol">)</a> <a id="7929" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="7931" href="Graded.Modality.html#851" class="Function">ω</a>                        <a id="7956" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">≤⟨</a> <a id="7959" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="7967" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="7969" href="Graded.Modality.Properties.Addition.html#699" class="Function">+-monotoneˡ</a> <a id="7981" class="Symbol">(</a><a id="7982" href="Graded.Modality.Properties.Meet.html#752" class="Function">∧-monotoneˡ</a> <a id="7994" href="Graded.Erasure.Extraction.Non-terminating.html#7608" class="Bound">ω≤𝟘</a><a id="7997" class="Symbol">)</a> <a id="7999" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">⟩</a>

      <a id="8008" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="8011" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="8013" class="Symbol">(</a><a id="8014" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="8016" href="Graded.Modality.html#831" class="Function Operator">∧</a> <a id="8018" href="Graded.Modality.html#851" class="Function">ω</a><a id="8019" class="Symbol">)</a> <a id="8021" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="8023" href="Graded.Modality.html#851" class="Function">ω</a>                        <a id="8048" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="8052" class="Symbol">(</a><a id="8053" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a>
                                                     <a id="8115" class="Symbol">(</a><a id="8116" href="Graded.Context.Properties.Addition.html#2458" class="Function">+ᶜ-cong</a>
                                                        <a id="8180" class="Symbol">(</a><a id="8181" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="8190" class="Symbol">(</a><a id="8191" href="Graded.Context.Properties.Meet.html#1380" class="Function">∧ᶜ-congˡ</a> <a id="8200" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="8202" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="8211" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="8213" href="Graded.Context.Properties.Meet.html#603" class="Function">∧ᶜ-idem</a> <a id="8221" class="Symbol">_)</a> <a id="8224" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                         <a id="8283" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="8292" class="Symbol">(</a><a id="8293" href="Graded.Context.Properties.Meet.html#1380" class="Function">∧ᶜ-congˡ</a> <a id="8302" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="8304" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="8313" class="Symbol">_)</a> <a id="8316" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                         <a id="8375" href="Graded.Context.Properties.Meet.html#603" class="Function">∧ᶜ-idem</a> <a id="8383" class="Symbol">_)</a>
                                                        <a id="8442" class="Symbol">(</a><a id="8443" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="8452" class="Symbol">_))</a> <a id="8456" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="8509" href="Graded.Context.Properties.Addition.html#926" class="Function">+ᶜ-identityʳ</a> <a id="8522" class="Symbol">_)</a> <a id="8525" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a>
                                                  <a id="8577" href="Algebra.Structures.html#11625" class="Function">+-cong</a>
                                                    <a id="8636" class="Symbol">(</a><a id="8637" href="Relation.Binary.PropositionalEquality.Core.html#1757" class="Function">PE.trans</a> <a id="8646" class="Symbol">(</a><a id="8647" href="Algebra.Lattice.Structures.html#1542" class="Function">∧-congˡ</a> <a id="8655" href="Graded.Modality.Properties.Meet.html#5287" class="Function">·[𝟘∧𝟙]≡𝟘∧</a><a id="8664" class="Symbol">)</a> <a id="8666" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                     <a id="8721" href="Relation.Binary.PropositionalEquality.Core.html#1757" class="Function">PE.trans</a> <a id="8730" class="Symbol">(</a><a id="8731" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">PE.sym</a> <a id="8738" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="8740" href="Graded.Modality.html#3306" class="Function">∧-assoc</a> <a id="8748" class="Symbol">_</a> <a id="8750" class="Symbol">_</a> <a id="8752" class="Symbol">_)</a> <a id="8755" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                     <a id="8810" href="Algebra.Lattice.Structures.html#1567" class="Function">∧-congʳ</a> <a id="8818" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="8820" href="Graded.Modality.html#3275" class="Function">∧-idem</a> <a id="8827" class="Symbol">_)</a>
                                                    <a id="8882" href="Graded.Mode.html#19707" class="Function">·⌜⌞⌟⌝</a> <a id="8888" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
      <a id="8896" class="Symbol">(</a><a id="8897" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="8900" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="8903" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8905" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="8908" class="Symbol">(</a><a id="8909" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="8912" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="8915" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a><a id="8917" class="Symbol">))</a> <a id="8920" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="8923" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8925" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="8928" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="8931" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a>
      <a id="8939" class="Symbol">(</a><a id="8940" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="8942" href="Graded.Modality.html#831" class="Function Operator">∧</a> <a id="8944" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8946" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="8948" class="Symbol">(</a><a id="8949" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="8951" href="Graded.Modality.html#831" class="Function Operator">∧</a> <a id="8953" href="Graded.Modality.html#849" class="Function">𝟙</a><a id="8954" class="Symbol">))</a> <a id="8957" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="8959" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8961" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="8963" href="Graded.Mode.html#4918" class="Function Operator">⌜</a> <a id="8965" href="Graded.Mode.html#5253" class="Function Operator">⌞</a> <a id="8967" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8969" href="Graded.Mode.html#5253" class="Function Operator">⌟</a> <a id="8971" href="Graded.Mode.html#4918" class="Function Operator">⌝</a>       <a id="8979" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="8983" href="Graded.Context.Properties.Addition.html#2746" class="Function">+ᶜ-congʳ</a> <a id="8992" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                  <a id="9044" href="Graded.Context.Properties.Meet.html#1380" class="Function">∧ᶜ-congˡ</a> <a id="9053" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="9055" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="9064" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                  <a id="9116" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="9125" class="Symbol">(</a><a id="9126" href="Graded.Context.Properties.Equivalence.html#932" class="Function">≈ᶜ-sym</a> <a id="9133" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="9135" href="Graded.Context.Properties.Meet.html#929" class="Function">∧ᶜ-assoc</a> <a id="9144" class="Symbol">_</a> <a id="9146" class="Symbol">_</a> <a id="9148" class="Symbol">_)</a> <a id="9151" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                  <a id="9203" href="Graded.Context.Properties.Meet.html#1530" class="Function">∧ᶜ-congʳ</a> <a id="9212" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="9214" href="Graded.Context.Properties.Meet.html#603" class="Function">∧ᶜ-idem</a> <a id="9222" class="Symbol">_</a> <a id="9224" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
      <a id="9232" class="Symbol">(</a><a id="9233" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="9236" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="9239" href="Graded.Modality.html#851" class="Function">ω</a> <a id="9241" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="9244" class="Symbol">(</a><a id="9245" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="9248" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="9251" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="9254" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="9257" class="Symbol">(</a><a id="9258" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="9261" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="9263" href="Graded.Modality.html#849" class="Function">𝟙</a><a id="9264" class="Symbol">)))</a> <a id="9268" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a>
      <a id="9277" href="Graded.Modality.html#851" class="Function">ω</a> <a id="9279" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="9282" class="Symbol">(</a><a id="9283" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="9286" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="9288" href="Graded.Mode.html#4918" class="Function Operator">⌜</a> <a id="9290" href="Graded.Mode.html#5253" class="Function Operator">⌞</a> <a id="9292" href="Graded.Modality.html#851" class="Function">ω</a> <a id="9294" href="Graded.Mode.html#5253" class="Function Operator">⌟</a> <a id="9296" href="Graded.Mode.html#4918" class="Function Operator">⌝</a><a id="9297" class="Symbol">)</a>                   <a id="9317" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a>
    <a id="9323" class="Keyword">where</a>
    <a id="9333" class="Keyword">open</a> <a id="9338" href="Graded.Context.Properties.PartialOrder.html#1954" class="Module">≤ᶜ-reasoning</a>

<a id="9352" class="Comment">------------------------------------------------------------------------</a>
<a id="9425" class="Comment">-- The term former extracts-to-loop</a>

<a id="9462" class="Keyword">opaque</a>

  <a id="9472" class="Comment">-- A term for which the extraction is loop s (for some s) if</a>
  <a id="9535" class="Comment">-- erasable arguments are removed entirely.</a>

  <a id="extracts-to-loop"></a><a id="9582" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a> <a id="9599" class="Symbol">:</a> <a id="9601" href="Graded.Erasure.Extraction.Non-terminating.html#1399" class="Bound">M</a> <a id="9603" class="Symbol">→</a> <a id="9605" href="Definition.Untyped.html#2457" class="Datatype">Term</a> <a id="9610" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a>
  <a id="9614" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a> <a id="9631" href="Graded.Erasure.Extraction.Non-terminating.html#9631" class="Bound">p</a> <a id="9633" class="Symbol">=</a>
    <a id="9639" href="Definition.Untyped.html#3601" class="InductiveConstructor">lam</a> <a id="9643" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="9645" class="Symbol">(</a><a id="9646" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="9652" href="Graded.Erasure.Extraction.Non-terminating.html#9631" class="Bound">p</a> <a id="9654" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">∘⟨</a> <a id="9657" href="Graded.Modality.html#851" class="Function">ω</a> <a id="9659" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">⟩</a> <a id="9661" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="9666" class="Symbol">(</a><a id="9667" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="9671" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="9673" class="Symbol">)</a> <a id="9675" class="Symbol">(</a><a id="9676" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">Π</a> <a id="9678" href="Graded.Modality.html#851" class="Function">ω</a> <a id="9680" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">,</a> <a id="9682" href="Graded.Erasure.Extraction.Non-terminating.html#9631" class="Bound">p</a> <a id="9684" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▷</a> <a id="9686" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="9688" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▹</a> <a id="9690" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a><a id="9691" class="Symbol">)</a> <a id="9693" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="9695" class="Symbol">(</a><a id="9696" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="9702" href="Graded.Erasure.Extraction.Non-terminating.html#9631" class="Bound">p</a><a id="9703" class="Symbol">))</a>

<a id="9707" class="Keyword">opaque</a>
  <a id="9716" class="Keyword">unfolding</a> <a id="9726" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a> <a id="9743" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a>

  <a id="9751" class="Comment">-- An extraction lemma for extracts-to-loop.</a>

  <a id="erase-extracts-to-loop"></a><a id="9799" href="Graded.Erasure.Extraction.Non-terminating.html#9799" class="Function">erase-extracts-to-loop</a> <a id="9822" class="Symbol">:</a>
    <a id="9828" href="Graded.Modality.html#851" class="Function">ω</a> <a id="9830" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="9832" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="9834" class="Symbol">→</a>
    <a id="9840" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="9847" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9852" href="Graded.Erasure.Extraction.Non-terminating.html#2774" class="Generalizable">s</a> <a id="9854" class="Symbol">(</a><a id="9855" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a> <a id="9872" class="Symbol">{</a><a id="9873" class="Argument">n</a> <a id="9875" class="Symbol">=</a> <a id="9877" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a><a id="9878" class="Symbol">}</a> <a id="9880" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a><a id="9881" class="Symbol">)</a> <a id="9883" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="9885" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="9890" href="Graded.Erasure.Extraction.Non-terminating.html#2774" class="Generalizable">s</a>
  <a id="9894" href="Graded.Erasure.Extraction.Non-terminating.html#9799" class="Function">erase-extracts-to-loop</a> <a id="9917" class="Symbol">{</a><a id="9918" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a><a id="9919" class="Symbol">}</a> <a id="9921" class="Symbol">{</a><a id="9922" href="Graded.Erasure.Extraction.Non-terminating.html#9922" class="Bound">p</a><a id="9923" class="Symbol">}</a> <a id="9925" href="Graded.Erasure.Extraction.Non-terminating.html#9925" class="Bound">ω≢𝟘</a> <a id="9929" class="Symbol">=</a>
    <a id="9935" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="9942" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9947" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a> <a id="9949" class="Symbol">(</a><a id="9950" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a> <a id="9967" href="Graded.Erasure.Extraction.Non-terminating.html#9922" class="Bound">p</a><a id="9968" class="Symbol">)</a>                              <a id="9999" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="10002" href="Graded.Erasure.Extraction.Properties.html#3327" class="Function">lam-𝟘-remove</a> <a id="10015" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>

    <a id="10022" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="10029" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="10034" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a>
      <a id="10042" class="Symbol">(</a><a id="10043" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="10049" href="Graded.Erasure.Extraction.Non-terminating.html#9922" class="Bound">p</a> <a id="10051" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">∘⟨</a> <a id="10054" href="Graded.Modality.html#851" class="Function">ω</a> <a id="10056" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">⟩</a> <a id="10058" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="10063" class="Symbol">(</a><a id="10064" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="10068" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="10070" class="Symbol">)</a> <a id="10072" class="Symbol">(</a><a id="10073" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">Π</a> <a id="10075" href="Graded.Modality.html#851" class="Function">ω</a> <a id="10077" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">,</a> <a id="10079" href="Graded.Erasure.Extraction.Non-terminating.html#9922" class="Bound">p</a> <a id="10081" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▷</a> <a id="10083" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="10085" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▹</a> <a id="10087" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a><a id="10088" class="Symbol">)</a> <a id="10090" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="10092" class="Symbol">(</a><a id="10093" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="10099" href="Graded.Erasure.Extraction.Non-terminating.html#9922" class="Bound">p</a><a id="10100" class="Symbol">))</a>
      <a id="10109" href="Graded.Erasure.Target.html#5699" class="Function Operator">T.[</a> <a id="10113" href="Graded.Erasure.Extraction.html#852" class="Function">loop?</a> <a id="10119" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a> <a id="10121" href="Graded.Erasure.Target.html#5699" class="Function Operator">]₀</a>                                                <a id="10171" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="10174" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a> <a id="10182" href="Graded.Erasure.Target.html#4782" class="Function Operator">T._[</a> <a id="10187" class="Symbol">_</a> <a id="10189" href="Graded.Erasure.Target.html#4782" class="Function Operator">]</a> <a id="10191" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                       <a id="10264" href="Graded.Erasure.Extraction.Properties.html#2751" class="Function">∘-≢𝟘</a> <a id="10269" href="Graded.Erasure.Extraction.Non-terminating.html#9925" class="Bound">ω≢𝟘</a> <a id="10273" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>
    <a id="10279" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="10286" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="10291" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a> <a id="10293" class="Symbol">(</a><a id="10294" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="10300" href="Graded.Erasure.Extraction.Non-terminating.html#9922" class="Bound">p</a><a id="10301" class="Symbol">)</a> <a id="10303" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="10308" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a> <a id="10310" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a>
      <a id="10318" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="10325" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="10330" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a>
        <a id="10340" class="Symbol">(</a><a id="10341" href="Graded.Erasure.Extraction.Non-terminating.html#3661" class="Function">cast</a> <a id="10346" class="Symbol">(</a><a id="10347" href="Definition.Untyped.html#2488" class="InductiveConstructor">var</a> <a id="10351" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="10353" class="Symbol">)</a> <a id="10355" class="Symbol">(</a><a id="10356" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">Π</a> <a id="10358" href="Graded.Modality.html#851" class="Function">ω</a> <a id="10360" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">,</a> <a id="10362" href="Graded.Erasure.Extraction.Non-terminating.html#9922" class="Bound">p</a> <a id="10364" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▷</a> <a id="10366" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="10368" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▹</a> <a id="10370" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a><a id="10371" class="Symbol">)</a> <a id="10373" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a> <a id="10375" class="Symbol">(</a><a id="10376" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="10382" href="Graded.Erasure.Extraction.Non-terminating.html#9922" class="Bound">p</a><a id="10383" class="Symbol">))</a>
      <a id="10392" href="Graded.Erasure.Target.html#5699" class="Function Operator">T.[</a> <a id="10396" href="Graded.Erasure.Extraction.html#852" class="Function">loop?</a> <a id="10402" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a> <a id="10404" href="Graded.Erasure.Target.html#5699" class="Function Operator">]₀</a>                                                <a id="10454" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="10457" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a>
                                                                         <a id="10538" class="Symbol">(λ</a> <a id="10541" href="Graded.Erasure.Extraction.Non-terminating.html#10541" class="Bound">t</a> <a id="10543" class="Symbol">→</a> <a id="10545" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="10552" class="Symbol">_</a> <a id="10554" class="Symbol">_</a> <a id="10556" class="Symbol">(</a><a id="10557" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="10563" class="Symbol">_)</a> <a id="10566" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="10571" class="Symbol">_</a> <a id="10573" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="10575" href="Graded.Erasure.Extraction.Non-terminating.html#10541" class="Bound">t</a> <a id="10577" href="Graded.Erasure.Target.html#4782" class="Function Operator">T.[</a> <a id="10581" class="Symbol">_</a> <a id="10583" href="Graded.Erasure.Target.html#4782" class="Function Operator">]</a><a id="10584" class="Symbol">)</a>
                                                                         <a id="10659" href="Graded.Erasure.Extraction.Non-terminating.html#3853" class="Function">erase-cast</a> <a id="10670" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>
    <a id="10676" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="10683" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="10688" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a> <a id="10690" class="Symbol">(</a><a id="10691" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="10697" href="Graded.Erasure.Extraction.Non-terminating.html#9922" class="Bound">p</a><a id="10698" class="Symbol">)</a> <a id="10700" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="10705" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a> <a id="10707" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a>
      <a id="10715" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="10722" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="10727" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a> <a id="10729" class="Symbol">(</a><a id="10730" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="10736" href="Graded.Erasure.Extraction.Non-terminating.html#9922" class="Bound">p</a><a id="10737" class="Symbol">)</a>
      <a id="10745" href="Graded.Erasure.Target.html#5699" class="Function Operator">T.[</a> <a id="10749" href="Graded.Erasure.Extraction.html#852" class="Function">loop?</a> <a id="10755" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a> <a id="10757" href="Graded.Erasure.Target.html#5699" class="Function Operator">]₀</a>                                                <a id="10807" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="10810" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a> <a id="10818" class="Symbol">(λ</a> <a id="10821" href="Graded.Erasure.Extraction.Non-terminating.html#10821" class="Bound">t</a> <a id="10823" class="Symbol">→</a> <a id="10825" href="Graded.Erasure.Extraction.Non-terminating.html#10821" class="Bound">t</a> <a id="10827" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="10832" class="Symbol">_</a> <a id="10834" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="10836" href="Graded.Erasure.Extraction.Non-terminating.html#10821" class="Bound">t</a> <a id="10838" href="Graded.Erasure.Target.html#4782" class="Function Operator">T.[</a> <a id="10842" class="Symbol">_</a> <a id="10844" href="Graded.Erasure.Target.html#4782" class="Function Operator">]</a><a id="10845" class="Symbol">)</a> <a id="10847" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                       <a id="10920" href="Graded.Erasure.Extraction.Non-terminating.html#6464" class="Function">erase-λx∙xx</a> <a id="10932" href="Graded.Erasure.Extraction.Non-terminating.html#9925" class="Bound">ω≢𝟘</a> <a id="10936" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>
    <a id="10942" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="10947" href="Graded.Erasure.Extraction.Non-terminating.html#9918" class="Bound">s</a>                                                          <a id="11006" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a>
    <a id="11012" class="Keyword">where</a>
    <a id="11022" class="Keyword">open</a> <a id="11027" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="11066" class="Keyword">opaque</a>
  <a id="11075" class="Keyword">unfolding</a> <a id="11085" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a>

  <a id="11105" class="Comment">-- A typing rule for extracts-to-loop.</a>

  <a id="⊢extracts-to-loop"></a><a id="11147" href="Graded.Erasure.Extraction.Non-terminating.html#11147" class="Function">⊢extracts-to-loop</a> <a id="11165" class="Symbol">:</a>
    <a id="11171" href="Definition.Typed.Restrictions.html#1152" class="Function">Π-allowed</a> <a id="11181" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="11183" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="11185" class="Symbol">→</a>
    <a id="11191" href="Definition.Typed.Restrictions.html#1152" class="Function">Π-allowed</a> <a id="11201" href="Graded.Modality.html#851" class="Function">ω</a> <a id="11203" href="Graded.Erasure.Extraction.Non-terminating.html#2733" class="Generalizable">q</a> <a id="11205" class="Symbol">→</a>
    <a id="11211" href="Definition.Typed.html#1137" class="Datatype Operator">⊢</a> <a id="11213" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a> <a id="11215" class="Symbol">→</a>
    <a id="11221" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a> <a id="11223" href="Definition.Typed.html#1702" class="Datatype Operator">⊢</a> <a id="11225" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a> <a id="11242" href="Graded.Erasure.Extraction.Non-terminating.html#2733" class="Generalizable">q</a> <a id="11244" href="Definition.Typed.html#1702" class="Datatype Operator">∷</a> <a id="11246" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">Π</a> <a id="11248" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="11250" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">,</a> <a id="11252" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="11254" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▷</a> <a id="11256" href="Definition.Untyped.html#3002" class="InductiveConstructor">Empty</a> <a id="11262" href="Definition.Untyped.html#3250" class="InductiveConstructor Operator">▹</a> <a id="11264" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a>
  <a id="11268" href="Graded.Erasure.Extraction.Non-terminating.html#11147" class="Function">⊢extracts-to-loop</a> <a id="11286" href="Graded.Erasure.Extraction.Non-terminating.html#11286" class="Bound">𝟘-ok</a> <a id="11291" href="Graded.Erasure.Extraction.Non-terminating.html#11291" class="Bound">ω-ok</a> <a id="11296" href="Graded.Erasure.Extraction.Non-terminating.html#11296" class="Bound">⊢Γ</a> <a id="11299" class="Symbol">=</a>
    <a id="11305" href="Definition.Typed.Consequences.DerivedRules.Pi.html#1492" class="Function">lamⱼ′</a> <a id="11311" href="Graded.Erasure.Extraction.Non-terminating.html#11286" class="Bound">𝟘-ok</a> <a id="11316" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="11322" href="Graded.Erasure.Extraction.Non-terminating.html#7195" class="Function">⊢λx∙xx</a> <a id="11329" href="Graded.Erasure.Extraction.Non-terminating.html#11291" class="Bound">ω-ok</a> <a id="11334" href="Graded.Erasure.Extraction.Non-terminating.html#11296" class="Bound">⊢Γ</a> <a id="11337" href="Definition.Typed.html#2319" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="11344" href="Graded.Erasure.Extraction.Non-terminating.html#3988" class="Function">⊢cast</a> <a id="11350" class="Symbol">(</a><a id="11351" href="Definition.Typed.Properties.html#17014" class="Function">var₀</a> <a id="11356" class="Symbol">(</a><a id="11357" href="Definition.Typed.html#1357" class="InductiveConstructor">Emptyⱼ</a> <a id="11364" href="Graded.Erasure.Extraction.Non-terminating.html#11296" class="Bound">⊢Γ</a><a id="11366" class="Symbol">))</a> <a id="11369" class="Symbol">(</a><a id="11370" href="Definition.Typed.html#1761" class="InductiveConstructor">ΠΣⱼ</a> <a id="11374" href="Graded.Erasure.Extraction.Non-terminating.html#2877" class="Function">Empty⊢ℕ∷U</a> <a id="11384" href="Graded.Erasure.Extraction.Non-terminating.html#2998" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="11396" href="Graded.Erasure.Extraction.Non-terminating.html#11291" class="Bound">ω-ok</a><a id="11400" class="Symbol">)</a> <a id="11402" href="Graded.Erasure.Extraction.Non-terminating.html#2877" class="Function">Empty⊢ℕ∷U</a>
      <a id="11418" class="Symbol">(</a><a id="11419" href="Graded.Erasure.Extraction.Non-terminating.html#7195" class="Function">⊢λx∙xx</a> <a id="11426" href="Graded.Erasure.Extraction.Non-terminating.html#11291" class="Bound">ω-ok</a> <a id="11431" href="Graded.Erasure.Extraction.Non-terminating.html#11296" class="Bound">⊢Γ</a><a id="11433" class="Symbol">)</a>
    <a id="11439" class="Keyword">where</a>
    <a id="11449" class="Keyword">open</a> <a id="11454" href="Graded.Erasure.Extraction.Non-terminating.html#2843" class="Module">Lemmas</a> <a id="11461" href="Graded.Erasure.Extraction.Non-terminating.html#11296" class="Bound">⊢Γ</a>

<a id="11465" class="Keyword">opaque</a>
  <a id="11474" class="Keyword">unfolding</a> <a id="11484" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a>

  <a id="11504" class="Comment">-- A usage rule for extracts-to-loop.</a>

  <a id="▸extracts-to-loop"></a><a id="11545" href="Graded.Erasure.Extraction.Non-terminating.html#11545" class="Function">▸extracts-to-loop</a> <a id="11563" class="Symbol">:</a>
    <a id="11569" href="Graded.Modality.html#851" class="Function">ω</a> <a id="11571" href="Graded.Modality.html#1371" class="Function Operator">&lt;</a> <a id="11573" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="11575" class="Symbol">→</a>
    <a id="11581" href="Graded.Modality.html#851" class="Function">ω</a> <a id="11583" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="11585" href="Graded.Modality.html#851" class="Function">ω</a> <a id="11587" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="11589" href="Graded.Modality.html#851" class="Function">ω</a> <a id="11591" class="Symbol">→</a>
    <a id="11597" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="11599" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="11601" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="11603" class="Symbol">→</a>
    <a id="11609" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="11612" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="11615" class="InductiveConstructor">𝟙ᵐ</a> <a id="11618" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="11620" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a> <a id="11637" class="Symbol">{</a><a id="11638" class="Argument">n</a> <a id="11640" class="Symbol">=</a> <a id="11642" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a><a id="11643" class="Symbol">}</a> <a id="11645" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a>
  <a id="11649" href="Graded.Erasure.Extraction.Non-terminating.html#11545" class="Function">▸extracts-to-loop</a> <a id="11667" class="Symbol">{</a><a id="11668" href="Graded.Erasure.Extraction.Non-terminating.html#11668" class="Bound">p</a><a id="11669" class="Symbol">}</a> <a id="11671" class="Symbol">{</a><a id="11672" href="Graded.Erasure.Extraction.Non-terminating.html#11672" class="Bound">n</a><a id="11673" class="Symbol">}</a> <a id="11675" class="Symbol">(</a><a id="11676" href="Graded.Erasure.Extraction.Non-terminating.html#11676" class="Bound">ω≤𝟘</a> <a id="11680" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11682" href="Graded.Erasure.Extraction.Non-terminating.html#11682" class="Bound">ω≢𝟘</a><a id="11685" class="Symbol">)</a> <a id="11687" href="Graded.Erasure.Extraction.Non-terminating.html#11687" class="Bound">ω≤ω+ω</a> <a id="11693" href="Graded.Erasure.Extraction.Non-terminating.html#11693" class="Bound">p≤𝟘</a> <a id="11697" class="Symbol">=</a> <a id="11699" href="Graded.Usage.html#8522" class="InductiveConstructor">lamₘ</a> <a id="11704" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="11706" href="Graded.Usage.html#14282" class="InductiveConstructor">sub</a>
    <a id="11714" class="Symbol">(</a><a id="11715" href="Graded.Erasure.Extraction.Non-terminating.html#12567" class="Function">▸λx∙xx′</a> <a id="11723" href="Graded.Usage.html#8591" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="11731" href="Graded.Usage.html#14282" class="InductiveConstructor">sub</a>
       <a id="11742" class="Symbol">(</a><a id="11743" href="Graded.Usage.Properties.html#2604" class="Function">▸-cong</a> <a id="11750" class="Symbol">(</a><a id="11751" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">PE.sym</a> <a id="11758" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="11760" href="Graded.Mode.html#18555" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="11769" href="Graded.Erasure.Extraction.Non-terminating.html#11682" class="Bound">ω≢𝟘</a><a id="11772" class="Symbol">)</a> <a id="11774" href="Function.Base.html#1974" class="Function Operator">$</a>
        <a id="11784" href="Graded.Erasure.Extraction.Non-terminating.html#4234" class="Function">▸cast</a> <a id="11790" href="Graded.Usage.html#8477" class="InductiveConstructor">var</a> <a id="11794" class="Symbol">(</a><a id="11795" href="Graded.Erasure.Extraction.Non-terminating.html#3220" class="Function">▸Πℕℕ</a> <a id="11800" href="Graded.Erasure.Extraction.Non-terminating.html#11693" class="Bound">p≤𝟘</a><a id="11803" class="Symbol">)</a> <a id="11805" href="Graded.Usage.html#8271" class="InductiveConstructor">ℕₘ</a> <a id="11808" href="Graded.Erasure.Extraction.Non-terminating.html#12567" class="Function">▸λx∙xx′</a><a id="11815" class="Symbol">)</a>
     <a id="11822" class="Symbol">(</a><a id="11823" class="Keyword">let</a> <a id="11827" class="Keyword">open</a> <a id="11832" href="Graded.Context.Properties.PartialOrder.html#1954" class="Module">≤ᶜ-reasoning</a> <a id="11845" class="Keyword">in</a> <a id="11848" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
        <a id="11862" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>                           <a id="11891" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="11895" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a>
                                           <a id="11947" class="Symbol">(</a><a id="11948" href="Graded.Context.Properties.Meet.html#1380" class="Function">∧ᶜ-congˡ</a> <a id="11957" href="Function.Base.html#1974" class="Function Operator">$</a>
                                            <a id="12003" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a>
                                              <a id="12058" class="Symbol">(</a><a id="12059" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="12068" href="Function.Base.html#1974" class="Function Operator">$</a>
                                               <a id="12117" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="12126" class="Symbol">(</a><a id="12127" href="Graded.Context.Properties.Meet.html#1380" class="Function">∧ᶜ-congˡ</a> <a id="12136" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="12138" href="Graded.Context.Properties.Meet.html#603" class="Function">∧ᶜ-idem</a> <a id="12146" class="Symbol">_)</a> <a id="12149" href="Function.Base.html#1974" class="Function Operator">$</a>
                                               <a id="12198" href="Graded.Context.Properties.Meet.html#603" class="Function">∧ᶜ-idem</a> <a id="12206" class="Symbol">_)</a> <a id="12209" href="Function.Base.html#1974" class="Function Operator">$</a>
                                            <a id="12255" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="12264" class="Symbol">_)</a> <a id="12267" href="Function.Base.html#1974" class="Function Operator">$</a>
                                         <a id="12310" href="Graded.Context.Properties.Meet.html#603" class="Function">∧ᶜ-idem</a> <a id="12318" class="Symbol">_</a> <a id="12320" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
        <a id="12330" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="12333" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="12336" href="Graded.Modality.html#851" class="Function">ω</a> <a id="12338" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="12341" class="Symbol">(</a><a id="12342" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="12345" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="12348" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="12351" href="Graded.Context.html#1621" class="Function Operator">∧ᶜ</a> <a id="12354" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a><a id="12356" class="Symbol">)</a>  <a id="12359" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="12360" class="Symbol">))</a>
    <a id="12367" class="Symbol">(</a><a id="12368" class="Keyword">let</a> <a id="12372" class="Keyword">open</a> <a id="12377" href="Graded.Context.Properties.PartialOrder.html#1954" class="Module">≤ᶜ-reasoning</a> <a id="12390" class="Keyword">in</a> <a id="12393" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
       <a id="12406" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="12409" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="12411" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="12413" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="12415" href="Graded.Modality.html#847" class="Function">𝟘</a>     <a id="12421" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">≈⟨</a> <a id="12424" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="12432" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="12434" href="Graded.Modality.html#3116" class="Function">·-zeroʳ</a> <a id="12442" class="Symbol">_</a> <a id="12444" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">⟩</a>
       <a id="12453" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>             <a id="12468" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="12472" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="12481" class="Symbol">_</a> <a id="12483" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
       <a id="12492" href="Graded.Modality.html#851" class="Function">ω</a> <a id="12494" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="12497" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>        <a id="12507" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="12511" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="12524" class="Symbol">_</a> <a id="12526" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
       <a id="12535" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="12538" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="12541" href="Graded.Modality.html#851" class="Function">ω</a> <a id="12543" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="12546" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="12550" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="12551" class="Symbol">)</a>
    <a id="12557" class="Keyword">where</a>
    <a id="12567" href="Graded.Erasure.Extraction.Non-terminating.html#12567" class="Function">▸λx∙xx′</a> <a id="12575" class="Symbol">:</a> <a id="12577" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="12580" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="12583" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="12586" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="12588" href="Graded.Erasure.Extraction.Non-terminating.html#6293" class="Function">λx∙xx</a> <a id="12594" class="Symbol">{</a><a id="12595" class="Argument">n</a> <a id="12597" class="Symbol">=</a> <a id="12599" href="Graded.Erasure.Extraction.Non-terminating.html#11672" class="Bound">n</a><a id="12600" class="Symbol">}</a> <a id="12602" href="Graded.Erasure.Extraction.Non-terminating.html#11668" class="Bound">p</a>
    <a id="12608" href="Graded.Erasure.Extraction.Non-terminating.html#12567" class="Function">▸λx∙xx′</a> <a id="12616" class="Symbol">=</a> <a id="12618" href="Graded.Erasure.Extraction.Non-terminating.html#7515" class="Function">▸λx∙xx</a> <a id="12625" href="Graded.Erasure.Extraction.Non-terminating.html#11676" class="Bound">ω≤𝟘</a> <a id="12629" href="Graded.Erasure.Extraction.Non-terminating.html#11687" class="Bound">ω≤ω+ω</a> <a id="12635" href="Graded.Erasure.Extraction.Non-terminating.html#11693" class="Bound">p≤𝟘</a>

<a id="12640" class="Comment">------------------------------------------------------------------------</a>
<a id="12713" class="Comment">-- The term former loops</a>

<a id="12739" class="Keyword">opaque</a>

  <a id="12749" class="Comment">-- A term for which the extraction does not terminate if erasable</a>
  <a id="12817" class="Comment">-- arguments are removed entirely and strict applications are used</a>
  <a id="12886" class="Comment">-- (if ω is non-zero).</a>

  <a id="loops"></a><a id="12912" href="Graded.Erasure.Extraction.Non-terminating.html#12912" class="Function">loops</a> <a id="12918" class="Symbol">:</a> <a id="12920" href="Graded.Erasure.Extraction.Non-terminating.html#1399" class="Bound">M</a> <a id="12922" class="Symbol">→</a> <a id="12924" href="Definition.Untyped.html#2457" class="Datatype">Term</a> <a id="12929" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a>
  <a id="12933" href="Graded.Erasure.Extraction.Non-terminating.html#12912" class="Function">loops</a> <a id="12939" href="Graded.Erasure.Extraction.Non-terminating.html#12939" class="Bound">p</a> <a id="12941" class="Symbol">=</a> <a id="12943" href="Definition.Untyped.html#3601" class="InductiveConstructor">lam</a> <a id="12947" href="Graded.Modality.html#851" class="Function">ω</a> <a id="12949" href="Definition.Untyped.html#4117" class="InductiveConstructor">zero</a> <a id="12954" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">∘⟨</a> <a id="12957" href="Graded.Modality.html#851" class="Function">ω</a> <a id="12959" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">⟩</a> <a id="12961" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a> <a id="12978" href="Graded.Erasure.Extraction.Non-terminating.html#12939" class="Bound">p</a>

<a id="12981" class="Keyword">opaque</a>
  <a id="12990" class="Keyword">unfolding</a> <a id="13000" href="Graded.Erasure.Extraction.Non-terminating.html#12912" class="Function">loops</a>

  <a id="13009" class="Comment">-- An extraction lemma for loops.</a>

  <a id="erase-loops"></a><a id="13046" href="Graded.Erasure.Extraction.Non-terminating.html#13046" class="Function">erase-loops</a> <a id="13058" class="Symbol">:</a>
    <a id="13064" href="Graded.Modality.html#851" class="Function">ω</a> <a id="13066" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="13068" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="13070" class="Symbol">→</a>
    <a id="13076" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="13083" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="13088" href="Graded.Erasure.Extraction.Non-terminating.html#2774" class="Generalizable">s</a> <a id="13090" class="Symbol">(</a><a id="13091" href="Graded.Erasure.Extraction.Non-terminating.html#12912" class="Function">loops</a> <a id="13097" class="Symbol">{</a><a id="13098" class="Argument">n</a> <a id="13100" class="Symbol">=</a> <a id="13102" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a><a id="13103" class="Symbol">}</a> <a id="13105" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a><a id="13106" class="Symbol">)</a> <a id="13108" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="13114" class="InductiveConstructor">T.lam</a> <a id="13120" class="InductiveConstructor">T.zero</a> <a id="13127" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="13132" href="Graded.Erasure.Extraction.Non-terminating.html#2774" class="Generalizable">s</a> <a id="13134" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="13136" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="13141" href="Graded.Erasure.Extraction.Non-terminating.html#2774" class="Generalizable">s</a>
  <a id="13145" href="Graded.Erasure.Extraction.Non-terminating.html#13046" class="Function">erase-loops</a> <a id="13157" class="Symbol">{</a><a id="13158" href="Graded.Erasure.Extraction.Non-terminating.html#13158" class="Bound">s</a><a id="13159" class="Symbol">}</a> <a id="13161" class="Symbol">{</a><a id="13162" href="Graded.Erasure.Extraction.Non-terminating.html#13162" class="Bound">p</a><a id="13163" class="Symbol">}</a> <a id="13165" href="Graded.Erasure.Extraction.Non-terminating.html#13165" class="Bound">ω≢𝟘</a> <a id="13169" class="Symbol">=</a>
    <a id="13175" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="13182" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="13187" href="Graded.Erasure.Extraction.Non-terminating.html#13158" class="Bound">s</a> <a id="13189" class="Symbol">(</a><a id="13190" href="Definition.Untyped.html#3601" class="InductiveConstructor">lam</a> <a id="13194" href="Graded.Modality.html#851" class="Function">ω</a> <a id="13196" href="Definition.Untyped.html#4117" class="InductiveConstructor">zero</a> <a id="13201" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">∘⟨</a> <a id="13204" href="Graded.Modality.html#851" class="Function">ω</a> <a id="13206" href="Definition.Untyped.html#3644" class="InductiveConstructor Operator">⟩</a> <a id="13208" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a> <a id="13225" href="Graded.Erasure.Extraction.Non-terminating.html#13162" class="Bound">p</a><a id="13226" class="Symbol">)</a>  <a id="13229" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="13232" href="Graded.Erasure.Extraction.Properties.html#2751" class="Function">∘-≢𝟘</a> <a id="13237" href="Graded.Erasure.Extraction.Non-terminating.html#13165" class="Bound">ω≢𝟘</a> <a id="13241" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>

    <a id="13248" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="13255" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="13260" href="Graded.Erasure.Extraction.Non-terminating.html#13158" class="Bound">s</a> <a id="13262" class="Symbol">(</a><a id="13263" href="Definition.Untyped.html#3601" class="InductiveConstructor">lam</a> <a id="13267" href="Graded.Modality.html#851" class="Function">ω</a> <a id="13269" href="Definition.Untyped.html#4117" class="InductiveConstructor">zero</a><a id="13273" class="Symbol">)</a> <a id="13275" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="13280" href="Graded.Erasure.Extraction.Non-terminating.html#13158" class="Bound">s</a> <a id="13282" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a>
    <a id="13288" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="13295" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="13300" href="Graded.Erasure.Extraction.Non-terminating.html#13158" class="Bound">s</a> <a id="13302" class="Symbol">(</a><a id="13303" href="Graded.Erasure.Extraction.Non-terminating.html#9582" class="Function">extracts-to-loop</a> <a id="13320" href="Graded.Erasure.Extraction.Non-terminating.html#13162" class="Bound">p</a><a id="13321" class="Symbol">)</a>                    <a id="13342" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="13345" href="Relation.Binary.PropositionalEquality.Core.html#1395" class="Function">PE.cong₂</a> <a id="13354" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T._∘⟨</a> <a id="13360" class="Symbol">_</a> <a id="13362" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩_</a> <a id="13365" class="Symbol">(</a><a id="13366" href="Graded.Erasure.Extraction.Properties.html#2930" class="Function">lam-≢𝟘</a> <a id="13373" class="Symbol">_</a> <a id="13375" href="Graded.Erasure.Extraction.Non-terminating.html#13165" class="Bound">ω≢𝟘</a><a id="13378" class="Symbol">)</a> <a id="13380" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                             <a id="13443" href="Graded.Erasure.Extraction.Non-terminating.html#9799" class="Function">erase-extracts-to-loop</a> <a id="13466" href="Graded.Erasure.Extraction.Non-terminating.html#13165" class="Bound">ω≢𝟘</a> <a id="13470" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>
    <a id="13476" href="Graded.Erasure.Target.html#1283" class="InductiveConstructor">T.lam</a> <a id="13482" href="Graded.Erasure.Target.html#1542" class="InductiveConstructor">T.zero</a> <a id="13489" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="13494" href="Graded.Erasure.Extraction.Non-terminating.html#13158" class="Bound">s</a> <a id="13496" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="13498" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="13503" href="Graded.Erasure.Extraction.Non-terminating.html#13158" class="Bound">s</a>                          <a id="13530" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a>
    <a id="13536" class="Keyword">where</a>
    <a id="13546" class="Keyword">open</a> <a id="13551" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="13590" class="Keyword">opaque</a>

  <a id="13600" class="Comment">-- If ω is non-zero, erasable arguments are removed entirely, and</a>
  <a id="13668" class="Comment">-- strict applications are used, then the extraction of loops p does</a>
  <a id="13739" class="Comment">-- not reduce to a value.</a>

  <a id="loops-does-not-reduce-to-a-value"></a><a id="13768" href="Graded.Erasure.Extraction.Non-terminating.html#13768" class="Function">loops-does-not-reduce-to-a-value</a> <a id="13801" class="Symbol">:</a>
    <a id="13807" href="Graded.Modality.html#851" class="Function">ω</a> <a id="13809" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="13811" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="13813" class="Symbol">→</a>
    <a id="13819" href="Graded.Erasure.Target.html#6036" class="Datatype">T.Value</a> <a id="13827" href="Graded.Erasure.Extraction.Non-terminating.html#2749" class="Generalizable">v</a> <a id="13829" class="Symbol">→</a>
    <a id="13835" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="13837" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="13844" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="13849" href="Graded.Erasure.Target.html#670" class="InductiveConstructor">strict</a> <a id="13856" class="Symbol">(</a><a id="13857" href="Graded.Erasure.Extraction.Non-terminating.html#12912" class="Function">loops</a> <a id="13863" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a><a id="13864" class="Symbol">)</a> <a id="13866" href="Graded.Erasure.Target.html#7627" class="Datatype Operator">T.⇒*</a> <a id="13871" href="Graded.Erasure.Extraction.Non-terminating.html#2749" class="Generalizable">v</a>
  <a id="13875" href="Graded.Erasure.Extraction.Non-terminating.html#13768" class="Function">loops-does-not-reduce-to-a-value</a> <a id="13908" class="Symbol">{</a><a id="13909" href="Graded.Erasure.Extraction.Non-terminating.html#13909" class="Bound">v</a><a id="13910" class="Symbol">}</a> <a id="13912" class="Symbol">{</a><a id="13913" href="Graded.Erasure.Extraction.Non-terminating.html#13913" class="Bound">p</a><a id="13914" class="Symbol">}</a> <a id="13916" href="Graded.Erasure.Extraction.Non-terminating.html#13916" class="Bound">ω≢𝟘</a> <a id="13920" href="Graded.Erasure.Extraction.Non-terminating.html#13920" class="Bound">v-value</a> <a id="13928" class="Symbol">=</a>
    <a id="13934" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="13941" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="13946" href="Graded.Erasure.Target.html#670" class="InductiveConstructor">strict</a> <a id="13953" class="Symbol">(</a><a id="13954" href="Graded.Erasure.Extraction.Non-terminating.html#12912" class="Function">loops</a> <a id="13960" href="Graded.Erasure.Extraction.Non-terminating.html#13913" class="Bound">p</a><a id="13961" class="Symbol">)</a> <a id="13963" href="Graded.Erasure.Target.html#7627" class="Datatype Operator">T.⇒*</a> <a id="13968" href="Graded.Erasure.Extraction.Non-terminating.html#13909" class="Bound">v</a>            <a id="13981" href="Tools.Function.html#954" class="Function">≡⟨</a> <a id="13984" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a> <a id="13992" class="Symbol">(</a><a id="13993" href="Graded.Erasure.Target.html#7627" class="Datatype Operator">T._⇒*</a> <a id="13999" class="Symbol">_)</a> <a id="14002" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="14004" href="Graded.Erasure.Extraction.Non-terminating.html#13046" class="Function">erase-loops</a> <a id="14016" href="Graded.Erasure.Extraction.Non-terminating.html#13916" class="Bound">ω≢𝟘</a> <a id="14020" href="Tools.Function.html#954" class="Function">⟩→</a>
    <a id="14027" href="Graded.Erasure.Target.html#1283" class="InductiveConstructor">T.lam</a> <a id="14033" href="Graded.Erasure.Target.html#1542" class="InductiveConstructor">T.zero</a> <a id="14040" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="14045" href="Graded.Erasure.Target.html#670" class="InductiveConstructor">strict</a> <a id="14052" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="14054" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="14059" href="Graded.Erasure.Target.html#670" class="InductiveConstructor">strict</a> <a id="14066" href="Graded.Erasure.Target.html#7627" class="Datatype Operator">T.⇒*</a> <a id="14071" href="Graded.Erasure.Extraction.Non-terminating.html#13909" class="Bound">v</a>  <a id="14074" href="Tools.Function.html#840" class="Function">→⟨</a> <a id="14077" href="Graded.Erasure.Extraction.Non-terminating.html#14153" class="Function">helper</a> <a id="14084" href="Tools.Function.html#840" class="Function">⟩</a>
    <a id="14090" href="Data.Empty.html#895" class="Function">⊥</a>                                              <a id="14137" href="Tools.Function.html#1068" class="Function Operator">□</a>
    <a id="14143" class="Keyword">where</a>
    <a id="14153" href="Graded.Erasure.Extraction.Non-terminating.html#14153" class="Function">helper</a> <a id="14160" class="Symbol">:</a> <a id="14162" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="14164" href="Graded.Erasure.Target.html#1283" class="InductiveConstructor">T.lam</a> <a id="14170" href="Graded.Erasure.Target.html#1542" class="InductiveConstructor">T.zero</a> <a id="14177" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">T.∘⟨</a> <a id="14182" href="Graded.Erasure.Target.html#670" class="InductiveConstructor">strict</a> <a id="14189" href="Graded.Erasure.Target.html#1322" class="InductiveConstructor Operator">⟩</a> <a id="14191" href="Graded.Erasure.Target.Non-terminating.html#791" class="Function">loop</a> <a id="14196" href="Graded.Erasure.Extraction.Non-terminating.html#2774" class="Generalizable">s</a> <a id="14198" href="Graded.Erasure.Target.html#7627" class="Datatype Operator">T.⇒*</a> <a id="14203" href="Graded.Erasure.Extraction.Non-terminating.html#13909" class="Bound">v</a>
    <a id="14209" href="Graded.Erasure.Extraction.Non-terminating.html#14153" class="Function">helper</a> <a id="14216" href="Graded.Erasure.Target.html#7663" class="InductiveConstructor">T.refl</a> <a id="14223" class="Symbol">=</a>
      <a id="14231" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="14236" href="Graded.Erasure.Extraction.Non-terminating.html#13920" class="Bound">v-value</a> <a id="14244" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="14247" class="Symbol">λ</a> <a id="14249" class="Symbol">()</a>
    <a id="14256" href="Graded.Erasure.Extraction.Non-terminating.html#14153" class="Function">helper</a> <a id="14263" class="Symbol">(</a><a id="14264" href="Graded.Erasure.Target.html#7679" class="InductiveConstructor">T.trans</a> <a id="14272" class="Symbol">(</a><a id="14273" href="Graded.Erasure.Target.html#6823" class="InductiveConstructor">T.app-subst</a> <a id="14285" class="Symbol">())</a>     <a id="14293" class="Symbol">_)</a>
    <a id="14300" href="Graded.Erasure.Extraction.Non-terminating.html#14153" class="Function">helper</a> <a id="14307" class="Symbol">(</a><a id="14308" href="Graded.Erasure.Target.html#7679" class="InductiveConstructor">T.trans</a> <a id="14316" class="Symbol">(</a><a id="14317" href="Graded.Erasure.Target.html#6971" class="InductiveConstructor">T.β-red</a> <a id="14325" href="Graded.Erasure.Extraction.Non-terminating.html#14325" class="Bound">loop-value</a><a id="14335" class="Symbol">)</a> <a id="14337" class="Symbol">_)</a> <a id="14340" class="Symbol">=</a>
      <a id="14348" href="Graded.Erasure.Target.Non-terminating.html#1415" class="Function">¬loop⇒*</a> <a id="14356" href="Graded.Erasure.Extraction.Non-terminating.html#14325" class="Bound">loop-value</a> <a id="14367" href="Graded.Erasure.Target.html#7663" class="InductiveConstructor">T.refl</a>
    <a id="14378" href="Graded.Erasure.Extraction.Non-terminating.html#14153" class="Function">helper</a> <a id="14385" class="Symbol">(</a><a id="14386" href="Graded.Erasure.Target.html#7679" class="InductiveConstructor">T.trans</a> <a id="14394" class="Symbol">(</a><a id="14395" href="Graded.Erasure.Target.html#6877" class="InductiveConstructor">T.app-subst-arg</a> <a id="14411" class="Symbol">_</a> <a id="14413" href="Graded.Erasure.Extraction.Non-terminating.html#14413" class="Bound">loop⇒</a><a id="14418" class="Symbol">)</a> <a id="14420" href="Graded.Erasure.Extraction.Non-terminating.html#14420" class="Bound">⇒*v</a><a id="14423" class="Symbol">)</a>
      <a id="14431" class="Keyword">rewrite</a> <a id="14439" href="Graded.Erasure.Target.Properties.Reduction.html#2099" class="Function">redDet</a> <a id="14446" class="Symbol">_</a> <a id="14448" href="Graded.Erasure.Extraction.Non-terminating.html#14413" class="Bound">loop⇒</a> <a id="14454" href="Graded.Erasure.Target.Non-terminating.html#981" class="Function">loop⇒loop</a> <a id="14464" class="Symbol">=</a>
      <a id="14472" href="Graded.Erasure.Extraction.Non-terminating.html#14153" class="Function">helper</a> <a id="14479" href="Graded.Erasure.Extraction.Non-terminating.html#14420" class="Bound">⇒*v</a>

<a id="14484" class="Keyword">opaque</a>
  <a id="14493" class="Keyword">unfolding</a> <a id="14503" href="Graded.Erasure.Extraction.Non-terminating.html#12912" class="Function">loops</a>

  <a id="14512" class="Comment">-- A typing rule for loops.</a>

  <a id="⊢loops"></a><a id="14543" href="Graded.Erasure.Extraction.Non-terminating.html#14543" class="Function">⊢loops</a> <a id="14550" class="Symbol">:</a>
    <a id="14556" href="Definition.Typed.Restrictions.html#1152" class="Function">Π-allowed</a> <a id="14566" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="14568" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="14570" class="Symbol">→</a>
    <a id="14576" href="Definition.Typed.Restrictions.html#1152" class="Function">Π-allowed</a> <a id="14586" href="Graded.Modality.html#851" class="Function">ω</a> <a id="14588" href="Graded.Erasure.Extraction.Non-terminating.html#2733" class="Generalizable">q</a> <a id="14590" class="Symbol">→</a>
    <a id="14596" href="Definition.Typed.html#1137" class="Datatype Operator">⊢</a> <a id="14598" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a> <a id="14600" class="Symbol">→</a>
    <a id="14606" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">Γ</a> <a id="14608" href="Definition.Typed.html#1702" class="Datatype Operator">⊢</a> <a id="14610" href="Graded.Erasure.Extraction.Non-terminating.html#12912" class="Function">loops</a> <a id="14616" href="Graded.Erasure.Extraction.Non-terminating.html#2733" class="Generalizable">q</a> <a id="14618" href="Definition.Typed.html#1702" class="Datatype Operator">∷</a> <a id="14620" href="Definition.Untyped.html#2975" class="InductiveConstructor">ℕ</a>
  <a id="14624" href="Graded.Erasure.Extraction.Non-terminating.html#14543" class="Function">⊢loops</a> <a id="14631" href="Graded.Erasure.Extraction.Non-terminating.html#14631" class="Bound">𝟘-ok</a> <a id="14636" href="Graded.Erasure.Extraction.Non-terminating.html#14636" class="Bound">ω-ok</a> <a id="14641" href="Graded.Erasure.Extraction.Non-terminating.html#14641" class="Bound">⊢Γ</a> <a id="14644" class="Symbol">=</a>
    <a id="14650" href="Definition.Typed.Consequences.DerivedRules.Pi.html#1492" class="Function">lamⱼ′</a> <a id="14656" href="Graded.Erasure.Extraction.Non-terminating.html#14636" class="Bound">ω-ok</a> <a id="14661" class="Symbol">(</a><a id="14662" href="Definition.Typed.html#3161" class="InductiveConstructor">zeroⱼ</a> <a id="14668" class="Symbol">(</a><a id="14669" href="Graded.Erasure.Extraction.Non-terminating.html#14641" class="Bound">⊢Γ</a> <a id="14672" href="Definition.Typed.html#1185" class="InductiveConstructor Operator">∙</a> <a id="14674" href="Definition.Typed.Consequences.DerivedRules.Pi-Sigma.html#839" class="Function">ΠΣⱼ′</a> <a id="14679" href="Graded.Erasure.Extraction.Non-terminating.html#2944" class="Function">Empty⊢ℕ</a> <a id="14687" href="Graded.Erasure.Extraction.Non-terminating.html#14631" class="Bound">𝟘-ok</a><a id="14691" class="Symbol">))</a> <a id="14694" href="Definition.Typed.html#2319" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="14701" href="Graded.Erasure.Extraction.Non-terminating.html#11147" class="Function">⊢extracts-to-loop</a> <a id="14719" href="Graded.Erasure.Extraction.Non-terminating.html#14631" class="Bound">𝟘-ok</a> <a id="14724" href="Graded.Erasure.Extraction.Non-terminating.html#14636" class="Bound">ω-ok</a> <a id="14729" href="Graded.Erasure.Extraction.Non-terminating.html#14641" class="Bound">⊢Γ</a>
    <a id="14736" class="Keyword">where</a>
    <a id="14746" class="Keyword">open</a> <a id="14751" href="Graded.Erasure.Extraction.Non-terminating.html#2843" class="Module">Lemmas</a> <a id="14758" href="Graded.Erasure.Extraction.Non-terminating.html#14641" class="Bound">⊢Γ</a>

<a id="14762" class="Keyword">opaque</a>
  <a id="14771" class="Keyword">unfolding</a> <a id="14781" href="Graded.Erasure.Extraction.Non-terminating.html#12912" class="Function">loops</a>

  <a id="14790" class="Comment">-- A usage rule for loops.</a>

  <a id="▸loops"></a><a id="14820" href="Graded.Erasure.Extraction.Non-terminating.html#14820" class="Function">▸loops</a> <a id="14827" class="Symbol">:</a>
    <a id="14833" href="Graded.Modality.html#851" class="Function">ω</a> <a id="14835" href="Graded.Modality.html#1371" class="Function Operator">&lt;</a> <a id="14837" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="14839" class="Symbol">→</a>
    <a id="14845" href="Graded.Modality.html#851" class="Function">ω</a> <a id="14847" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="14849" href="Graded.Modality.html#851" class="Function">ω</a> <a id="14851" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="14853" href="Graded.Modality.html#851" class="Function">ω</a> <a id="14855" class="Symbol">→</a>
    <a id="14861" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a> <a id="14863" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="14865" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="14867" class="Symbol">→</a>
    <a id="14873" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="14876" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="14879" class="InductiveConstructor">𝟙ᵐ</a> <a id="14882" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="14884" href="Graded.Erasure.Extraction.Non-terminating.html#12912" class="Function">loops</a> <a id="14890" class="Symbol">{</a><a id="14891" class="Argument">n</a> <a id="14893" class="Symbol">=</a> <a id="14895" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">n</a><a id="14896" class="Symbol">}</a> <a id="14898" href="Graded.Erasure.Extraction.Non-terminating.html#2731" class="Generalizable">p</a>
  <a id="14902" href="Graded.Erasure.Extraction.Non-terminating.html#14820" class="Function">▸loops</a> <a id="14909" href="Graded.Erasure.Extraction.Non-terminating.html#14909" class="Bound">ω&lt;𝟘</a><a id="14912" class="Symbol">@(</a><a id="14914" href="Graded.Erasure.Extraction.Non-terminating.html#14914" class="Bound">ω≤𝟘</a> <a id="14918" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14920" href="Graded.Erasure.Extraction.Non-terminating.html#14920" class="Bound">ω≢𝟘</a><a id="14923" class="Symbol">)</a> <a id="14925" href="Graded.Erasure.Extraction.Non-terminating.html#14925" class="Bound">ω≤ω+ω</a> <a id="14931" href="Graded.Erasure.Extraction.Non-terminating.html#14931" class="Bound">p≤𝟘</a> <a id="14935" class="Symbol">=</a> <a id="14937" href="Graded.Usage.html#14282" class="InductiveConstructor">sub</a>
    <a id="14945" class="Symbol">(</a><a id="14946" href="Graded.Usage.html#8522" class="InductiveConstructor">lamₘ</a>
       <a id="14958" class="Symbol">(</a><a id="14959" href="Graded.Usage.html#14282" class="InductiveConstructor">sub</a> <a id="14963" href="Graded.Usage.html#9341" class="InductiveConstructor">zeroₘ</a> <a id="14969" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="14971" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
          <a id="14987" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="14990" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="14992" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="14994" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="14996" href="Graded.Modality.html#851" class="Function">ω</a>  <a id="14999" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">≈⟨</a> <a id="15002" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="15010" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="15012" href="Graded.Modality.html#2857" class="Function">·-identityˡ</a> <a id="15024" class="Symbol">_</a> <a id="15026" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">⟩</a>
          <a id="15038" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="15041" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="15043" href="Graded.Modality.html#851" class="Function">ω</a>      <a id="15050" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">≤⟨</a> <a id="15053" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="15061" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="15063" href="Graded.Erasure.Extraction.Non-terminating.html#14914" class="Bound">ω≤𝟘</a> <a id="15067" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">⟩</a>
          <a id="15079" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>          <a id="15091" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="15092" class="Symbol">)</a> <a id="15094" href="Graded.Usage.html#8591" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="15102" href="Graded.Usage.Properties.html#2604" class="Function">▸-cong</a> <a id="15109" class="Symbol">(</a><a id="15110" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">PE.sym</a> <a id="15117" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="15119" href="Graded.Mode.html#18555" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="15128" href="Graded.Erasure.Extraction.Non-terminating.html#14920" class="Bound">ω≢𝟘</a><a id="15131" class="Symbol">)</a> <a id="15133" class="Symbol">(</a><a id="15134" href="Graded.Erasure.Extraction.Non-terminating.html#11545" class="Function">▸extracts-to-loop</a> <a id="15152" href="Graded.Erasure.Extraction.Non-terminating.html#14909" class="Bound">ω&lt;𝟘</a> <a id="15156" href="Graded.Erasure.Extraction.Non-terminating.html#14925" class="Bound">ω≤ω+ω</a> <a id="15162" href="Graded.Erasure.Extraction.Non-terminating.html#14931" class="Bound">p≤𝟘</a><a id="15165" class="Symbol">))</a>
    <a id="15172" class="Symbol">(</a><a id="15173" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
       <a id="15186" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>             <a id="15201" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="15205" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="15214" class="Symbol">(</a><a id="15215" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="15228" class="Symbol">_)</a> <a id="15231" class="Symbol">(</a><a id="15232" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="15241" class="Symbol">_)</a> <a id="15244" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
       <a id="15253" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="15256" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="15259" href="Graded.Modality.html#851" class="Function">ω</a> <a id="15261" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="15264" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="15268" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="15269" class="Symbol">)</a>
    <a id="15275" class="Keyword">where</a>
    <a id="15285" class="Keyword">open</a> <a id="15290" href="Graded.Context.Properties.PartialOrder.html#1954" class="Module">≤ᶜ-reasoning</a>
</pre></body></html>