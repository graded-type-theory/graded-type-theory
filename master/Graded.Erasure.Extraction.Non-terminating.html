<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Extraction.Non-terminating</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- If the extraction function uses strict applications and removes</a>
<a id="141" class="Comment">-- erasable arguments entirely, then it may be the case that</a>
<a id="202" class="Comment">-- well-typed and well-resourced terms extract to terms that do not</a>
<a id="270" class="Comment">-- terminate</a>
<a id="283" class="Comment">------------------------------------------------------------------------</a>

<a id="357" class="Comment">-- In &quot;A New Extraction for Coq&quot; Letouzey points out that uses of the</a>
<a id="427" class="Comment">-- eliminator for the empty type False can lead to problems similar to</a>
<a id="498" class="Comment">-- the one presented below if all logical arguments are removed</a>
<a id="562" class="Comment">-- entirely, given that the eliminator is replaced with code that</a>
<a id="628" class="Comment">-- throws an exception. However, the example discussed below does not</a>
<a id="698" class="Comment">-- rely on how emptyrec is extracted, but is more similar to one in</a>
<a id="766" class="Comment">-- Mishra-Linger&#39;s PhD thesis (see Figure 5.1).</a>
<a id="814" class="Comment">--</a>
<a id="817" class="Comment">-- The example looks roughly like this:</a>
<a id="857" class="Comment">--</a>
<a id="860" class="Comment">--   (λ^ω _. zero)</a>
<a id="879" class="Comment">--     (λ⁰ (bot : ⊥).</a>
<a id="901" class="Comment">--        (λ^ω+ω x. cast bot x x) (cast bot (λ^ω+ω x. cast bot x x)))</a>
<a id="971" class="Comment">--</a>
<a id="974" class="Comment">-- If erased arguments are removed entirely, then we end up with a</a>
<a id="1041" class="Comment">-- term like the following one:</a>
<a id="1073" class="Comment">--</a>
<a id="1076" class="Comment">--   (λ _. zero) ((λ x. x x) (λ x. x x))</a>
<a id="1117" class="Comment">--</a>
<a id="1120" class="Comment">-- If strict applications are used, then this program does not</a>
<a id="1183" class="Comment">-- terminate.</a>

<a id="1198" class="Keyword">open</a> <a id="1203" class="Keyword">import</a> <a id="1210" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="1226" class="Keyword">open</a> <a id="1231" class="Keyword">import</a> <a id="1238" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="1264" class="Keyword">open</a> <a id="1269" class="Keyword">import</a> <a id="1276" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="1307" class="Keyword">module</a> <a id="1314" href="Graded.Erasure.Extraction.Non-terminating.html" class="Module">Graded.Erasure.Extraction.Non-terminating</a>
  <a id="1358" class="Symbol">{</a><a id="1359" href="Graded.Erasure.Extraction.Non-terminating.html#1359" class="Bound">a</a><a id="1360" class="Symbol">}</a> <a id="1362" class="Symbol">{</a><a id="1363" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="1365" class="Symbol">:</a> <a id="1367" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1371" href="Graded.Erasure.Extraction.Non-terminating.html#1359" class="Bound">a</a><a id="1372" class="Symbol">}</a>
  <a id="1376" class="Symbol">{</a><a id="1377" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="1379" class="Symbol">:</a> <a id="1381" href="Graded.Modality.html#9574" class="Record">Modality</a> <a id="1390" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a><a id="1391" class="Symbol">}</a>
  <a id="1395" class="Symbol">(</a><a id="1396" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a> <a id="1399" class="Symbol">:</a> <a id="1401" href="Definition.Typed.Restrictions.html#808" class="Record">Type-restrictions</a> <a id="1419" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a><a id="1420" class="Symbol">)</a>
  <a id="1424" class="Symbol">(</a><a id="1425" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a> <a id="1428" class="Symbol">:</a> <a id="1430" href="Graded.Usage.Restrictions.html#812" class="Record">Usage-restrictions</a> <a id="1449" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a><a id="1450" class="Symbol">)</a>
  <a id="1454" class="Keyword">where</a>

<a id="1461" class="Keyword">open</a> <a id="1466" href="Graded.Modality.html#9574" class="Module">Modality</a> <a id="1475" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1477" class="Keyword">open</a> <a id="1482" href="Definition.Typed.Restrictions.html#808" class="Module">Type-restrictions</a> <a id="1500" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1503" class="Keyword">open</a> <a id="1508" href="Graded.Usage.Restrictions.html#812" class="Module">Usage-restrictions</a> <a id="1527" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>

<a id="1531" class="Keyword">open</a> <a id="1536" class="Keyword">import</a> <a id="1543" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="1560" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1563" class="Keyword">open</a> <a id="1568" class="Keyword">import</a> <a id="1575" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="1603" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a> <a id="1606" class="Keyword">hiding</a> <a id="1613" class="Symbol">(</a><a id="1614" href="Definition.Typed.Properties.Admissible.Identity.html#15313" class="Function">⊢cast</a><a id="1619" class="Symbol">)</a>
<a id="1621" class="Keyword">open</a> <a id="1626" class="Keyword">import</a> <a id="1633" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="1652" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a>
<a id="1654" class="Keyword">open</a> <a id="1659" class="Keyword">import</a> <a id="1666" href="Definition.Untyped.Identity.html" class="Module">Definition.Untyped.Identity</a> <a id="1694" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="1696" class="Keyword">hiding</a> <a id="1703" class="Symbol">(</a><a id="1704" href="Definition.Untyped.Identity.html#1353" class="Function">cast</a><a id="1708" class="Symbol">)</a>

<a id="1711" class="Keyword">open</a> <a id="1716" class="Keyword">import</a> <a id="1723" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1738" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1740" class="Keyword">open</a> <a id="1745" class="Keyword">import</a> <a id="1752" href="Graded.Context.Properties.html" class="Module">Graded.Context.Properties</a> <a id="1778" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1780" class="Keyword">open</a> <a id="1785" class="Keyword">import</a> <a id="1792" href="Graded.Derived.Identity.html" class="Module">Graded.Derived.Identity</a> <a id="1816" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>
<a id="1819" class="Keyword">open</a> <a id="1824" class="Keyword">import</a> <a id="1831" href="Graded.Erasure.Extraction.html" class="Module">Graded.Erasure.Extraction</a> <a id="1857" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1859" class="Keyword">open</a> <a id="1864" class="Keyword">import</a> <a id="1871" href="Graded.Erasure.Extraction.Properties.html" class="Module">Graded.Erasure.Extraction.Properties</a> <a id="1908" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1910" class="Keyword">open</a> <a id="1915" class="Keyword">import</a> <a id="1922" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a> <a id="1944" class="Symbol">as</a> <a id="1947" class="Module">T</a> <a id="1949" class="Keyword">using</a> <a id="1955" class="Symbol">(</a><a id="1956" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="1966" class="Symbol">;</a> <a id="1968" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a><a id="1974" class="Symbol">)</a>
<a id="1976" class="Keyword">open</a> <a id="1981" class="Keyword">import</a> <a id="1988" href="Graded.Erasure.Target.Non-terminating.html" class="Module">Graded.Erasure.Target.Non-terminating</a>
<a id="2026" class="Keyword">open</a> <a id="2031" class="Keyword">import</a> <a id="2038" href="Graded.Erasure.Target.Properties.html" class="Module">Graded.Erasure.Target.Properties</a>
<a id="2071" class="Keyword">open</a> <a id="2076" class="Keyword">import</a> <a id="2083" href="Graded.Modality.Properties.html" class="Module">Graded.Modality.Properties</a> <a id="2110" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="2112" class="Keyword">open</a> <a id="2117" class="Keyword">import</a> <a id="2124" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="2136" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="2138" class="Keyword">open</a> <a id="2143" class="Keyword">import</a> <a id="2150" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="2163" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="2165" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>
<a id="2168" class="Keyword">open</a> <a id="2173" class="Keyword">import</a> <a id="2180" href="Graded.Usage.Properties.html" class="Module">Graded.Usage.Properties</a> <a id="2204" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="2206" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>

<a id="2210" class="Keyword">open</a> <a id="2215" class="Keyword">import</a> <a id="2222" href="Tools.Bool.html" class="Module">Tools.Bool</a> <a id="2233" class="Keyword">using</a> <a id="2239" class="Symbol">(</a><a id="2240" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="2244" class="Symbol">;</a> <a id="2246" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="2250" class="Symbol">)</a>
<a id="2252" class="Keyword">open</a> <a id="2257" class="Keyword">import</a> <a id="2264" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="2276" class="Keyword">open</a> <a id="2281" class="Keyword">import</a> <a id="2288" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="2298" class="Keyword">open</a> <a id="2303" class="Keyword">import</a> <a id="2310" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="2325" class="Keyword">open</a> <a id="2330" class="Keyword">import</a> <a id="2337" href="Tools.Nat.html" class="Module">Tools.Nat</a> <a id="2347" class="Keyword">using</a> <a id="2353" class="Symbol">(</a><a id="2354" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="2357" class="Symbol">;</a> <a id="2359" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a><a id="2361" class="Symbol">)</a>
<a id="2363" class="Keyword">open</a> <a id="2368" class="Keyword">import</a> <a id="2375" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="2389" class="Keyword">open</a> <a id="2394" class="Keyword">import</a> <a id="2401" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="2429" class="Symbol">as</a> <a id="2432" class="Module">PE</a> <a id="2435" class="Keyword">using</a> <a id="2441" class="Symbol">(</a><a id="2442" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="2445" class="Symbol">;</a> <a id="2447" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">_≢_</a><a id="2450" class="Symbol">)</a>
<a id="2452" class="Keyword">import</a> <a id="2459" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>
<a id="2497" class="Keyword">open</a> <a id="2502" class="Keyword">import</a> <a id="2509" href="Tools.Relation.html" class="Module">Tools.Relation</a>

<a id="2525" class="Keyword">private</a> <a id="2533" class="Keyword">variable</a>
  <a id="2544" href="Graded.Erasure.Extraction.Non-terminating.html#2544" class="Generalizable">b</a>           <a id="2556" class="Symbol">:</a> <a id="2558" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
  <a id="2565" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a>           <a id="2577" class="Symbol">:</a> <a id="2579" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="2585" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a>           <a id="2597" class="Symbol">:</a> <a id="2599" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="2603" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2608" class="Symbol">_</a>
  <a id="2612" href="Graded.Erasure.Extraction.Non-terminating.html#2612" class="Generalizable">A</a> <a id="2614" href="Graded.Erasure.Extraction.Non-terminating.html#2614" class="Generalizable">B</a> <a id="2616" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">t</a> <a id="2618" href="Graded.Erasure.Extraction.Non-terminating.html#2618" class="Generalizable">u</a>     <a id="2624" class="Symbol">:</a> <a id="2626" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2631" class="Symbol">_</a>
  <a id="2635" href="Graded.Erasure.Extraction.Non-terminating.html#2635" class="Generalizable">γ₁</a> <a id="2638" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">γ₂</a> <a id="2641" href="Graded.Erasure.Extraction.Non-terminating.html#2641" class="Generalizable">γ₃</a> <a id="2644" href="Graded.Erasure.Extraction.Non-terminating.html#2644" class="Generalizable">γ₄</a> <a id="2647" class="Symbol">:</a> <a id="2649" href="Graded.Context.html#729" class="Datatype">Conₘ</a> <a id="2654" class="Symbol">_</a>
  <a id="2658" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="2660" href="Graded.Erasure.Extraction.Non-terminating.html#2660" class="Generalizable">q</a>         <a id="2670" class="Symbol">:</a> <a id="2672" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a>
  <a id="2676" href="Graded.Erasure.Extraction.Non-terminating.html#2676" class="Generalizable">v</a>           <a id="2688" class="Symbol">:</a> <a id="2690" href="Graded.Erasure.Target.html#1227" class="Datatype">T.Term</a> <a id="2697" class="Symbol">_</a>
  <a id="2701" href="Graded.Erasure.Extraction.Non-terminating.html#2701" class="Generalizable">s</a>           <a id="2713" class="Symbol">:</a> <a id="2715" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a>

<a id="2727" class="Comment">-- Some lemmas used below.</a>

<a id="2755" class="Keyword">private</a> <a id="2763" class="Keyword">module</a> <a id="Lemmas"></a><a id="2770" href="Graded.Erasure.Extraction.Non-terminating.html#2770" class="Module">Lemmas</a> <a id="2777" class="Symbol">(</a><a id="2778" href="Graded.Erasure.Extraction.Non-terminating.html#2778" class="Bound">⊢Γ</a> <a id="2781" class="Symbol">:</a> <a id="2783" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="2785" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a><a id="2786" class="Symbol">)</a> <a id="2788" class="Keyword">where</a> <a id="2794" class="Keyword">opaque</a>

  <a id="Lemmas.Empty⊢ℕ∷U"></a><a id="2804" href="Graded.Erasure.Extraction.Non-terminating.html#2804" class="Function">Empty⊢ℕ∷U</a> <a id="2814" class="Symbol">:</a> <a id="2816" href="Graded.Erasure.Extraction.Non-terminating.html#2785" class="Bound">Γ</a> <a id="2818" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2820" href="Definition.Untyped.html#1271" class="InductiveConstructor">Empty</a> <a id="2826" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2828" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="2830" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2832" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="2834" class="Number">0</a>
  <a id="2838" href="Graded.Erasure.Extraction.Non-terminating.html#2804" class="Function">Empty⊢ℕ∷U</a> <a id="2848" class="Symbol">=</a> <a id="2850" href="Definition.Typed.html#3398" class="InductiveConstructor">ℕⱼ</a> <a id="2853" class="Symbol">(</a><a id="2854" href="Graded.Erasure.Extraction.Non-terminating.html#2778" class="Bound">⊢Γ</a> <a id="2857" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="2860" href="Definition.Typed.html#1381" class="InductiveConstructor">Emptyⱼ</a> <a id="2867" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a><a id="2868" class="Symbol">)</a>

  <a id="Lemmas.Empty⊢ℕ"></a><a id="2873" href="Graded.Erasure.Extraction.Non-terminating.html#2873" class="Function">Empty⊢ℕ</a> <a id="2881" class="Symbol">:</a> <a id="2883" href="Graded.Erasure.Extraction.Non-terminating.html#2785" class="Bound">Γ</a> <a id="2885" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2887" href="Definition.Untyped.html#1271" class="InductiveConstructor">Empty</a> <a id="2893" href="Definition.Typed.html#1262" class="Datatype Operator">⊢</a> <a id="2895" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
  <a id="2899" href="Graded.Erasure.Extraction.Non-terminating.html#2873" class="Function">Empty⊢ℕ</a> <a id="2907" class="Symbol">=</a> <a id="2909" href="Definition.Typed.html#1337" class="InductiveConstructor">univ</a> <a id="2914" href="Graded.Erasure.Extraction.Non-terminating.html#2804" class="Function">Empty⊢ℕ∷U</a>

  <a id="Lemmas.Empty∙ℕ⊢ℕ∷U"></a><a id="2927" href="Graded.Erasure.Extraction.Non-terminating.html#2927" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="2939" class="Symbol">:</a> <a id="2941" href="Graded.Erasure.Extraction.Non-terminating.html#2785" class="Bound">Γ</a> <a id="2943" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2945" href="Definition.Untyped.html#1271" class="InductiveConstructor">Empty</a> <a id="2951" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2953" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="2955" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2957" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="2959" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2961" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="2963" class="Number">0</a>
  <a id="2967" href="Graded.Erasure.Extraction.Non-terminating.html#2927" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="2979" class="Symbol">=</a> <a id="2981" href="Definition.Typed.html#3398" class="InductiveConstructor">ℕⱼ</a> <a id="2984" class="Symbol">(</a><a id="2985" href="Graded.Erasure.Extraction.Non-terminating.html#2778" class="Bound">⊢Γ</a> <a id="2988" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="2991" href="Definition.Typed.html#1381" class="InductiveConstructor">Emptyⱼ</a> <a id="2998" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a> <a id="3000" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="3003" href="Definition.Typed.html#1555" class="InductiveConstructor">ℕⱼ</a> <a id="3006" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a><a id="3007" class="Symbol">)</a>

  <a id="Lemmas.Empty∙ℕ∙ℕ⊢ℕ∷U"></a><a id="3012" href="Graded.Erasure.Extraction.Non-terminating.html#3012" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="3026" class="Symbol">:</a> <a id="3028" href="Graded.Erasure.Extraction.Non-terminating.html#2785" class="Bound">Γ</a> <a id="3030" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3032" href="Definition.Untyped.html#1271" class="InductiveConstructor">Empty</a> <a id="3038" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3040" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="3042" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3044" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="3046" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3048" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="3050" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3052" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="3054" class="Number">0</a>
  <a id="3058" href="Graded.Erasure.Extraction.Non-terminating.html#3012" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="3072" class="Symbol">=</a> <a id="3074" href="Definition.Typed.html#3398" class="InductiveConstructor">ℕⱼ</a> <a id="3077" class="Symbol">(</a><a id="3078" href="Graded.Erasure.Extraction.Non-terminating.html#2778" class="Bound">⊢Γ</a> <a id="3081" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="3084" href="Definition.Typed.html#1381" class="InductiveConstructor">Emptyⱼ</a> <a id="3091" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a> <a id="3093" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="3096" href="Definition.Typed.html#1555" class="InductiveConstructor">ℕⱼ</a> <a id="3099" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a> <a id="3101" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">∙[</a> <a id="3104" href="Definition.Typed.html#1555" class="InductiveConstructor">ℕⱼ</a> <a id="3107" href="Definition.Typed.Properties.Well-formed.html#15269" class="Function Operator">]</a><a id="3108" class="Symbol">)</a>

<a id="3111" class="Keyword">opaque</a>

  <a id="3121" class="Comment">-- Another lemma used below.</a>

  <a id="▸Πℕℕ"></a><a id="3153" href="Graded.Erasure.Extraction.Non-terminating.html#3153" class="Function">▸Πℕℕ</a> <a id="3158" class="Symbol">:</a> <a id="3160" href="Graded.Erasure.Extraction.Non-terminating.html#2660" class="Generalizable">q</a> <a id="3162" href="Graded.Modality.html#1384" class="Function Operator">≤</a> <a id="3164" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="3166" class="Symbol">→</a> <a id="3168" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="3171" class="Symbol">{</a><a id="3172" class="Argument">n</a> <a id="3174" class="Symbol">=</a> <a id="3176" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a><a id="3177" class="Symbol">}</a> <a id="3179" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="3182" class="InductiveConstructor">𝟙ᵐ</a> <a id="3185" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="3187" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="3189" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="3191" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="3193" href="Graded.Erasure.Extraction.Non-terminating.html#2660" class="Generalizable">q</a> <a id="3195" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="3197" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="3199" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="3201" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
  <a id="3205" href="Graded.Erasure.Extraction.Non-terminating.html#3153" class="Function">▸Πℕℕ</a> <a id="3210" class="Symbol">{</a><a id="3211" href="Graded.Erasure.Extraction.Non-terminating.html#3211" class="Bound">q</a><a id="3212" class="Symbol">}</a> <a id="3214" href="Graded.Erasure.Extraction.Non-terminating.html#3214" class="Bound">q≤𝟘</a> <a id="3218" class="Symbol">=</a> <a id="3220" href="Graded.Usage.html#8631" class="InductiveConstructor">sub</a>
    <a id="3228" class="Symbol">(</a><a id="3229" href="Graded.Usage.html#9359" class="InductiveConstructor">ΠΣₘ</a> <a id="3233" href="Graded.Usage.html#10296" class="InductiveConstructor">ℕₘ</a> <a id="3236" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3238" href="Graded.Usage.html#8631" class="InductiveConstructor">sub</a> <a id="3242" href="Graded.Usage.html#10296" class="InductiveConstructor">ℕₘ</a> <a id="3245" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3247" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
        <a id="3261" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="3264" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="3266" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="3268" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="3270" href="Graded.Erasure.Extraction.Non-terminating.html#3211" class="Bound">q</a>  <a id="3273" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="3276" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="3284" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="3286" href="Graded.Modality.html#3820" class="Function">·-identityˡ</a> <a id="3298" class="Symbol">_</a> <a id="3300" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
        <a id="3310" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="3313" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="3315" href="Graded.Erasure.Extraction.Non-terminating.html#3211" class="Bound">q</a>      <a id="3322" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="3325" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="3333" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="3335" href="Graded.Erasure.Extraction.Non-terminating.html#3214" class="Bound">q≤𝟘</a> <a id="3339" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
        <a id="3349" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>          <a id="3361" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="3362" class="Symbol">)</a>
    <a id="3368" class="Symbol">(</a><a id="3369" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="3382" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>        <a id="3392" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="3396" href="Graded.Context.Properties.Addition.html#903" class="Function">+ᶜ-identityʳ</a> <a id="3409" class="Symbol">_</a> <a id="3411" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="3420" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="3423" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="3426" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>  <a id="3430" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="3431" class="Symbol">)</a>
    <a id="3437" class="Keyword">where</a>
    <a id="3447" class="Keyword">open</a> <a id="3452" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="3466" class="Comment">------------------------------------------------------------------------</a>
<a id="3539" class="Comment">-- The term former cast</a>

<a id="3564" class="Keyword">opaque</a>

  <a id="3574" class="Comment">-- A cast lemma.</a>

  <a id="cast"></a><a id="3594" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="3599" class="Symbol">:</a> <a id="3601" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3606" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a> <a id="3608" class="Symbol">→</a> <a id="3610" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3615" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a> <a id="3617" class="Symbol">→</a> <a id="3619" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3624" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a> <a id="3626" class="Symbol">→</a> <a id="3628" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3633" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a> <a id="3635" class="Symbol">→</a> <a id="3637" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3642" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a>
  <a id="3646" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="3651" href="Graded.Erasure.Extraction.Non-terminating.html#3651" class="Bound">t</a> <a id="3653" href="Graded.Erasure.Extraction.Non-terminating.html#3653" class="Bound">A</a> <a id="3655" href="Graded.Erasure.Extraction.Non-terminating.html#3655" class="Bound">B</a> <a id="3657" href="Graded.Erasure.Extraction.Non-terminating.html#3657" class="Bound">u</a> <a id="3659" class="Symbol">=</a>
    <a id="3665" href="Definition.Untyped.Identity.html#914" class="Function">subst</a> <a id="3671" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="3673" class="Symbol">(</a><a id="3674" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="3676" class="Number">0</a><a id="3677" class="Symbol">)</a> <a id="3679" class="Symbol">(</a><a id="3680" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="3684" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="3686" class="Symbol">)</a> <a id="3688" href="Graded.Erasure.Extraction.Non-terminating.html#3653" class="Bound">A</a> <a id="3690" href="Graded.Erasure.Extraction.Non-terminating.html#3655" class="Bound">B</a> <a id="3692" class="Symbol">(</a><a id="3693" href="Definition.Untyped.html#1288" class="InductiveConstructor">emptyrec</a> <a id="3702" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="3704" class="Symbol">(</a><a id="3705" href="Definition.Untyped.html#2096" class="InductiveConstructor">Id</a> <a id="3708" class="Symbol">(</a><a id="3709" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="3711" class="Number">0</a><a id="3712" class="Symbol">)</a> <a id="3714" href="Graded.Erasure.Extraction.Non-terminating.html#3653" class="Bound">A</a> <a id="3716" href="Graded.Erasure.Extraction.Non-terminating.html#3655" class="Bound">B</a><a id="3717" class="Symbol">)</a> <a id="3719" href="Graded.Erasure.Extraction.Non-terminating.html#3651" class="Bound">t</a><a id="3720" class="Symbol">)</a> <a id="3722" href="Graded.Erasure.Extraction.Non-terminating.html#3657" class="Bound">u</a>

<a id="3725" class="Keyword">opaque</a>
  <a id="3734" class="Keyword">unfolding</a> <a id="3744" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="3749" href="Definition.Untyped.Identity.html#914" class="Function">subst</a>

  <a id="3758" class="Comment">-- An extraction lemma for cast.</a>

  <a id="erase-cast"></a><a id="3794" href="Graded.Erasure.Extraction.Non-terminating.html#3794" class="Function">erase-cast</a> <a id="3805" class="Symbol">:</a> <a id="3807" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="3814" href="Graded.Erasure.Extraction.Non-terminating.html#2544" class="Generalizable">b</a> <a id="3816" href="Graded.Erasure.Extraction.Non-terminating.html#2701" class="Generalizable">s</a> <a id="3818" class="Symbol">(</a><a id="3819" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="3824" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">t</a> <a id="3826" href="Graded.Erasure.Extraction.Non-terminating.html#2612" class="Generalizable">A</a> <a id="3828" href="Graded.Erasure.Extraction.Non-terminating.html#2614" class="Generalizable">B</a> <a id="3830" href="Graded.Erasure.Extraction.Non-terminating.html#2618" class="Generalizable">u</a><a id="3831" class="Symbol">)</a> <a id="3833" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3835" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="3842" href="Graded.Erasure.Extraction.Non-terminating.html#2544" class="Generalizable">b</a> <a id="3844" href="Graded.Erasure.Extraction.Non-terminating.html#2701" class="Generalizable">s</a> <a id="3846" href="Graded.Erasure.Extraction.Non-terminating.html#2618" class="Generalizable">u</a>
  <a id="3850" href="Graded.Erasure.Extraction.Non-terminating.html#3794" class="Function">erase-cast</a> <a id="3861" class="Symbol">=</a> <a id="3863" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a>

<a id="3872" class="Keyword">opaque</a>
  <a id="3881" class="Keyword">unfolding</a> <a id="3891" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a>

  <a id="3899" class="Comment">-- A typing rule for cast.</a>

  <a id="⊢cast"></a><a id="3929" href="Graded.Erasure.Extraction.Non-terminating.html#3929" class="Function">⊢cast</a> <a id="3935" class="Symbol">:</a>
    <a id="3941" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a> <a id="3943" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3945" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">t</a> <a id="3947" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3949" href="Definition.Untyped.html#1271" class="InductiveConstructor">Empty</a> <a id="3955" class="Symbol">→</a>
    <a id="3961" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a> <a id="3963" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3965" href="Graded.Erasure.Extraction.Non-terminating.html#2612" class="Generalizable">A</a> <a id="3967" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3969" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="3971" class="Number">0</a> <a id="3973" class="Symbol">→</a>
    <a id="3979" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a> <a id="3981" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3983" href="Graded.Erasure.Extraction.Non-terminating.html#2614" class="Generalizable">B</a> <a id="3985" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3987" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="3989" class="Number">0</a> <a id="3991" class="Symbol">→</a>
    <a id="3997" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a> <a id="3999" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="4001" href="Graded.Erasure.Extraction.Non-terminating.html#2618" class="Generalizable">u</a> <a id="4003" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="4005" href="Graded.Erasure.Extraction.Non-terminating.html#2612" class="Generalizable">A</a> <a id="4007" class="Symbol">→</a>
    <a id="4013" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a> <a id="4015" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="4017" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="4022" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">t</a> <a id="4024" href="Graded.Erasure.Extraction.Non-terminating.html#2612" class="Generalizable">A</a> <a id="4026" href="Graded.Erasure.Extraction.Non-terminating.html#2614" class="Generalizable">B</a> <a id="4028" href="Graded.Erasure.Extraction.Non-terminating.html#2618" class="Generalizable">u</a> <a id="4030" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="4032" href="Graded.Erasure.Extraction.Non-terminating.html#2614" class="Generalizable">B</a>
  <a id="4036" href="Graded.Erasure.Extraction.Non-terminating.html#3929" class="Function">⊢cast</a> <a id="4042" href="Graded.Erasure.Extraction.Non-terminating.html#4042" class="Bound">⊢t</a> <a id="4045" href="Graded.Erasure.Extraction.Non-terminating.html#4045" class="Bound">⊢A</a> <a id="4048" href="Graded.Erasure.Extraction.Non-terminating.html#4048" class="Bound">⊢B</a> <a id="4051" class="Symbol">=</a>
    <a id="4057" href="Definition.Typed.Properties.Admissible.Identity.html#11967" class="Function">⊢subst</a> <a id="4064" class="Symbol">(</a><a id="4065" href="Definition.Typed.html#1337" class="InductiveConstructor">univ</a> <a id="4070" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4072" href="Definition.Typed.Properties.Admissible.Var.html#599" class="Function">var₀</a> <a id="4077" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4079" href="Definition.Typed.html#1310" class="InductiveConstructor">Uⱼ</a> <a id="4082" class="Symbol">(</a><a id="4083" href="Definition.Typed.Properties.Well-formed.html#10731" class="Function">wfTerm</a> <a id="4090" href="Graded.Erasure.Extraction.Non-terminating.html#4042" class="Bound">⊢t</a><a id="4092" class="Symbol">))</a> <a id="4095" class="Symbol">(</a><a id="4096" href="Definition.Typed.html#2002" class="InductiveConstructor">emptyrecⱼ</a> <a id="4106" class="Symbol">(</a><a id="4107" href="Definition.Typed.Properties.Admissible.Identity.Primitive.html#770" class="Function">Idⱼ′</a> <a id="4112" href="Graded.Erasure.Extraction.Non-terminating.html#4045" class="Bound">⊢A</a> <a id="4115" href="Graded.Erasure.Extraction.Non-terminating.html#4048" class="Bound">⊢B</a><a id="4117" class="Symbol">)</a> <a id="4119" href="Graded.Erasure.Extraction.Non-terminating.html#4042" class="Bound">⊢t</a><a id="4121" class="Symbol">)</a>

<a id="4124" class="Keyword">opaque</a>
  <a id="4133" class="Keyword">unfolding</a> <a id="4143" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a>

  <a id="4151" class="Comment">-- A usage rule for cast.</a>

  <a id="▸cast"></a><a id="4180" href="Graded.Erasure.Extraction.Non-terminating.html#4180" class="Function">▸cast</a> <a id="4186" class="Symbol">:</a>
    <a id="4192" href="Graded.Usage.Restrictions.html#1782" class="Field">Emptyrec-allowed</a> <a id="4209" class="InductiveConstructor">𝟙ᵐ</a> <a id="4212" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="4214" class="Symbol">→</a>
    <a id="4220" href="Graded.Erasure.Extraction.Non-terminating.html#2635" class="Generalizable">γ₁</a> <a id="4223" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="4226" href="Graded.Mode.html#3316" class="Function">𝟘ᵐ?</a> <a id="4230" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="4232" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">t</a> <a id="4234" class="Symbol">→</a>
    <a id="4240" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">γ₂</a> <a id="4243" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="4246" class="InductiveConstructor">𝟙ᵐ</a> <a id="4249" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="4251" href="Graded.Erasure.Extraction.Non-terminating.html#2612" class="Generalizable">A</a> <a id="4253" class="Symbol">→</a>
    <a id="4259" href="Graded.Erasure.Extraction.Non-terminating.html#2641" class="Generalizable">γ₃</a> <a id="4262" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="4265" class="InductiveConstructor">𝟙ᵐ</a> <a id="4268" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="4270" href="Graded.Erasure.Extraction.Non-terminating.html#2614" class="Generalizable">B</a> <a id="4272" class="Symbol">→</a>
    <a id="4278" href="Graded.Erasure.Extraction.Non-terminating.html#2644" class="Generalizable">γ₄</a> <a id="4281" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="4284" class="InductiveConstructor">𝟙ᵐ</a> <a id="4287" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="4289" href="Graded.Erasure.Extraction.Non-terminating.html#2618" class="Generalizable">u</a> <a id="4291" class="Symbol">→</a>
    <a id="4297" href="Graded.Modality.html#949" class="Function">ω</a> <a id="4299" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="4302" class="Symbol">(</a><a id="4303" href="Graded.Erasure.Extraction.Non-terminating.html#2638" class="Generalizable">γ₂</a> <a id="4306" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="4309" href="Graded.Erasure.Extraction.Non-terminating.html#2641" class="Generalizable">γ₃</a> <a id="4312" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="4315" href="Graded.Erasure.Extraction.Non-terminating.html#2644" class="Generalizable">γ₄</a><a id="4317" class="Symbol">)</a> <a id="4319" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="4322" class="InductiveConstructor">𝟙ᵐ</a> <a id="4325" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="4327" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="4332" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">t</a> <a id="4334" href="Graded.Erasure.Extraction.Non-terminating.html#2612" class="Generalizable">A</a> <a id="4336" href="Graded.Erasure.Extraction.Non-terminating.html#2614" class="Generalizable">B</a> <a id="4338" href="Graded.Erasure.Extraction.Non-terminating.html#2618" class="Generalizable">u</a>
  <a id="4342" href="Graded.Erasure.Extraction.Non-terminating.html#4180" class="Function">▸cast</a> <a id="4348" class="Symbol">{</a><a id="4349" href="Graded.Erasure.Extraction.Non-terminating.html#4349" class="Bound">γ₁</a><a id="4351" class="Symbol">}</a> <a id="4353" class="Symbol">{</a><a id="4354" href="Graded.Erasure.Extraction.Non-terminating.html#4354" class="Bound">γ₂</a><a id="4356" class="Symbol">}</a> <a id="4358" class="Symbol">{</a><a id="4359" href="Graded.Erasure.Extraction.Non-terminating.html#4359" class="Bound">γ₃</a><a id="4361" class="Symbol">}</a> <a id="4363" class="Symbol">{</a><a id="4364" href="Graded.Erasure.Extraction.Non-terminating.html#4364" class="Bound">γ₄</a><a id="4366" class="Symbol">}</a> <a id="4368" href="Graded.Erasure.Extraction.Non-terminating.html#4368" class="Bound">ok</a> <a id="4371" href="Graded.Erasure.Extraction.Non-terminating.html#4371" class="Bound">▸t</a> <a id="4374" href="Graded.Erasure.Extraction.Non-terminating.html#4374" class="Bound">▸A</a> <a id="4377" href="Graded.Erasure.Extraction.Non-terminating.html#4377" class="Bound">▸B</a> <a id="4380" href="Graded.Erasure.Extraction.Non-terminating.html#4380" class="Bound">▸u</a> <a id="4383" class="Symbol">=</a>
    <a id="4389" href="Graded.Usage.html#8631" class="InductiveConstructor">sub</a> <a id="4393" class="Symbol">(</a><a id="4394" href="Graded.Derived.Identity.html#1233" class="Function">▸subst</a> <a id="4401" href="Graded.Usage.html#8748" class="InductiveConstructor">Uₘ</a>
           <a id="4415" class="Symbol">(</a><a id="4416" href="Graded.Usage.html#8631" class="InductiveConstructor">sub</a> <a id="4420" href="Graded.Usage.html#8703" class="InductiveConstructor">var</a> <a id="4424" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4426" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
              <a id="4446" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="4449" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="4451" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="4453" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="4455" href="Graded.Modality.html#947" class="Function">𝟙</a>   <a id="4459" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="4462" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="4470" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="4472" href="Graded.Modality.html#3862" class="Function">·-identityʳ</a> <a id="4484" class="Symbol">_</a> <a id="4486" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
              <a id="4502" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="4505" href="Graded.Context.html#1144" class="Function Operator">,</a> <a id="4507" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="4510" href="Graded.Context.html#1144" class="Function Operator">≔</a> <a id="4512" href="Graded.Modality.html#947" class="Function">𝟙</a>  <a id="4515" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="4516" class="Symbol">)</a>
           <a id="4529" href="Graded.Erasure.Extraction.Non-terminating.html#4374" class="Bound">▸A</a> <a id="4532" href="Graded.Erasure.Extraction.Non-terminating.html#4377" class="Bound">▸B</a>
           <a id="4546" class="Symbol">(</a><a id="4547" href="Graded.Usage.html#8808" class="InductiveConstructor">emptyrecₘ</a> <a id="4557" class="Symbol">(</a><a id="4558" href="Graded.Usage.Properties.html#2559" class="Function">▸-cong</a> <a id="4565" class="Symbol">(</a><a id="4566" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="4573" href="Graded.Mode.html#19175" class="Function">⌞𝟘⌟≡𝟘ᵐ?</a><a id="4580" class="Symbol">)</a> <a id="4582" href="Graded.Erasure.Extraction.Non-terminating.html#4371" class="Bound">▸t</a><a id="4584" class="Symbol">)</a>
              <a id="4600" class="Symbol">(</a><a id="4601" href="Graded.Usage.Properties.html#51649" class="Function">Idₘ-generalised</a> <a id="4617" href="Graded.Usage.html#8748" class="InductiveConstructor">Uₘ</a> <a id="4620" class="Symbol">(</a><a id="4621" href="Graded.Usage.Properties.html#3641" class="Function">▸-𝟘ᵐ?</a> <a id="4627" href="Graded.Erasure.Extraction.Non-terminating.html#4374" class="Bound">▸A</a> <a id="4630" class="Symbol">.</a><a id="4631" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4636" class="Symbol">)</a> <a id="4638" class="Symbol">(</a><a id="4639" href="Graded.Usage.Properties.html#3641" class="Function">▸-𝟘ᵐ?</a> <a id="4645" href="Graded.Erasure.Extraction.Non-terminating.html#4377" class="Bound">▸B</a> <a id="4648" class="Symbol">.</a><a id="4649" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4654" class="Symbol">)</a>
                 <a id="4673" class="Symbol">(λ</a> <a id="4676" href="Graded.Erasure.Extraction.Non-terminating.html#4676" class="Bound">_</a> <a id="4678" class="Symbol">→</a> <a id="4680" href="Graded.Context.Properties.Meet.html#2443" class="Function">∧ᶜ-decreasingˡ</a> <a id="4695" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="4698" class="Symbol">_)</a>
                 <a id="4718" class="Symbol">(λ</a> <a id="4721" href="Graded.Erasure.Extraction.Non-terminating.html#4721" class="Bound">_</a> <a id="4723" class="Symbol">→</a> <a id="4725" href="Graded.Context.Properties.Meet.html#2657" class="Function">∧ᶜ-decreasingʳ</a> <a id="4740" class="Symbol">_</a> <a id="4742" class="Symbol">_))</a>
              <a id="4760" href="Graded.Erasure.Extraction.Non-terminating.html#4368" class="Bound">ok</a><a id="4762" class="Symbol">)</a>
           <a id="4775" href="Graded.Erasure.Extraction.Non-terminating.html#4380" class="Bound">▸u</a><a id="4777" class="Symbol">)</a>
    <a id="4783" class="Symbol">(</a><a id="4784" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="4797" href="Graded.Modality.html#949" class="Function">ω</a> <a id="4799" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="4802" class="Symbol">(</a><a id="4803" href="Graded.Erasure.Extraction.Non-terminating.html#4354" class="Bound">γ₂</a> <a id="4806" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="4809" href="Graded.Erasure.Extraction.Non-terminating.html#4359" class="Bound">γ₃</a> <a id="4812" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="4815" href="Graded.Erasure.Extraction.Non-terminating.html#4364" class="Bound">γ₄</a><a id="4817" class="Symbol">)</a>                   <a id="4837" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="4841" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="4850" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="4903" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="4912" class="Symbol">(</a><a id="4913" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="4926" class="Symbol">_)</a> <a id="4929" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="4982" href="Graded.Context.Properties.Addition.html#2618" class="Function">+ᶜ-congˡ</a> <a id="4991" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5044" href="Graded.Context.Properties.Addition.html#2618" class="Function">+ᶜ-congˡ</a> <a id="5053" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5106" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="5115" class="Symbol">(</a><a id="5116" href="Graded.Context.Properties.Addition.html#2723" class="Function">+ᶜ-congʳ</a> <a id="5125" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5127" href="Graded.Context.Properties.Multiplication.html#898" class="Function">·ᶜ-zeroˡ</a> <a id="5136" class="Symbol">_)</a> <a id="5139" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5192" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="5205" class="Symbol">_</a> <a id="5207" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="5216" href="Graded.Modality.html#949" class="Function">ω</a> <a id="5218" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="5221" class="Symbol">(</a><a id="5222" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="5225" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="5228" href="Graded.Erasure.Extraction.Non-terminating.html#4354" class="Bound">γ₂</a> <a id="5231" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="5234" href="Graded.Erasure.Extraction.Non-terminating.html#4359" class="Bound">γ₃</a> <a id="5237" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="5240" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="5242" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="5245" href="Graded.Erasure.Extraction.Non-terminating.html#4349" class="Bound">γ₁</a> <a id="5248" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="5251" href="Graded.Erasure.Extraction.Non-terminating.html#4364" class="Bound">γ₄</a><a id="5253" class="Symbol">)</a>  <a id="5256" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="5257" class="Symbol">)</a>
    <a id="5263" class="Keyword">where</a>
    <a id="5273" class="Keyword">open</a> <a id="5278" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="5292" class="Comment">------------------------------------------------------------------------</a>
<a id="5365" class="Comment">-- The term former λx∙xx</a>

<a id="5391" class="Keyword">opaque</a>

  <a id="5401" class="Comment">-- A term that is roughly &quot;λ x. x x&quot;.</a>

  <a id="λx∙xx"></a><a id="5442" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="5448" class="Symbol">:</a> <a id="5450" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="5452" class="Symbol">→</a> <a id="5454" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="5459" class="Symbol">(</a><a id="5460" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="5463" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a><a id="5464" class="Symbol">)</a>
  <a id="5468" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="5474" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Bound">p</a> <a id="5476" class="Symbol">=</a>
    <a id="5482" href="Definition.Untyped.html#1613" class="InductiveConstructor">lam</a> <a id="5486" class="Symbol">(</a><a id="5487" href="Graded.Modality.html#949" class="Function">ω</a> <a id="5489" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="5491" href="Graded.Modality.html#949" class="Function">ω</a><a id="5492" class="Symbol">)</a> <a id="5494" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="5500" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="5505" class="Symbol">(</a><a id="5506" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="5510" href="Tools.Fin.html#439" class="Function">x1</a><a id="5512" class="Symbol">)</a> <a id="5514" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="5516" class="Symbol">(</a><a id="5517" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="5519" href="Graded.Modality.html#949" class="Function">ω</a> <a id="5521" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="5523" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Bound">p</a> <a id="5525" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="5527" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="5529" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="5531" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a><a id="5532" class="Symbol">)</a> <a id="5534" class="Symbol">(</a><a id="5535" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="5539" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="5541" class="Symbol">)</a> <a id="5543" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">∘⟨</a> <a id="5546" href="Graded.Modality.html#949" class="Function">ω</a> <a id="5548" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">⟩</a> <a id="5550" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="5554" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a>

<a id="5558" class="Keyword">opaque</a>
  <a id="5567" class="Keyword">unfolding</a> <a id="5577" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a>

  <a id="5586" class="Comment">-- An extraction lemma for λx∙xx.</a>

  <a id="erase-λx∙xx"></a><a id="5623" href="Graded.Erasure.Extraction.Non-terminating.html#5623" class="Function">erase-λx∙xx</a> <a id="5635" class="Symbol">:</a>
    <a id="5641" class="Symbol">⦃</a> <a id="5643" href="Graded.Erasure.Extraction.Non-terminating.html#5643" class="Bound">𝟘-well-behaved</a> <a id="5658" class="Symbol">:</a> <a id="5660" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="5682" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="5684" href="Graded.Modality.html#9715" class="Function">semiring-with-meet</a> <a id="5703" class="Symbol">⦄</a> <a id="5705" class="Symbol">→</a>
    <a id="5711" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5718" href="Graded.Erasure.Extraction.Non-terminating.html#2544" class="Generalizable">b</a> <a id="5720" href="Graded.Erasure.Extraction.Non-terminating.html#2701" class="Generalizable">s</a> <a id="5722" class="Symbol">(</a><a id="5723" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="5729" class="Symbol">{</a><a id="5730" class="Argument">n</a> <a id="5732" class="Symbol">=</a> <a id="5734" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a><a id="5735" class="Symbol">}</a> <a id="5737" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a><a id="5738" class="Symbol">)</a> <a id="5740" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="5746" class="InductiveConstructor">T.lam</a> <a id="5752" class="Symbol">(</a><a id="5753" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="5759" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="5762" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="5767" href="Graded.Erasure.Extraction.Non-terminating.html#2701" class="Generalizable">s</a> <a id="5769" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="5771" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="5777" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="5779" class="Symbol">)</a>
  <a id="5783" href="Graded.Erasure.Extraction.Non-terminating.html#5623" class="Function">erase-λx∙xx</a> <a id="5795" class="Symbol">{</a><a id="5796" href="Graded.Erasure.Extraction.Non-terminating.html#5796" class="Bound">b</a><a id="5797" class="Symbol">}</a> <a id="5799" class="Symbol">{</a><a id="5800" href="Graded.Erasure.Extraction.Non-terminating.html#5800" class="Bound">s</a><a id="5801" class="Symbol">}</a> <a id="5803" class="Symbol">{</a><a id="5804" href="Graded.Erasure.Extraction.Non-terminating.html#5804" class="Bound">p</a><a id="5805" class="Symbol">}</a> <a id="5807" class="Symbol">=</a>
    <a id="5813" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5820" href="Graded.Erasure.Extraction.Non-terminating.html#5796" class="Bound">b</a> <a id="5822" href="Graded.Erasure.Extraction.Non-terminating.html#5800" class="Bound">s</a> <a id="5824" class="Symbol">(</a><a id="5825" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="5831" href="Graded.Erasure.Extraction.Non-terminating.html#5804" class="Bound">p</a><a id="5832" class="Symbol">)</a>                                          <a id="5875" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="5878" href="Graded.Erasure.Extraction.Properties.html#4431" class="Function">lam-≢𝟘</a> <a id="5885" href="Graded.Erasure.Extraction.Non-terminating.html#5796" class="Bound">b</a> <a id="5887" class="Symbol">(</a><a id="5888" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a> <a id="5892" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5895" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5901" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5904" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1108" class="Function">+-positive</a><a id="5914" class="Symbol">)</a> <a id="5916" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="5923" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a>
      <a id="5935" class="Symbol">(</a><a id="5936" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5943" href="Graded.Erasure.Extraction.Non-terminating.html#5796" class="Bound">b</a> <a id="5945" href="Graded.Erasure.Extraction.Non-terminating.html#5800" class="Bound">s</a> <a id="5947" href="Function.Base.html#1974" class="Function Operator">$</a>
       <a id="5956" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="5961" class="Symbol">(</a><a id="5962" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="5966" href="Tools.Fin.html#439" class="Function">x1</a><a id="5968" class="Symbol">)</a> <a id="5970" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="5972" class="Symbol">(</a><a id="5973" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="5975" href="Graded.Modality.html#949" class="Function">ω</a> <a id="5977" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="5979" href="Graded.Erasure.Extraction.Non-terminating.html#5804" class="Bound">p</a> <a id="5981" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="5983" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="5985" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="5987" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a><a id="5988" class="Symbol">)</a> <a id="5990" class="Symbol">(</a><a id="5991" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="5995" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="5997" class="Symbol">)</a> <a id="5999" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">∘⟨</a> <a id="6002" href="Graded.Modality.html#949" class="Function">ω</a> <a id="6004" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">⟩</a> <a id="6006" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="6010" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6012" class="Symbol">)</a>  <a id="6015" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="6018" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="6026" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6032" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6034" href="Graded.Erasure.Extraction.Properties.html#4109" class="Function">∘-≢𝟘</a> <a id="6039" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a> <a id="6043" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="6050" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a>
      <a id="6062" class="Symbol">(</a><a id="6063" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="6070" href="Graded.Erasure.Extraction.Non-terminating.html#5796" class="Bound">b</a> <a id="6072" href="Graded.Erasure.Extraction.Non-terminating.html#5800" class="Bound">s</a>
         <a id="6083" class="Symbol">(</a><a id="6084" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="6089" class="Symbol">(</a><a id="6090" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="6094" href="Tools.Fin.html#439" class="Function">x1</a><a id="6096" class="Symbol">)</a> <a id="6098" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="6100" class="Symbol">(</a><a id="6101" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="6103" href="Graded.Modality.html#949" class="Function">ω</a> <a id="6105" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="6107" href="Graded.Erasure.Extraction.Non-terminating.html#5804" class="Bound">p</a> <a id="6109" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="6111" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="6113" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="6115" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a><a id="6116" class="Symbol">)</a> <a id="6118" class="Symbol">(</a><a id="6119" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="6123" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6125" class="Symbol">))</a>
         <a id="6137" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6142" href="Graded.Erasure.Extraction.Non-terminating.html#5800" class="Bound">s</a> <a id="6144" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6146" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6152" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6154" class="Symbol">)</a>                                       <a id="6194" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="6197" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="6205" class="Symbol">(λ</a> <a id="6208" href="Graded.Erasure.Extraction.Non-terminating.html#6208" class="Bound">t</a> <a id="6210" class="Symbol">→</a> <a id="6212" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6218" class="Symbol">(</a><a id="6219" href="Graded.Erasure.Extraction.Non-terminating.html#6208" class="Bound">t</a> <a id="6221" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6226" class="Symbol">_</a> <a id="6228" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6230" class="Symbol">_))</a> <a id="6234" href="Graded.Erasure.Extraction.Non-terminating.html#3794" class="Function">erase-cast</a> <a id="6245" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="6252" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6258" class="Symbol">(</a><a id="6259" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6265" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="6268" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6273" href="Graded.Erasure.Extraction.Non-terminating.html#5800" class="Bound">s</a> <a id="6275" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6277" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6283" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6285" class="Symbol">)</a>                            <a id="6314" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="6320" class="Keyword">where</a>
    <a id="6330" class="Keyword">open</a> <a id="6335" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="6374" class="Keyword">opaque</a>
  <a id="6383" class="Keyword">unfolding</a> <a id="6393" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a>

  <a id="6402" class="Comment">-- A typing rule for λx∙xx.</a>

  <a id="⊢λx∙xx"></a><a id="6433" href="Graded.Erasure.Extraction.Non-terminating.html#6433" class="Function">⊢λx∙xx</a> <a id="6440" class="Symbol">:</a>
    <a id="6446" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="6456" href="Graded.Modality.html#949" class="Function">ω</a> <a id="6458" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="6460" class="Symbol">→</a>
    <a id="6466" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="6476" class="Symbol">(</a><a id="6477" href="Graded.Modality.html#949" class="Function">ω</a> <a id="6479" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="6481" href="Graded.Modality.html#949" class="Function">ω</a><a id="6482" class="Symbol">)</a> <a id="6484" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="6486" class="Symbol">→</a>
    <a id="6492" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="6494" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a> <a id="6496" class="Symbol">→</a>
    <a id="6502" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a> <a id="6504" class="InductiveConstructor Operator">∙</a> <a id="6506" href="Definition.Untyped.html#1271" class="InductiveConstructor">Empty</a> <a id="6512" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="6514" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="6520" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="6522" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="6524" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="6526" class="Symbol">(</a><a id="6527" href="Graded.Modality.html#949" class="Function">ω</a> <a id="6529" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="6531" href="Graded.Modality.html#949" class="Function">ω</a><a id="6532" class="Symbol">)</a> <a id="6534" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="6536" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="6538" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="6540" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="6542" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="6544" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
  <a id="6548" href="Graded.Erasure.Extraction.Non-terminating.html#6433" class="Function">⊢λx∙xx</a> <a id="6555" href="Graded.Erasure.Extraction.Non-terminating.html#6555" class="Bound">ω-ok</a> <a id="6560" href="Graded.Erasure.Extraction.Non-terminating.html#6560" class="Bound">ω+ω-ok</a> <a id="6567" href="Graded.Erasure.Extraction.Non-terminating.html#6567" class="Bound">⊢Γ</a> <a id="6570" class="Symbol">=</a>
    <a id="6576" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="6582" href="Graded.Erasure.Extraction.Non-terminating.html#6560" class="Bound">ω+ω-ok</a> <a id="6589" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="6595" href="Graded.Erasure.Extraction.Non-terminating.html#3929" class="Function">⊢cast</a> <a id="6601" class="Symbol">(</a><a id="6602" href="Definition.Typed.Properties.Admissible.Var.html#712" class="Function">var₁</a> <a id="6607" href="Graded.Erasure.Extraction.Non-terminating.html#2873" class="Function">Empty⊢ℕ</a><a id="6614" class="Symbol">)</a> <a id="6616" href="Graded.Erasure.Extraction.Non-terminating.html#2927" class="Function">Empty∙ℕ⊢ℕ∷U</a>
      <a id="6634" class="Symbol">(</a><a id="6635" href="Definition.Typed.html#2372" class="InductiveConstructor">ΠΣⱼ</a> <a id="6639" href="Graded.Erasure.Extraction.Non-terminating.html#2927" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="6651" href="Graded.Erasure.Extraction.Non-terminating.html#3012" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="6665" href="Graded.Erasure.Extraction.Non-terminating.html#6555" class="Bound">ω-ok</a><a id="6669" class="Symbol">)</a> <a id="6671" class="Symbol">(</a><a id="6672" href="Definition.Typed.Properties.Admissible.Var.html#599" class="Function">var₀</a> <a id="6677" href="Graded.Erasure.Extraction.Non-terminating.html#2873" class="Function">Empty⊢ℕ</a><a id="6684" class="Symbol">)</a> <a id="6686" href="Definition.Typed.html#2669" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="6693" href="Definition.Typed.Properties.Admissible.Var.html#599" class="Function">var₀</a> <a id="6698" href="Graded.Erasure.Extraction.Non-terminating.html#2873" class="Function">Empty⊢ℕ</a>
    <a id="6710" class="Keyword">where</a>
    <a id="6720" class="Keyword">open</a> <a id="6725" href="Graded.Erasure.Extraction.Non-terminating.html#2770" class="Module">Lemmas</a> <a id="6732" href="Graded.Erasure.Extraction.Non-terminating.html#6567" class="Bound">⊢Γ</a>

<a id="6736" class="Keyword">opaque</a>
  <a id="6745" class="Keyword">unfolding</a> <a id="6755" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a>

  <a id="6764" class="Comment">-- A usage rule for λx∙xx.</a>

  <a id="▸λx∙xx"></a><a id="6794" href="Graded.Erasure.Extraction.Non-terminating.html#6794" class="Function">▸λx∙xx</a> <a id="6801" class="Symbol">:</a>
    <a id="6807" href="Graded.Usage.Restrictions.html#1782" class="Field">Emptyrec-allowed</a> <a id="6824" class="InductiveConstructor">𝟙ᵐ</a> <a id="6827" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="6829" class="Symbol">→</a>
    <a id="6835" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="6837" href="Graded.Modality.html#1384" class="Function Operator">≤</a> <a id="6839" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="6841" class="Symbol">→</a>
    <a id="6847" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="6850" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="6853" class="InductiveConstructor">𝟙ᵐ</a> <a id="6856" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="6858" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="6864" class="Symbol">{</a><a id="6865" class="Argument">n</a> <a id="6867" class="Symbol">=</a> <a id="6869" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a><a id="6870" class="Symbol">}</a> <a id="6872" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a>
  <a id="6876" href="Graded.Erasure.Extraction.Non-terminating.html#6794" class="Function">▸λx∙xx</a> <a id="6883" class="Symbol">{</a><a id="6884" href="Graded.Erasure.Extraction.Non-terminating.html#6884" class="Bound">p</a><a id="6885" class="Symbol">}</a> <a id="6887" href="Graded.Erasure.Extraction.Non-terminating.html#6887" class="Bound">ok</a> <a id="6890" href="Graded.Erasure.Extraction.Non-terminating.html#6890" class="Bound">p≤𝟘</a> <a id="6894" class="Symbol">=</a>
    <a id="6900" href="Graded.Usage.html#9477" class="InductiveConstructor">lamₘ</a> <a id="6905" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6907" href="Graded.Usage.html#8631" class="InductiveConstructor">sub</a> <a id="6911" class="Symbol">(</a><a id="6912" href="Graded.Erasure.Extraction.Non-terminating.html#4180" class="Function">▸cast</a> <a id="6918" href="Graded.Erasure.Extraction.Non-terminating.html#6887" class="Bound">ok</a> <a id="6921" href="Graded.Usage.html#8703" class="InductiveConstructor">var</a> <a id="6925" href="Graded.Usage.html#10296" class="InductiveConstructor">ℕₘ</a> <a id="6928" class="Symbol">(</a><a id="6929" href="Graded.Erasure.Extraction.Non-terminating.html#3153" class="Function">▸Πℕℕ</a> <a id="6934" href="Graded.Erasure.Extraction.Non-terminating.html#6890" class="Bound">p≤𝟘</a><a id="6937" class="Symbol">)</a> <a id="6939" href="Graded.Usage.html#8703" class="InductiveConstructor">var</a> <a id="6943" href="Graded.Usage.html#9546" class="InductiveConstructor Operator">∘ₘ</a> <a id="6946" href="Graded.Usage.html#8703" class="InductiveConstructor">var</a><a id="6949" class="Symbol">)</a> <a id="6951" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6953" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
      <a id="6965" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="6968" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="6970" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="6972" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="6974" class="Symbol">(</a><a id="6975" href="Graded.Modality.html#949" class="Function">ω</a> <a id="6977" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="6979" href="Graded.Modality.html#949" class="Function">ω</a><a id="6980" class="Symbol">)</a>                                      <a id="7019" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="7022" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="7030" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="7032" href="Graded.Modality.html#3820" class="Function">·-identityˡ</a> <a id="7044" class="Symbol">_</a> <a id="7046" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
      <a id="7054" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7057" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7059" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7061" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="7063" href="Graded.Modality.html#949" class="Function">ω</a>                                            <a id="7108" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="7112" class="Symbol">(</a><a id="7113" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="7122" class="Symbol">(</a><a id="7123" href="Graded.Context.Properties.Addition.html#2435" class="Function">+ᶜ-cong</a> <a id="7131" class="Symbol">(</a><a id="7132" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="7141" class="Symbol">_)</a> <a id="7144" class="Symbol">(</a><a id="7145" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="7154" class="Symbol">_))</a> <a id="7158" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                 <a id="7225" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="7238" class="Symbol">_)</a> <a id="7241" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a>
                                                                <a id="7307" href="Algebra.Structures.html#13194" class="Function">+-cong</a> <a id="7314" class="Symbol">(</a><a id="7315" href="Graded.Modality.html#3862" class="Function">·-identityʳ</a> <a id="7327" class="Symbol">_)</a> <a id="7330" href="Graded.Mode.html#20957" class="Function">·⌜⌞⌟⌝</a> <a id="7336" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
      <a id="7344" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7346" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7349" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7352" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="7355" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7357" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7360" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7363" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7365" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7367" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="7369" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="7371" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="7373" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7375" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="7377" href="Graded.Mode.html#4855" class="Function Operator">⌜</a> <a id="7379" href="Graded.Mode.html#5190" class="Function Operator">⌞</a> <a id="7381" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7383" href="Graded.Mode.html#5190" class="Function Operator">⌟</a> <a id="7385" href="Graded.Mode.html#4855" class="Function Operator">⌝</a>            <a id="7398" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
      <a id="7408" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7410" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7413" class="Symbol">(</a><a id="7414" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7417" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7419" href="Graded.Modality.html#947" class="Function">𝟙</a><a id="7420" class="Symbol">)</a> <a id="7422" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="7425" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7427" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7430" class="Symbol">(</a><a id="7431" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7434" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7436" href="Graded.Mode.html#4855" class="Function Operator">⌜</a> <a id="7438" href="Graded.Mode.html#5190" class="Function Operator">⌞</a> <a id="7440" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7442" href="Graded.Mode.html#5190" class="Function Operator">⌟</a> <a id="7444" href="Graded.Mode.html#4855" class="Function Operator">⌝</a><a id="7445" class="Symbol">)</a>                <a id="7462" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="7466" href="Graded.Context.Properties.Addition.html#2723" class="Function">+ᶜ-congʳ</a> <a id="7475" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7541" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="7550" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7616" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="7625" class="Symbol">(</a><a id="7626" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="7639" class="Symbol">_)</a> <a id="7642" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7708" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="7721" class="Symbol">_</a> <a id="7723" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
      <a id="7731" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7733" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7736" class="Symbol">(</a><a id="7737" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7740" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="7743" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7746" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="7749" class="Symbol">(</a><a id="7750" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7753" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7755" href="Graded.Modality.html#947" class="Function">𝟙</a><a id="7756" class="Symbol">))</a> <a id="7759" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="7762" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7764" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="7767" class="Symbol">(</a><a id="7768" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="7771" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="7773" href="Graded.Mode.html#4855" class="Function Operator">⌜</a> <a id="7775" href="Graded.Mode.html#5190" class="Function Operator">⌞</a> <a id="7777" href="Graded.Modality.html#949" class="Function">ω</a> <a id="7779" href="Graded.Mode.html#5190" class="Function Operator">⌟</a> <a id="7781" href="Graded.Mode.html#4855" class="Function Operator">⌝</a><a id="7782" class="Symbol">)</a>  <a id="7785" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="7791" class="Keyword">where</a>
    <a id="7801" class="Keyword">open</a> <a id="7806" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="7820" class="Comment">------------------------------------------------------------------------</a>
<a id="7893" class="Comment">-- The term former extracts-to-loop</a>

<a id="7930" class="Keyword">opaque</a>

  <a id="7940" class="Comment">-- A term for which the extraction is loop s (for some s) if</a>
  <a id="8003" class="Comment">-- erasable arguments are removed entirely.</a>

  <a id="extracts-to-loop"></a><a id="8050" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a> <a id="8067" class="Symbol">:</a> <a id="8069" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="8071" class="Symbol">→</a> <a id="8073" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="8078" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a>
  <a id="8082" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a> <a id="8099" href="Graded.Erasure.Extraction.Non-terminating.html#8099" class="Bound">p</a> <a id="8101" class="Symbol">=</a>
    <a id="8107" href="Definition.Untyped.html#1613" class="InductiveConstructor">lam</a> <a id="8111" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="8113" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="8119" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="8125" href="Graded.Erasure.Extraction.Non-terminating.html#8099" class="Bound">p</a> <a id="8127" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">∘⟨</a> <a id="8130" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8132" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="8134" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8136" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">⟩</a> <a id="8138" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="8143" class="Symbol">(</a><a id="8144" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="8148" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8150" class="Symbol">)</a> <a id="8152" class="Symbol">(</a><a id="8153" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="8155" class="Symbol">(</a><a id="8156" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8158" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="8160" href="Graded.Modality.html#949" class="Function">ω</a><a id="8161" class="Symbol">)</a> <a id="8163" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="8165" href="Graded.Erasure.Extraction.Non-terminating.html#8099" class="Bound">p</a> <a id="8167" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="8169" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="8171" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="8173" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a><a id="8174" class="Symbol">)</a> <a id="8176" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="8178" class="Symbol">(</a><a id="8179" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="8185" href="Graded.Erasure.Extraction.Non-terminating.html#8099" class="Bound">p</a><a id="8186" class="Symbol">)</a>

<a id="8189" class="Keyword">opaque</a>
  <a id="8198" class="Keyword">unfolding</a> <a id="8208" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a> <a id="8225" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a>

  <a id="8233" class="Comment">-- An extraction lemma for extracts-to-loop.</a>

  <a id="erase-extracts-to-loop"></a><a id="8281" href="Graded.Erasure.Extraction.Non-terminating.html#8281" class="Function">erase-extracts-to-loop</a> <a id="8304" class="Symbol">:</a>
    <a id="8310" class="Symbol">⦃</a> <a id="8312" href="Graded.Erasure.Extraction.Non-terminating.html#8312" class="Bound">𝟘-well-behaved</a> <a id="8327" class="Symbol">:</a> <a id="8329" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="8351" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="8353" href="Graded.Modality.html#9715" class="Function">semiring-with-meet</a> <a id="8372" class="Symbol">⦄</a> <a id="8374" class="Symbol">→</a>
    <a id="8380" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8387" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8392" href="Graded.Erasure.Extraction.Non-terminating.html#2701" class="Generalizable">s</a> <a id="8394" class="Symbol">(</a><a id="8395" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a> <a id="8412" class="Symbol">{</a><a id="8413" class="Argument">n</a> <a id="8415" class="Symbol">=</a> <a id="8417" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a><a id="8418" class="Symbol">}</a> <a id="8420" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a><a id="8421" class="Symbol">)</a> <a id="8423" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8425" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="8430" href="Graded.Erasure.Extraction.Non-terminating.html#2701" class="Generalizable">s</a>
  <a id="8434" href="Graded.Erasure.Extraction.Non-terminating.html#8281" class="Function">erase-extracts-to-loop</a> <a id="8457" class="Symbol">{</a><a id="8458" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a><a id="8459" class="Symbol">}</a> <a id="8461" class="Symbol">{</a><a id="8462" href="Graded.Erasure.Extraction.Non-terminating.html#8462" class="Bound">p</a><a id="8463" class="Symbol">}</a> <a id="8465" class="Symbol">=</a>
    <a id="8471" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8478" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8483" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a> <a id="8485" class="Symbol">(</a><a id="8486" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a> <a id="8503" href="Graded.Erasure.Extraction.Non-terminating.html#8462" class="Bound">p</a><a id="8504" class="Symbol">)</a>                       <a id="8528" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="8531" href="Graded.Erasure.Extraction.Properties.html#4828" class="Function">lam-𝟘-remove</a> <a id="8544" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="8551" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8558" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8563" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a>
      <a id="8571" class="Symbol">(</a><a id="8572" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="8578" href="Graded.Erasure.Extraction.Non-terminating.html#8462" class="Bound">p</a> <a id="8580" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">∘⟨</a> <a id="8583" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8585" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="8587" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8589" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">⟩</a>
       <a id="8598" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="8603" class="Symbol">(</a><a id="8604" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="8608" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8610" class="Symbol">)</a> <a id="8612" class="Symbol">(</a><a id="8613" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="8615" class="Symbol">(</a><a id="8616" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8618" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="8620" href="Graded.Modality.html#949" class="Function">ω</a><a id="8621" class="Symbol">)</a> <a id="8623" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="8625" href="Graded.Erasure.Extraction.Non-terminating.html#8462" class="Bound">p</a> <a id="8627" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="8629" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="8631" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="8633" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a><a id="8634" class="Symbol">)</a> <a id="8636" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="8638" class="Symbol">(</a><a id="8639" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="8645" href="Graded.Erasure.Extraction.Non-terminating.html#8462" class="Bound">p</a><a id="8646" class="Symbol">))</a>
      <a id="8655" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="8659" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="8664" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a> <a id="8666" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                          <a id="8710" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="8713" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="8721" href="Graded.Erasure.Target.html#4865" class="Function Operator">T._[</a> <a id="8726" class="Symbol">_</a> <a id="8728" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a> <a id="8730" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="8796" href="Graded.Erasure.Extraction.Properties.html#4109" class="Function">∘-≢𝟘</a> <a id="8801" class="Symbol">(</a><a id="8802" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a> <a id="8806" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="8809" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="8815" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="8818" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1108" class="Function">+-positive</a><a id="8828" class="Symbol">)</a> <a id="8830" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="8836" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8843" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8848" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a> <a id="8850" class="Symbol">(</a><a id="8851" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="8857" href="Graded.Erasure.Extraction.Non-terminating.html#8462" class="Bound">p</a><a id="8858" class="Symbol">)</a> <a id="8860" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="8865" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a> <a id="8867" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
      <a id="8875" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8882" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8887" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a>
        <a id="8897" class="Symbol">(</a><a id="8898" href="Graded.Erasure.Extraction.Non-terminating.html#3594" class="Function">cast</a> <a id="8903" class="Symbol">(</a><a id="8904" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="8908" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8910" class="Symbol">)</a> <a id="8912" class="Symbol">(</a><a id="8913" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="8915" class="Symbol">(</a><a id="8916" href="Graded.Modality.html#949" class="Function">ω</a> <a id="8918" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="8920" href="Graded.Modality.html#949" class="Function">ω</a><a id="8921" class="Symbol">)</a> <a id="8923" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="8925" href="Graded.Erasure.Extraction.Non-terminating.html#8462" class="Bound">p</a> <a id="8927" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="8929" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="8931" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="8933" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a><a id="8934" class="Symbol">)</a> <a id="8936" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="8938" class="Symbol">(</a><a id="8939" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="8945" href="Graded.Erasure.Extraction.Non-terminating.html#8462" class="Bound">p</a><a id="8946" class="Symbol">))</a>
      <a id="8955" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="8959" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="8964" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a> <a id="8966" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                          <a id="9010" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="9013" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a>
                                                                  <a id="9087" class="Symbol">(λ</a> <a id="9090" href="Graded.Erasure.Extraction.Non-terminating.html#9090" class="Bound">t</a> <a id="9092" class="Symbol">→</a> <a id="9094" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9101" class="Symbol">_</a> <a id="9103" class="Symbol">_</a> <a id="9105" class="Symbol">(</a><a id="9106" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="9112" class="Symbol">_)</a> <a id="9115" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9120" class="Symbol">_</a> <a id="9122" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="9124" href="Graded.Erasure.Extraction.Non-terminating.html#9090" class="Bound">t</a> <a id="9126" href="Graded.Erasure.Target.html#4865" class="Function Operator">T.[</a> <a id="9130" class="Symbol">_</a> <a id="9132" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a><a id="9133" class="Symbol">)</a>
                                                                  <a id="9201" href="Graded.Erasure.Extraction.Non-terminating.html#3794" class="Function">erase-cast</a> <a id="9212" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="9218" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9225" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9230" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a> <a id="9232" class="Symbol">(</a><a id="9233" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="9239" href="Graded.Erasure.Extraction.Non-terminating.html#8462" class="Bound">p</a><a id="9240" class="Symbol">)</a> <a id="9242" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9247" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a> <a id="9249" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
      <a id="9257" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9264" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9269" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a> <a id="9271" class="Symbol">(</a><a id="9272" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="9278" href="Graded.Erasure.Extraction.Non-terminating.html#8462" class="Bound">p</a><a id="9279" class="Symbol">)</a>
      <a id="9287" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="9291" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="9296" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a> <a id="9298" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                          <a id="9342" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="9345" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="9353" class="Symbol">(λ</a> <a id="9356" href="Graded.Erasure.Extraction.Non-terminating.html#9356" class="Bound">t</a> <a id="9358" class="Symbol">→</a> <a id="9360" href="Graded.Erasure.Extraction.Non-terminating.html#9356" class="Bound">t</a> <a id="9362" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9367" class="Symbol">_</a> <a id="9369" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="9371" href="Graded.Erasure.Extraction.Non-terminating.html#9356" class="Bound">t</a> <a id="9373" href="Graded.Erasure.Target.html#4865" class="Function Operator">T.[</a> <a id="9377" class="Symbol">_</a> <a id="9379" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a><a id="9380" class="Symbol">)</a>
                                                                <a id="9446" href="Graded.Erasure.Extraction.Non-terminating.html#5623" class="Function">erase-λx∙xx</a> <a id="9458" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="9464" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="9469" href="Graded.Erasure.Extraction.Non-terminating.html#8458" class="Bound">s</a>                                                   <a id="9521" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="9527" class="Keyword">where</a>
    <a id="9537" class="Keyword">open</a> <a id="9542" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="9581" class="Keyword">opaque</a>
  <a id="9590" class="Keyword">unfolding</a> <a id="9600" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a>

  <a id="9620" class="Comment">-- A typing rule for extracts-to-loop.</a>

  <a id="⊢extracts-to-loop"></a><a id="9662" href="Graded.Erasure.Extraction.Non-terminating.html#9662" class="Function">⊢extracts-to-loop</a> <a id="9680" class="Symbol">:</a>
    <a id="9686" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="9696" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="9698" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="9700" class="Symbol">→</a>
    <a id="9706" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="9716" href="Graded.Modality.html#949" class="Function">ω</a> <a id="9718" href="Graded.Erasure.Extraction.Non-terminating.html#2660" class="Generalizable">q</a> <a id="9720" class="Symbol">→</a>
    <a id="9726" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="9736" class="Symbol">(</a><a id="9737" href="Graded.Modality.html#949" class="Function">ω</a> <a id="9739" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="9741" href="Graded.Modality.html#949" class="Function">ω</a><a id="9742" class="Symbol">)</a> <a id="9744" href="Graded.Erasure.Extraction.Non-terminating.html#2660" class="Generalizable">q</a> <a id="9746" class="Symbol">→</a>
    <a id="9752" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="9754" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a> <a id="9756" class="Symbol">→</a>
    <a id="9762" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a> <a id="9764" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="9766" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a> <a id="9783" href="Graded.Erasure.Extraction.Non-terminating.html#2660" class="Generalizable">q</a> <a id="9785" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="9787" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">Π</a> <a id="9789" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="9791" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">,</a> <a id="9793" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="9795" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▷</a> <a id="9797" href="Definition.Untyped.html#1271" class="InductiveConstructor">Empty</a> <a id="9803" href="Definition.Untyped.html#2440" class="InductiveConstructor Operator">▹</a> <a id="9805" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
  <a id="9809" href="Graded.Erasure.Extraction.Non-terminating.html#9662" class="Function">⊢extracts-to-loop</a> <a id="9827" href="Graded.Erasure.Extraction.Non-terminating.html#9827" class="Bound">𝟘-ok</a> <a id="9832" href="Graded.Erasure.Extraction.Non-terminating.html#9832" class="Bound">ω-ok</a> <a id="9837" href="Graded.Erasure.Extraction.Non-terminating.html#9837" class="Bound">ω+ω-ok</a> <a id="9844" href="Graded.Erasure.Extraction.Non-terminating.html#9844" class="Bound">⊢Γ</a> <a id="9847" class="Symbol">=</a>
    <a id="9853" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="9859" href="Graded.Erasure.Extraction.Non-terminating.html#9827" class="Bound">𝟘-ok</a> <a id="9864" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="9870" href="Graded.Erasure.Extraction.Non-terminating.html#6433" class="Function">⊢λx∙xx</a> <a id="9877" href="Graded.Erasure.Extraction.Non-terminating.html#9832" class="Bound">ω-ok</a> <a id="9882" href="Graded.Erasure.Extraction.Non-terminating.html#9837" class="Bound">ω+ω-ok</a> <a id="9889" href="Graded.Erasure.Extraction.Non-terminating.html#9844" class="Bound">⊢Γ</a> <a id="9892" href="Definition.Typed.html#2669" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="9899" href="Graded.Erasure.Extraction.Non-terminating.html#3929" class="Function">⊢cast</a> <a id="9905" class="Symbol">(</a><a id="9906" href="Definition.Typed.Properties.Admissible.Var.html#599" class="Function">var₀</a> <a id="9911" class="Symbol">(</a><a id="9912" href="Definition.Typed.html#1381" class="InductiveConstructor">Emptyⱼ</a> <a id="9919" href="Graded.Erasure.Extraction.Non-terminating.html#9844" class="Bound">⊢Γ</a><a id="9921" class="Symbol">))</a> <a id="9924" class="Symbol">(</a><a id="9925" href="Definition.Typed.html#2372" class="InductiveConstructor">ΠΣⱼ</a> <a id="9929" href="Graded.Erasure.Extraction.Non-terminating.html#2804" class="Function">Empty⊢ℕ∷U</a> <a id="9939" href="Graded.Erasure.Extraction.Non-terminating.html#2927" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="9951" href="Graded.Erasure.Extraction.Non-terminating.html#9837" class="Bound">ω+ω-ok</a><a id="9957" class="Symbol">)</a>
      <a id="9965" href="Graded.Erasure.Extraction.Non-terminating.html#2804" class="Function">Empty⊢ℕ∷U</a> <a id="9975" class="Symbol">(</a><a id="9976" href="Graded.Erasure.Extraction.Non-terminating.html#6433" class="Function">⊢λx∙xx</a> <a id="9983" href="Graded.Erasure.Extraction.Non-terminating.html#9832" class="Bound">ω-ok</a> <a id="9988" href="Graded.Erasure.Extraction.Non-terminating.html#9837" class="Bound">ω+ω-ok</a> <a id="9995" href="Graded.Erasure.Extraction.Non-terminating.html#9844" class="Bound">⊢Γ</a><a id="9997" class="Symbol">)</a>
    <a id="10003" class="Keyword">where</a>
    <a id="10013" class="Keyword">open</a> <a id="10018" href="Graded.Erasure.Extraction.Non-terminating.html#2770" class="Module">Lemmas</a> <a id="10025" href="Graded.Erasure.Extraction.Non-terminating.html#9844" class="Bound">⊢Γ</a>

<a id="10029" class="Keyword">opaque</a>
  <a id="10038" class="Keyword">unfolding</a> <a id="10048" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a>

  <a id="10068" class="Comment">-- A usage rule for extracts-to-loop.</a>

  <a id="▸extracts-to-loop"></a><a id="10109" href="Graded.Erasure.Extraction.Non-terminating.html#10109" class="Function">▸extracts-to-loop</a> <a id="10127" class="Symbol">:</a>
    <a id="10133" class="Symbol">⦃</a> <a id="10135" href="Graded.Erasure.Extraction.Non-terminating.html#10135" class="Bound">𝟘-well-behaved</a> <a id="10150" class="Symbol">:</a> <a id="10152" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="10174" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="10176" href="Graded.Modality.html#9715" class="Function">semiring-with-meet</a> <a id="10195" class="Symbol">⦄</a> <a id="10197" class="Symbol">→</a>
    <a id="10203" href="Graded.Usage.Restrictions.html#1782" class="Field">Emptyrec-allowed</a> <a id="10220" class="InductiveConstructor">𝟙ᵐ</a> <a id="10223" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="10225" class="Symbol">→</a>
    <a id="10231" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="10233" href="Graded.Modality.html#1384" class="Function Operator">≤</a> <a id="10235" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="10237" class="Symbol">→</a>
    <a id="10243" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10246" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="10249" class="InductiveConstructor">𝟙ᵐ</a> <a id="10252" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="10254" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a> <a id="10271" class="Symbol">{</a><a id="10272" class="Argument">n</a> <a id="10274" class="Symbol">=</a> <a id="10276" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a><a id="10277" class="Symbol">}</a> <a id="10279" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a>
  <a id="10283" href="Graded.Erasure.Extraction.Non-terminating.html#10109" class="Function">▸extracts-to-loop</a> <a id="10301" class="Symbol">{</a><a id="10302" href="Graded.Erasure.Extraction.Non-terminating.html#10302" class="Bound">p</a><a id="10303" class="Symbol">}</a> <a id="10305" class="Symbol">{</a><a id="10306" href="Graded.Erasure.Extraction.Non-terminating.html#10306" class="Bound">n</a><a id="10307" class="Symbol">}</a> <a id="10309" href="Graded.Erasure.Extraction.Non-terminating.html#10309" class="Bound">ok</a> <a id="10312" href="Graded.Erasure.Extraction.Non-terminating.html#10312" class="Bound">p≤𝟘</a> <a id="10316" class="Symbol">=</a> <a id="10318" href="Graded.Usage.html#9477" class="InductiveConstructor">lamₘ</a> <a id="10323" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10325" href="Graded.Usage.html#8631" class="InductiveConstructor">sub</a>
    <a id="10333" class="Symbol">(</a><a id="10334" href="Graded.Erasure.Extraction.Non-terminating.html#10973" class="Function">▸λx∙xx′</a> <a id="10342" href="Graded.Usage.html#9546" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="10350" href="Graded.Usage.html#8631" class="InductiveConstructor">sub</a>
       <a id="10361" class="Symbol">(</a><a id="10362" href="Graded.Usage.Properties.html#2559" class="Function">▸-cong</a> <a id="10369" class="Symbol">(</a><a id="10370" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="10377" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10379" href="Graded.Mode.html#19805" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="10388" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10390" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a> <a id="10394" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="10397" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="10403" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="10406" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1108" class="Function">+-positive</a><a id="10416" class="Symbol">)</a> <a id="10418" href="Function.Base.html#1974" class="Function Operator">$</a>
        <a id="10428" href="Graded.Erasure.Extraction.Non-terminating.html#4180" class="Function">▸cast</a> <a id="10434" href="Graded.Erasure.Extraction.Non-terminating.html#10309" class="Bound">ok</a> <a id="10437" href="Graded.Usage.html#8703" class="InductiveConstructor">var</a> <a id="10441" class="Symbol">(</a><a id="10442" href="Graded.Erasure.Extraction.Non-terminating.html#3153" class="Function">▸Πℕℕ</a> <a id="10447" href="Graded.Erasure.Extraction.Non-terminating.html#10312" class="Bound">p≤𝟘</a><a id="10450" class="Symbol">)</a> <a id="10452" href="Graded.Usage.html#10296" class="InductiveConstructor">ℕₘ</a> <a id="10455" href="Graded.Erasure.Extraction.Non-terminating.html#10973" class="Function">▸λx∙xx′</a><a id="10462" class="Symbol">)</a>
     <a id="10469" class="Symbol">(</a><a id="10470" class="Keyword">let</a> <a id="10474" class="Keyword">open</a> <a id="10479" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a> <a id="10492" class="Keyword">in</a> <a id="10495" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
        <a id="10509" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>                     <a id="10532" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10536" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="10545" class="Symbol">_</a> <a id="10547" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
        <a id="10557" href="Graded.Modality.html#949" class="Function">ω</a> <a id="10559" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="10562" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>                <a id="10580" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10584" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="10593" href="Function.Base.html#1974" class="Function Operator">$</a>
                                   <a id="10630" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="10639" class="Symbol">(</a><a id="10640" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="10653" class="Symbol">_)</a> <a id="10656" href="Function.Base.html#1974" class="Function Operator">$</a>
                                   <a id="10693" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="10706" class="Symbol">_</a> <a id="10708" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
        <a id="10718" href="Graded.Modality.html#949" class="Function">ω</a> <a id="10720" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="10723" class="Symbol">(</a><a id="10724" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10727" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="10730" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10733" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="10736" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a><a id="10738" class="Symbol">)</a>  <a id="10741" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="10742" class="Symbol">))</a>
    <a id="10749" class="Symbol">(</a><a id="10750" class="Keyword">let</a> <a id="10754" class="Keyword">open</a> <a id="10759" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a> <a id="10772" class="Keyword">in</a> <a id="10775" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="10788" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10791" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="10793" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="10795" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="10797" href="Graded.Modality.html#945" class="Function">𝟘</a>           <a id="10809" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="10812" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="10820" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="10822" href="Graded.Modality.html#4079" class="Function">·-zeroʳ</a> <a id="10830" class="Symbol">_</a> <a id="10832" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
       <a id="10841" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>                   <a id="10862" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10866" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="10875" class="Symbol">_</a> <a id="10877" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="10886" class="Symbol">(</a><a id="10887" href="Graded.Modality.html#949" class="Function">ω</a> <a id="10889" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="10891" href="Graded.Modality.html#949" class="Function">ω</a><a id="10892" class="Symbol">)</a> <a id="10894" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="10897" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>        <a id="10907" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10911" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="10924" class="Symbol">_</a> <a id="10926" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="10935" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10938" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="10941" class="Symbol">(</a><a id="10942" href="Graded.Modality.html#949" class="Function">ω</a> <a id="10944" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="10946" href="Graded.Modality.html#949" class="Function">ω</a><a id="10947" class="Symbol">)</a> <a id="10949" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="10952" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>  <a id="10956" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="10957" class="Symbol">)</a>
    <a id="10963" class="Keyword">where</a>
    <a id="10973" href="Graded.Erasure.Extraction.Non-terminating.html#10973" class="Function">▸λx∙xx′</a> <a id="10981" class="Symbol">:</a> <a id="10983" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="10986" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="10989" href="Graded.Mode.html#1094" class="InductiveConstructor">𝟙ᵐ</a> <a id="10992" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="10994" href="Graded.Erasure.Extraction.Non-terminating.html#5442" class="Function">λx∙xx</a> <a id="11000" class="Symbol">{</a><a id="11001" class="Argument">n</a> <a id="11003" class="Symbol">=</a> <a id="11005" href="Graded.Erasure.Extraction.Non-terminating.html#10306" class="Bound">n</a><a id="11006" class="Symbol">}</a> <a id="11008" href="Graded.Erasure.Extraction.Non-terminating.html#10302" class="Bound">p</a>
    <a id="11014" href="Graded.Erasure.Extraction.Non-terminating.html#10973" class="Function">▸λx∙xx′</a> <a id="11022" class="Symbol">=</a> <a id="11024" href="Graded.Erasure.Extraction.Non-terminating.html#6794" class="Function">▸λx∙xx</a> <a id="11031" href="Graded.Erasure.Extraction.Non-terminating.html#10309" class="Bound">ok</a> <a id="11034" href="Graded.Erasure.Extraction.Non-terminating.html#10312" class="Bound">p≤𝟘</a>

<a id="11039" class="Comment">------------------------------------------------------------------------</a>
<a id="11112" class="Comment">-- The term former loops</a>

<a id="11138" class="Keyword">opaque</a>

  <a id="11148" class="Comment">-- A term for which the extracted term does not terminate if</a>
  <a id="11211" class="Comment">-- erasable arguments are removed entirely and strict applications</a>
  <a id="11280" class="Comment">-- are used (if the modality&#39;s zero is well-behaved).</a>

  <a id="loops"></a><a id="11337" href="Graded.Erasure.Extraction.Non-terminating.html#11337" class="Function">loops</a> <a id="11343" class="Symbol">:</a> <a id="11345" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="11347" class="Symbol">→</a> <a id="11349" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="11354" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a>
  <a id="11358" href="Graded.Erasure.Extraction.Non-terminating.html#11337" class="Function">loops</a> <a id="11364" href="Graded.Erasure.Extraction.Non-terminating.html#11364" class="Bound">p</a> <a id="11366" class="Symbol">=</a> <a id="11368" href="Definition.Untyped.html#1613" class="InductiveConstructor">lam</a> <a id="11372" href="Graded.Modality.html#949" class="Function">ω</a> <a id="11374" href="Definition.Untyped.html#1945" class="InductiveConstructor">zero</a> <a id="11379" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">∘⟨</a> <a id="11382" href="Graded.Modality.html#949" class="Function">ω</a> <a id="11384" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">⟩</a> <a id="11386" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a> <a id="11403" href="Graded.Erasure.Extraction.Non-terminating.html#11364" class="Bound">p</a>

<a id="11406" class="Keyword">opaque</a>
  <a id="11415" class="Keyword">unfolding</a> <a id="11425" href="Graded.Erasure.Extraction.Non-terminating.html#11337" class="Function">loops</a>

  <a id="11434" class="Comment">-- An extraction lemma for loops.</a>

  <a id="erase-loops"></a><a id="11471" href="Graded.Erasure.Extraction.Non-terminating.html#11471" class="Function">erase-loops</a> <a id="11483" class="Symbol">:</a>
    <a id="11489" class="Symbol">⦃</a> <a id="11491" href="Graded.Erasure.Extraction.Non-terminating.html#11491" class="Bound">𝟘-well-behaved</a> <a id="11506" class="Symbol">:</a> <a id="11508" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="11530" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="11532" href="Graded.Modality.html#9715" class="Function">semiring-with-meet</a> <a id="11551" class="Symbol">⦄</a> <a id="11553" class="Symbol">→</a>
    <a id="11559" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11566" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11571" href="Graded.Erasure.Extraction.Non-terminating.html#2701" class="Generalizable">s</a> <a id="11573" class="Symbol">(</a><a id="11574" href="Graded.Erasure.Extraction.Non-terminating.html#11337" class="Function">loops</a> <a id="11580" class="Symbol">{</a><a id="11581" class="Argument">n</a> <a id="11583" class="Symbol">=</a> <a id="11585" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a><a id="11586" class="Symbol">}</a> <a id="11588" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a><a id="11589" class="Symbol">)</a> <a id="11591" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="11597" class="InductiveConstructor">T.lam</a> <a id="11603" class="InductiveConstructor">T.zero</a> <a id="11610" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11615" href="Graded.Erasure.Extraction.Non-terminating.html#2701" class="Generalizable">s</a> <a id="11617" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="11619" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="11624" href="Graded.Erasure.Extraction.Non-terminating.html#2701" class="Generalizable">s</a>
  <a id="11628" href="Graded.Erasure.Extraction.Non-terminating.html#11471" class="Function">erase-loops</a> <a id="11640" class="Symbol">{</a><a id="11641" href="Graded.Erasure.Extraction.Non-terminating.html#11641" class="Bound">s</a><a id="11642" class="Symbol">}</a> <a id="11644" class="Symbol">{</a><a id="11645" href="Graded.Erasure.Extraction.Non-terminating.html#11645" class="Bound">p</a><a id="11646" class="Symbol">}</a> <a id="11648" class="Symbol">=</a>
    <a id="11654" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11661" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11666" href="Graded.Erasure.Extraction.Non-terminating.html#11641" class="Bound">s</a> <a id="11668" class="Symbol">(</a><a id="11669" href="Definition.Untyped.html#1613" class="InductiveConstructor">lam</a> <a id="11673" href="Graded.Modality.html#949" class="Function">ω</a> <a id="11675" href="Definition.Untyped.html#1945" class="InductiveConstructor">zero</a> <a id="11680" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">∘⟨</a> <a id="11683" href="Graded.Modality.html#949" class="Function">ω</a> <a id="11685" href="Definition.Untyped.html#1656" class="InductiveConstructor Operator">⟩</a> <a id="11687" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a> <a id="11704" href="Graded.Erasure.Extraction.Non-terminating.html#11645" class="Bound">p</a><a id="11705" class="Symbol">)</a>  <a id="11708" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="11711" href="Graded.Erasure.Extraction.Properties.html#4109" class="Function">∘-≢𝟘</a> <a id="11716" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a> <a id="11720" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="11727" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11734" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11739" href="Graded.Erasure.Extraction.Non-terminating.html#11641" class="Bound">s</a> <a id="11741" class="Symbol">(</a><a id="11742" href="Definition.Untyped.html#1613" class="InductiveConstructor">lam</a> <a id="11746" href="Graded.Modality.html#949" class="Function">ω</a> <a id="11748" href="Definition.Untyped.html#1945" class="InductiveConstructor">zero</a><a id="11752" class="Symbol">)</a> <a id="11754" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11759" href="Graded.Erasure.Extraction.Non-terminating.html#11641" class="Bound">s</a> <a id="11761" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
    <a id="11767" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11774" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11779" href="Graded.Erasure.Extraction.Non-terminating.html#11641" class="Bound">s</a> <a id="11781" class="Symbol">(</a><a id="11782" href="Graded.Erasure.Extraction.Non-terminating.html#8050" class="Function">extracts-to-loop</a> <a id="11799" href="Graded.Erasure.Extraction.Non-terminating.html#11645" class="Bound">p</a><a id="11800" class="Symbol">)</a>                    <a id="11821" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="11824" href="Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">PE.cong₂</a> <a id="11833" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T._∘⟨</a> <a id="11839" class="Symbol">_</a> <a id="11841" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩_</a> <a id="11844" class="Symbol">(</a><a id="11845" href="Graded.Erasure.Extraction.Properties.html#4431" class="Function">lam-≢𝟘</a> <a id="11852" class="Symbol">_</a> <a id="11854" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a><a id="11857" class="Symbol">)</a>
                                                             <a id="11920" href="Graded.Erasure.Extraction.Non-terminating.html#8281" class="Function">erase-extracts-to-loop</a> <a id="11943" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="11949" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="11955" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="11962" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11967" href="Graded.Erasure.Extraction.Non-terminating.html#11641" class="Bound">s</a> <a id="11969" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="11971" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="11976" href="Graded.Erasure.Extraction.Non-terminating.html#11641" class="Bound">s</a>                          <a id="12003" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="12009" class="Keyword">where</a>
    <a id="12019" class="Keyword">open</a> <a id="12024" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="12063" class="Keyword">opaque</a>

  <a id="12073" class="Comment">-- If erasable arguments are removed entirely and strict</a>
  <a id="12132" class="Comment">-- applications are used, then the extraction of loops p does not</a>
  <a id="12200" class="Comment">-- reduce to a value (if the modality&#39;s zero is well-behaved).</a>

  <a id="loops-does-not-reduce-to-a-value"></a><a id="12266" href="Graded.Erasure.Extraction.Non-terminating.html#12266" class="Function">loops-does-not-reduce-to-a-value</a> <a id="12299" class="Symbol">:</a>
    <a id="12305" class="Symbol">⦃</a> <a id="12307" href="Graded.Erasure.Extraction.Non-terminating.html#12307" class="Bound">𝟘-well-behaved</a> <a id="12322" class="Symbol">:</a> <a id="12324" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="12346" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="12348" href="Graded.Modality.html#9715" class="Function">semiring-with-meet</a> <a id="12367" class="Symbol">⦄</a> <a id="12369" class="Symbol">→</a>
    <a id="12375" href="Graded.Erasure.Target.html#6123" class="Datatype">T.Value</a> <a id="12383" href="Graded.Erasure.Extraction.Non-terminating.html#2676" class="Generalizable">v</a> <a id="12385" class="Symbol">→</a>
    <a id="12391" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="12393" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="12400" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="12405" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12412" class="Symbol">(</a><a id="12413" href="Graded.Erasure.Extraction.Non-terminating.html#11337" class="Function">loops</a> <a id="12419" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a><a id="12420" class="Symbol">)</a> <a id="12422" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12427" href="Graded.Erasure.Extraction.Non-terminating.html#2676" class="Generalizable">v</a>
  <a id="12431" href="Graded.Erasure.Extraction.Non-terminating.html#12266" class="Function">loops-does-not-reduce-to-a-value</a> <a id="12464" class="Symbol">{</a><a id="12465" href="Graded.Erasure.Extraction.Non-terminating.html#12465" class="Bound">v</a><a id="12466" class="Symbol">}</a> <a id="12468" class="Symbol">{</a><a id="12469" href="Graded.Erasure.Extraction.Non-terminating.html#12469" class="Bound">p</a><a id="12470" class="Symbol">}</a> <a id="12472" href="Graded.Erasure.Extraction.Non-terminating.html#12472" class="Bound">v-value</a> <a id="12480" class="Symbol">=</a>
    <a id="12486" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="12493" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="12498" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12505" class="Symbol">(</a><a id="12506" href="Graded.Erasure.Extraction.Non-terminating.html#11337" class="Function">loops</a> <a id="12512" href="Graded.Erasure.Extraction.Non-terminating.html#12469" class="Bound">p</a><a id="12513" class="Symbol">)</a> <a id="12515" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12520" href="Graded.Erasure.Extraction.Non-terminating.html#12465" class="Bound">v</a>            <a id="12533" href="Tools.Function.html#1025" class="Function">≡⟨</a> <a id="12536" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="12544" class="Symbol">(</a><a id="12545" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T._⇒*</a> <a id="12551" class="Symbol">_)</a> <a id="12554" href="Graded.Erasure.Extraction.Non-terminating.html#11471" class="Function">erase-loops</a> <a id="12566" href="Tools.Function.html#1025" class="Function">⟩→</a>
    <a id="12573" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="12579" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="12586" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="12591" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12598" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="12600" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12605" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12612" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12617" href="Graded.Erasure.Extraction.Non-terminating.html#12465" class="Bound">v</a>  <a id="12620" href="Tools.Function.html#911" class="Function">→⟨</a> <a id="12623" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12630" href="Tools.Function.html#911" class="Function">⟩</a>
    <a id="12636" href="Data.Empty.html#914" class="Function">⊥</a>                                              <a id="12683" href="Tools.Function.html#1139" class="Function Operator">□</a>
    <a id="12689" class="Keyword">where</a>
    <a id="12699" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12706" class="Symbol">:</a> <a id="12708" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="12710" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="12716" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="12723" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="12728" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12735" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="12737" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12742" href="Graded.Erasure.Extraction.Non-terminating.html#2701" class="Generalizable">s</a> <a id="12744" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12749" href="Graded.Erasure.Extraction.Non-terminating.html#12465" class="Bound">v</a>
    <a id="12755" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12762" href="Graded.Erasure.Target.html#7893" class="InductiveConstructor">T.refl</a> <a id="12769" class="Symbol">=</a>
      <a id="12777" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="12782" href="Graded.Erasure.Extraction.Non-terminating.html#12472" class="Bound">v-value</a> <a id="12790" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="12793" class="Symbol">λ</a> <a id="12795" class="Symbol">()</a>
    <a id="12802" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12809" class="Symbol">(</a><a id="12810" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12818" class="Symbol">(</a><a id="12819" href="Graded.Erasure.Target.html#7049" class="InductiveConstructor">T.app-subst</a> <a id="12831" class="Symbol">())</a>     <a id="12839" class="Symbol">_)</a>
    <a id="12846" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12853" class="Symbol">(</a><a id="12854" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12862" class="Symbol">(</a><a id="12863" href="Graded.Erasure.Target.html#7197" class="InductiveConstructor">T.β-red</a> <a id="12871" href="Graded.Erasure.Extraction.Non-terminating.html#12871" class="Bound">loop-value</a><a id="12881" class="Symbol">)</a> <a id="12883" class="Symbol">_)</a> <a id="12886" class="Symbol">=</a>
      <a id="12894" href="Graded.Erasure.Target.Non-terminating.html#1375" class="Function">¬loop⇒*</a> <a id="12902" href="Graded.Erasure.Extraction.Non-terminating.html#12871" class="Bound">loop-value</a> <a id="12913" href="Graded.Erasure.Target.html#7893" class="InductiveConstructor">T.refl</a>
    <a id="12924" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12931" class="Symbol">(</a><a id="12932" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12940" class="Symbol">(</a><a id="12941" href="Graded.Erasure.Target.html#7103" class="InductiveConstructor">T.app-subst-arg</a> <a id="12957" class="Symbol">_</a> <a id="12959" href="Graded.Erasure.Extraction.Non-terminating.html#12959" class="Bound">loop⇒</a><a id="12964" class="Symbol">)</a> <a id="12966" href="Graded.Erasure.Extraction.Non-terminating.html#12966" class="Bound">⇒*v</a><a id="12969" class="Symbol">)</a>
      <a id="12977" class="Keyword">rewrite</a> <a id="12985" href="Graded.Erasure.Target.Properties.Reduction.html#2120" class="Function">redDet</a> <a id="12992" class="Symbol">_</a> <a id="12994" href="Graded.Erasure.Extraction.Non-terminating.html#12959" class="Bound">loop⇒</a> <a id="13000" href="Graded.Erasure.Target.Non-terminating.html#941" class="Function">loop⇒loop</a> <a id="13010" class="Symbol">=</a>
      <a id="13018" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="13025" href="Graded.Erasure.Extraction.Non-terminating.html#12966" class="Bound">⇒*v</a>

<a id="13030" class="Keyword">opaque</a>
  <a id="13039" class="Keyword">unfolding</a> <a id="13049" href="Graded.Erasure.Extraction.Non-terminating.html#11337" class="Function">loops</a>

  <a id="13058" class="Comment">-- A typing rule for loops.</a>

  <a id="⊢loops"></a><a id="13089" href="Graded.Erasure.Extraction.Non-terminating.html#13089" class="Function">⊢loops</a> <a id="13096" class="Symbol">:</a>
    <a id="13102" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="13112" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="13114" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="13116" class="Symbol">→</a>
    <a id="13122" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="13132" href="Graded.Modality.html#949" class="Function">ω</a> <a id="13134" href="Graded.Erasure.Extraction.Non-terminating.html#2660" class="Generalizable">q</a> <a id="13136" class="Symbol">→</a>
    <a id="13142" href="Definition.Typed.Restrictions.html#1560" class="Function">Π-allowed</a> <a id="13152" class="Symbol">(</a><a id="13153" href="Graded.Modality.html#949" class="Function">ω</a> <a id="13155" href="Graded.Modality.html#921" class="Function Operator">+</a> <a id="13157" href="Graded.Modality.html#949" class="Function">ω</a><a id="13158" class="Symbol">)</a> <a id="13160" href="Graded.Erasure.Extraction.Non-terminating.html#2660" class="Generalizable">q</a> <a id="13162" class="Symbol">→</a>
    <a id="13168" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="13170" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a> <a id="13172" class="Symbol">→</a>
    <a id="13178" href="Graded.Erasure.Extraction.Non-terminating.html#2585" class="Generalizable">Γ</a> <a id="13180" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="13182" href="Graded.Erasure.Extraction.Non-terminating.html#11337" class="Function">loops</a> <a id="13188" href="Graded.Erasure.Extraction.Non-terminating.html#2660" class="Generalizable">q</a> <a id="13190" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="13192" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a>
  <a id="13196" href="Graded.Erasure.Extraction.Non-terminating.html#13089" class="Function">⊢loops</a> <a id="13203" href="Graded.Erasure.Extraction.Non-terminating.html#13203" class="Bound">𝟘-ok</a> <a id="13208" href="Graded.Erasure.Extraction.Non-terminating.html#13208" class="Bound">ω-ok</a> <a id="13213" href="Graded.Erasure.Extraction.Non-terminating.html#13213" class="Bound">ω+ω-ok</a> <a id="13220" href="Graded.Erasure.Extraction.Non-terminating.html#13220" class="Bound">⊢Γ</a> <a id="13223" class="Symbol">=</a>
    <a id="13229" href="Definition.Typed.Properties.Admissible.Pi.html#1165" class="Function">lamⱼ′</a> <a id="13235" href="Graded.Erasure.Extraction.Non-terminating.html#13208" class="Bound">ω-ok</a> <a id="13240" class="Symbol">(</a><a id="13241" href="Definition.Typed.html#3432" class="InductiveConstructor">zeroⱼ</a> <a id="13247" class="Symbol">(</a><a id="13248" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="13250" href="Definition.Typed.html#1459" class="InductiveConstructor">ΠΣⱼ</a> <a id="13254" href="Graded.Erasure.Extraction.Non-terminating.html#2873" class="Function">Empty⊢ℕ</a> <a id="13262" href="Graded.Erasure.Extraction.Non-terminating.html#13203" class="Bound">𝟘-ok</a><a id="13266" class="Symbol">))</a> <a id="13269" href="Definition.Typed.html#2669" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="13276" href="Graded.Erasure.Extraction.Non-terminating.html#9662" class="Function">⊢extracts-to-loop</a> <a id="13294" href="Graded.Erasure.Extraction.Non-terminating.html#13203" class="Bound">𝟘-ok</a> <a id="13299" href="Graded.Erasure.Extraction.Non-terminating.html#13208" class="Bound">ω-ok</a> <a id="13304" href="Graded.Erasure.Extraction.Non-terminating.html#13213" class="Bound">ω+ω-ok</a> <a id="13311" href="Graded.Erasure.Extraction.Non-terminating.html#13220" class="Bound">⊢Γ</a>
    <a id="13318" class="Keyword">where</a>
    <a id="13328" class="Keyword">open</a> <a id="13333" href="Graded.Erasure.Extraction.Non-terminating.html#2770" class="Module">Lemmas</a> <a id="13340" href="Graded.Erasure.Extraction.Non-terminating.html#13220" class="Bound">⊢Γ</a>

<a id="13344" class="Keyword">opaque</a>
  <a id="13353" class="Keyword">unfolding</a> <a id="13363" href="Graded.Erasure.Extraction.Non-terminating.html#11337" class="Function">loops</a>

  <a id="13372" class="Comment">-- A usage rule for loops.</a>

  <a id="▸loops"></a><a id="13402" href="Graded.Erasure.Extraction.Non-terminating.html#13402" class="Function">▸loops</a> <a id="13409" class="Symbol">:</a>
    <a id="13415" class="Symbol">⦃</a> <a id="13417" href="Graded.Erasure.Extraction.Non-terminating.html#13417" class="Bound">𝟘-well-behaved</a> <a id="13432" class="Symbol">:</a> <a id="13434" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="13456" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="13458" href="Graded.Modality.html#9715" class="Function">semiring-with-meet</a> <a id="13477" class="Symbol">⦄</a> <a id="13479" class="Symbol">→</a>
    <a id="13485" href="Graded.Usage.Restrictions.html#1782" class="Field">Emptyrec-allowed</a> <a id="13502" class="InductiveConstructor">𝟙ᵐ</a> <a id="13505" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="13507" class="Symbol">→</a>
    <a id="13513" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a> <a id="13515" href="Graded.Modality.html#1384" class="Function Operator">≤</a> <a id="13517" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="13519" class="Symbol">→</a>
    <a id="13525" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="13528" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="13531" class="InductiveConstructor">𝟙ᵐ</a> <a id="13534" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="13536" href="Graded.Erasure.Extraction.Non-terminating.html#11337" class="Function">loops</a> <a id="13542" class="Symbol">{</a><a id="13543" class="Argument">n</a> <a id="13545" class="Symbol">=</a> <a id="13547" href="Graded.Erasure.Extraction.Non-terminating.html#2565" class="Generalizable">n</a><a id="13548" class="Symbol">}</a> <a id="13550" href="Graded.Erasure.Extraction.Non-terminating.html#2658" class="Generalizable">p</a>
  <a id="13554" href="Graded.Erasure.Extraction.Non-terminating.html#13402" class="Function">▸loops</a> <a id="13561" href="Graded.Erasure.Extraction.Non-terminating.html#13561" class="Bound">ok</a> <a id="13564" href="Graded.Erasure.Extraction.Non-terminating.html#13564" class="Bound">p≤𝟘</a> <a id="13568" class="Symbol">=</a> <a id="13570" href="Graded.Usage.html#8631" class="InductiveConstructor">sub</a>
    <a id="13578" class="Symbol">(</a><a id="13579" href="Graded.Usage.html#9477" class="InductiveConstructor">lamₘ</a>
       <a id="13591" class="Symbol">(</a><a id="13592" href="Graded.Usage.html#8631" class="InductiveConstructor">sub</a> <a id="13596" href="Graded.Usage.html#10323" class="InductiveConstructor">zeroₘ</a> <a id="13602" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="13604" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
          <a id="13620" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="13623" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="13625" href="Graded.Modality.html#947" class="Function">𝟙</a> <a id="13627" href="Graded.Modality.html#925" class="Function Operator">·</a> <a id="13629" href="Graded.Modality.html#949" class="Function">ω</a>  <a id="13632" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="13635" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="13643" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="13645" href="Graded.Modality.html#3820" class="Function">·-identityˡ</a> <a id="13657" class="Symbol">_</a> <a id="13659" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
          <a id="13671" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="13674" href="Graded.Context.html#771" class="InductiveConstructor Operator">∙</a> <a id="13676" href="Graded.Modality.html#949" class="Function">ω</a>      <a id="13683" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="13686" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="13694" href="Graded.Context.html#922" class="InductiveConstructor Operator">∙</a> <a id="13696" href="Graded.Modality.Properties.Addition.html#3754" class="Function">ω≤𝟘</a> <a id="13700" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
          <a id="13712" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>          <a id="13724" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="13725" class="Symbol">)</a> <a id="13727" href="Graded.Usage.html#9546" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="13735" href="Graded.Usage.Properties.html#2559" class="Function">▸-cong</a> <a id="13742" class="Symbol">(</a><a id="13743" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="13750" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="13752" href="Graded.Mode.html#19805" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="13761" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2305" class="Function">ω≢𝟘</a><a id="13764" class="Symbol">)</a>
       <a id="13773" class="Symbol">(</a><a id="13774" href="Graded.Erasure.Extraction.Non-terminating.html#10109" class="Function">▸extracts-to-loop</a> <a id="13792" href="Graded.Erasure.Extraction.Non-terminating.html#13561" class="Bound">ok</a> <a id="13795" href="Graded.Erasure.Extraction.Non-terminating.html#13564" class="Bound">p≤𝟘</a><a id="13798" class="Symbol">))</a>
    <a id="13805" class="Symbol">(</a><a id="13806" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="13819" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>             <a id="13834" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="13838" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="13847" class="Symbol">(</a><a id="13848" href="Graded.Context.Properties.Addition.html#715" class="Function">+ᶜ-identityˡ</a> <a id="13861" class="Symbol">_)</a> <a id="13864" class="Symbol">(</a><a id="13865" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="13874" class="Symbol">_)</a> <a id="13877" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="13886" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="13889" href="Graded.Context.html#1574" class="Function Operator">+ᶜ</a> <a id="13892" href="Graded.Modality.html#949" class="Function">ω</a> <a id="13894" href="Graded.Context.html#1806" class="Function Operator">·ᶜ</a> <a id="13897" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a>  <a id="13901" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="13902" class="Symbol">)</a>
    <a id="13908" class="Keyword">where</a>
    <a id="13918" class="Keyword">open</a> <a id="13923" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>
</pre></body></html>