<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Definition.Modality.Instances.Affine</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- A modality for affine types.</a>
<a id="106" class="Comment">------------------------------------------------------------------------</a>

<a id="180" class="Keyword">open</a> <a id="185" class="Keyword">import</a> <a id="192" href="Tools.Bool.html" class="Module">Tools.Bool</a>

<a id="204" class="Keyword">open</a> <a id="209" class="Keyword">import</a> <a id="216" href="Definition.Modality.Instances.Zero-one-many.html" class="Module">Definition.Modality.Instances.Zero-one-many</a> <a id="260" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> as <a id="𝟘𝟙ω"></a><a id="268" href="Definition.Modality.Instances.Affine.html#268" class="Module">𝟘𝟙ω</a>

<a id="273" class="Keyword">open</a> <a id="278" class="Keyword">import</a> <a id="285" href="Definition.Modality.Restrictions.html" class="Module">Definition.Modality.Restrictions</a> <a id="318" href="Definition.Modality.Instances.Zero-one-many.html#1304" class="Datatype">Zero-one-many</a>

<a id="333" class="Keyword">module</a> <a id="340" href="Definition.Modality.Instances.Affine.html" class="Module">Definition.Modality.Instances.Affine</a>
  <a id="379" class="Symbol">(</a><a id="380" href="Definition.Modality.Instances.Affine.html#380" class="Bound">restrictions</a> <a id="393" class="Symbol">:</a> <a id="395" href="Definition.Modality.Restrictions.html#723" class="Record">Restrictions</a><a id="407" class="Symbol">)</a>
  <a id="411" class="Keyword">where</a>

<a id="418" class="Keyword">open</a> <a id="423" href="Definition.Modality.Restrictions.html#723" class="Module">Restrictions</a> <a id="436" href="Definition.Modality.Instances.Affine.html#380" class="Bound">restrictions</a>

<a id="450" class="Keyword">open</a> <a id="455" href="Definition.Modality.Instances.Affine.html#268" class="Module">𝟘𝟙ω</a> <a id="459" class="Keyword">renaming</a> <a id="468" class="Symbol">(</a><a id="469" href="Definition.Modality.Instances.Zero-one-many.html#1304" class="Datatype">Zero-one-many</a> <a id="483" class="Symbol">to</a> <a id="486" class="Datatype">Affine</a><a id="492" class="Symbol">)</a> <a id="494" class="Keyword">public</a>

<a id="502" class="Keyword">open</a> <a id="507" class="Keyword">import</a> <a id="514" href="Definition.Modality.html" class="Module">Definition.Modality</a> <a id="534" href="Definition.Modality.Instances.Affine.html#486" class="Datatype">Affine</a>
<a id="541" class="Keyword">open</a> <a id="546" class="Keyword">import</a> <a id="553" href="Definition.Modality.FullReduction.Assumptions.html" class="Module">Definition.Modality.FullReduction.Assumptions</a>
<a id="599" class="Keyword">import</a> <a id="606" href="Definition.Modality.Properties.html" class="Module">Definition.Modality.Properties</a>

<a id="638" class="Keyword">import</a> <a id="645" href="Definition.Mode.html" class="Module">Definition.Mode</a>

<a id="662" class="Keyword">open</a> <a id="667" class="Keyword">import</a> <a id="674" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a> <a id="704" href="Definition.Modality.Instances.Affine.html#486" class="Datatype">Affine</a>

<a id="712" class="Keyword">open</a> <a id="717" class="Keyword">import</a> <a id="724" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="736" class="Keyword">open</a> <a id="741" class="Keyword">import</a> <a id="748" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="763" class="Keyword">open</a> <a id="768" class="Keyword">import</a> <a id="775" href="Tools.Nullary.html" class="Module">Tools.Nullary</a>
<a id="789" class="Keyword">open</a> <a id="794" class="Keyword">import</a> <a id="801" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="829" class="Keyword">import</a> <a id="836" href="Tools.Reasoning.PartialOrder.html" class="Module">Tools.Reasoning.PartialOrder</a>
<a id="865" class="Keyword">open</a> <a id="870" class="Keyword">import</a> <a id="877" href="Tools.Unit.html" class="Module">Tools.Unit</a>

<a id="889" class="Keyword">private</a> <a id="897" class="Keyword">variable</a>
  <a id="908" href="Definition.Modality.Instances.Affine.html#908" class="Generalizable">p</a> <a id="910" class="Symbol">:</a> <a id="912" href="Definition.Modality.Instances.Affine.html#486" class="Datatype">Affine</a>

<a id="920" class="Comment">-- An &quot;affine types&quot; modality.</a>

<a id="affineModality"></a><a id="952" href="Definition.Modality.Instances.Affine.html#952" class="Function">affineModality</a> <a id="967" class="Symbol">:</a> <a id="969" href="Definition.Modality.html#5116" class="Record">Modality</a>
<a id="978" href="Definition.Modality.Instances.Affine.html#952" class="Function">affineModality</a> <a id="993" class="Symbol">=</a> <a id="995" href="Definition.Modality.Instances.Zero-one-many.html#30295" class="Function">zero-one-many-greatest</a> <a id="1018" href="Definition.Modality.Instances.Affine.html#380" class="Bound">restrictions</a>

<a id="1032" class="Comment">-- 𝟘 is the largest element.</a>

<a id="≤𝟘"></a><a id="1062" href="Definition.Modality.Instances.Affine.html#1062" class="Function">≤𝟘</a> <a id="1065" class="Symbol">:</a> <a id="1067" href="Definition.Modality.Instances.Affine.html#908" class="Generalizable">p</a> <a id="1069" href="Definition.Modality.Instances.Zero-one-many.html#5614" class="Function Operator">≤</a> <a id="1071" href="Definition.Modality.Instances.Zero-one-many.html#1332" class="InductiveConstructor">𝟘</a>
<a id="1073" href="Definition.Modality.Instances.Affine.html#1062" class="Function">≤𝟘</a> <a id="1076" class="Symbol">{</a><a id="1077" class="Argument">p</a> <a id="1079" class="Symbol">=</a> <a id="1081" href="Definition.Modality.Instances.Zero-one-many.html#1332" class="InductiveConstructor">𝟘</a><a id="1082" class="Symbol">}</a> <a id="1084" class="Symbol">=</a> <a id="1086" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="1091" href="Definition.Modality.Instances.Affine.html#1062" class="Function">≤𝟘</a> <a id="1094" class="Symbol">{</a><a id="1095" class="Argument">p</a> <a id="1097" class="Symbol">=</a> <a id="1099" href="Definition.Modality.Instances.Zero-one-many.html#1334" class="InductiveConstructor">𝟙</a><a id="1100" class="Symbol">}</a> <a id="1102" class="Symbol">=</a> <a id="1104" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="1109" href="Definition.Modality.Instances.Affine.html#1062" class="Function">≤𝟘</a> <a id="1112" class="Symbol">{</a><a id="1113" class="Argument">p</a> <a id="1115" class="Symbol">=</a> <a id="1117" href="Definition.Modality.Instances.Zero-one-many.html#1336" class="InductiveConstructor">ω</a><a id="1118" class="Symbol">}</a> <a id="1120" class="Symbol">=</a> <a id="1122" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="1128" class="Comment">-- Type restrictions that disallow the following types:</a>
<a id="1184" class="Comment">-- * Σ-types with η-equality for which the first component&#39;s quantity</a>
<a id="1254" class="Comment">--   is ω.</a>
<a id="1265" class="Comment">-- * If 𝟘ᵐ is not allowed: Σ-types with η-equality for which the first</a>
<a id="1336" class="Comment">--   component&#39;s quantity is 𝟘.</a>

<a id="affine-restrictions"></a><a id="1369" href="Definition.Modality.Instances.Affine.html#1369" class="Function">affine-restrictions</a> <a id="1389" class="Symbol">:</a> <a id="1391" href="Definition.Typed.Restrictions.html#379" class="Record">Type-restrictions</a>
<a id="1409" href="Definition.Modality.Instances.Affine.html#1369" class="Function">affine-restrictions</a> <a id="1429" class="Symbol">=</a> <a id="1431" class="Keyword">record</a>
  <a id="1440" class="Symbol">{</a> <a id="1442" href="Definition.Typed.Restrictions.html#511" class="Field">Unit-restriction</a> <a id="1459" class="Symbol">=</a> <a id="1461" href="Agda.Builtin.Unit.html#158" class="Record">⊤</a>
  <a id="1465" class="Symbol">;</a> <a id="1467" href="Definition.Typed.Restrictions.html#670" class="Field">Σₚ-restriction</a>   <a id="1484" class="Symbol">=</a> <a id="1486" class="Symbol">λ</a> <a id="1488" class="Keyword">where</a>
      <a id="1500" href="Definition.Modality.Instances.Zero-one-many.html#1336" class="InductiveConstructor">ω</a> <a id="1502" class="Symbol">→</a> <a id="1504" href="Data.Empty.html#526" class="Datatype">⊥</a>
      <a id="1512" href="Definition.Modality.Instances.Zero-one-many.html#1334" class="InductiveConstructor">𝟙</a> <a id="1514" class="Symbol">→</a> <a id="1516" href="Agda.Builtin.Unit.html#158" class="Record">⊤</a>
      <a id="1524" href="Definition.Modality.Instances.Zero-one-many.html#1332" class="InductiveConstructor">𝟘</a> <a id="1526" class="Symbol">→</a> <a id="1528" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="1530" href="Definition.Modality.Restrictions.html#874" class="Field">𝟘ᵐ-allowed</a>
  <a id="1543" class="Symbol">}</a>

<a id="1546" class="Comment">-- The full reduction assumptions hold for affineModality and</a>
<a id="1608" class="Comment">-- affine-restrictions.</a>

<a id="full-reduction-assumptions"></a><a id="1633" href="Definition.Modality.Instances.Affine.html#1633" class="Function">full-reduction-assumptions</a> <a id="1660" class="Symbol">:</a>
  <a id="1664" href="Definition.Modality.FullReduction.Assumptions.html#705" class="Record">Full-reduction-assumptions</a> <a id="1691" href="Definition.Modality.Instances.Affine.html#952" class="Function">affineModality</a> <a id="1706" href="Definition.Modality.Instances.Affine.html#1369" class="Function">affine-restrictions</a>
<a id="1726" href="Definition.Modality.Instances.Affine.html#1633" class="Function">full-reduction-assumptions</a> <a id="1753" class="Symbol">=</a> <a id="1755" class="Keyword">record</a>
  <a id="1764" class="Symbol">{</a> <a id="1766" href="Definition.Modality.FullReduction.Assumptions.html#889" class="Field">≤𝟘</a>           <a id="1779" class="Symbol">=</a> <a id="1781" class="Symbol">λ</a> <a id="1783" href="Definition.Modality.Instances.Affine.html#1783" class="Bound">_</a> <a id="1785" class="Symbol">→</a> <a id="1787" href="Definition.Modality.Instances.Affine.html#1062" class="Function">≤𝟘</a>
  <a id="1792" class="Symbol">;</a> <a id="1794" href="Definition.Modality.FullReduction.Assumptions.html#1060" class="Field">·-increasing</a> <a id="1807" class="Symbol">=</a> <a id="1809" class="Symbol">λ</a> <a id="1811" class="Keyword">where</a>
      <a id="1823" class="Symbol">{</a><a id="1824" class="Argument">p</a> <a id="1826" class="Symbol">=</a> <a id="1828" href="Definition.Modality.Instances.Zero-one-many.html#1336" class="InductiveConstructor">ω</a><a id="1829" class="Symbol">}</a>         <a id="1839" class="Symbol">()</a>
      <a id="1848" class="Symbol">{</a><a id="1849" class="Argument">p</a> <a id="1851" class="Symbol">=</a> <a id="1853" href="Definition.Modality.Instances.Zero-one-many.html#1334" class="InductiveConstructor">𝟙</a><a id="1854" class="Symbol">}</a> <a id="1856" class="Symbol">{</a><a id="1857" class="Argument">q</a> <a id="1859" class="Symbol">=</a> <a id="1861" href="Definition.Modality.Instances.Affine.html#1861" class="Bound">q</a><a id="1862" class="Symbol">}</a> <a id="1864" class="Symbol">_</a>  <a id="1867" class="Symbol">→</a> <a id="1869" href="Relation.Binary.Reasoning.Base.Triple.html#3010" class="Function Operator">begin</a>
        <a id="1883" href="Definition.Modality.Instances.Affine.html#1861" class="Bound">q</a>      <a id="1890" href="Relation.Binary.Reasoning.Base.Triple.html#4870" class="Function">≡˘⟨</a> <a id="1894" href="Definition.Modality.html#2141" class="Function">·-identityˡ</a> <a id="1906" class="Symbol">_</a> <a id="1908" href="Relation.Binary.Reasoning.Base.Triple.html#4870" class="Function">⟩</a>
        <a id="1918" href="Definition.Modality.Instances.Zero-one-many.html#1334" class="InductiveConstructor">𝟙</a> <a id="1920" href="Definition.Modality.Instances.Zero-one-many.html#7238" class="Function Operator">·</a> <a id="1922" href="Definition.Modality.Instances.Affine.html#1861" class="Bound">q</a>  <a id="1925" href="Relation.Binary.Reasoning.Base.Triple.html#5119" class="Function Operator">∎</a>
      <a id="1933" class="Symbol">{</a><a id="1934" class="Argument">p</a> <a id="1936" class="Symbol">=</a> <a id="1938" href="Definition.Modality.Instances.Zero-one-many.html#1332" class="InductiveConstructor">𝟘</a><a id="1939" class="Symbol">}</a> <a id="1941" class="Symbol">{</a><a id="1942" class="Argument">q</a> <a id="1944" class="Symbol">=</a> <a id="1946" href="Definition.Modality.Instances.Affine.html#1946" class="Bound">q</a><a id="1947" class="Symbol">}</a> <a id="1949" class="Symbol">_</a> <a id="1951" class="Symbol">→</a> <a id="1953" href="Relation.Binary.Reasoning.Base.Triple.html#3010" class="Function Operator">begin</a>
        <a id="1967" href="Definition.Modality.Instances.Affine.html#1946" class="Bound">q</a>      <a id="1974" href="Relation.Binary.Reasoning.Base.Triple.html#3745" class="Function">≤⟨</a> <a id="1977" href="Definition.Modality.Instances.Affine.html#1062" class="Function">≤𝟘</a> <a id="1980" href="Relation.Binary.Reasoning.Base.Triple.html#3745" class="Function">⟩</a>
        <a id="1990" href="Definition.Modality.Instances.Zero-one-many.html#1332" class="InductiveConstructor">𝟘</a> <a id="1992" href="Definition.Modality.Instances.Zero-one-many.html#7238" class="Function Operator">·</a> <a id="1994" href="Definition.Modality.Instances.Affine.html#1946" class="Bound">q</a>  <a id="1997" href="Relation.Binary.Reasoning.Base.Triple.html#5119" class="Function Operator">∎</a>
  <a id="2001" class="Symbol">;</a> <a id="2003" href="Definition.Modality.FullReduction.Assumptions.html#1254" class="Field">⌞⌟≡𝟙ᵐ→≤𝟙</a> <a id="2012" class="Symbol">=</a> <a id="2014" class="Symbol">λ</a> <a id="2016" class="Keyword">where</a>
      <a id="2028" class="Symbol">{</a><a id="2029" class="Argument">p</a> <a id="2031" class="Symbol">=</a> <a id="2033" href="Definition.Modality.Instances.Zero-one-many.html#1336" class="InductiveConstructor">ω</a><a id="2034" class="Symbol">}</a> <a id="2036" class="Symbol">()</a>
      <a id="2045" class="Symbol">{</a><a id="2046" class="Argument">p</a> <a id="2048" class="Symbol">=</a> <a id="2050" href="Definition.Modality.Instances.Zero-one-many.html#1334" class="InductiveConstructor">𝟙</a><a id="2051" class="Symbol">}</a> <a id="2053" class="Symbol">_</a>  <a id="2056" class="Symbol">_</a> <a id="2058" class="Symbol">→</a> <a id="2060" href="Relation.Binary.Reasoning.Base.Triple.html#3010" class="Function Operator">begin</a>
        <a id="2074" href="Definition.Modality.Instances.Zero-one-many.html#1334" class="InductiveConstructor">𝟙</a>  <a id="2077" href="Relation.Binary.Reasoning.Base.Triple.html#5023" class="Function Operator">≡⟨⟩</a>
        <a id="2089" href="Definition.Modality.Instances.Zero-one-many.html#1334" class="InductiveConstructor">𝟙</a>  <a id="2092" href="Relation.Binary.Reasoning.Base.Triple.html#5119" class="Function Operator">∎</a>
      <a id="2100" class="Symbol">{</a><a id="2101" class="Argument">p</a> <a id="2103" class="Symbol">=</a> <a id="2105" href="Definition.Modality.Instances.Zero-one-many.html#1332" class="InductiveConstructor">𝟘</a><a id="2106" class="Symbol">}</a> <a id="2108" href="Definition.Modality.Instances.Affine.html#2108" class="Bound">ok</a> <a id="2111" class="Symbol">→</a>
        <a id="2121" href="Definition.Mode.html#3902" class="Function Operator">⌞</a> <a id="2123" href="Definition.Modality.Instances.Zero-one-many.html#1332" class="InductiveConstructor">𝟘</a> <a id="2125" href="Definition.Mode.html#3902" class="Function Operator">⌟</a> <a id="2127" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2129" href="Definition.Mode.html#1066" class="InductiveConstructor">𝟙ᵐ</a>      <a id="2137" href="Tools.Function.html#667" class="Function">→⟨</a> <a id="2140" class="Symbol">(λ</a> <a id="2143" href="Definition.Modality.Instances.Affine.html#2143" class="Bound">hyp</a> <a id="2147" href="Definition.Modality.Instances.Affine.html#2147" class="Bound">ok</a> <a id="2150" class="Symbol">→</a> <a id="2152" href="Definition.Mode.html#14537" class="Function">⌞⌟≡𝟙ᵐ→≉𝟘</a> <a id="2161" href="Definition.Modality.Instances.Affine.html#2147" class="Bound">ok</a> <a id="2164" href="Definition.Modality.Instances.Affine.html#2143" class="Bound">hyp</a> <a id="2168" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="2172" class="Symbol">)</a> <a id="2174" href="Tools.Function.html#667" class="Function">⟩</a>
        <a id="2184" href="Relation.Nullary.html#656" class="Function Operator">¬</a> <a id="2186" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="2188" href="Definition.Modality.Restrictions.html#874" class="Field">𝟘ᵐ-allowed</a>  <a id="2200" href="Tools.Function.html#667" class="Function">→⟨</a> <a id="2203" href="Function.Base.html#1919" class="Function Operator">_$</a> <a id="2206" href="Definition.Modality.Instances.Affine.html#2108" class="Bound">ok</a> <a id="2209" href="Tools.Function.html#667" class="Function">⟩</a>
        <a id="2219" href="Data.Empty.html#526" class="Datatype">⊥</a>               <a id="2235" href="Tools.Function.html#667" class="Function">→⟨</a> <a id="2238" href="Data.Empty.html#628" class="Function">⊥-elim</a> <a id="2245" href="Tools.Function.html#667" class="Function">⟩</a>
        <a id="2255" href="Definition.Modality.Instances.Zero-one-many.html#1332" class="InductiveConstructor">𝟘</a> <a id="2257" href="Definition.Modality.Instances.Zero-one-many.html#5614" class="Function Operator">≤</a> <a id="2259" href="Definition.Modality.Instances.Zero-one-many.html#1334" class="InductiveConstructor">𝟙</a>           <a id="2271" href="Tools.Function.html#895" class="Function Operator">□</a>
  <a id="2275" class="Symbol">}</a>
  <a id="2279" class="Keyword">where</a>
  <a id="2287" class="Keyword">open</a> <a id="2292" href="Definition.Modality.Properties.html" class="Module">Definition.Modality.Properties</a> <a id="2323" href="Definition.Modality.Instances.Affine.html#952" class="Function">affineModality</a>
  <a id="2340" class="Keyword">open</a> <a id="2345" href="Definition.Mode.html" class="Module">Definition.Mode</a> <a id="2361" href="Definition.Modality.Instances.Affine.html#952" class="Function">affineModality</a>
  <a id="2378" class="Keyword">open</a> <a id="2383" href="Definition.Modality.html#5116" class="Module">Modality</a> <a id="2392" href="Definition.Modality.Instances.Affine.html#952" class="Function">affineModality</a> <a id="2407" class="Keyword">using</a> <a id="2413" class="Symbol">(</a><a id="2414" href="Definition.Modality.html#2141" class="Function">·-identityˡ</a><a id="2425" class="Symbol">)</a>
  <a id="2429" class="Keyword">open</a> <a id="2434" href="Tools.Reasoning.PartialOrder.html" class="Module">Tools.Reasoning.PartialOrder</a> <a id="2463" href="Definition.Modality.Properties.PartialOrder.html#1507" class="Function">≤-poset</a>
</pre></body></html>