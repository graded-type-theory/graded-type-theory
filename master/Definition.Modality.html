<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Definition.Modality</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The modality structure.</a>
<a id="101" class="Comment">------------------------------------------------------------------------</a>

<a id="175" class="Keyword">open</a> <a id="180" class="Keyword">import</a> <a id="187" href="Tools.Level.html" class="Module">Tools.Level</a>
<a id="199" class="Keyword">open</a> <a id="204" class="Keyword">import</a> <a id="211" href="Tools.Relation.html" class="Module">Tools.Relation</a>

<a id="227" class="Keyword">module</a> <a id="234" href="Definition.Modality.html" class="Module">Definition.Modality</a> <a id="254" class="Symbol">{</a><a id="255" href="Definition.Modality.html#255" class="Bound">a</a><a id="256" class="Symbol">}</a> <a id="258" class="Symbol">(</a><a id="259" href="Definition.Modality.html#259" class="Bound">M</a> <a id="261" class="Symbol">:</a> <a id="263" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="267" href="Definition.Modality.html#255" class="Bound">a</a><a id="268" class="Symbol">)</a> <a id="270" class="Keyword">where</a>

<a id="277" class="Keyword">open</a> <a id="282" class="Keyword">import</a> <a id="289" href="Tools.Algebra.html" class="Module">Tools.Algebra</a> <a id="303" href="Definition.Modality.html#259" class="Bound">M</a>
<a id="305" class="Keyword">open</a> <a id="310" class="Keyword">import</a> <a id="317" href="Tools.Bool.html" class="Module">Tools.Bool</a> <a id="328" class="Keyword">using</a> <a id="334" class="Symbol">(</a><a id="335" href="Data.Bool.Base.html#1451" class="Function">T</a><a id="336" class="Symbol">)</a>
<a id="338" class="Keyword">open</a> <a id="343" class="Keyword">import</a> <a id="350" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="364" class="Keyword">open</a> <a id="369" class="Keyword">import</a> <a id="376" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="404" class="Keyword">open</a> <a id="409" class="Keyword">import</a> <a id="416" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="427" class="Keyword">open</a> <a id="432" class="Keyword">import</a> <a id="439" href="Definition.Modality.Restrictions.html" class="Module">Definition.Modality.Restrictions</a> <a id="472" href="Definition.Modality.html#259" class="Bound">M</a>

<a id="475" class="Comment">-- Semiring with meet</a>
<a id="497" class="Keyword">record</a> <a id="Semiring-with-meet"></a><a id="504" href="Definition.Modality.html#504" class="Record">Semiring-with-meet</a> <a id="523" class="Symbol">:</a> <a id="525" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="529" href="Definition.Modality.html#255" class="Bound">a</a> <a id="531" class="Keyword">where</a>
  <a id="539" class="Keyword">infixr</a> <a id="546" class="Number">40</a> <a id="549" href="Definition.Modality.html#690" class="Function Operator">_+_</a>
  <a id="555" class="Keyword">infixr</a> <a id="562" class="Number">40</a> <a id="565" href="Definition.Modality.html#752" class="Function Operator">_∧_</a>
  <a id="571" class="Keyword">infixr</a> <a id="578" class="Number">45</a> <a id="581" href="Definition.Modality.html#718" class="Function Operator">_·_</a>
  <a id="587" class="Keyword">infix</a>  <a id="594" class="Number">10</a> <a id="597" href="Definition.Modality.html#1247" class="Function Operator">_≤_</a> <a id="601" href="Definition.Modality.html#1334" class="Function Operator">_&lt;_</a>


  <a id="609" class="Keyword">field</a>
    <a id="619" class="Comment">-- A modality consists of a type M with three binary operations...</a>
    <a id="Semiring-with-meet._+_"></a><a id="690" href="Definition.Modality.html#690" class="Field Operator">_+_</a> <a id="694" class="Symbol">:</a> <a id="696" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="700" href="Definition.Modality.html#259" class="Bound">M</a> <a id="702" class="Comment">-- Addition</a>
    <a id="Semiring-with-meet._·_"></a><a id="718" href="Definition.Modality.html#718" class="Field Operator">_·_</a> <a id="722" class="Symbol">:</a> <a id="724" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="728" href="Definition.Modality.html#259" class="Bound">M</a> <a id="730" class="Comment">-- Multiplication</a>
    <a id="Semiring-with-meet._∧_"></a><a id="752" href="Definition.Modality.html#752" class="Field Operator">_∧_</a> <a id="756" class="Symbol">:</a> <a id="758" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="762" href="Definition.Modality.html#259" class="Bound">M</a> <a id="764" class="Comment">-- Meet</a>

    <a id="777" class="Comment">-- ... and two special elements</a>
    <a id="Semiring-with-meet.𝟘"></a><a id="813" href="Definition.Modality.html#813" class="Field">𝟘</a> <a id="815" class="Symbol">:</a> <a id="817" href="Definition.Modality.html#259" class="Bound">M</a>
    <a id="Semiring-with-meet.𝟙"></a><a id="823" href="Definition.Modality.html#823" class="Field">𝟙</a> <a id="825" class="Symbol">:</a> <a id="827" href="Definition.Modality.html#259" class="Bound">M</a>

    <a id="834" class="Comment">-- + and · form a semiring with 𝟙 as multiplicativ unit and 𝟘 as zero</a>
    <a id="Semiring-with-meet.+-·-Semiring"></a><a id="908" href="Definition.Modality.html#908" class="Field">+-·-Semiring</a>  <a id="922" class="Symbol">:</a> <a id="924" href="Algebra.Structures.html#11361" class="Record">IsSemiring</a> <a id="935" href="Definition.Modality.html#690" class="Field Operator">_+_</a> <a id="939" href="Definition.Modality.html#718" class="Field Operator">_·_</a> <a id="943" href="Definition.Modality.html#813" class="Field">𝟘</a> <a id="945" href="Definition.Modality.html#823" class="Field">𝟙</a>
    <a id="951" class="Comment">-- ∧ forms a semilattice</a>
    <a id="Semiring-with-meet.∧-Semilattice"></a><a id="980" href="Definition.Modality.html#980" class="Field">∧-Semilattice</a>       <a id="1000" class="Symbol">:</a> <a id="1002" href="Algebra.Structures.html#2390" class="Record">IsSemilattice</a> <a id="1016" href="Definition.Modality.html#752" class="Field Operator">_∧_</a>

    <a id="1025" class="Comment">-- Multiplation distributes over meet</a>
    <a id="Semiring-with-meet.·-distrib-∧"></a><a id="1067" href="Definition.Modality.html#1067" class="Field">·-distrib-∧</a>         <a id="1087" class="Symbol">:</a> <a id="1089" href="Definition.Modality.html#718" class="Field Operator">_·_</a> <a id="1093" href="Algebra.Definitions.html#2465" class="Function Operator">DistributesOver</a> <a id="1109" href="Definition.Modality.html#752" class="Field Operator">_∧_</a>
    <a id="1117" class="Comment">-- Addition distributes over meet</a>
    <a id="Semiring-with-meet.+-distrib-∧"></a><a id="1155" href="Definition.Modality.html#1155" class="Field">+-distrib-∧</a>         <a id="1175" class="Symbol">:</a> <a id="1177" href="Definition.Modality.html#690" class="Field Operator">_+_</a> <a id="1181" href="Algebra.Definitions.html#2465" class="Function Operator">DistributesOver</a> <a id="1197" href="Definition.Modality.html#752" class="Field Operator">_∧_</a>

  <a id="1204" class="Comment">-- Semilattice partial ordering relation</a>
  <a id="Semiring-with-meet._≤_"></a><a id="1247" href="Definition.Modality.html#1247" class="Function Operator">_≤_</a> <a id="1251" class="Symbol">:</a> <a id="1253" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="1257" href="Definition.Modality.html#259" class="Bound">M</a> <a id="1259" href="Definition.Modality.html#255" class="Bound">a</a>
  <a id="1263" href="Definition.Modality.html#1263" class="Bound">p</a> <a id="1265" href="Definition.Modality.html#1247" class="Function Operator">≤</a> <a id="1267" href="Definition.Modality.html#1267" class="Bound">q</a> <a id="1269" class="Symbol">=</a> <a id="1271" href="Definition.Modality.html#1263" class="Bound">p</a> <a id="1273" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="1275" class="Symbol">(</a><a id="1276" href="Definition.Modality.html#1263" class="Bound">p</a> <a id="1278" href="Definition.Modality.html#752" class="Field Operator">∧</a> <a id="1280" href="Definition.Modality.html#1267" class="Bound">q</a><a id="1281" class="Symbol">)</a>

  <a id="1286" class="Comment">-- A strict variant of the ordering relation.</a>
  <a id="Semiring-with-meet._&lt;_"></a><a id="1334" href="Definition.Modality.html#1334" class="Function Operator">_&lt;_</a> <a id="1338" class="Symbol">:</a> <a id="1340" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="1344" href="Definition.Modality.html#259" class="Bound">M</a> <a id="1346" href="Definition.Modality.html#255" class="Bound">a</a>
  <a id="1350" href="Definition.Modality.html#1350" class="Bound">p</a> <a id="1352" href="Definition.Modality.html#1334" class="Function Operator">&lt;</a> <a id="1354" href="Definition.Modality.html#1354" class="Bound">q</a> <a id="1356" class="Symbol">=</a> <a id="1358" href="Definition.Modality.html#1350" class="Bound">p</a> <a id="1360" href="Definition.Modality.html#1247" class="Function Operator">≤</a> <a id="1362" href="Definition.Modality.html#1354" class="Bound">q</a> <a id="1364" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1366" href="Definition.Modality.html#1350" class="Bound">p</a> <a id="1368" href="Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">≢</a> <a id="1370" href="Definition.Modality.html#1354" class="Bound">q</a>

  <a id="Semiring-with-meet.·-distribˡ-∧"></a><a id="1375" href="Definition.Modality.html#1375" class="Function">·-distribˡ-∧</a> <a id="1388" class="Symbol">:</a> <a id="1390" href="Definition.Modality.html#718" class="Field Operator">_·_</a> <a id="1394" href="Algebra.Definitions.html#2227" class="Function Operator">DistributesOverˡ</a> <a id="1411" href="Definition.Modality.html#752" class="Field Operator">_∧_</a>
  <a id="1417" href="Definition.Modality.html#1375" class="Function">·-distribˡ-∧</a> <a id="1430" class="Symbol">=</a> <a id="1432" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1438" href="Definition.Modality.html#1067" class="Field">·-distrib-∧</a>

  <a id="Semiring-with-meet.·-distribʳ-∧"></a><a id="1453" href="Definition.Modality.html#1453" class="Function">·-distribʳ-∧</a> <a id="1466" class="Symbol">:</a> <a id="1468" href="Definition.Modality.html#718" class="Field Operator">_·_</a> <a id="1472" href="Algebra.Definitions.html#2346" class="Function Operator">DistributesOverʳ</a> <a id="1489" href="Definition.Modality.html#752" class="Field Operator">_∧_</a>
  <a id="1495" href="Definition.Modality.html#1453" class="Function">·-distribʳ-∧</a> <a id="1508" class="Symbol">=</a> <a id="1510" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="1516" href="Definition.Modality.html#1067" class="Field">·-distrib-∧</a>

  <a id="Semiring-with-meet.+-distribˡ-∧"></a><a id="1531" href="Definition.Modality.html#1531" class="Function">+-distribˡ-∧</a> <a id="1544" class="Symbol">:</a> <a id="1546" href="Definition.Modality.html#690" class="Field Operator">_+_</a> <a id="1550" href="Algebra.Definitions.html#2227" class="Function Operator">DistributesOverˡ</a> <a id="1567" href="Definition.Modality.html#752" class="Field Operator">_∧_</a>
  <a id="1573" href="Definition.Modality.html#1531" class="Function">+-distribˡ-∧</a> <a id="1586" class="Symbol">=</a> <a id="1588" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1594" href="Definition.Modality.html#1155" class="Field">+-distrib-∧</a>

  <a id="Semiring-with-meet.+-distribʳ-∧"></a><a id="1609" href="Definition.Modality.html#1609" class="Function">+-distribʳ-∧</a> <a id="1622" class="Symbol">:</a> <a id="1624" href="Definition.Modality.html#690" class="Field Operator">_+_</a> <a id="1628" href="Algebra.Definitions.html#2346" class="Function Operator">DistributesOverʳ</a> <a id="1645" href="Definition.Modality.html#752" class="Field Operator">_∧_</a>
  <a id="1651" href="Definition.Modality.html#1609" class="Function">+-distribʳ-∧</a> <a id="1664" class="Symbol">=</a> <a id="1666" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="1672" href="Definition.Modality.html#1155" class="Field">+-distrib-∧</a>

  <a id="1687" class="Keyword">open</a> <a id="1692" href="Algebra.Structures.html#11361" class="Module">IsSemiring</a> <a id="1703" href="Definition.Modality.html#908" class="Field">+-·-Semiring</a> <a id="1716" class="Keyword">public</a>
    <a id="1727" class="Keyword">using</a> <a id="1733" class="Symbol">(</a>
            <a id="1747" href="Algebra.Structures.html#10462" class="Function">+-assoc</a><a id="1754" class="Symbol">;</a>
            <a id="1768" href="Algebra.Structures.html#10502" class="Function">+-cong</a><a id="1774" class="Symbol">;</a>
            <a id="1788" href="Algebra.Structures.html#10541" class="Function">+-congˡ</a><a id="1795" class="Symbol">;</a>
            <a id="1809" href="Algebra.Structures.html#10581" class="Function">+-congʳ</a><a id="1816" class="Symbol">;</a>
            <a id="1830" href="Algebra.Structures.html#10621" class="Function">+-identity</a><a id="1840" class="Symbol">;</a>
            <a id="1854" href="Algebra.Structures.html#10664" class="Function">+-identityˡ</a><a id="1865" class="Symbol">;</a>
            <a id="1879" href="Algebra.Structures.html#10708" class="Function">+-identityʳ</a><a id="1890" class="Symbol">;</a>
            <a id="1904" href="Algebra.Structures.html#10752" class="Function">+-comm</a>
          <a id="1921" class="Symbol">)</a>
    <a id="1927" class="Keyword">renaming</a> <a id="1936" class="Symbol">(</a>
              <a id="1952" href="Algebra.Structures.html#11088" class="Function">*-assoc</a> <a id="1960" class="Symbol">to</a> <a id="1963" class="Function">·-assoc</a><a id="1970" class="Symbol">;</a>
              <a id="1986" href="Algebra.Structures.html#11117" class="Function">*-cong</a> <a id="1993" class="Symbol">to</a> <a id="1996" class="Function">·-cong</a><a id="2002" class="Symbol">;</a>
              <a id="2018" href="Algebra.Structures.html#11145" class="Function">*-congˡ</a> <a id="2026" class="Symbol">to</a> <a id="2029" class="Function">·-congˡ</a><a id="2036" class="Symbol">;</a>
              <a id="2052" href="Algebra.Structures.html#11174" class="Function">*-congʳ</a> <a id="2060" class="Symbol">to</a> <a id="2063" class="Function">·-congʳ</a><a id="2070" class="Symbol">;</a>
              <a id="2086" href="Algebra.Structures.html#11203" class="Function">*-identity</a> <a id="2097" class="Symbol">to</a> <a id="2100" class="Function">·-identity</a><a id="2110" class="Symbol">;</a>
              <a id="2126" href="Algebra.Structures.html#11235" class="Function">*-identityˡ</a> <a id="2138" class="Symbol">to</a> <a id="2141" class="Function">·-identityˡ</a><a id="2152" class="Symbol">;</a>
              <a id="2168" href="Algebra.Structures.html#11268" class="Function">*-identityʳ</a> <a id="2180" class="Symbol">to</a> <a id="2183" class="Function">·-identityʳ</a><a id="2194" class="Symbol">;</a>

              <a id="2211" href="Algebra.Structures.html#10192" class="Function">distrib</a> <a id="2219" class="Symbol">to</a> <a id="2222" class="Function">·-distrib-+</a><a id="2233" class="Symbol">;</a>
              <a id="2249" href="Algebra.Structures.html#10239" class="Function">distribˡ</a> <a id="2258" class="Symbol">to</a> <a id="2261" class="Function">·-distribˡ-+</a><a id="2273" class="Symbol">;</a>
              <a id="2289" href="Algebra.Structures.html#10301" class="Function">distribʳ</a> <a id="2298" class="Symbol">to</a> <a id="2301" class="Function">·-distribʳ-+</a><a id="2313" class="Symbol">;</a>
              <a id="2329" href="Algebra.Structures.html#11520" class="Field">zero</a> <a id="2334" class="Symbol">to</a> <a id="2337" class="Field">·-zero</a><a id="2343" class="Symbol">;</a>
              <a id="2359" href="Algebra.Structures.html#8698" class="Function">zeroˡ</a> <a id="2365" class="Symbol">to</a> <a id="2368" class="Function">·-zeroˡ</a><a id="2375" class="Symbol">;</a>
              <a id="2391" href="Algebra.Structures.html#8744" class="Function">zeroʳ</a> <a id="2397" class="Symbol">to</a> <a id="2400" class="Function">·-zeroʳ</a><a id="2407" class="Symbol">;</a>

              <a id="2424" href="Algebra.Structures.html#1172" class="Function">isEquivalence</a> <a id="2438" class="Symbol">to</a> <a id="2441" class="Function">≈-equivalence</a>
             <a id="2468" class="Symbol">)</a>

  <a id="2473" class="Keyword">open</a> <a id="2478" href="Algebra.Structures.html#2390" class="Module">IsSemilattice</a> <a id="2492" href="Definition.Modality.html#980" class="Field">∧-Semilattice</a> <a id="2506" class="Keyword">public</a>
    <a id="2517" class="Keyword">using</a> <a id="2523" class="Symbol">(</a><a id="2524" href="Algebra.Structures.html#2546" class="Function">∧-cong</a><a id="2530" class="Symbol">;</a> <a id="2532" href="Algebra.Structures.html#2565" class="Function">∧-congˡ</a><a id="2539" class="Symbol">;</a> <a id="2541" href="Algebra.Structures.html#2585" class="Function">∧-congʳ</a><a id="2548" class="Symbol">)</a>
    <a id="2554" class="Keyword">renaming</a> <a id="2563" class="Symbol">(</a><a id="2564" href="Algebra.Structures.html#2470" class="Field">comm</a> <a id="2569" class="Symbol">to</a> <a id="2572" class="Field">∧-comm</a><a id="2578" class="Symbol">;</a>
              <a id="2594" href="Algebra.Structures.html#2014" class="Function">idem</a> <a id="2599" class="Symbol">to</a> <a id="2602" class="Function">∧-idem</a><a id="2608" class="Symbol">;</a>
              <a id="2624" href="Algebra.Structures.html#1867" class="Function">assoc</a> <a id="2630" class="Symbol">to</a> <a id="2633" class="Function">∧-assoc</a>
             <a id="2654" class="Symbol">)</a>

<a id="2657" class="Comment">-- Meet-Semirings with well-behaved zero</a>
<a id="2698" class="Keyword">record</a> <a id="Has-well-behaved-zero"></a><a id="2705" href="Definition.Modality.html#2705" class="Record">Has-well-behaved-zero</a> <a id="2727" class="Symbol">(</a><a id="2728" href="Definition.Modality.html#2728" class="Bound">𝕄</a> <a id="2730" class="Symbol">:</a> <a id="2732" href="Definition.Modality.html#504" class="Record">Semiring-with-meet</a><a id="2750" class="Symbol">)</a> <a id="2752" class="Symbol">:</a> <a id="2754" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2758" href="Definition.Modality.html#255" class="Bound">a</a> <a id="2760" class="Keyword">where</a>
  <a id="2768" class="Keyword">open</a> <a id="2773" href="Definition.Modality.html#504" class="Module">Semiring-with-meet</a> <a id="2792" href="Definition.Modality.html#2728" class="Bound">𝕄</a>
  <a id="2796" class="Keyword">field</a>
    <a id="2806" class="Comment">-- 𝟙 is not equivalent to 𝟘.</a>
    <a id="Has-well-behaved-zero.𝟙≉𝟘"></a><a id="2839" href="Definition.Modality.html#2839" class="Field">𝟙≉𝟘</a> <a id="2843" class="Symbol">:</a> <a id="2845" href="Definition.Modality.html#823" class="Function">𝟙</a> <a id="2847" href="Relation.Binary.Bundles.html#960" class="Function Operator">≉</a> <a id="2849" href="Definition.Modality.html#813" class="Function">𝟘</a>

    <a id="2856" class="Comment">-- It is decidable whether a value is equivalent to 𝟘.</a>
    <a id="Has-well-behaved-zero.is-𝟘?"></a><a id="2915" href="Definition.Modality.html#2915" class="Field">is-𝟘?</a> <a id="2921" class="Symbol">:</a> <a id="2923" class="Symbol">(</a><a id="2924" href="Definition.Modality.html#2924" class="Bound">p</a> <a id="2926" class="Symbol">:</a> <a id="2928" href="Definition.Modality.html#259" class="Bound">M</a><a id="2929" class="Symbol">)</a> <a id="2931" class="Symbol">→</a> <a id="2933" href="Relation.Nullary.html#1511" class="Record">Dec</a> <a id="2937" class="Symbol">(</a><a id="2938" href="Definition.Modality.html#2924" class="Bound">p</a> <a id="2940" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="2942" href="Definition.Modality.html#813" class="Function">𝟘</a><a id="2943" class="Symbol">)</a>

    <a id="2950" class="Comment">-- The following two assumptions are based on assumptions from Bob</a>
    <a id="3021" class="Comment">-- Atkey&#39;s &quot;Syntax and Semantics of Quantitative Type Theory&quot;.</a>

    <a id="3089" class="Comment">-- The semiring has the zero-product property:</a>
    <a id="3140" class="Comment">-- if p · q is 𝟘, then either p is 𝟘 or q is 𝟘.</a>
    <a id="Has-well-behaved-zero.zero-product"></a><a id="3192" href="Definition.Modality.html#3192" class="Field">zero-product</a> <a id="3205" class="Symbol">:</a> <a id="3207" class="Symbol">{</a><a id="3208" href="Definition.Modality.html#3208" class="Bound">p</a> <a id="3210" href="Definition.Modality.html#3210" class="Bound">q</a> <a id="3212" class="Symbol">:</a> <a id="3214" href="Definition.Modality.html#259" class="Bound">M</a><a id="3215" class="Symbol">}</a> <a id="3217" class="Symbol">→</a> <a id="3219" href="Definition.Modality.html#3208" class="Bound">p</a> <a id="3221" href="Definition.Modality.html#718" class="Function Operator">·</a> <a id="3223" href="Definition.Modality.html#3210" class="Bound">q</a> <a id="3225" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3227" href="Definition.Modality.html#813" class="Function">𝟘</a> <a id="3229" class="Symbol">→</a> <a id="3231" class="Symbol">(</a><a id="3232" href="Definition.Modality.html#3208" class="Bound">p</a> <a id="3234" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3236" href="Definition.Modality.html#813" class="Function">𝟘</a><a id="3237" class="Symbol">)</a> <a id="3239" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="3241" class="Symbol">(</a><a id="3242" href="Definition.Modality.html#3210" class="Bound">q</a> <a id="3244" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3246" href="Definition.Modality.html#813" class="Function">𝟘</a><a id="3247" class="Symbol">)</a>

    <a id="3254" class="Comment">-- The semiring is positive:</a>
    <a id="3287" class="Comment">-- if p + q is 𝟘, then p and q are 𝟘. (The statement that p + q ≈ 𝟘</a>
    <a id="3359" class="Comment">-- implies q ≈ 𝟘 follows from the one below, see</a>
    <a id="3412" class="Comment">-- Definition.Modality.Properties.Has-well-behaved-zero.+-positiveʳ.)</a>
    <a id="Has-well-behaved-zero.+-positiveˡ"></a><a id="3486" href="Definition.Modality.html#3486" class="Field">+-positiveˡ</a> <a id="3498" class="Symbol">:</a> <a id="3500" class="Symbol">{</a><a id="3501" href="Definition.Modality.html#3501" class="Bound">p</a> <a id="3503" href="Definition.Modality.html#3503" class="Bound">q</a> <a id="3505" class="Symbol">:</a> <a id="3507" href="Definition.Modality.html#259" class="Bound">M</a><a id="3508" class="Symbol">}</a> <a id="3510" class="Symbol">→</a> <a id="3512" href="Definition.Modality.html#3501" class="Bound">p</a> <a id="3514" href="Definition.Modality.html#690" class="Function Operator">+</a> <a id="3516" href="Definition.Modality.html#3503" class="Bound">q</a> <a id="3518" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3520" href="Definition.Modality.html#813" class="Function">𝟘</a> <a id="3522" class="Symbol">→</a> <a id="3524" href="Definition.Modality.html#3501" class="Bound">p</a> <a id="3526" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3528" href="Definition.Modality.html#813" class="Function">𝟘</a>

    <a id="3535" class="Comment">-- If p ∧ q is equal to 𝟘, then p ≈ 𝟘.  (The statement that p ∧ q ≈ 𝟘</a>
    <a id="3609" class="Comment">-- implies q ≈ 𝟘 follows from the one below, see</a>
    <a id="3662" class="Comment">-- Definition.Modality.Properties.Has-well-behaved-zero.∧-positiveʳ.)</a>
    <a id="Has-well-behaved-zero.∧-positiveˡ"></a><a id="3736" href="Definition.Modality.html#3736" class="Field">∧-positiveˡ</a> <a id="3748" class="Symbol">:</a> <a id="3750" class="Symbol">{</a><a id="3751" href="Definition.Modality.html#3751" class="Bound">p</a> <a id="3753" href="Definition.Modality.html#3753" class="Bound">q</a> <a id="3755" class="Symbol">:</a> <a id="3757" href="Definition.Modality.html#259" class="Bound">M</a><a id="3758" class="Symbol">}</a> <a id="3760" class="Symbol">→</a> <a id="3762" href="Definition.Modality.html#3751" class="Bound">p</a> <a id="3764" href="Definition.Modality.html#752" class="Function Operator">∧</a> <a id="3766" href="Definition.Modality.html#3753" class="Bound">q</a> <a id="3768" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3770" href="Definition.Modality.html#813" class="Function">𝟘</a> <a id="3772" class="Symbol">→</a> <a id="3774" href="Definition.Modality.html#3751" class="Bound">p</a> <a id="3776" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3778" href="Definition.Modality.html#813" class="Function">𝟘</a>

<a id="3781" class="Comment">-- Semirings with meet and a tertiary star operator</a>
<a id="3833" class="Keyword">record</a> <a id="Semiring-with-meet-and-star"></a><a id="3840" href="Definition.Modality.html#3840" class="Record">Semiring-with-meet-and-star</a> <a id="3868" class="Symbol">:</a> <a id="3870" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3874" href="Definition.Modality.html#255" class="Bound">a</a> <a id="3876" class="Keyword">where</a>
  <a id="3884" class="Keyword">infix</a>  <a id="3891" class="Number">50</a> <a id="3894" href="Definition.Modality.html#4053" class="Field Operator">_⊛_▷_</a>
  <a id="3902" class="Keyword">field</a>
    <a id="Semiring-with-meet-and-star.semiring-with-meet"></a><a id="3912" href="Definition.Modality.html#3912" class="Field">semiring-with-meet</a> <a id="3931" class="Symbol">:</a> <a id="3933" href="Definition.Modality.html#504" class="Record">Semiring-with-meet</a>
  <a id="3954" class="Keyword">open</a> <a id="3959" href="Definition.Modality.html#504" class="Module">Semiring-with-meet</a> <a id="3978" href="Definition.Modality.html#3912" class="Field">semiring-with-meet</a> <a id="3997" class="Keyword">public</a>

  <a id="4007" class="Keyword">field</a>
    <a id="4017" class="Comment">-- The tertiary &quot;star&quot;-operator</a>
    <a id="Semiring-with-meet-and-star._⊛_▷_"></a><a id="4053" href="Definition.Modality.html#4053" class="Field Operator">_⊛_▷_</a> <a id="4059" class="Symbol">:</a> <a id="4061" href="Tools.Algebra.html#1006" class="Function">Op₃</a> <a id="4065" href="Definition.Modality.html#259" class="Bound">M</a>

    <a id="4072" class="Comment">-- ⊛ is a solution to the following system of inequalities</a>
    <a id="Semiring-with-meet-and-star.⊛-ineq"></a><a id="4135" href="Definition.Modality.html#4135" class="Field">⊛-ineq</a> <a id="4142" class="Symbol">:</a> <a id="4144" class="Symbol">((</a><a id="4146" href="Definition.Modality.html#4146" class="Bound">p</a> <a id="4148" href="Definition.Modality.html#4148" class="Bound">q</a> <a id="4150" href="Definition.Modality.html#4150" class="Bound">r</a> <a id="4152" class="Symbol">:</a> <a id="4154" href="Definition.Modality.html#259" class="Bound">M</a><a id="4155" class="Symbol">)</a> <a id="4157" class="Symbol">→</a> <a id="4159" href="Definition.Modality.html#4146" class="Bound">p</a> <a id="4161" href="Definition.Modality.html#4053" class="Field Operator">⊛</a> <a id="4163" href="Definition.Modality.html#4148" class="Bound">q</a> <a id="4165" href="Definition.Modality.html#4053" class="Field Operator">▷</a> <a id="4167" href="Definition.Modality.html#4150" class="Bound">r</a> <a id="4169" href="Definition.Modality.html#1247" class="Function Operator">≤</a> <a id="4171" href="Definition.Modality.html#4148" class="Bound">q</a> <a id="4173" href="Definition.Modality.html#690" class="Function Operator">+</a> <a id="4175" href="Definition.Modality.html#4150" class="Bound">r</a> <a id="4177" href="Definition.Modality.html#718" class="Function Operator">·</a> <a id="4179" href="Definition.Modality.html#4146" class="Bound">p</a> <a id="4181" href="Definition.Modality.html#4053" class="Field Operator">⊛</a> <a id="4183" href="Definition.Modality.html#4148" class="Bound">q</a> <a id="4185" href="Definition.Modality.html#4053" class="Field Operator">▷</a> <a id="4187" href="Definition.Modality.html#4150" class="Bound">r</a><a id="4188" class="Symbol">)</a>
           <a id="4201" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4203" class="Symbol">((</a><a id="4205" href="Definition.Modality.html#4205" class="Bound">p</a> <a id="4207" href="Definition.Modality.html#4207" class="Bound">q</a> <a id="4209" href="Definition.Modality.html#4209" class="Bound">r</a> <a id="4211" class="Symbol">:</a> <a id="4213" href="Definition.Modality.html#259" class="Bound">M</a><a id="4214" class="Symbol">)</a> <a id="4216" class="Symbol">→</a> <a id="4218" href="Definition.Modality.html#4205" class="Bound">p</a> <a id="4220" href="Definition.Modality.html#4053" class="Field Operator">⊛</a> <a id="4222" href="Definition.Modality.html#4207" class="Bound">q</a> <a id="4224" href="Definition.Modality.html#4053" class="Field Operator">▷</a> <a id="4226" href="Definition.Modality.html#4209" class="Bound">r</a> <a id="4228" href="Definition.Modality.html#1247" class="Function Operator">≤</a> <a id="4230" href="Definition.Modality.html#4205" class="Bound">p</a><a id="4231" class="Symbol">)</a>

    <a id="4238" class="Comment">-- addition is sub-interchangeable over ⊛ w.r.t the first two arguments</a>
    <a id="Semiring-with-meet-and-star.+-sub-interchangeable-⊛"></a><a id="4314" href="Definition.Modality.html#4314" class="Field">+-sub-interchangeable-⊛</a> <a id="4338" class="Symbol">:</a> <a id="4340" class="Symbol">(</a><a id="4341" href="Definition.Modality.html#4341" class="Bound">r</a> <a id="4343" class="Symbol">:</a> <a id="4345" href="Definition.Modality.html#259" class="Bound">M</a><a id="4346" class="Symbol">)</a> <a id="4348" class="Symbol">→</a> <a id="4350" href="Definition.Modality.html#690" class="Function Operator">_+_</a> <a id="4354" href="Tools.Algebra.html#1544" class="Function Operator">SubInterchangeable</a> <a id="4373" class="Symbol">(</a><a id="4374" href="Definition.Modality.html#4053" class="Field Operator">_⊛_▷</a> <a id="4379" href="Definition.Modality.html#4341" class="Bound">r</a><a id="4380" class="Symbol">)</a> <a id="4382" href="Tools.Algebra.html#1544" class="Function Operator">by</a> <a id="4385" href="Definition.Modality.html#1247" class="Function Operator">_≤_</a>
    <a id="4393" class="Comment">-- multiplication is right sub-distributive over ⊛ w.r.t the first two arguments</a>
    <a id="Semiring-with-meet-and-star.·-sub-distribʳ-⊛"></a><a id="4478" href="Definition.Modality.html#4478" class="Field">·-sub-distribʳ-⊛</a> <a id="4495" class="Symbol">:</a> <a id="4497" class="Symbol">(</a><a id="4498" href="Definition.Modality.html#4498" class="Bound">r</a> <a id="4500" class="Symbol">:</a> <a id="4502" href="Definition.Modality.html#259" class="Bound">M</a><a id="4503" class="Symbol">)</a> <a id="4505" class="Symbol">→</a> <a id="4507" href="Definition.Modality.html#718" class="Function Operator">_·_</a> <a id="4511" href="Tools.Algebra.html#1225" class="Function Operator">SubDistributesOverʳ</a> <a id="4531" class="Symbol">(</a><a id="4532" href="Definition.Modality.html#4053" class="Field Operator">_⊛_▷</a> <a id="4537" href="Definition.Modality.html#4498" class="Bound">r</a><a id="4538" class="Symbol">)</a> <a id="4540" href="Tools.Algebra.html#1225" class="Function Operator">by</a> <a id="4543" href="Definition.Modality.html#1247" class="Function Operator">_≤_</a>
    <a id="4551" class="Comment">-- ⊛ is sub-distributive over meet w.r.t the first two arguments</a>
    <a id="Semiring-with-meet-and-star.⊛-sub-distrib-∧"></a><a id="4620" href="Definition.Modality.html#4620" class="Field">⊛-sub-distrib-∧</a>    <a id="4639" class="Symbol">:</a> <a id="4641" class="Symbol">(</a><a id="4642" href="Definition.Modality.html#4642" class="Bound">r</a> <a id="4644" class="Symbol">:</a> <a id="4646" href="Definition.Modality.html#259" class="Bound">M</a><a id="4647" class="Symbol">)</a> <a id="4649" class="Symbol">→</a> <a id="4651" class="Symbol">(</a><a id="4652" href="Definition.Modality.html#4053" class="Field Operator">_⊛_▷</a> <a id="4657" href="Definition.Modality.html#4642" class="Bound">r</a><a id="4658" class="Symbol">)</a> <a id="4660" href="Tools.Algebra.html#1370" class="Function Operator">SubDistributesOver</a> <a id="4679" href="Definition.Modality.html#752" class="Function Operator">_∧_</a> <a id="4683" href="Tools.Algebra.html#1370" class="Function Operator">by</a> <a id="4686" href="Definition.Modality.html#1247" class="Function Operator">_≤_</a>

  <a id="Semiring-with-meet-and-star.⊛-ineq₁"></a><a id="4693" href="Definition.Modality.html#4693" class="Function">⊛-ineq₁</a> <a id="4701" class="Symbol">:</a> <a id="4703" class="Symbol">(</a><a id="4704" href="Definition.Modality.html#4704" class="Bound">p</a> <a id="4706" href="Definition.Modality.html#4706" class="Bound">q</a> <a id="4708" href="Definition.Modality.html#4708" class="Bound">r</a> <a id="4710" class="Symbol">:</a> <a id="4712" href="Definition.Modality.html#259" class="Bound">M</a><a id="4713" class="Symbol">)</a> <a id="4715" class="Symbol">→</a> <a id="4717" href="Definition.Modality.html#4704" class="Bound">p</a> <a id="4719" href="Definition.Modality.html#4053" class="Field Operator">⊛</a> <a id="4721" href="Definition.Modality.html#4706" class="Bound">q</a> <a id="4723" href="Definition.Modality.html#4053" class="Field Operator">▷</a> <a id="4725" href="Definition.Modality.html#4708" class="Bound">r</a> <a id="4727" href="Definition.Modality.html#1247" class="Function Operator">≤</a> <a id="4729" href="Definition.Modality.html#4706" class="Bound">q</a> <a id="4731" href="Definition.Modality.html#690" class="Function Operator">+</a> <a id="4733" href="Definition.Modality.html#4708" class="Bound">r</a> <a id="4735" href="Definition.Modality.html#718" class="Function Operator">·</a> <a id="4737" class="Symbol">(</a><a id="4738" href="Definition.Modality.html#4704" class="Bound">p</a> <a id="4740" href="Definition.Modality.html#4053" class="Field Operator">⊛</a> <a id="4742" href="Definition.Modality.html#4706" class="Bound">q</a> <a id="4744" href="Definition.Modality.html#4053" class="Field Operator">▷</a> <a id="4746" href="Definition.Modality.html#4708" class="Bound">r</a><a id="4747" class="Symbol">)</a>
  <a id="4751" href="Definition.Modality.html#4693" class="Function">⊛-ineq₁</a> <a id="4759" class="Symbol">=</a> <a id="4761" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="4767" href="Definition.Modality.html#4135" class="Field">⊛-ineq</a>

  <a id="Semiring-with-meet-and-star.⊛-ineq₂"></a><a id="4777" href="Definition.Modality.html#4777" class="Function">⊛-ineq₂</a> <a id="4785" class="Symbol">:</a> <a id="4787" class="Symbol">(</a><a id="4788" href="Definition.Modality.html#4788" class="Bound">p</a> <a id="4790" href="Definition.Modality.html#4790" class="Bound">q</a> <a id="4792" href="Definition.Modality.html#4792" class="Bound">r</a> <a id="4794" class="Symbol">:</a> <a id="4796" href="Definition.Modality.html#259" class="Bound">M</a><a id="4797" class="Symbol">)</a> <a id="4799" class="Symbol">→</a> <a id="4801" href="Definition.Modality.html#4788" class="Bound">p</a> <a id="4803" href="Definition.Modality.html#4053" class="Field Operator">⊛</a> <a id="4805" href="Definition.Modality.html#4790" class="Bound">q</a> <a id="4807" href="Definition.Modality.html#4053" class="Field Operator">▷</a> <a id="4809" href="Definition.Modality.html#4792" class="Bound">r</a> <a id="4811" href="Definition.Modality.html#1247" class="Function Operator">≤</a> <a id="4813" href="Definition.Modality.html#4788" class="Bound">p</a>
  <a id="4817" href="Definition.Modality.html#4777" class="Function">⊛-ineq₂</a> <a id="4825" class="Symbol">=</a> <a id="4827" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="4833" href="Definition.Modality.html#4135" class="Field">⊛-ineq</a>

  <a id="Semiring-with-meet-and-star.⊛-sub-distribˡ-∧"></a><a id="4843" href="Definition.Modality.html#4843" class="Function">⊛-sub-distribˡ-∧</a> <a id="4860" class="Symbol">:</a> <a id="4862" class="Symbol">(</a><a id="4863" href="Definition.Modality.html#4863" class="Bound">r</a> <a id="4865" class="Symbol">:</a> <a id="4867" href="Definition.Modality.html#259" class="Bound">M</a><a id="4868" class="Symbol">)</a> <a id="4870" class="Symbol">→</a> <a id="4872" class="Symbol">(</a><a id="4873" href="Definition.Modality.html#4053" class="Field Operator">_⊛_▷</a> <a id="4878" href="Definition.Modality.html#4863" class="Bound">r</a><a id="4879" class="Symbol">)</a> <a id="4881" href="Tools.Algebra.html#1080" class="Function Operator">SubDistributesOverˡ</a> <a id="4901" href="Definition.Modality.html#752" class="Function Operator">_∧_</a> <a id="4905" href="Tools.Algebra.html#1080" class="Function Operator">by</a> <a id="4908" href="Definition.Modality.html#1247" class="Function Operator">_≤_</a>
  <a id="4914" href="Definition.Modality.html#4843" class="Function">⊛-sub-distribˡ-∧</a> <a id="4931" href="Definition.Modality.html#4931" class="Bound">r</a> <a id="4933" class="Symbol">=</a> <a id="4935" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="4941" class="Symbol">(</a><a id="4942" href="Definition.Modality.html#4620" class="Field">⊛-sub-distrib-∧</a> <a id="4958" href="Definition.Modality.html#4931" class="Bound">r</a><a id="4959" class="Symbol">)</a>

  <a id="Semiring-with-meet-and-star.⊛-sub-distribʳ-∧"></a><a id="4964" href="Definition.Modality.html#4964" class="Function">⊛-sub-distribʳ-∧</a> <a id="4981" class="Symbol">:</a> <a id="4983" class="Symbol">(</a><a id="4984" href="Definition.Modality.html#4984" class="Bound">r</a> <a id="4986" class="Symbol">:</a> <a id="4988" href="Definition.Modality.html#259" class="Bound">M</a><a id="4989" class="Symbol">)</a> <a id="4991" class="Symbol">→</a> <a id="4993" class="Symbol">(</a><a id="4994" href="Definition.Modality.html#4053" class="Field Operator">_⊛_▷</a> <a id="4999" href="Definition.Modality.html#4984" class="Bound">r</a><a id="5000" class="Symbol">)</a> <a id="5002" href="Tools.Algebra.html#1225" class="Function Operator">SubDistributesOverʳ</a> <a id="5022" href="Definition.Modality.html#752" class="Function Operator">_∧_</a> <a id="5026" href="Tools.Algebra.html#1225" class="Function Operator">by</a> <a id="5029" href="Definition.Modality.html#1247" class="Function Operator">_≤_</a>
  <a id="5035" href="Definition.Modality.html#4964" class="Function">⊛-sub-distribʳ-∧</a> <a id="5052" href="Definition.Modality.html#5052" class="Bound">r</a> <a id="5054" class="Symbol">=</a> <a id="5056" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="5062" class="Symbol">(</a><a id="5063" href="Definition.Modality.html#4620" class="Field">⊛-sub-distrib-∧</a> <a id="5079" href="Definition.Modality.html#5052" class="Bound">r</a><a id="5080" class="Symbol">)</a>

<a id="5083" class="Comment">-- The modality structure</a>
<a id="5109" class="Keyword">record</a> <a id="Modality"></a><a id="5116" href="Definition.Modality.html#5116" class="Record">Modality</a> <a id="5125" class="Symbol">:</a> <a id="5127" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5131" class="Symbol">(</a><a id="5132" href="Agda.Primitive.html#774" class="Primitive">lsuc</a> <a id="5137" href="Definition.Modality.html#255" class="Bound">a</a><a id="5138" class="Symbol">)</a> <a id="5140" class="Keyword">where</a>
  <a id="5148" class="Keyword">field</a>
    <a id="Modality.semiring-with-meet-and-star"></a><a id="5158" href="Definition.Modality.html#5158" class="Field">semiring-with-meet-and-star</a> <a id="5186" class="Symbol">:</a> <a id="5188" href="Definition.Modality.html#3840" class="Record">Semiring-with-meet-and-star</a>
  <a id="5218" class="Keyword">open</a> <a id="5223" href="Definition.Modality.html#3840" class="Module">Semiring-with-meet-and-star</a> <a id="5251" href="Definition.Modality.html#5158" class="Field">semiring-with-meet-and-star</a> <a id="5279" class="Keyword">public</a>

  <a id="5289" class="Keyword">field</a>
    <a id="5299" class="Comment">-- &quot;Extra&quot; restrictions for certain term/type constructors.</a>
    <a id="Modality.restrictions"></a><a id="5363" href="Definition.Modality.html#5363" class="Field">restrictions</a> <a id="5376" class="Symbol">:</a> <a id="5378" href="Definition.Modality.Restrictions.html#723" class="Record">Restrictions</a>
  <a id="5393" class="Keyword">open</a> <a id="5398" href="Definition.Modality.Restrictions.html#723" class="Module">Restrictions</a> <a id="5411" href="Definition.Modality.html#5363" class="Field">restrictions</a> <a id="5424" class="Keyword">public</a>

  <a id="5434" class="Keyword">field</a>
    <a id="5444" class="Comment">-- If the mode 𝟘ᵐ is allowed, then the zero is well-behaved</a>
    <a id="Modality.𝟘-well-behaved"></a><a id="5508" href="Definition.Modality.html#5508" class="Field">𝟘-well-behaved</a> <a id="5523" class="Symbol">:</a> <a id="5525" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="5527" href="Definition.Modality.Restrictions.html#874" class="Function">𝟘ᵐ-allowed</a> <a id="5538" class="Symbol">→</a> <a id="5540" href="Definition.Modality.html#2705" class="Record">Has-well-behaved-zero</a> <a id="5562" href="Definition.Modality.html#3912" class="Function">semiring-with-meet</a>
</pre></body></html>