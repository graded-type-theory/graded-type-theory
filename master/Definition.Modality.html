<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Definition.Modality</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The modality structure.</a>
<a id="101" class="Comment">------------------------------------------------------------------------</a>

<a id="175" class="Keyword">open</a> <a id="180" class="Keyword">import</a> <a id="187" href="Tools.Level.html" class="Module">Tools.Level</a>
<a id="199" class="Keyword">open</a> <a id="204" class="Keyword">import</a> <a id="211" href="Tools.Relation.html" class="Module">Tools.Relation</a>

<a id="227" class="Keyword">module</a> <a id="234" href="Definition.Modality.html" class="Module">Definition.Modality</a> <a id="254" class="Symbol">{</a><a id="255" href="Definition.Modality.html#255" class="Bound">a</a><a id="256" class="Symbol">}</a> <a id="258" class="Symbol">(</a><a id="259" href="Definition.Modality.html#259" class="Bound">M</a> <a id="261" class="Symbol">:</a> <a id="263" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="267" href="Definition.Modality.html#255" class="Bound">a</a><a id="268" class="Symbol">)</a> <a id="270" class="Keyword">where</a>

<a id="277" class="Keyword">open</a> <a id="282" class="Keyword">import</a> <a id="289" href="Tools.Algebra.html" class="Module">Tools.Algebra</a> <a id="303" href="Definition.Modality.html#259" class="Bound">M</a>
<a id="305" class="Keyword">open</a> <a id="310" class="Keyword">import</a> <a id="317" href="Tools.Bool.html" class="Module">Tools.Bool</a> <a id="328" class="Keyword">using</a> <a id="334" class="Symbol">(</a><a id="335" href="Data.Bool.Base.html#1451" class="Function">T</a><a id="336" class="Symbol">)</a>
<a id="338" class="Keyword">open</a> <a id="343" class="Keyword">import</a> <a id="350" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="364" class="Keyword">open</a> <a id="369" class="Keyword">import</a> <a id="376" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="404" class="Keyword">open</a> <a id="409" class="Keyword">import</a> <a id="416" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="427" class="Keyword">open</a> <a id="432" class="Keyword">import</a> <a id="439" href="Definition.Mode.Restrictions.html" class="Module">Definition.Mode.Restrictions</a>

<a id="469" class="Comment">-- Semiring with meet</a>
<a id="491" class="Keyword">record</a> <a id="Semiring-with-meet"></a><a id="498" href="Definition.Modality.html#498" class="Record">Semiring-with-meet</a> <a id="517" class="Symbol">:</a> <a id="519" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="523" href="Definition.Modality.html#255" class="Bound">a</a> <a id="525" class="Keyword">where</a>
  <a id="533" class="Keyword">infixr</a> <a id="540" class="Number">40</a> <a id="543" href="Definition.Modality.html#684" class="Function Operator">_+_</a>
  <a id="549" class="Keyword">infixr</a> <a id="556" class="Number">40</a> <a id="559" href="Definition.Modality.html#746" class="Function Operator">_∧_</a>
  <a id="565" class="Keyword">infixr</a> <a id="572" class="Number">45</a> <a id="575" href="Definition.Modality.html#712" class="Function Operator">_·_</a>
  <a id="581" class="Keyword">infix</a>  <a id="588" class="Number">10</a> <a id="591" href="Definition.Modality.html#1241" class="Function Operator">_≤_</a> <a id="595" href="Definition.Modality.html#1328" class="Function Operator">_&lt;_</a>


  <a id="603" class="Keyword">field</a>
    <a id="613" class="Comment">-- A modality consists of a type M with three binary operations...</a>
    <a id="Semiring-with-meet._+_"></a><a id="684" href="Definition.Modality.html#684" class="Field Operator">_+_</a> <a id="688" class="Symbol">:</a> <a id="690" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="694" href="Definition.Modality.html#259" class="Bound">M</a> <a id="696" class="Comment">-- Addition</a>
    <a id="Semiring-with-meet._·_"></a><a id="712" href="Definition.Modality.html#712" class="Field Operator">_·_</a> <a id="716" class="Symbol">:</a> <a id="718" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="722" href="Definition.Modality.html#259" class="Bound">M</a> <a id="724" class="Comment">-- Multiplication</a>
    <a id="Semiring-with-meet._∧_"></a><a id="746" href="Definition.Modality.html#746" class="Field Operator">_∧_</a> <a id="750" class="Symbol">:</a> <a id="752" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="756" href="Definition.Modality.html#259" class="Bound">M</a> <a id="758" class="Comment">-- Meet</a>

    <a id="771" class="Comment">-- ... and two special elements</a>
    <a id="Semiring-with-meet.𝟘"></a><a id="807" href="Definition.Modality.html#807" class="Field">𝟘</a> <a id="809" class="Symbol">:</a> <a id="811" href="Definition.Modality.html#259" class="Bound">M</a>
    <a id="Semiring-with-meet.𝟙"></a><a id="817" href="Definition.Modality.html#817" class="Field">𝟙</a> <a id="819" class="Symbol">:</a> <a id="821" href="Definition.Modality.html#259" class="Bound">M</a>

    <a id="828" class="Comment">-- + and · form a semiring with 𝟙 as multiplicativ unit and 𝟘 as zero</a>
    <a id="Semiring-with-meet.+-·-Semiring"></a><a id="902" href="Definition.Modality.html#902" class="Field">+-·-Semiring</a>  <a id="916" class="Symbol">:</a> <a id="918" href="Algebra.Structures.html#11361" class="Record">IsSemiring</a> <a id="929" href="Definition.Modality.html#684" class="Field Operator">_+_</a> <a id="933" href="Definition.Modality.html#712" class="Field Operator">_·_</a> <a id="937" href="Definition.Modality.html#807" class="Field">𝟘</a> <a id="939" href="Definition.Modality.html#817" class="Field">𝟙</a>
    <a id="945" class="Comment">-- ∧ forms a semilattice</a>
    <a id="Semiring-with-meet.∧-Semilattice"></a><a id="974" href="Definition.Modality.html#974" class="Field">∧-Semilattice</a>       <a id="994" class="Symbol">:</a> <a id="996" href="Algebra.Structures.html#2390" class="Record">IsSemilattice</a> <a id="1010" href="Definition.Modality.html#746" class="Field Operator">_∧_</a>

    <a id="1019" class="Comment">-- Multiplation distributes over meet</a>
    <a id="Semiring-with-meet.·-distrib-∧"></a><a id="1061" href="Definition.Modality.html#1061" class="Field">·-distrib-∧</a>         <a id="1081" class="Symbol">:</a> <a id="1083" href="Definition.Modality.html#712" class="Field Operator">_·_</a> <a id="1087" href="Algebra.Definitions.html#2465" class="Function Operator">DistributesOver</a> <a id="1103" href="Definition.Modality.html#746" class="Field Operator">_∧_</a>
    <a id="1111" class="Comment">-- Addition distributes over meet</a>
    <a id="Semiring-with-meet.+-distrib-∧"></a><a id="1149" href="Definition.Modality.html#1149" class="Field">+-distrib-∧</a>         <a id="1169" class="Symbol">:</a> <a id="1171" href="Definition.Modality.html#684" class="Field Operator">_+_</a> <a id="1175" href="Algebra.Definitions.html#2465" class="Function Operator">DistributesOver</a> <a id="1191" href="Definition.Modality.html#746" class="Field Operator">_∧_</a>

  <a id="1198" class="Comment">-- Semilattice partial ordering relation</a>
  <a id="Semiring-with-meet._≤_"></a><a id="1241" href="Definition.Modality.html#1241" class="Function Operator">_≤_</a> <a id="1245" class="Symbol">:</a> <a id="1247" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="1251" href="Definition.Modality.html#259" class="Bound">M</a> <a id="1253" href="Definition.Modality.html#255" class="Bound">a</a>
  <a id="1257" href="Definition.Modality.html#1257" class="Bound">p</a> <a id="1259" href="Definition.Modality.html#1241" class="Function Operator">≤</a> <a id="1261" href="Definition.Modality.html#1261" class="Bound">q</a> <a id="1263" class="Symbol">=</a> <a id="1265" href="Definition.Modality.html#1257" class="Bound">p</a> <a id="1267" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="1269" class="Symbol">(</a><a id="1270" href="Definition.Modality.html#1257" class="Bound">p</a> <a id="1272" href="Definition.Modality.html#746" class="Field Operator">∧</a> <a id="1274" href="Definition.Modality.html#1261" class="Bound">q</a><a id="1275" class="Symbol">)</a>

  <a id="1280" class="Comment">-- A strict variant of the ordering relation.</a>
  <a id="Semiring-with-meet._&lt;_"></a><a id="1328" href="Definition.Modality.html#1328" class="Function Operator">_&lt;_</a> <a id="1332" class="Symbol">:</a> <a id="1334" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="1338" href="Definition.Modality.html#259" class="Bound">M</a> <a id="1340" href="Definition.Modality.html#255" class="Bound">a</a>
  <a id="1344" href="Definition.Modality.html#1344" class="Bound">p</a> <a id="1346" href="Definition.Modality.html#1328" class="Function Operator">&lt;</a> <a id="1348" href="Definition.Modality.html#1348" class="Bound">q</a> <a id="1350" class="Symbol">=</a> <a id="1352" href="Definition.Modality.html#1344" class="Bound">p</a> <a id="1354" href="Definition.Modality.html#1241" class="Function Operator">≤</a> <a id="1356" href="Definition.Modality.html#1348" class="Bound">q</a> <a id="1358" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1360" href="Definition.Modality.html#1344" class="Bound">p</a> <a id="1362" href="Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">≢</a> <a id="1364" href="Definition.Modality.html#1348" class="Bound">q</a>

  <a id="Semiring-with-meet.·-distribˡ-∧"></a><a id="1369" href="Definition.Modality.html#1369" class="Function">·-distribˡ-∧</a> <a id="1382" class="Symbol">:</a> <a id="1384" href="Definition.Modality.html#712" class="Field Operator">_·_</a> <a id="1388" href="Algebra.Definitions.html#2227" class="Function Operator">DistributesOverˡ</a> <a id="1405" href="Definition.Modality.html#746" class="Field Operator">_∧_</a>
  <a id="1411" href="Definition.Modality.html#1369" class="Function">·-distribˡ-∧</a> <a id="1424" class="Symbol">=</a> <a id="1426" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1432" href="Definition.Modality.html#1061" class="Field">·-distrib-∧</a>

  <a id="Semiring-with-meet.·-distribʳ-∧"></a><a id="1447" href="Definition.Modality.html#1447" class="Function">·-distribʳ-∧</a> <a id="1460" class="Symbol">:</a> <a id="1462" href="Definition.Modality.html#712" class="Field Operator">_·_</a> <a id="1466" href="Algebra.Definitions.html#2346" class="Function Operator">DistributesOverʳ</a> <a id="1483" href="Definition.Modality.html#746" class="Field Operator">_∧_</a>
  <a id="1489" href="Definition.Modality.html#1447" class="Function">·-distribʳ-∧</a> <a id="1502" class="Symbol">=</a> <a id="1504" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="1510" href="Definition.Modality.html#1061" class="Field">·-distrib-∧</a>

  <a id="Semiring-with-meet.+-distribˡ-∧"></a><a id="1525" href="Definition.Modality.html#1525" class="Function">+-distribˡ-∧</a> <a id="1538" class="Symbol">:</a> <a id="1540" href="Definition.Modality.html#684" class="Field Operator">_+_</a> <a id="1544" href="Algebra.Definitions.html#2227" class="Function Operator">DistributesOverˡ</a> <a id="1561" href="Definition.Modality.html#746" class="Field Operator">_∧_</a>
  <a id="1567" href="Definition.Modality.html#1525" class="Function">+-distribˡ-∧</a> <a id="1580" class="Symbol">=</a> <a id="1582" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1588" href="Definition.Modality.html#1149" class="Field">+-distrib-∧</a>

  <a id="Semiring-with-meet.+-distribʳ-∧"></a><a id="1603" href="Definition.Modality.html#1603" class="Function">+-distribʳ-∧</a> <a id="1616" class="Symbol">:</a> <a id="1618" href="Definition.Modality.html#684" class="Field Operator">_+_</a> <a id="1622" href="Algebra.Definitions.html#2346" class="Function Operator">DistributesOverʳ</a> <a id="1639" href="Definition.Modality.html#746" class="Field Operator">_∧_</a>
  <a id="1645" href="Definition.Modality.html#1603" class="Function">+-distribʳ-∧</a> <a id="1658" class="Symbol">=</a> <a id="1660" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="1666" href="Definition.Modality.html#1149" class="Field">+-distrib-∧</a>

  <a id="1681" class="Keyword">open</a> <a id="1686" href="Algebra.Structures.html#11361" class="Module">IsSemiring</a> <a id="1697" href="Definition.Modality.html#902" class="Field">+-·-Semiring</a> <a id="1710" class="Keyword">public</a>
    <a id="1721" class="Keyword">using</a> <a id="1727" class="Symbol">(</a>
            <a id="1741" href="Algebra.Structures.html#10462" class="Function">+-assoc</a><a id="1748" class="Symbol">;</a>
            <a id="1762" href="Algebra.Structures.html#10502" class="Function">+-cong</a><a id="1768" class="Symbol">;</a>
            <a id="1782" href="Algebra.Structures.html#10541" class="Function">+-congˡ</a><a id="1789" class="Symbol">;</a>
            <a id="1803" href="Algebra.Structures.html#10581" class="Function">+-congʳ</a><a id="1810" class="Symbol">;</a>
            <a id="1824" href="Algebra.Structures.html#10621" class="Function">+-identity</a><a id="1834" class="Symbol">;</a>
            <a id="1848" href="Algebra.Structures.html#10664" class="Function">+-identityˡ</a><a id="1859" class="Symbol">;</a>
            <a id="1873" href="Algebra.Structures.html#10708" class="Function">+-identityʳ</a><a id="1884" class="Symbol">;</a>
            <a id="1898" href="Algebra.Structures.html#10752" class="Function">+-comm</a>
          <a id="1915" class="Symbol">)</a>
    <a id="1921" class="Keyword">renaming</a> <a id="1930" class="Symbol">(</a>
              <a id="1946" href="Algebra.Structures.html#11088" class="Function">*-assoc</a> <a id="1954" class="Symbol">to</a> <a id="1957" class="Function">·-assoc</a><a id="1964" class="Symbol">;</a>
              <a id="1980" href="Algebra.Structures.html#11117" class="Function">*-cong</a> <a id="1987" class="Symbol">to</a> <a id="1990" class="Function">·-cong</a><a id="1996" class="Symbol">;</a>
              <a id="2012" href="Algebra.Structures.html#11145" class="Function">*-congˡ</a> <a id="2020" class="Symbol">to</a> <a id="2023" class="Function">·-congˡ</a><a id="2030" class="Symbol">;</a>
              <a id="2046" href="Algebra.Structures.html#11174" class="Function">*-congʳ</a> <a id="2054" class="Symbol">to</a> <a id="2057" class="Function">·-congʳ</a><a id="2064" class="Symbol">;</a>
              <a id="2080" href="Algebra.Structures.html#11203" class="Function">*-identity</a> <a id="2091" class="Symbol">to</a> <a id="2094" class="Function">·-identity</a><a id="2104" class="Symbol">;</a>
              <a id="2120" href="Algebra.Structures.html#11235" class="Function">*-identityˡ</a> <a id="2132" class="Symbol">to</a> <a id="2135" class="Function">·-identityˡ</a><a id="2146" class="Symbol">;</a>
              <a id="2162" href="Algebra.Structures.html#11268" class="Function">*-identityʳ</a> <a id="2174" class="Symbol">to</a> <a id="2177" class="Function">·-identityʳ</a><a id="2188" class="Symbol">;</a>

              <a id="2205" href="Algebra.Structures.html#10192" class="Function">distrib</a> <a id="2213" class="Symbol">to</a> <a id="2216" class="Function">·-distrib-+</a><a id="2227" class="Symbol">;</a>
              <a id="2243" href="Algebra.Structures.html#10239" class="Function">distribˡ</a> <a id="2252" class="Symbol">to</a> <a id="2255" class="Function">·-distribˡ-+</a><a id="2267" class="Symbol">;</a>
              <a id="2283" href="Algebra.Structures.html#10301" class="Function">distribʳ</a> <a id="2292" class="Symbol">to</a> <a id="2295" class="Function">·-distribʳ-+</a><a id="2307" class="Symbol">;</a>
              <a id="2323" href="Algebra.Structures.html#11520" class="Field">zero</a> <a id="2328" class="Symbol">to</a> <a id="2331" class="Field">·-zero</a><a id="2337" class="Symbol">;</a>
              <a id="2353" href="Algebra.Structures.html#8698" class="Function">zeroˡ</a> <a id="2359" class="Symbol">to</a> <a id="2362" class="Function">·-zeroˡ</a><a id="2369" class="Symbol">;</a>
              <a id="2385" href="Algebra.Structures.html#8744" class="Function">zeroʳ</a> <a id="2391" class="Symbol">to</a> <a id="2394" class="Function">·-zeroʳ</a><a id="2401" class="Symbol">;</a>

              <a id="2418" href="Algebra.Structures.html#1172" class="Function">isEquivalence</a> <a id="2432" class="Symbol">to</a> <a id="2435" class="Function">≈-equivalence</a>
             <a id="2462" class="Symbol">)</a>

  <a id="2467" class="Keyword">open</a> <a id="2472" href="Algebra.Structures.html#2390" class="Module">IsSemilattice</a> <a id="2486" href="Definition.Modality.html#974" class="Field">∧-Semilattice</a> <a id="2500" class="Keyword">public</a>
    <a id="2511" class="Keyword">using</a> <a id="2517" class="Symbol">(</a><a id="2518" href="Algebra.Structures.html#2546" class="Function">∧-cong</a><a id="2524" class="Symbol">;</a> <a id="2526" href="Algebra.Structures.html#2565" class="Function">∧-congˡ</a><a id="2533" class="Symbol">;</a> <a id="2535" href="Algebra.Structures.html#2585" class="Function">∧-congʳ</a><a id="2542" class="Symbol">)</a>
    <a id="2548" class="Keyword">renaming</a> <a id="2557" class="Symbol">(</a><a id="2558" href="Algebra.Structures.html#2470" class="Field">comm</a> <a id="2563" class="Symbol">to</a> <a id="2566" class="Field">∧-comm</a><a id="2572" class="Symbol">;</a>
              <a id="2588" href="Algebra.Structures.html#2014" class="Function">idem</a> <a id="2593" class="Symbol">to</a> <a id="2596" class="Function">∧-idem</a><a id="2602" class="Symbol">;</a>
              <a id="2618" href="Algebra.Structures.html#1867" class="Function">assoc</a> <a id="2624" class="Symbol">to</a> <a id="2627" class="Function">∧-assoc</a>
             <a id="2648" class="Symbol">)</a>

<a id="2651" class="Comment">-- Meet-Semirings with well-behaved zero</a>
<a id="2692" class="Keyword">record</a> <a id="Has-well-behaved-zero"></a><a id="2699" href="Definition.Modality.html#2699" class="Record">Has-well-behaved-zero</a> <a id="2721" class="Symbol">(</a><a id="2722" href="Definition.Modality.html#2722" class="Bound">𝕄</a> <a id="2724" class="Symbol">:</a> <a id="2726" href="Definition.Modality.html#498" class="Record">Semiring-with-meet</a><a id="2744" class="Symbol">)</a> <a id="2746" class="Symbol">:</a> <a id="2748" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2752" href="Definition.Modality.html#255" class="Bound">a</a> <a id="2754" class="Keyword">where</a>
  <a id="2762" class="Keyword">open</a> <a id="2767" href="Definition.Modality.html#498" class="Module">Semiring-with-meet</a> <a id="2786" href="Definition.Modality.html#2722" class="Bound">𝕄</a>
  <a id="2790" class="Keyword">field</a>
    <a id="2800" class="Comment">-- 𝟙 is not equivalent to 𝟘.</a>
    <a id="Has-well-behaved-zero.𝟙≉𝟘"></a><a id="2833" href="Definition.Modality.html#2833" class="Field">𝟙≉𝟘</a> <a id="2837" class="Symbol">:</a> <a id="2839" href="Definition.Modality.html#817" class="Function">𝟙</a> <a id="2841" href="Relation.Binary.Bundles.html#960" class="Function Operator">≉</a> <a id="2843" href="Definition.Modality.html#807" class="Function">𝟘</a>

    <a id="2850" class="Comment">-- It is decidable whether a value is equivalent to 𝟘.</a>
    <a id="Has-well-behaved-zero.is-𝟘?"></a><a id="2909" href="Definition.Modality.html#2909" class="Field">is-𝟘?</a> <a id="2915" class="Symbol">:</a> <a id="2917" class="Symbol">(</a><a id="2918" href="Definition.Modality.html#2918" class="Bound">p</a> <a id="2920" class="Symbol">:</a> <a id="2922" href="Definition.Modality.html#259" class="Bound">M</a><a id="2923" class="Symbol">)</a> <a id="2925" class="Symbol">→</a> <a id="2927" href="Relation.Nullary.html#1511" class="Record">Dec</a> <a id="2931" class="Symbol">(</a><a id="2932" href="Definition.Modality.html#2918" class="Bound">p</a> <a id="2934" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="2936" href="Definition.Modality.html#807" class="Function">𝟘</a><a id="2937" class="Symbol">)</a>

    <a id="2944" class="Comment">-- The following two assumptions are based on assumptions from Bob</a>
    <a id="3015" class="Comment">-- Atkey&#39;s &quot;Syntax and Semantics of Quantitative Type Theory&quot;.</a>

    <a id="3083" class="Comment">-- The semiring has the zero-product property:</a>
    <a id="3134" class="Comment">-- if p · q is 𝟘, then either p is 𝟘 or q is 𝟘.</a>
    <a id="Has-well-behaved-zero.zero-product"></a><a id="3186" href="Definition.Modality.html#3186" class="Field">zero-product</a> <a id="3199" class="Symbol">:</a> <a id="3201" class="Symbol">{</a><a id="3202" href="Definition.Modality.html#3202" class="Bound">p</a> <a id="3204" href="Definition.Modality.html#3204" class="Bound">q</a> <a id="3206" class="Symbol">:</a> <a id="3208" href="Definition.Modality.html#259" class="Bound">M</a><a id="3209" class="Symbol">}</a> <a id="3211" class="Symbol">→</a> <a id="3213" href="Definition.Modality.html#3202" class="Bound">p</a> <a id="3215" href="Definition.Modality.html#712" class="Function Operator">·</a> <a id="3217" href="Definition.Modality.html#3204" class="Bound">q</a> <a id="3219" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3221" href="Definition.Modality.html#807" class="Function">𝟘</a> <a id="3223" class="Symbol">→</a> <a id="3225" class="Symbol">(</a><a id="3226" href="Definition.Modality.html#3202" class="Bound">p</a> <a id="3228" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3230" href="Definition.Modality.html#807" class="Function">𝟘</a><a id="3231" class="Symbol">)</a> <a id="3233" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="3235" class="Symbol">(</a><a id="3236" href="Definition.Modality.html#3204" class="Bound">q</a> <a id="3238" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3240" href="Definition.Modality.html#807" class="Function">𝟘</a><a id="3241" class="Symbol">)</a>

    <a id="3248" class="Comment">-- The semiring is positive:</a>
    <a id="3281" class="Comment">-- if p + q is 𝟘, then p and q are 𝟘. (The statement that p + q ≈ 𝟘</a>
    <a id="3353" class="Comment">-- implies q ≈ 𝟘 follows from the one below, see</a>
    <a id="3406" class="Comment">-- Definition.Modality.Properties.Has-well-behaved-zero.+-positiveʳ.)</a>
    <a id="Has-well-behaved-zero.+-positiveˡ"></a><a id="3480" href="Definition.Modality.html#3480" class="Field">+-positiveˡ</a> <a id="3492" class="Symbol">:</a> <a id="3494" class="Symbol">{</a><a id="3495" href="Definition.Modality.html#3495" class="Bound">p</a> <a id="3497" href="Definition.Modality.html#3497" class="Bound">q</a> <a id="3499" class="Symbol">:</a> <a id="3501" href="Definition.Modality.html#259" class="Bound">M</a><a id="3502" class="Symbol">}</a> <a id="3504" class="Symbol">→</a> <a id="3506" href="Definition.Modality.html#3495" class="Bound">p</a> <a id="3508" href="Definition.Modality.html#684" class="Function Operator">+</a> <a id="3510" href="Definition.Modality.html#3497" class="Bound">q</a> <a id="3512" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3514" href="Definition.Modality.html#807" class="Function">𝟘</a> <a id="3516" class="Symbol">→</a> <a id="3518" href="Definition.Modality.html#3495" class="Bound">p</a> <a id="3520" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3522" href="Definition.Modality.html#807" class="Function">𝟘</a>

    <a id="3529" class="Comment">-- If p ∧ q is equal to 𝟘, then p ≈ 𝟘.  (The statement that p ∧ q ≈ 𝟘</a>
    <a id="3603" class="Comment">-- implies q ≈ 𝟘 follows from the one below, see</a>
    <a id="3656" class="Comment">-- Definition.Modality.Properties.Has-well-behaved-zero.∧-positiveʳ.)</a>
    <a id="Has-well-behaved-zero.∧-positiveˡ"></a><a id="3730" href="Definition.Modality.html#3730" class="Field">∧-positiveˡ</a> <a id="3742" class="Symbol">:</a> <a id="3744" class="Symbol">{</a><a id="3745" href="Definition.Modality.html#3745" class="Bound">p</a> <a id="3747" href="Definition.Modality.html#3747" class="Bound">q</a> <a id="3749" class="Symbol">:</a> <a id="3751" href="Definition.Modality.html#259" class="Bound">M</a><a id="3752" class="Symbol">}</a> <a id="3754" class="Symbol">→</a> <a id="3756" href="Definition.Modality.html#3745" class="Bound">p</a> <a id="3758" href="Definition.Modality.html#746" class="Function Operator">∧</a> <a id="3760" href="Definition.Modality.html#3747" class="Bound">q</a> <a id="3762" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3764" href="Definition.Modality.html#807" class="Function">𝟘</a> <a id="3766" class="Symbol">→</a> <a id="3768" href="Definition.Modality.html#3745" class="Bound">p</a> <a id="3770" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3772" href="Definition.Modality.html#807" class="Function">𝟘</a>

<a id="3775" class="Comment">-- Semirings with meet and a tertiary star operator</a>
<a id="3827" class="Keyword">record</a> <a id="Semiring-with-meet-and-star"></a><a id="3834" href="Definition.Modality.html#3834" class="Record">Semiring-with-meet-and-star</a> <a id="3862" class="Symbol">:</a> <a id="3864" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3868" href="Definition.Modality.html#255" class="Bound">a</a> <a id="3870" class="Keyword">where</a>
  <a id="3878" class="Keyword">infix</a>  <a id="3885" class="Number">50</a> <a id="3888" href="Definition.Modality.html#4047" class="Field Operator">_⊛_▷_</a>
  <a id="3896" class="Keyword">field</a>
    <a id="Semiring-with-meet-and-star.semiring-with-meet"></a><a id="3906" href="Definition.Modality.html#3906" class="Field">semiring-with-meet</a> <a id="3925" class="Symbol">:</a> <a id="3927" href="Definition.Modality.html#498" class="Record">Semiring-with-meet</a>
  <a id="3948" class="Keyword">open</a> <a id="3953" href="Definition.Modality.html#498" class="Module">Semiring-with-meet</a> <a id="3972" href="Definition.Modality.html#3906" class="Field">semiring-with-meet</a> <a id="3991" class="Keyword">public</a>

  <a id="4001" class="Keyword">field</a>
    <a id="4011" class="Comment">-- The tertiary &quot;star&quot;-operator</a>
    <a id="Semiring-with-meet-and-star._⊛_▷_"></a><a id="4047" href="Definition.Modality.html#4047" class="Field Operator">_⊛_▷_</a> <a id="4053" class="Symbol">:</a> <a id="4055" href="Tools.Algebra.html#1006" class="Function">Op₃</a> <a id="4059" href="Definition.Modality.html#259" class="Bound">M</a>

    <a id="4066" class="Comment">-- ⊛ is a solution to the following system of inequalities</a>
    <a id="Semiring-with-meet-and-star.⊛-ineq"></a><a id="4129" href="Definition.Modality.html#4129" class="Field">⊛-ineq</a> <a id="4136" class="Symbol">:</a> <a id="4138" class="Symbol">((</a><a id="4140" href="Definition.Modality.html#4140" class="Bound">p</a> <a id="4142" href="Definition.Modality.html#4142" class="Bound">q</a> <a id="4144" href="Definition.Modality.html#4144" class="Bound">r</a> <a id="4146" class="Symbol">:</a> <a id="4148" href="Definition.Modality.html#259" class="Bound">M</a><a id="4149" class="Symbol">)</a> <a id="4151" class="Symbol">→</a> <a id="4153" href="Definition.Modality.html#4140" class="Bound">p</a> <a id="4155" href="Definition.Modality.html#4047" class="Field Operator">⊛</a> <a id="4157" href="Definition.Modality.html#4142" class="Bound">q</a> <a id="4159" href="Definition.Modality.html#4047" class="Field Operator">▷</a> <a id="4161" href="Definition.Modality.html#4144" class="Bound">r</a> <a id="4163" href="Definition.Modality.html#1241" class="Function Operator">≤</a> <a id="4165" href="Definition.Modality.html#4142" class="Bound">q</a> <a id="4167" href="Definition.Modality.html#684" class="Function Operator">+</a> <a id="4169" href="Definition.Modality.html#4144" class="Bound">r</a> <a id="4171" href="Definition.Modality.html#712" class="Function Operator">·</a> <a id="4173" href="Definition.Modality.html#4140" class="Bound">p</a> <a id="4175" href="Definition.Modality.html#4047" class="Field Operator">⊛</a> <a id="4177" href="Definition.Modality.html#4142" class="Bound">q</a> <a id="4179" href="Definition.Modality.html#4047" class="Field Operator">▷</a> <a id="4181" href="Definition.Modality.html#4144" class="Bound">r</a><a id="4182" class="Symbol">)</a>
           <a id="4195" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4197" class="Symbol">((</a><a id="4199" href="Definition.Modality.html#4199" class="Bound">p</a> <a id="4201" href="Definition.Modality.html#4201" class="Bound">q</a> <a id="4203" href="Definition.Modality.html#4203" class="Bound">r</a> <a id="4205" class="Symbol">:</a> <a id="4207" href="Definition.Modality.html#259" class="Bound">M</a><a id="4208" class="Symbol">)</a> <a id="4210" class="Symbol">→</a> <a id="4212" href="Definition.Modality.html#4199" class="Bound">p</a> <a id="4214" href="Definition.Modality.html#4047" class="Field Operator">⊛</a> <a id="4216" href="Definition.Modality.html#4201" class="Bound">q</a> <a id="4218" href="Definition.Modality.html#4047" class="Field Operator">▷</a> <a id="4220" href="Definition.Modality.html#4203" class="Bound">r</a> <a id="4222" href="Definition.Modality.html#1241" class="Function Operator">≤</a> <a id="4224" href="Definition.Modality.html#4199" class="Bound">p</a><a id="4225" class="Symbol">)</a>

    <a id="4232" class="Comment">-- addition is sub-interchangeable over ⊛ w.r.t the first two arguments</a>
    <a id="Semiring-with-meet-and-star.+-sub-interchangeable-⊛"></a><a id="4308" href="Definition.Modality.html#4308" class="Field">+-sub-interchangeable-⊛</a> <a id="4332" class="Symbol">:</a> <a id="4334" class="Symbol">(</a><a id="4335" href="Definition.Modality.html#4335" class="Bound">r</a> <a id="4337" class="Symbol">:</a> <a id="4339" href="Definition.Modality.html#259" class="Bound">M</a><a id="4340" class="Symbol">)</a> <a id="4342" class="Symbol">→</a> <a id="4344" href="Definition.Modality.html#684" class="Function Operator">_+_</a> <a id="4348" href="Tools.Algebra.html#1544" class="Function Operator">SubInterchangeable</a> <a id="4367" class="Symbol">(</a><a id="4368" href="Definition.Modality.html#4047" class="Field Operator">_⊛_▷</a> <a id="4373" href="Definition.Modality.html#4335" class="Bound">r</a><a id="4374" class="Symbol">)</a> <a id="4376" href="Tools.Algebra.html#1544" class="Function Operator">by</a> <a id="4379" href="Definition.Modality.html#1241" class="Function Operator">_≤_</a>
    <a id="4387" class="Comment">-- multiplication is right sub-distributive over ⊛ w.r.t the first two arguments</a>
    <a id="Semiring-with-meet-and-star.·-sub-distribʳ-⊛"></a><a id="4472" href="Definition.Modality.html#4472" class="Field">·-sub-distribʳ-⊛</a> <a id="4489" class="Symbol">:</a> <a id="4491" class="Symbol">(</a><a id="4492" href="Definition.Modality.html#4492" class="Bound">r</a> <a id="4494" class="Symbol">:</a> <a id="4496" href="Definition.Modality.html#259" class="Bound">M</a><a id="4497" class="Symbol">)</a> <a id="4499" class="Symbol">→</a> <a id="4501" href="Definition.Modality.html#712" class="Function Operator">_·_</a> <a id="4505" href="Tools.Algebra.html#1225" class="Function Operator">SubDistributesOverʳ</a> <a id="4525" class="Symbol">(</a><a id="4526" href="Definition.Modality.html#4047" class="Field Operator">_⊛_▷</a> <a id="4531" href="Definition.Modality.html#4492" class="Bound">r</a><a id="4532" class="Symbol">)</a> <a id="4534" href="Tools.Algebra.html#1225" class="Function Operator">by</a> <a id="4537" href="Definition.Modality.html#1241" class="Function Operator">_≤_</a>
    <a id="4545" class="Comment">-- ⊛ is sub-distributive over meet w.r.t the first two arguments</a>
    <a id="Semiring-with-meet-and-star.⊛-sub-distrib-∧"></a><a id="4614" href="Definition.Modality.html#4614" class="Field">⊛-sub-distrib-∧</a>    <a id="4633" class="Symbol">:</a> <a id="4635" class="Symbol">(</a><a id="4636" href="Definition.Modality.html#4636" class="Bound">r</a> <a id="4638" class="Symbol">:</a> <a id="4640" href="Definition.Modality.html#259" class="Bound">M</a><a id="4641" class="Symbol">)</a> <a id="4643" class="Symbol">→</a> <a id="4645" class="Symbol">(</a><a id="4646" href="Definition.Modality.html#4047" class="Field Operator">_⊛_▷</a> <a id="4651" href="Definition.Modality.html#4636" class="Bound">r</a><a id="4652" class="Symbol">)</a> <a id="4654" href="Tools.Algebra.html#1370" class="Function Operator">SubDistributesOver</a> <a id="4673" href="Definition.Modality.html#746" class="Function Operator">_∧_</a> <a id="4677" href="Tools.Algebra.html#1370" class="Function Operator">by</a> <a id="4680" href="Definition.Modality.html#1241" class="Function Operator">_≤_</a>

  <a id="Semiring-with-meet-and-star.⊛-ineq₁"></a><a id="4687" href="Definition.Modality.html#4687" class="Function">⊛-ineq₁</a> <a id="4695" class="Symbol">:</a> <a id="4697" class="Symbol">(</a><a id="4698" href="Definition.Modality.html#4698" class="Bound">p</a> <a id="4700" href="Definition.Modality.html#4700" class="Bound">q</a> <a id="4702" href="Definition.Modality.html#4702" class="Bound">r</a> <a id="4704" class="Symbol">:</a> <a id="4706" href="Definition.Modality.html#259" class="Bound">M</a><a id="4707" class="Symbol">)</a> <a id="4709" class="Symbol">→</a> <a id="4711" href="Definition.Modality.html#4698" class="Bound">p</a> <a id="4713" href="Definition.Modality.html#4047" class="Field Operator">⊛</a> <a id="4715" href="Definition.Modality.html#4700" class="Bound">q</a> <a id="4717" href="Definition.Modality.html#4047" class="Field Operator">▷</a> <a id="4719" href="Definition.Modality.html#4702" class="Bound">r</a> <a id="4721" href="Definition.Modality.html#1241" class="Function Operator">≤</a> <a id="4723" href="Definition.Modality.html#4700" class="Bound">q</a> <a id="4725" href="Definition.Modality.html#684" class="Function Operator">+</a> <a id="4727" href="Definition.Modality.html#4702" class="Bound">r</a> <a id="4729" href="Definition.Modality.html#712" class="Function Operator">·</a> <a id="4731" class="Symbol">(</a><a id="4732" href="Definition.Modality.html#4698" class="Bound">p</a> <a id="4734" href="Definition.Modality.html#4047" class="Field Operator">⊛</a> <a id="4736" href="Definition.Modality.html#4700" class="Bound">q</a> <a id="4738" href="Definition.Modality.html#4047" class="Field Operator">▷</a> <a id="4740" href="Definition.Modality.html#4702" class="Bound">r</a><a id="4741" class="Symbol">)</a>
  <a id="4745" href="Definition.Modality.html#4687" class="Function">⊛-ineq₁</a> <a id="4753" class="Symbol">=</a> <a id="4755" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="4761" href="Definition.Modality.html#4129" class="Field">⊛-ineq</a>

  <a id="Semiring-with-meet-and-star.⊛-ineq₂"></a><a id="4771" href="Definition.Modality.html#4771" class="Function">⊛-ineq₂</a> <a id="4779" class="Symbol">:</a> <a id="4781" class="Symbol">(</a><a id="4782" href="Definition.Modality.html#4782" class="Bound">p</a> <a id="4784" href="Definition.Modality.html#4784" class="Bound">q</a> <a id="4786" href="Definition.Modality.html#4786" class="Bound">r</a> <a id="4788" class="Symbol">:</a> <a id="4790" href="Definition.Modality.html#259" class="Bound">M</a><a id="4791" class="Symbol">)</a> <a id="4793" class="Symbol">→</a> <a id="4795" href="Definition.Modality.html#4782" class="Bound">p</a> <a id="4797" href="Definition.Modality.html#4047" class="Field Operator">⊛</a> <a id="4799" href="Definition.Modality.html#4784" class="Bound">q</a> <a id="4801" href="Definition.Modality.html#4047" class="Field Operator">▷</a> <a id="4803" href="Definition.Modality.html#4786" class="Bound">r</a> <a id="4805" href="Definition.Modality.html#1241" class="Function Operator">≤</a> <a id="4807" href="Definition.Modality.html#4782" class="Bound">p</a>
  <a id="4811" href="Definition.Modality.html#4771" class="Function">⊛-ineq₂</a> <a id="4819" class="Symbol">=</a> <a id="4821" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="4827" href="Definition.Modality.html#4129" class="Field">⊛-ineq</a>

  <a id="Semiring-with-meet-and-star.⊛-sub-distribˡ-∧"></a><a id="4837" href="Definition.Modality.html#4837" class="Function">⊛-sub-distribˡ-∧</a> <a id="4854" class="Symbol">:</a> <a id="4856" class="Symbol">(</a><a id="4857" href="Definition.Modality.html#4857" class="Bound">r</a> <a id="4859" class="Symbol">:</a> <a id="4861" href="Definition.Modality.html#259" class="Bound">M</a><a id="4862" class="Symbol">)</a> <a id="4864" class="Symbol">→</a> <a id="4866" class="Symbol">(</a><a id="4867" href="Definition.Modality.html#4047" class="Field Operator">_⊛_▷</a> <a id="4872" href="Definition.Modality.html#4857" class="Bound">r</a><a id="4873" class="Symbol">)</a> <a id="4875" href="Tools.Algebra.html#1080" class="Function Operator">SubDistributesOverˡ</a> <a id="4895" href="Definition.Modality.html#746" class="Function Operator">_∧_</a> <a id="4899" href="Tools.Algebra.html#1080" class="Function Operator">by</a> <a id="4902" href="Definition.Modality.html#1241" class="Function Operator">_≤_</a>
  <a id="4908" href="Definition.Modality.html#4837" class="Function">⊛-sub-distribˡ-∧</a> <a id="4925" href="Definition.Modality.html#4925" class="Bound">r</a> <a id="4927" class="Symbol">=</a> <a id="4929" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="4935" class="Symbol">(</a><a id="4936" href="Definition.Modality.html#4614" class="Field">⊛-sub-distrib-∧</a> <a id="4952" href="Definition.Modality.html#4925" class="Bound">r</a><a id="4953" class="Symbol">)</a>

  <a id="Semiring-with-meet-and-star.⊛-sub-distribʳ-∧"></a><a id="4958" href="Definition.Modality.html#4958" class="Function">⊛-sub-distribʳ-∧</a> <a id="4975" class="Symbol">:</a> <a id="4977" class="Symbol">(</a><a id="4978" href="Definition.Modality.html#4978" class="Bound">r</a> <a id="4980" class="Symbol">:</a> <a id="4982" href="Definition.Modality.html#259" class="Bound">M</a><a id="4983" class="Symbol">)</a> <a id="4985" class="Symbol">→</a> <a id="4987" class="Symbol">(</a><a id="4988" href="Definition.Modality.html#4047" class="Field Operator">_⊛_▷</a> <a id="4993" href="Definition.Modality.html#4978" class="Bound">r</a><a id="4994" class="Symbol">)</a> <a id="4996" href="Tools.Algebra.html#1225" class="Function Operator">SubDistributesOverʳ</a> <a id="5016" href="Definition.Modality.html#746" class="Function Operator">_∧_</a> <a id="5020" href="Tools.Algebra.html#1225" class="Function Operator">by</a> <a id="5023" href="Definition.Modality.html#1241" class="Function Operator">_≤_</a>
  <a id="5029" href="Definition.Modality.html#4958" class="Function">⊛-sub-distribʳ-∧</a> <a id="5046" href="Definition.Modality.html#5046" class="Bound">r</a> <a id="5048" class="Symbol">=</a> <a id="5050" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="5056" class="Symbol">(</a><a id="5057" href="Definition.Modality.html#4614" class="Field">⊛-sub-distrib-∧</a> <a id="5073" href="Definition.Modality.html#5046" class="Bound">r</a><a id="5074" class="Symbol">)</a>

<a id="5077" class="Comment">-- The modality structure</a>
<a id="5103" class="Keyword">record</a> <a id="Modality"></a><a id="5110" href="Definition.Modality.html#5110" class="Record">Modality</a> <a id="5119" class="Symbol">:</a> <a id="5121" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5125" class="Symbol">(</a><a id="5126" href="Agda.Primitive.html#774" class="Primitive">lsuc</a> <a id="5131" href="Definition.Modality.html#255" class="Bound">a</a><a id="5132" class="Symbol">)</a> <a id="5134" class="Keyword">where</a>
  <a id="5142" class="Keyword">field</a>
    <a id="Modality.semiring-with-meet-and-star"></a><a id="5152" href="Definition.Modality.html#5152" class="Field">semiring-with-meet-and-star</a> <a id="5180" class="Symbol">:</a> <a id="5182" href="Definition.Modality.html#3834" class="Record">Semiring-with-meet-and-star</a>
  <a id="5212" class="Keyword">open</a> <a id="5217" href="Definition.Modality.html#3834" class="Module">Semiring-with-meet-and-star</a> <a id="5245" href="Definition.Modality.html#5152" class="Field">semiring-with-meet-and-star</a> <a id="5273" class="Keyword">public</a>

  <a id="5283" class="Keyword">field</a>
    <a id="5293" class="Comment">-- Restrictions on modes.</a>
    <a id="Modality.mode-restrictions"></a><a id="5323" href="Definition.Modality.html#5323" class="Field">mode-restrictions</a> <a id="5341" class="Symbol">:</a> <a id="5343" href="Definition.Mode.Restrictions.html#274" class="Record">Mode-restrictions</a>
  <a id="5363" class="Keyword">open</a> <a id="5368" href="Definition.Mode.Restrictions.html#274" class="Module">Mode-restrictions</a> <a id="5386" href="Definition.Modality.html#5323" class="Field">mode-restrictions</a> <a id="5404" class="Keyword">public</a>

  <a id="5414" class="Keyword">field</a>
    <a id="5424" class="Comment">-- If the mode 𝟘ᵐ is allowed, then the zero is well-behaved</a>
    <a id="Modality.𝟘-well-behaved"></a><a id="5488" href="Definition.Modality.html#5488" class="Field">𝟘-well-behaved</a> <a id="5503" class="Symbol">:</a> <a id="5505" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="5507" href="Definition.Mode.Restrictions.html#375" class="Function">𝟘ᵐ-allowed</a> <a id="5518" class="Symbol">→</a> <a id="5520" href="Definition.Modality.html#2699" class="Record">Has-well-behaved-zero</a> <a id="5542" href="Definition.Modality.html#3906" class="Function">semiring-with-meet</a>
</pre></body></html>