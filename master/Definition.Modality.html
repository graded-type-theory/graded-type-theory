<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Definition.Modality</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The modality structure.</a>
<a id="101" class="Comment">------------------------------------------------------------------------</a>

<a id="175" class="Keyword">open</a> <a id="180" class="Keyword">import</a> <a id="187" href="Tools.Level.html" class="Module">Tools.Level</a>
<a id="199" class="Keyword">open</a> <a id="204" class="Keyword">import</a> <a id="211" href="Tools.Relation.html" class="Module">Tools.Relation</a>

<a id="227" class="Keyword">module</a> <a id="234" href="Definition.Modality.html" class="Module">Definition.Modality</a> <a id="254" class="Symbol">{</a><a id="255" href="Definition.Modality.html#255" class="Bound">a</a><a id="256" class="Symbol">}</a> <a id="258" class="Symbol">(</a><a id="259" href="Definition.Modality.html#259" class="Bound">M</a> <a id="261" class="Symbol">:</a> <a id="263" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="267" href="Definition.Modality.html#255" class="Bound">a</a><a id="268" class="Symbol">)</a> <a id="270" class="Keyword">where</a>

<a id="277" class="Keyword">open</a> <a id="282" class="Keyword">import</a> <a id="289" href="Tools.Algebra.html" class="Module">Tools.Algebra</a> <a id="303" href="Definition.Modality.html#259" class="Bound">M</a>
<a id="305" class="Keyword">open</a> <a id="310" class="Keyword">import</a> <a id="317" href="Tools.Bool.html" class="Module">Tools.Bool</a> <a id="328" class="Keyword">using</a> <a id="334" class="Symbol">(</a><a id="335" href="Data.Bool.Base.html#1451" class="Function">T</a><a id="336" class="Symbol">)</a>
<a id="338" class="Keyword">open</a> <a id="343" class="Keyword">import</a> <a id="350" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="364" class="Keyword">open</a> <a id="369" class="Keyword">import</a> <a id="376" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="404" class="Keyword">open</a> <a id="409" class="Keyword">import</a> <a id="416" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="427" class="Keyword">open</a> <a id="432" class="Keyword">import</a> <a id="439" href="Definition.Mode.Restrictions.html" class="Module">Definition.Mode.Restrictions</a>

<a id="469" class="Comment">-- Semiring with meet</a>
<a id="491" class="Keyword">record</a> <a id="Semiring-with-meet"></a><a id="498" href="Definition.Modality.html#498" class="Record">Semiring-with-meet</a> <a id="517" class="Symbol">:</a> <a id="519" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="523" href="Definition.Modality.html#255" class="Bound">a</a> <a id="525" class="Keyword">where</a>
  <a id="533" class="Keyword">infixr</a> <a id="540" class="Number">40</a> <a id="543" href="Definition.Modality.html#694" class="Function Operator">_+_</a>
  <a id="549" class="Keyword">infixr</a> <a id="556" class="Number">40</a> <a id="559" href="Definition.Modality.html#756" class="Function Operator">_∧_</a>
  <a id="565" class="Keyword">infixr</a> <a id="572" class="Number">45</a> <a id="575" href="Definition.Modality.html#722" class="Function Operator">_·_</a>
  <a id="581" class="Keyword">infix</a>  <a id="588" class="Number">10</a> <a id="591" href="Definition.Modality.html#1252" class="Function Operator">_≤_</a> <a id="595" href="Definition.Modality.html#1339" class="Function Operator">_&lt;_</a>


  <a id="603" class="Keyword">field</a>
    <a id="613" class="Comment">-- A semiring with meet consists of a type M with three binary operations...</a>
    <a id="Semiring-with-meet._+_"></a><a id="694" href="Definition.Modality.html#694" class="Field Operator">_+_</a> <a id="698" class="Symbol">:</a> <a id="700" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="704" href="Definition.Modality.html#259" class="Bound">M</a> <a id="706" class="Comment">-- Addition</a>
    <a id="Semiring-with-meet._·_"></a><a id="722" href="Definition.Modality.html#722" class="Field Operator">_·_</a> <a id="726" class="Symbol">:</a> <a id="728" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="732" href="Definition.Modality.html#259" class="Bound">M</a> <a id="734" class="Comment">-- Multiplication</a>
    <a id="Semiring-with-meet._∧_"></a><a id="756" href="Definition.Modality.html#756" class="Field Operator">_∧_</a> <a id="760" class="Symbol">:</a> <a id="762" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="766" href="Definition.Modality.html#259" class="Bound">M</a> <a id="768" class="Comment">-- Meet</a>

    <a id="781" class="Comment">-- ... and two special elements</a>
    <a id="Semiring-with-meet.𝟘"></a><a id="817" href="Definition.Modality.html#817" class="Field">𝟘</a> <a id="819" class="Symbol">:</a> <a id="821" href="Definition.Modality.html#259" class="Bound">M</a>
    <a id="Semiring-with-meet.𝟙"></a><a id="827" href="Definition.Modality.html#827" class="Field">𝟙</a> <a id="829" class="Symbol">:</a> <a id="831" href="Definition.Modality.html#259" class="Bound">M</a>

    <a id="838" class="Comment">-- + and · form a semiring with 𝟙 as multiplicative unit and 𝟘 as zero</a>
    <a id="Semiring-with-meet.+-·-Semiring"></a><a id="913" href="Definition.Modality.html#913" class="Field">+-·-Semiring</a>  <a id="927" class="Symbol">:</a> <a id="929" href="Algebra.Structures.html#11361" class="Record">IsSemiring</a> <a id="940" href="Definition.Modality.html#694" class="Field Operator">_+_</a> <a id="944" href="Definition.Modality.html#722" class="Field Operator">_·_</a> <a id="948" href="Definition.Modality.html#817" class="Field">𝟘</a> <a id="950" href="Definition.Modality.html#827" class="Field">𝟙</a>
    <a id="956" class="Comment">-- ∧ forms a semilattice</a>
    <a id="Semiring-with-meet.∧-Semilattice"></a><a id="985" href="Definition.Modality.html#985" class="Field">∧-Semilattice</a>       <a id="1005" class="Symbol">:</a> <a id="1007" href="Algebra.Structures.html#2390" class="Record">IsSemilattice</a> <a id="1021" href="Definition.Modality.html#756" class="Field Operator">_∧_</a>

    <a id="1030" class="Comment">-- Multiplation distributes over meet</a>
    <a id="Semiring-with-meet.·-distrib-∧"></a><a id="1072" href="Definition.Modality.html#1072" class="Field">·-distrib-∧</a>         <a id="1092" class="Symbol">:</a> <a id="1094" href="Definition.Modality.html#722" class="Field Operator">_·_</a> <a id="1098" href="Algebra.Definitions.html#2465" class="Function Operator">DistributesOver</a> <a id="1114" href="Definition.Modality.html#756" class="Field Operator">_∧_</a>
    <a id="1122" class="Comment">-- Addition distributes over meet</a>
    <a id="Semiring-with-meet.+-distrib-∧"></a><a id="1160" href="Definition.Modality.html#1160" class="Field">+-distrib-∧</a>         <a id="1180" class="Symbol">:</a> <a id="1182" href="Definition.Modality.html#694" class="Field Operator">_+_</a> <a id="1186" href="Algebra.Definitions.html#2465" class="Function Operator">DistributesOver</a> <a id="1202" href="Definition.Modality.html#756" class="Field Operator">_∧_</a>

  <a id="1209" class="Comment">-- Semilattice partial ordering relation</a>
  <a id="Semiring-with-meet._≤_"></a><a id="1252" href="Definition.Modality.html#1252" class="Function Operator">_≤_</a> <a id="1256" class="Symbol">:</a> <a id="1258" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="1262" href="Definition.Modality.html#259" class="Bound">M</a> <a id="1264" href="Definition.Modality.html#255" class="Bound">a</a>
  <a id="1268" href="Definition.Modality.html#1268" class="Bound">p</a> <a id="1270" href="Definition.Modality.html#1252" class="Function Operator">≤</a> <a id="1272" href="Definition.Modality.html#1272" class="Bound">q</a> <a id="1274" class="Symbol">=</a> <a id="1276" href="Definition.Modality.html#1268" class="Bound">p</a> <a id="1278" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="1280" class="Symbol">(</a><a id="1281" href="Definition.Modality.html#1268" class="Bound">p</a> <a id="1283" href="Definition.Modality.html#756" class="Field Operator">∧</a> <a id="1285" href="Definition.Modality.html#1272" class="Bound">q</a><a id="1286" class="Symbol">)</a>

  <a id="1291" class="Comment">-- A strict variant of the ordering relation.</a>
  <a id="Semiring-with-meet._&lt;_"></a><a id="1339" href="Definition.Modality.html#1339" class="Function Operator">_&lt;_</a> <a id="1343" class="Symbol">:</a> <a id="1345" href="Relation.Binary.Core.html#882" class="Function">Rel</a> <a id="1349" href="Definition.Modality.html#259" class="Bound">M</a> <a id="1351" href="Definition.Modality.html#255" class="Bound">a</a>
  <a id="1355" href="Definition.Modality.html#1355" class="Bound">p</a> <a id="1357" href="Definition.Modality.html#1339" class="Function Operator">&lt;</a> <a id="1359" href="Definition.Modality.html#1359" class="Bound">q</a> <a id="1361" class="Symbol">=</a> <a id="1363" href="Definition.Modality.html#1355" class="Bound">p</a> <a id="1365" href="Definition.Modality.html#1252" class="Function Operator">≤</a> <a id="1367" href="Definition.Modality.html#1359" class="Bound">q</a> <a id="1369" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1371" href="Definition.Modality.html#1355" class="Bound">p</a> <a id="1373" href="Relation.Binary.PropositionalEquality.Core.html#830" class="Function Operator">≢</a> <a id="1375" href="Definition.Modality.html#1359" class="Bound">q</a>

  <a id="Semiring-with-meet.·-distribˡ-∧"></a><a id="1380" href="Definition.Modality.html#1380" class="Function">·-distribˡ-∧</a> <a id="1393" class="Symbol">:</a> <a id="1395" href="Definition.Modality.html#722" class="Field Operator">_·_</a> <a id="1399" href="Algebra.Definitions.html#2227" class="Function Operator">DistributesOverˡ</a> <a id="1416" href="Definition.Modality.html#756" class="Field Operator">_∧_</a>
  <a id="1422" href="Definition.Modality.html#1380" class="Function">·-distribˡ-∧</a> <a id="1435" class="Symbol">=</a> <a id="1437" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1443" href="Definition.Modality.html#1072" class="Field">·-distrib-∧</a>

  <a id="Semiring-with-meet.·-distribʳ-∧"></a><a id="1458" href="Definition.Modality.html#1458" class="Function">·-distribʳ-∧</a> <a id="1471" class="Symbol">:</a> <a id="1473" href="Definition.Modality.html#722" class="Field Operator">_·_</a> <a id="1477" href="Algebra.Definitions.html#2346" class="Function Operator">DistributesOverʳ</a> <a id="1494" href="Definition.Modality.html#756" class="Field Operator">_∧_</a>
  <a id="1500" href="Definition.Modality.html#1458" class="Function">·-distribʳ-∧</a> <a id="1513" class="Symbol">=</a> <a id="1515" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="1521" href="Definition.Modality.html#1072" class="Field">·-distrib-∧</a>

  <a id="Semiring-with-meet.+-distribˡ-∧"></a><a id="1536" href="Definition.Modality.html#1536" class="Function">+-distribˡ-∧</a> <a id="1549" class="Symbol">:</a> <a id="1551" href="Definition.Modality.html#694" class="Field Operator">_+_</a> <a id="1555" href="Algebra.Definitions.html#2227" class="Function Operator">DistributesOverˡ</a> <a id="1572" href="Definition.Modality.html#756" class="Field Operator">_∧_</a>
  <a id="1578" href="Definition.Modality.html#1536" class="Function">+-distribˡ-∧</a> <a id="1591" class="Symbol">=</a> <a id="1593" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="1599" href="Definition.Modality.html#1160" class="Field">+-distrib-∧</a>

  <a id="Semiring-with-meet.+-distribʳ-∧"></a><a id="1614" href="Definition.Modality.html#1614" class="Function">+-distribʳ-∧</a> <a id="1627" class="Symbol">:</a> <a id="1629" href="Definition.Modality.html#694" class="Field Operator">_+_</a> <a id="1633" href="Algebra.Definitions.html#2346" class="Function Operator">DistributesOverʳ</a> <a id="1650" href="Definition.Modality.html#756" class="Field Operator">_∧_</a>
  <a id="1656" href="Definition.Modality.html#1614" class="Function">+-distribʳ-∧</a> <a id="1669" class="Symbol">=</a> <a id="1671" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="1677" href="Definition.Modality.html#1160" class="Field">+-distrib-∧</a>

  <a id="1692" class="Keyword">open</a> <a id="1697" href="Algebra.Structures.html#11361" class="Module">IsSemiring</a> <a id="1708" href="Definition.Modality.html#913" class="Field">+-·-Semiring</a> <a id="1721" class="Keyword">public</a>
    <a id="1732" class="Keyword">using</a> <a id="1738" class="Symbol">(</a>
            <a id="1752" href="Algebra.Structures.html#10462" class="Function">+-assoc</a><a id="1759" class="Symbol">;</a>
            <a id="1773" href="Algebra.Structures.html#10502" class="Function">+-cong</a><a id="1779" class="Symbol">;</a>
            <a id="1793" href="Algebra.Structures.html#10541" class="Function">+-congˡ</a><a id="1800" class="Symbol">;</a>
            <a id="1814" href="Algebra.Structures.html#10581" class="Function">+-congʳ</a><a id="1821" class="Symbol">;</a>
            <a id="1835" href="Algebra.Structures.html#10621" class="Function">+-identity</a><a id="1845" class="Symbol">;</a>
            <a id="1859" href="Algebra.Structures.html#10664" class="Function">+-identityˡ</a><a id="1870" class="Symbol">;</a>
            <a id="1884" href="Algebra.Structures.html#10708" class="Function">+-identityʳ</a><a id="1895" class="Symbol">;</a>
            <a id="1909" href="Algebra.Structures.html#10752" class="Function">+-comm</a>
          <a id="1926" class="Symbol">)</a>
    <a id="1932" class="Keyword">renaming</a> <a id="1941" class="Symbol">(</a>
              <a id="1957" href="Algebra.Structures.html#11088" class="Function">*-assoc</a> <a id="1965" class="Symbol">to</a> <a id="1968" class="Function">·-assoc</a><a id="1975" class="Symbol">;</a>
              <a id="1991" href="Algebra.Structures.html#11117" class="Function">*-cong</a> <a id="1998" class="Symbol">to</a> <a id="2001" class="Function">·-cong</a><a id="2007" class="Symbol">;</a>
              <a id="2023" href="Algebra.Structures.html#11145" class="Function">*-congˡ</a> <a id="2031" class="Symbol">to</a> <a id="2034" class="Function">·-congˡ</a><a id="2041" class="Symbol">;</a>
              <a id="2057" href="Algebra.Structures.html#11174" class="Function">*-congʳ</a> <a id="2065" class="Symbol">to</a> <a id="2068" class="Function">·-congʳ</a><a id="2075" class="Symbol">;</a>
              <a id="2091" href="Algebra.Structures.html#11203" class="Function">*-identity</a> <a id="2102" class="Symbol">to</a> <a id="2105" class="Function">·-identity</a><a id="2115" class="Symbol">;</a>
              <a id="2131" href="Algebra.Structures.html#11235" class="Function">*-identityˡ</a> <a id="2143" class="Symbol">to</a> <a id="2146" class="Function">·-identityˡ</a><a id="2157" class="Symbol">;</a>
              <a id="2173" href="Algebra.Structures.html#11268" class="Function">*-identityʳ</a> <a id="2185" class="Symbol">to</a> <a id="2188" class="Function">·-identityʳ</a><a id="2199" class="Symbol">;</a>

              <a id="2216" href="Algebra.Structures.html#10192" class="Function">distrib</a> <a id="2224" class="Symbol">to</a> <a id="2227" class="Function">·-distrib-+</a><a id="2238" class="Symbol">;</a>
              <a id="2254" href="Algebra.Structures.html#10239" class="Function">distribˡ</a> <a id="2263" class="Symbol">to</a> <a id="2266" class="Function">·-distribˡ-+</a><a id="2278" class="Symbol">;</a>
              <a id="2294" href="Algebra.Structures.html#10301" class="Function">distribʳ</a> <a id="2303" class="Symbol">to</a> <a id="2306" class="Function">·-distribʳ-+</a><a id="2318" class="Symbol">;</a>
              <a id="2334" href="Algebra.Structures.html#11520" class="Field">zero</a> <a id="2339" class="Symbol">to</a> <a id="2342" class="Field">·-zero</a><a id="2348" class="Symbol">;</a>
              <a id="2364" href="Algebra.Structures.html#8698" class="Function">zeroˡ</a> <a id="2370" class="Symbol">to</a> <a id="2373" class="Function">·-zeroˡ</a><a id="2380" class="Symbol">;</a>
              <a id="2396" href="Algebra.Structures.html#8744" class="Function">zeroʳ</a> <a id="2402" class="Symbol">to</a> <a id="2405" class="Function">·-zeroʳ</a><a id="2412" class="Symbol">;</a>

              <a id="2429" href="Algebra.Structures.html#1172" class="Function">isEquivalence</a> <a id="2443" class="Symbol">to</a> <a id="2446" class="Function">≈-equivalence</a>
             <a id="2473" class="Symbol">)</a>

  <a id="2478" class="Keyword">open</a> <a id="2483" href="Algebra.Structures.html#2390" class="Module">IsSemilattice</a> <a id="2497" href="Definition.Modality.html#985" class="Field">∧-Semilattice</a> <a id="2511" class="Keyword">public</a>
    <a id="2522" class="Keyword">using</a> <a id="2528" class="Symbol">(</a><a id="2529" href="Algebra.Structures.html#2546" class="Function">∧-cong</a><a id="2535" class="Symbol">;</a> <a id="2537" href="Algebra.Structures.html#2565" class="Function">∧-congˡ</a><a id="2544" class="Symbol">;</a> <a id="2546" href="Algebra.Structures.html#2585" class="Function">∧-congʳ</a><a id="2553" class="Symbol">)</a>
    <a id="2559" class="Keyword">renaming</a> <a id="2568" class="Symbol">(</a><a id="2569" href="Algebra.Structures.html#2470" class="Field">comm</a> <a id="2574" class="Symbol">to</a> <a id="2577" class="Field">∧-comm</a><a id="2583" class="Symbol">;</a>
              <a id="2599" href="Algebra.Structures.html#2014" class="Function">idem</a> <a id="2604" class="Symbol">to</a> <a id="2607" class="Function">∧-idem</a><a id="2613" class="Symbol">;</a>
              <a id="2629" href="Algebra.Structures.html#1867" class="Function">assoc</a> <a id="2635" class="Symbol">to</a> <a id="2638" class="Function">∧-assoc</a>
             <a id="2659" class="Symbol">)</a>

<a id="2662" class="Comment">-- Meet-Semirings with well-behaved zero</a>
<a id="2703" class="Keyword">record</a> <a id="Has-well-behaved-zero"></a><a id="2710" href="Definition.Modality.html#2710" class="Record">Has-well-behaved-zero</a> <a id="2732" class="Symbol">(</a><a id="2733" href="Definition.Modality.html#2733" class="Bound">𝕄</a> <a id="2735" class="Symbol">:</a> <a id="2737" href="Definition.Modality.html#498" class="Record">Semiring-with-meet</a><a id="2755" class="Symbol">)</a> <a id="2757" class="Symbol">:</a> <a id="2759" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2763" href="Definition.Modality.html#255" class="Bound">a</a> <a id="2765" class="Keyword">where</a>
  <a id="2773" class="Keyword">open</a> <a id="2778" href="Definition.Modality.html#498" class="Module">Semiring-with-meet</a> <a id="2797" href="Definition.Modality.html#2733" class="Bound">𝕄</a>
  <a id="2801" class="Keyword">field</a>
    <a id="2811" class="Comment">-- 𝟙 is not equivalent to 𝟘.</a>
    <a id="Has-well-behaved-zero.𝟙≉𝟘"></a><a id="2844" href="Definition.Modality.html#2844" class="Field">𝟙≉𝟘</a> <a id="2848" class="Symbol">:</a> <a id="2850" href="Definition.Modality.html#827" class="Function">𝟙</a> <a id="2852" href="Relation.Binary.Bundles.html#960" class="Function Operator">≉</a> <a id="2854" href="Definition.Modality.html#817" class="Function">𝟘</a>

    <a id="2861" class="Comment">-- It is decidable whether a value is equivalent to 𝟘.</a>
    <a id="Has-well-behaved-zero.is-𝟘?"></a><a id="2920" href="Definition.Modality.html#2920" class="Field">is-𝟘?</a> <a id="2926" class="Symbol">:</a> <a id="2928" class="Symbol">(</a><a id="2929" href="Definition.Modality.html#2929" class="Bound">p</a> <a id="2931" class="Symbol">:</a> <a id="2933" href="Definition.Modality.html#259" class="Bound">M</a><a id="2934" class="Symbol">)</a> <a id="2936" class="Symbol">→</a> <a id="2938" href="Relation.Nullary.html#1511" class="Record">Dec</a> <a id="2942" class="Symbol">(</a><a id="2943" href="Definition.Modality.html#2929" class="Bound">p</a> <a id="2945" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="2947" href="Definition.Modality.html#817" class="Function">𝟘</a><a id="2948" class="Symbol">)</a>

    <a id="2955" class="Comment">-- The following two assumptions are based on assumptions from Bob</a>
    <a id="3026" class="Comment">-- Atkey&#39;s &quot;Syntax and Semantics of Quantitative Type Theory&quot;.</a>

    <a id="3094" class="Comment">-- The semiring has the zero-product property:</a>
    <a id="3145" class="Comment">-- if p · q is 𝟘, then either p is 𝟘 or q is 𝟘.</a>
    <a id="Has-well-behaved-zero.zero-product"></a><a id="3197" href="Definition.Modality.html#3197" class="Field">zero-product</a> <a id="3210" class="Symbol">:</a> <a id="3212" class="Symbol">{</a><a id="3213" href="Definition.Modality.html#3213" class="Bound">p</a> <a id="3215" href="Definition.Modality.html#3215" class="Bound">q</a> <a id="3217" class="Symbol">:</a> <a id="3219" href="Definition.Modality.html#259" class="Bound">M</a><a id="3220" class="Symbol">}</a> <a id="3222" class="Symbol">→</a> <a id="3224" href="Definition.Modality.html#3213" class="Bound">p</a> <a id="3226" href="Definition.Modality.html#722" class="Function Operator">·</a> <a id="3228" href="Definition.Modality.html#3215" class="Bound">q</a> <a id="3230" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3232" href="Definition.Modality.html#817" class="Function">𝟘</a> <a id="3234" class="Symbol">→</a> <a id="3236" class="Symbol">(</a><a id="3237" href="Definition.Modality.html#3213" class="Bound">p</a> <a id="3239" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3241" href="Definition.Modality.html#817" class="Function">𝟘</a><a id="3242" class="Symbol">)</a> <a id="3244" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="3246" class="Symbol">(</a><a id="3247" href="Definition.Modality.html#3215" class="Bound">q</a> <a id="3249" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3251" href="Definition.Modality.html#817" class="Function">𝟘</a><a id="3252" class="Symbol">)</a>

    <a id="3259" class="Comment">-- The semiring is positive (with respect to addition and meet):</a>

    <a id="3329" class="Comment">-- if p + q is 𝟘, then p and q are 𝟘. (The statement that p + q ≈ 𝟘</a>
    <a id="3401" class="Comment">-- implies q ≈ 𝟘 follows from the one below, see</a>
    <a id="3454" class="Comment">-- Definition.Modality.Properties.Has-well-behaved-zero.+-positiveʳ.)</a>
    <a id="Has-well-behaved-zero.+-positiveˡ"></a><a id="3528" href="Definition.Modality.html#3528" class="Field">+-positiveˡ</a> <a id="3540" class="Symbol">:</a> <a id="3542" class="Symbol">{</a><a id="3543" href="Definition.Modality.html#3543" class="Bound">p</a> <a id="3545" href="Definition.Modality.html#3545" class="Bound">q</a> <a id="3547" class="Symbol">:</a> <a id="3549" href="Definition.Modality.html#259" class="Bound">M</a><a id="3550" class="Symbol">}</a> <a id="3552" class="Symbol">→</a> <a id="3554" href="Definition.Modality.html#3543" class="Bound">p</a> <a id="3556" href="Definition.Modality.html#694" class="Function Operator">+</a> <a id="3558" href="Definition.Modality.html#3545" class="Bound">q</a> <a id="3560" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3562" href="Definition.Modality.html#817" class="Function">𝟘</a> <a id="3564" class="Symbol">→</a> <a id="3566" href="Definition.Modality.html#3543" class="Bound">p</a> <a id="3568" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3570" href="Definition.Modality.html#817" class="Function">𝟘</a>

    <a id="3577" class="Comment">-- If p ∧ q is equal to 𝟘, then p ≈ 𝟘.  (The statement that p ∧ q ≈ 𝟘</a>
    <a id="3651" class="Comment">-- implies q ≈ 𝟘 follows from the one below, see</a>
    <a id="3704" class="Comment">-- Definition.Modality.Properties.Has-well-behaved-zero.∧-positiveʳ.)</a>
    <a id="Has-well-behaved-zero.∧-positiveˡ"></a><a id="3778" href="Definition.Modality.html#3778" class="Field">∧-positiveˡ</a> <a id="3790" class="Symbol">:</a> <a id="3792" class="Symbol">{</a><a id="3793" href="Definition.Modality.html#3793" class="Bound">p</a> <a id="3795" href="Definition.Modality.html#3795" class="Bound">q</a> <a id="3797" class="Symbol">:</a> <a id="3799" href="Definition.Modality.html#259" class="Bound">M</a><a id="3800" class="Symbol">}</a> <a id="3802" class="Symbol">→</a> <a id="3804" href="Definition.Modality.html#3793" class="Bound">p</a> <a id="3806" href="Definition.Modality.html#756" class="Function Operator">∧</a> <a id="3808" href="Definition.Modality.html#3795" class="Bound">q</a> <a id="3810" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3812" href="Definition.Modality.html#817" class="Function">𝟘</a> <a id="3814" class="Symbol">→</a> <a id="3816" href="Definition.Modality.html#3793" class="Bound">p</a> <a id="3818" href="Relation.Binary.Bundles.html#1098" class="Function Operator">≈</a> <a id="3820" href="Definition.Modality.html#817" class="Function">𝟘</a>

<a id="3823" class="Comment">-- Semirings with meet and a tertiary star operator</a>
<a id="3875" class="Keyword">record</a> <a id="Semiring-with-meet-and-star"></a><a id="3882" href="Definition.Modality.html#3882" class="Record">Semiring-with-meet-and-star</a> <a id="3910" class="Symbol">:</a> <a id="3912" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3916" href="Definition.Modality.html#255" class="Bound">a</a> <a id="3918" class="Keyword">where</a>
  <a id="3926" class="Keyword">infix</a>  <a id="3933" class="Number">50</a> <a id="3936" href="Definition.Modality.html#4095" class="Field Operator">_⊛_▷_</a>
  <a id="3944" class="Keyword">field</a>
    <a id="Semiring-with-meet-and-star.semiring-with-meet"></a><a id="3954" href="Definition.Modality.html#3954" class="Field">semiring-with-meet</a> <a id="3973" class="Symbol">:</a> <a id="3975" href="Definition.Modality.html#498" class="Record">Semiring-with-meet</a>
  <a id="3996" class="Keyword">open</a> <a id="4001" href="Definition.Modality.html#498" class="Module">Semiring-with-meet</a> <a id="4020" href="Definition.Modality.html#3954" class="Field">semiring-with-meet</a> <a id="4039" class="Keyword">public</a>

  <a id="4049" class="Keyword">field</a>
    <a id="4059" class="Comment">-- The tertiary &quot;star&quot;-operator</a>
    <a id="Semiring-with-meet-and-star._⊛_▷_"></a><a id="4095" href="Definition.Modality.html#4095" class="Field Operator">_⊛_▷_</a> <a id="4101" class="Symbol">:</a> <a id="4103" href="Tools.Algebra.html#1006" class="Function">Op₃</a> <a id="4107" href="Definition.Modality.html#259" class="Bound">M</a>

    <a id="4114" class="Comment">-- ⊛ is a solution to the following system of inequalities</a>
    <a id="Semiring-with-meet-and-star.⊛-ineq"></a><a id="4177" href="Definition.Modality.html#4177" class="Field">⊛-ineq</a> <a id="4184" class="Symbol">:</a> <a id="4186" class="Symbol">((</a><a id="4188" href="Definition.Modality.html#4188" class="Bound">p</a> <a id="4190" href="Definition.Modality.html#4190" class="Bound">q</a> <a id="4192" href="Definition.Modality.html#4192" class="Bound">r</a> <a id="4194" class="Symbol">:</a> <a id="4196" href="Definition.Modality.html#259" class="Bound">M</a><a id="4197" class="Symbol">)</a> <a id="4199" class="Symbol">→</a> <a id="4201" href="Definition.Modality.html#4188" class="Bound">p</a> <a id="4203" href="Definition.Modality.html#4095" class="Field Operator">⊛</a> <a id="4205" href="Definition.Modality.html#4190" class="Bound">q</a> <a id="4207" href="Definition.Modality.html#4095" class="Field Operator">▷</a> <a id="4209" href="Definition.Modality.html#4192" class="Bound">r</a> <a id="4211" href="Definition.Modality.html#1252" class="Function Operator">≤</a> <a id="4213" href="Definition.Modality.html#4190" class="Bound">q</a> <a id="4215" href="Definition.Modality.html#694" class="Function Operator">+</a> <a id="4217" href="Definition.Modality.html#4192" class="Bound">r</a> <a id="4219" href="Definition.Modality.html#722" class="Function Operator">·</a> <a id="4221" href="Definition.Modality.html#4188" class="Bound">p</a> <a id="4223" href="Definition.Modality.html#4095" class="Field Operator">⊛</a> <a id="4225" href="Definition.Modality.html#4190" class="Bound">q</a> <a id="4227" href="Definition.Modality.html#4095" class="Field Operator">▷</a> <a id="4229" href="Definition.Modality.html#4192" class="Bound">r</a><a id="4230" class="Symbol">)</a>
           <a id="4243" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4245" class="Symbol">((</a><a id="4247" href="Definition.Modality.html#4247" class="Bound">p</a> <a id="4249" href="Definition.Modality.html#4249" class="Bound">q</a> <a id="4251" href="Definition.Modality.html#4251" class="Bound">r</a> <a id="4253" class="Symbol">:</a> <a id="4255" href="Definition.Modality.html#259" class="Bound">M</a><a id="4256" class="Symbol">)</a> <a id="4258" class="Symbol">→</a> <a id="4260" href="Definition.Modality.html#4247" class="Bound">p</a> <a id="4262" href="Definition.Modality.html#4095" class="Field Operator">⊛</a> <a id="4264" href="Definition.Modality.html#4249" class="Bound">q</a> <a id="4266" href="Definition.Modality.html#4095" class="Field Operator">▷</a> <a id="4268" href="Definition.Modality.html#4251" class="Bound">r</a> <a id="4270" href="Definition.Modality.html#1252" class="Function Operator">≤</a> <a id="4272" href="Definition.Modality.html#4247" class="Bound">p</a><a id="4273" class="Symbol">)</a>

    <a id="4280" class="Comment">-- addition is sub-interchangeable over ⊛ w.r.t the first two arguments</a>
    <a id="Semiring-with-meet-and-star.+-sub-interchangeable-⊛"></a><a id="4356" href="Definition.Modality.html#4356" class="Field">+-sub-interchangeable-⊛</a> <a id="4380" class="Symbol">:</a> <a id="4382" class="Symbol">(</a><a id="4383" href="Definition.Modality.html#4383" class="Bound">r</a> <a id="4385" class="Symbol">:</a> <a id="4387" href="Definition.Modality.html#259" class="Bound">M</a><a id="4388" class="Symbol">)</a> <a id="4390" class="Symbol">→</a> <a id="4392" href="Definition.Modality.html#694" class="Function Operator">_+_</a> <a id="4396" href="Tools.Algebra.html#1544" class="Function Operator">SubInterchangeable</a> <a id="4415" class="Symbol">(</a><a id="4416" href="Definition.Modality.html#4095" class="Field Operator">_⊛_▷</a> <a id="4421" href="Definition.Modality.html#4383" class="Bound">r</a><a id="4422" class="Symbol">)</a> <a id="4424" href="Tools.Algebra.html#1544" class="Function Operator">by</a> <a id="4427" href="Definition.Modality.html#1252" class="Function Operator">_≤_</a>
    <a id="4435" class="Comment">-- multiplication is right sub-distributive over ⊛ w.r.t the first two arguments</a>
    <a id="Semiring-with-meet-and-star.·-sub-distribʳ-⊛"></a><a id="4520" href="Definition.Modality.html#4520" class="Field">·-sub-distribʳ-⊛</a> <a id="4537" class="Symbol">:</a> <a id="4539" class="Symbol">(</a><a id="4540" href="Definition.Modality.html#4540" class="Bound">r</a> <a id="4542" class="Symbol">:</a> <a id="4544" href="Definition.Modality.html#259" class="Bound">M</a><a id="4545" class="Symbol">)</a> <a id="4547" class="Symbol">→</a> <a id="4549" href="Definition.Modality.html#722" class="Function Operator">_·_</a> <a id="4553" href="Tools.Algebra.html#1225" class="Function Operator">SubDistributesOverʳ</a> <a id="4573" class="Symbol">(</a><a id="4574" href="Definition.Modality.html#4095" class="Field Operator">_⊛_▷</a> <a id="4579" href="Definition.Modality.html#4540" class="Bound">r</a><a id="4580" class="Symbol">)</a> <a id="4582" href="Tools.Algebra.html#1225" class="Function Operator">by</a> <a id="4585" href="Definition.Modality.html#1252" class="Function Operator">_≤_</a>
    <a id="4593" class="Comment">-- ⊛ is sub-distributive over meet w.r.t the first two arguments</a>
    <a id="Semiring-with-meet-and-star.⊛-sub-distrib-∧"></a><a id="4662" href="Definition.Modality.html#4662" class="Field">⊛-sub-distrib-∧</a>    <a id="4681" class="Symbol">:</a> <a id="4683" class="Symbol">(</a><a id="4684" href="Definition.Modality.html#4684" class="Bound">r</a> <a id="4686" class="Symbol">:</a> <a id="4688" href="Definition.Modality.html#259" class="Bound">M</a><a id="4689" class="Symbol">)</a> <a id="4691" class="Symbol">→</a> <a id="4693" class="Symbol">(</a><a id="4694" href="Definition.Modality.html#4095" class="Field Operator">_⊛_▷</a> <a id="4699" href="Definition.Modality.html#4684" class="Bound">r</a><a id="4700" class="Symbol">)</a> <a id="4702" href="Tools.Algebra.html#1370" class="Function Operator">SubDistributesOver</a> <a id="4721" href="Definition.Modality.html#756" class="Function Operator">_∧_</a> <a id="4725" href="Tools.Algebra.html#1370" class="Function Operator">by</a> <a id="4728" href="Definition.Modality.html#1252" class="Function Operator">_≤_</a>

  <a id="Semiring-with-meet-and-star.⊛-ineq₁"></a><a id="4735" href="Definition.Modality.html#4735" class="Function">⊛-ineq₁</a> <a id="4743" class="Symbol">:</a> <a id="4745" class="Symbol">(</a><a id="4746" href="Definition.Modality.html#4746" class="Bound">p</a> <a id="4748" href="Definition.Modality.html#4748" class="Bound">q</a> <a id="4750" href="Definition.Modality.html#4750" class="Bound">r</a> <a id="4752" class="Symbol">:</a> <a id="4754" href="Definition.Modality.html#259" class="Bound">M</a><a id="4755" class="Symbol">)</a> <a id="4757" class="Symbol">→</a> <a id="4759" href="Definition.Modality.html#4746" class="Bound">p</a> <a id="4761" href="Definition.Modality.html#4095" class="Field Operator">⊛</a> <a id="4763" href="Definition.Modality.html#4748" class="Bound">q</a> <a id="4765" href="Definition.Modality.html#4095" class="Field Operator">▷</a> <a id="4767" href="Definition.Modality.html#4750" class="Bound">r</a> <a id="4769" href="Definition.Modality.html#1252" class="Function Operator">≤</a> <a id="4771" href="Definition.Modality.html#4748" class="Bound">q</a> <a id="4773" href="Definition.Modality.html#694" class="Function Operator">+</a> <a id="4775" href="Definition.Modality.html#4750" class="Bound">r</a> <a id="4777" href="Definition.Modality.html#722" class="Function Operator">·</a> <a id="4779" class="Symbol">(</a><a id="4780" href="Definition.Modality.html#4746" class="Bound">p</a> <a id="4782" href="Definition.Modality.html#4095" class="Field Operator">⊛</a> <a id="4784" href="Definition.Modality.html#4748" class="Bound">q</a> <a id="4786" href="Definition.Modality.html#4095" class="Field Operator">▷</a> <a id="4788" href="Definition.Modality.html#4750" class="Bound">r</a><a id="4789" class="Symbol">)</a>
  <a id="4793" href="Definition.Modality.html#4735" class="Function">⊛-ineq₁</a> <a id="4801" class="Symbol">=</a> <a id="4803" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="4809" href="Definition.Modality.html#4177" class="Field">⊛-ineq</a>

  <a id="Semiring-with-meet-and-star.⊛-ineq₂"></a><a id="4819" href="Definition.Modality.html#4819" class="Function">⊛-ineq₂</a> <a id="4827" class="Symbol">:</a> <a id="4829" class="Symbol">(</a><a id="4830" href="Definition.Modality.html#4830" class="Bound">p</a> <a id="4832" href="Definition.Modality.html#4832" class="Bound">q</a> <a id="4834" href="Definition.Modality.html#4834" class="Bound">r</a> <a id="4836" class="Symbol">:</a> <a id="4838" href="Definition.Modality.html#259" class="Bound">M</a><a id="4839" class="Symbol">)</a> <a id="4841" class="Symbol">→</a> <a id="4843" href="Definition.Modality.html#4830" class="Bound">p</a> <a id="4845" href="Definition.Modality.html#4095" class="Field Operator">⊛</a> <a id="4847" href="Definition.Modality.html#4832" class="Bound">q</a> <a id="4849" href="Definition.Modality.html#4095" class="Field Operator">▷</a> <a id="4851" href="Definition.Modality.html#4834" class="Bound">r</a> <a id="4853" href="Definition.Modality.html#1252" class="Function Operator">≤</a> <a id="4855" href="Definition.Modality.html#4830" class="Bound">p</a>
  <a id="4859" href="Definition.Modality.html#4819" class="Function">⊛-ineq₂</a> <a id="4867" class="Symbol">=</a> <a id="4869" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="4875" href="Definition.Modality.html#4177" class="Field">⊛-ineq</a>

  <a id="Semiring-with-meet-and-star.⊛-sub-distribˡ-∧"></a><a id="4885" href="Definition.Modality.html#4885" class="Function">⊛-sub-distribˡ-∧</a> <a id="4902" class="Symbol">:</a> <a id="4904" class="Symbol">(</a><a id="4905" href="Definition.Modality.html#4905" class="Bound">r</a> <a id="4907" class="Symbol">:</a> <a id="4909" href="Definition.Modality.html#259" class="Bound">M</a><a id="4910" class="Symbol">)</a> <a id="4912" class="Symbol">→</a> <a id="4914" class="Symbol">(</a><a id="4915" href="Definition.Modality.html#4095" class="Field Operator">_⊛_▷</a> <a id="4920" href="Definition.Modality.html#4905" class="Bound">r</a><a id="4921" class="Symbol">)</a> <a id="4923" href="Tools.Algebra.html#1080" class="Function Operator">SubDistributesOverˡ</a> <a id="4943" href="Definition.Modality.html#756" class="Function Operator">_∧_</a> <a id="4947" href="Tools.Algebra.html#1080" class="Function Operator">by</a> <a id="4950" href="Definition.Modality.html#1252" class="Function Operator">_≤_</a>
  <a id="4956" href="Definition.Modality.html#4885" class="Function">⊛-sub-distribˡ-∧</a> <a id="4973" href="Definition.Modality.html#4973" class="Bound">r</a> <a id="4975" class="Symbol">=</a> <a id="4977" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="4983" class="Symbol">(</a><a id="4984" href="Definition.Modality.html#4662" class="Field">⊛-sub-distrib-∧</a> <a id="5000" href="Definition.Modality.html#4973" class="Bound">r</a><a id="5001" class="Symbol">)</a>

  <a id="Semiring-with-meet-and-star.⊛-sub-distribʳ-∧"></a><a id="5006" href="Definition.Modality.html#5006" class="Function">⊛-sub-distribʳ-∧</a> <a id="5023" class="Symbol">:</a> <a id="5025" class="Symbol">(</a><a id="5026" href="Definition.Modality.html#5026" class="Bound">r</a> <a id="5028" class="Symbol">:</a> <a id="5030" href="Definition.Modality.html#259" class="Bound">M</a><a id="5031" class="Symbol">)</a> <a id="5033" class="Symbol">→</a> <a id="5035" class="Symbol">(</a><a id="5036" href="Definition.Modality.html#4095" class="Field Operator">_⊛_▷</a> <a id="5041" href="Definition.Modality.html#5026" class="Bound">r</a><a id="5042" class="Symbol">)</a> <a id="5044" href="Tools.Algebra.html#1225" class="Function Operator">SubDistributesOverʳ</a> <a id="5064" href="Definition.Modality.html#756" class="Function Operator">_∧_</a> <a id="5068" href="Tools.Algebra.html#1225" class="Function Operator">by</a> <a id="5071" href="Definition.Modality.html#1252" class="Function Operator">_≤_</a>
  <a id="5077" href="Definition.Modality.html#5006" class="Function">⊛-sub-distribʳ-∧</a> <a id="5094" href="Definition.Modality.html#5094" class="Bound">r</a> <a id="5096" class="Symbol">=</a> <a id="5098" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="5104" class="Symbol">(</a><a id="5105" href="Definition.Modality.html#4662" class="Field">⊛-sub-distrib-∧</a> <a id="5121" href="Definition.Modality.html#5094" class="Bound">r</a><a id="5122" class="Symbol">)</a>

<a id="5125" class="Comment">-- The modality structure</a>
<a id="5151" class="Keyword">record</a> <a id="Modality"></a><a id="5158" href="Definition.Modality.html#5158" class="Record">Modality</a> <a id="5167" class="Symbol">:</a> <a id="5169" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5173" class="Symbol">(</a><a id="5174" href="Agda.Primitive.html#774" class="Primitive">lsuc</a> <a id="5179" href="Definition.Modality.html#255" class="Bound">a</a><a id="5180" class="Symbol">)</a> <a id="5182" class="Keyword">where</a>
  <a id="5190" class="Keyword">field</a>
    <a id="Modality.semiring-with-meet-and-star"></a><a id="5200" href="Definition.Modality.html#5200" class="Field">semiring-with-meet-and-star</a> <a id="5228" class="Symbol">:</a> <a id="5230" href="Definition.Modality.html#3882" class="Record">Semiring-with-meet-and-star</a>
  <a id="5260" class="Keyword">open</a> <a id="5265" href="Definition.Modality.html#3882" class="Module">Semiring-with-meet-and-star</a> <a id="5293" href="Definition.Modality.html#5200" class="Field">semiring-with-meet-and-star</a> <a id="5321" class="Keyword">public</a>

  <a id="5331" class="Keyword">field</a>
    <a id="5341" class="Comment">-- Restrictions on modes.</a>
    <a id="Modality.mode-restrictions"></a><a id="5371" href="Definition.Modality.html#5371" class="Field">mode-restrictions</a> <a id="5389" class="Symbol">:</a> <a id="5391" href="Definition.Mode.Restrictions.html#274" class="Record">Mode-restrictions</a>
  <a id="5411" class="Keyword">open</a> <a id="5416" href="Definition.Mode.Restrictions.html#274" class="Module">Mode-restrictions</a> <a id="5434" href="Definition.Modality.html#5371" class="Field">mode-restrictions</a> <a id="5452" class="Keyword">public</a>

  <a id="5462" class="Keyword">field</a>
    <a id="5472" class="Comment">-- If the mode 𝟘ᵐ is allowed, then the zero is well-behaved</a>
    <a id="Modality.𝟘-well-behaved"></a><a id="5536" href="Definition.Modality.html#5536" class="Field">𝟘-well-behaved</a> <a id="5551" class="Symbol">:</a> <a id="5553" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="5555" href="Definition.Mode.Restrictions.html#375" class="Function">𝟘ᵐ-allowed</a> <a id="5566" class="Symbol">→</a> <a id="5568" href="Definition.Modality.html#2710" class="Record">Has-well-behaved-zero</a> <a id="5590" href="Definition.Modality.html#3954" class="Function">semiring-with-meet</a>
</pre></body></html>