<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Usage.Restrictions</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Restrictions on usage derivations</a>
<a id="111" class="Comment">------------------------------------------------------------------------</a>

<a id="185" class="Keyword">import</a> <a id="192" href="Graded.Modality.html" class="Module">Graded.Modality</a>

<a id="209" class="Keyword">module</a> <a id="216" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
  <a id="244" class="Symbol">{</a><a id="245" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a><a id="246" class="Symbol">}</a> <a id="248" class="Symbol">{</a><a id="249" href="Graded.Usage.Restrictions.html#249" class="Bound">M</a> <a id="251" class="Symbol">:</a> <a id="253" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="257" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a><a id="258" class="Symbol">}</a>
  <a id="262" class="Symbol">(</a><a id="263" class="Keyword">open</a> <a id="268" href="Graded.Modality.html" class="Module">Graded.Modality</a> <a id="284" href="Graded.Usage.Restrictions.html#249" class="Bound">M</a><a id="285" class="Symbol">)</a>
  <a id="289" class="Symbol">(</a><a id="290" href="Graded.Usage.Restrictions.html#290" class="Bound">𝕄</a> <a id="292" class="Symbol">:</a> <a id="294" href="Graded.Modality.html#7127" class="Record">Modality</a><a id="302" class="Symbol">)</a>
  <a id="306" class="Keyword">where</a>

<a id="313" class="Keyword">open</a> <a id="318" class="Keyword">import</a> <a id="325" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="337" href="Graded.Usage.Restrictions.html#290" class="Bound">𝕄</a>
<a id="339" class="Keyword">open</a> <a id="344" class="Keyword">import</a> <a id="351" href="Graded.Usage.Erased-matches.html" class="Module">Graded.Usage.Erased-matches</a>

<a id="380" class="Keyword">open</a> <a id="385" class="Keyword">import</a> <a id="392" href="Tools.Bool.html" class="Module">Tools.Bool</a>
<a id="403" class="Keyword">open</a> <a id="408" class="Keyword">import</a> <a id="415" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="430" class="Keyword">open</a> <a id="435" class="Keyword">import</a> <a id="442" href="Tools.Level.html" class="Module">Tools.Level</a>
<a id="454" class="Keyword">open</a> <a id="459" class="Keyword">import</a> <a id="466" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="494" class="Keyword">open</a> <a id="499" class="Keyword">import</a> <a id="506" href="Tools.Relation.html" class="Module">Tools.Relation</a>
<a id="521" class="Keyword">open</a> <a id="526" class="Keyword">import</a> <a id="533" href="Tools.Sum.html" class="Module">Tools.Sum</a>
<a id="543" class="Keyword">open</a> <a id="548" class="Keyword">import</a> <a id="555" href="Tools.Empty.html" class="Module">Tools.Empty</a>

<a id="568" class="Keyword">private</a> <a id="576" class="Keyword">variable</a>
  <a id="587" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="589" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a> <a id="591" href="Graded.Usage.Restrictions.html#591" class="Generalizable">r</a>  <a id="594" class="Symbol">:</a> <a id="596" href="Graded.Usage.Restrictions.html#249" class="Bound">M</a>
  <a id="600" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="602" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a>   <a id="607" class="Symbol">:</a> <a id="609" href="Graded.Mode.html#1102" class="Datatype">Mode</a>
  <a id="616" class="Symbol">⦃</a> <a id="618" href="Graded.Usage.Restrictions.html#618" class="Generalizable">ok</a> <a id="621" class="Symbol">⦄</a> <a id="623" class="Symbol">:</a> <a id="625" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="627" class="Symbol">_</a>

<a id="630" class="Comment">-- Restrictions on/choices for usage derivations.</a>

<a id="681" class="Keyword">record</a> <a id="Usage-restrictions"></a><a id="688" href="Graded.Usage.Restrictions.html#688" class="Record">Usage-restrictions</a> <a id="707" class="Symbol">:</a> <a id="709" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="713" class="Symbol">(</a><a id="714" href="Agda.Primitive.html#931" class="Primitive">lsuc</a> <a id="719" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a><a id="720" class="Symbol">)</a> <a id="722" class="Keyword">where</a>
  <a id="730" class="Keyword">no-eta-equality</a>
  <a id="748" class="Keyword">field</a>
    <a id="758" class="Comment">-- The prodrec constructor&#39;s quantities have to satisfy this</a>
    <a id="823" class="Comment">-- predicate (for the current mode).</a>
    <a id="Usage-restrictions.Prodrec-allowed"></a><a id="864" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="880" class="Symbol">:</a> <a id="882" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="887" class="Symbol">→</a> <a id="889" class="Symbol">(</a><a id="890" href="Graded.Usage.Restrictions.html#890" class="Bound">r</a> <a id="892" href="Graded.Usage.Restrictions.html#892" class="Bound">p</a> <a id="894" href="Graded.Usage.Restrictions.html#894" class="Bound">q</a> <a id="896" class="Symbol">:</a> <a id="898" href="Graded.Usage.Restrictions.html#249" class="Bound">M</a><a id="899" class="Symbol">)</a> <a id="901" class="Symbol">→</a> <a id="903" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="907" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a>

    <a id="914" class="Comment">-- Prodrec-allowed is downwards closed in the mode (if 𝟙ᵐ is seen</a>
    <a id="984" class="Comment">-- as a largest element).</a>
    <a id="Usage-restrictions.Prodrec-allowed-downwards-closed"></a><a id="1014" href="Graded.Usage.Restrictions.html#1014" class="Field">Prodrec-allowed-downwards-closed</a> <a id="1047" class="Symbol">:</a>
      <a id="1055" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="1071" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="1074" href="Graded.Usage.Restrictions.html#591" class="Generalizable">r</a> <a id="1076" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="1078" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a> <a id="1080" class="Symbol">→</a> <a id="1082" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="1098" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="1102" href="Graded.Usage.Restrictions.html#618" class="Generalizable">ok</a> <a id="1105" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a> <a id="1107" href="Graded.Usage.Restrictions.html#591" class="Generalizable">r</a> <a id="1109" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="1111" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a>

    <a id="1118" class="Comment">-- The unitrec constructor&#39;s quantities have to satisfy this</a>
    <a id="1183" class="Comment">-- predicate (for the current mode).</a>
    <a id="Usage-restrictions.Unitrec-allowed"></a><a id="1224" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="1240" class="Symbol">:</a> <a id="1242" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="1247" class="Symbol">→</a> <a id="1249" class="Symbol">(</a><a id="1250" href="Graded.Usage.Restrictions.html#1250" class="Bound">p</a> <a id="1252" href="Graded.Usage.Restrictions.html#1252" class="Bound">q</a> <a id="1254" class="Symbol">:</a> <a id="1256" href="Graded.Usage.Restrictions.html#249" class="Bound">M</a><a id="1257" class="Symbol">)</a> <a id="1259" class="Symbol">→</a> <a id="1261" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1265" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a>

    <a id="1272" class="Comment">-- Unitrec-allowed is downwards closed in the mode (if 𝟙ᵐ is seen</a>
    <a id="1342" class="Comment">-- as a largest element).</a>
    <a id="Usage-restrictions.Unitrec-allowed-downwards-closed"></a><a id="1372" href="Graded.Usage.Restrictions.html#1372" class="Field">Unitrec-allowed-downwards-closed</a> <a id="1405" class="Symbol">:</a>
      <a id="1413" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="1429" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="1432" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="1434" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a> <a id="1436" class="Symbol">→</a> <a id="1438" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="1454" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="1458" href="Graded.Usage.Restrictions.html#618" class="Generalizable">ok</a> <a id="1461" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a> <a id="1463" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="1465" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a>

    <a id="1472" class="Comment">-- Should the strong unit type act as a &quot;sink&quot;?</a>
    <a id="Usage-restrictions.starˢ-sink"></a><a id="1524" href="Graded.Usage.Restrictions.html#1524" class="Field">starˢ-sink</a> <a id="1535" class="Symbol">:</a> <a id="1537" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>

    <a id="1547" class="Comment">-- Are most things erased in the usage rule for Id?</a>
    <a id="Usage-restrictions.Id-erased"></a><a id="1603" href="Graded.Usage.Restrictions.html#1603" class="Field">Id-erased</a> <a id="1613" class="Symbol">:</a> <a id="1615" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1619" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a>

    <a id="1626" class="Comment">-- Id-erased is decided.</a>
    <a id="Usage-restrictions.Id-erased?"></a><a id="1655" href="Graded.Usage.Restrictions.html#1655" class="Field">Id-erased?</a> <a id="1666" class="Symbol">:</a> <a id="1668" href="Relation.Nullary.Decidable.Core.html#1485" class="Record">Dec</a> <a id="1672" href="Graded.Usage.Restrictions.html#1603" class="Field">Id-erased</a>

    <a id="1687" class="Comment">-- What kinds of erased matches are allowed for the J rule (for</a>
    <a id="1755" class="Comment">-- the current mode)?</a>
    <a id="Usage-restrictions.erased-matches-for-J"></a><a id="1781" href="Graded.Usage.Restrictions.html#1781" class="Field">erased-matches-for-J</a> <a id="1802" class="Symbol">:</a> <a id="1804" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="1809" class="Symbol">→</a> <a id="1811" href="Graded.Usage.Erased-matches.html#821" class="Datatype">Erased-matches</a>

    <a id="1831" class="Comment">-- The usage rules for J are at least as permissive for 𝟘ᵐ[ ok ]</a>
    <a id="1900" class="Comment">-- as for 𝟙ᵐ. (See Graded.Usage.Properties.Jₘ-generalised and</a>
    <a id="1966" class="Comment">-- Graded.Usage.Properties.J₀ₘ₁-generalised.)</a>
    <a id="Usage-restrictions.erased-matches-for-J-≤ᵉᵐ"></a><a id="2016" href="Graded.Usage.Restrictions.html#2016" class="Field">erased-matches-for-J-≤ᵉᵐ</a> <a id="2041" class="Symbol">:</a>
      <a id="2049" href="Graded.Usage.Restrictions.html#1781" class="Field">erased-matches-for-J</a> <a id="2070" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="2073" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="2077" href="Graded.Usage.Restrictions.html#1781" class="Field">erased-matches-for-J</a> <a id="2098" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="2102" href="Graded.Usage.Restrictions.html#618" class="Generalizable">ok</a> <a id="2105" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a>

    <a id="2112" class="Comment">-- What kinds of erased matches are allowed for the K rule (for</a>
    <a id="2180" class="Comment">-- the current mode)?</a>
    <a id="Usage-restrictions.erased-matches-for-K"></a><a id="2206" href="Graded.Usage.Restrictions.html#2206" class="Field">erased-matches-for-K</a> <a id="2227" class="Symbol">:</a> <a id="2229" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="2234" class="Symbol">→</a> <a id="2236" href="Graded.Usage.Erased-matches.html#821" class="Datatype">Erased-matches</a>

    <a id="2256" class="Comment">-- The usage rules for K are at least as permissive for 𝟘ᵐ[ ok ]</a>
    <a id="2325" class="Comment">-- as for 𝟙ᵐ. (See Graded.Usage.Properties.Kₘ-generalised and</a>
    <a id="2391" class="Comment">-- Graded.Usage.Properties.K₀ₘ₁-generalised.)</a>
    <a id="Usage-restrictions.erased-matches-for-K-≤ᵉᵐ"></a><a id="2441" href="Graded.Usage.Restrictions.html#2441" class="Field">erased-matches-for-K-≤ᵉᵐ</a> <a id="2466" class="Symbol">:</a>
      <a id="2474" href="Graded.Usage.Restrictions.html#2206" class="Field">erased-matches-for-K</a> <a id="2495" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="2498" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="2502" href="Graded.Usage.Restrictions.html#2206" class="Field">erased-matches-for-K</a> <a id="2523" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="2527" href="Graded.Usage.Restrictions.html#618" class="Generalizable">ok</a> <a id="2530" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a>

  <a id="2535" class="Keyword">private</a> <a id="2543" class="Keyword">opaque</a>

    <a id="2555" class="Comment">-- Some lemmas used below.</a>

    <a id="Usage-restrictions.·ᵐ-lemma₁"></a><a id="2587" href="Graded.Usage.Restrictions.html#2587" class="Function">·ᵐ-lemma₁</a> <a id="2597" class="Symbol">:</a>
      <a id="2605" class="Symbol">(</a><a id="2606" href="Graded.Usage.Restrictions.html#2606" class="Bound">P</a> <a id="2608" class="Symbol">:</a> <a id="2610" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="2615" class="Symbol">→</a> <a id="2617" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="2621" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a><a id="2622" class="Symbol">)</a> <a id="2624" class="Symbol">→</a>
      <a id="2632" class="Symbol">(∀</a> <a id="2635" class="Symbol">⦃</a> <a id="2637" href="Graded.Usage.Restrictions.html#2637" class="Bound">ok</a> <a id="2640" class="Symbol">⦄</a> <a id="2642" class="Symbol">→</a> <a id="2644" href="Graded.Usage.Restrictions.html#2606" class="Bound">P</a> <a id="2646" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="2649" class="Symbol">→</a> <a id="2651" href="Graded.Usage.Restrictions.html#2606" class="Bound">P</a> <a id="2653" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="2657" href="Graded.Usage.Restrictions.html#2637" class="Bound">ok</a> <a id="2660" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a><a id="2661" class="Symbol">)</a> <a id="2663" class="Symbol">→</a>
      <a id="2671" href="Graded.Usage.Restrictions.html#2606" class="Bound">P</a> <a id="2673" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="2675" class="Symbol">→</a> <a id="2677" href="Graded.Usage.Restrictions.html#2606" class="Bound">P</a> <a id="2679" class="Symbol">(</a><a id="2680" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="2683" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="2686" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="2687" class="Symbol">)</a>
    <a id="2693" href="Graded.Usage.Restrictions.html#2587" class="Function">·ᵐ-lemma₁</a> <a id="2703" class="Symbol">{</a><a id="2704" class="Argument">m′</a> <a id="2707" class="Symbol">=</a> <a id="2709" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a><a id="2711" class="Symbol">}</a> <a id="2713" class="Symbol">_</a> <a id="2715" class="Symbol">_</a> <a id="2717" class="Symbol">=</a>
      <a id="2725" href="Function.Base.html#704" class="Function">idᶠ</a>
    <a id="2733" href="Graded.Usage.Restrictions.html#2587" class="Function">·ᵐ-lemma₁</a> <a id="2743" class="Symbol">{</a><a id="2744" class="Argument">m</a> <a id="2746" class="Symbol">=</a> <a id="2748" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a><a id="2750" class="Symbol">}</a> <a id="2752" class="Symbol">{</a><a id="2753" class="Argument">m′</a> <a id="2756" class="Symbol">=</a> <a id="2758" href="Graded.Mode.html#1121" class="InductiveConstructor">𝟘ᵐ</a><a id="2760" class="Symbol">}</a> <a id="2762" class="Symbol">_</a> <a id="2764" href="Graded.Usage.Restrictions.html#2764" class="Bound">hyp</a> <a id="2768" class="Symbol">=</a>
      <a id="2776" href="Graded.Usage.Restrictions.html#2764" class="Bound">hyp</a>
    <a id="2784" href="Graded.Usage.Restrictions.html#2587" class="Function">·ᵐ-lemma₁</a> <a id="2794" class="Symbol">{</a><a id="2795" class="Argument">m</a> <a id="2797" class="Symbol">=</a> <a id="2799" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="2803" href="Graded.Usage.Restrictions.html#2803" class="Bound">ok</a> <a id="2806" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a><a id="2807" class="Symbol">}</a> <a id="2809" class="Symbol">{</a><a id="2810" class="Argument">m′</a> <a id="2813" class="Symbol">=</a> <a id="2815" href="Graded.Mode.html#1121" class="InductiveConstructor">𝟘ᵐ</a><a id="2817" class="Symbol">}</a> <a id="2819" href="Graded.Usage.Restrictions.html#2819" class="Bound">P</a> <a id="2821" href="Graded.Usage.Restrictions.html#2821" class="Bound">hyp</a> <a id="2825" class="Symbol">=</a>
      <a id="2833" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">subst</a> <a id="2839" class="Symbol">(λ</a> <a id="2842" href="Graded.Usage.Restrictions.html#2842" class="Bound">m</a> <a id="2844" class="Symbol">→</a> <a id="2846" href="Graded.Usage.Restrictions.html#2819" class="Bound">P</a> <a id="2848" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="2852" href="Graded.Usage.Restrictions.html#2803" class="Bound">ok</a> <a id="2855" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a> <a id="2857" class="Symbol">→</a> <a id="2859" href="Graded.Usage.Restrictions.html#2819" class="Bound">P</a> <a id="2861" href="Graded.Usage.Restrictions.html#2842" class="Bound">m</a><a id="2862" class="Symbol">)</a> <a id="2864" href="Graded.Mode.html#2377" class="Function">𝟘ᵐ-cong</a> <a id="2872" href="Function.Base.html#704" class="Function">idᶠ</a>

    <a id="Usage-restrictions.·ᵐ-lemma₂"></a><a id="2881" href="Graded.Usage.Restrictions.html#2881" class="Function">·ᵐ-lemma₂</a> <a id="2891" class="Symbol">:</a>
      <a id="2899" class="Symbol">(</a><a id="2900" href="Graded.Usage.Restrictions.html#2900" class="Bound">f</a> <a id="2902" class="Symbol">:</a> <a id="2904" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="2909" class="Symbol">→</a> <a id="2911" href="Graded.Usage.Erased-matches.html#821" class="Datatype">Erased-matches</a><a id="2925" class="Symbol">)</a> <a id="2927" class="Symbol">→</a>
      <a id="2935" class="Symbol">(∀</a> <a id="2938" class="Symbol">⦃</a> <a id="2940" href="Graded.Usage.Restrictions.html#2940" class="Bound">ok</a> <a id="2943" class="Symbol">⦄</a> <a id="2945" class="Symbol">→</a> <a id="2947" href="Graded.Usage.Restrictions.html#2900" class="Bound">f</a> <a id="2949" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="2952" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="2956" href="Graded.Usage.Restrictions.html#2900" class="Bound">f</a> <a id="2958" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="2962" href="Graded.Usage.Restrictions.html#2940" class="Bound">ok</a> <a id="2965" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a><a id="2966" class="Symbol">)</a> <a id="2968" class="Symbol">→</a>
      <a id="2976" href="Graded.Usage.Restrictions.html#2900" class="Bound">f</a> <a id="2978" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="2980" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="2984" href="Graded.Usage.Restrictions.html#2900" class="Bound">f</a> <a id="2986" class="Symbol">(</a><a id="2987" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="2990" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="2993" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="2994" class="Symbol">)</a>
    <a id="3000" href="Graded.Usage.Restrictions.html#2881" class="Function">·ᵐ-lemma₂</a>          <a id="3019" class="Symbol">{</a><a id="3020" class="Argument">m′</a> <a id="3023" class="Symbol">=</a> <a id="3025" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a><a id="3027" class="Symbol">}</a> <a id="3029" class="Symbol">_</a> <a id="3031" class="Symbol">_</a>   <a id="3035" class="Symbol">=</a> <a id="3037" href="Graded.Usage.Erased-matches.html#1267" class="Function">≤ᵉᵐ-reflexive</a>
    <a id="3055" href="Graded.Usage.Restrictions.html#2881" class="Function">·ᵐ-lemma₂</a> <a id="3065" class="Symbol">{</a><a id="3066" class="Argument">m</a> <a id="3068" class="Symbol">=</a> <a id="3070" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a><a id="3072" class="Symbol">}</a> <a id="3074" class="Symbol">{</a><a id="3075" class="Argument">m′</a> <a id="3078" class="Symbol">=</a> <a id="3080" href="Graded.Mode.html#1121" class="InductiveConstructor">𝟘ᵐ</a><a id="3082" class="Symbol">}</a> <a id="3084" class="Symbol">_</a> <a id="3086" href="Graded.Usage.Restrictions.html#3086" class="Bound">hyp</a> <a id="3090" class="Symbol">=</a> <a id="3092" href="Graded.Usage.Restrictions.html#3086" class="Bound">hyp</a>
    <a id="3100" href="Graded.Usage.Restrictions.html#2881" class="Function">·ᵐ-lemma₂</a> <a id="3110" class="Symbol">{</a><a id="3111" class="Argument">m</a> <a id="3113" class="Symbol">=</a> <a id="3115" href="Graded.Mode.html#1121" class="InductiveConstructor">𝟘ᵐ</a><a id="3117" class="Symbol">}</a> <a id="3119" class="Symbol">{</a><a id="3120" class="Argument">m′</a> <a id="3123" class="Symbol">=</a> <a id="3125" href="Graded.Mode.html#1121" class="InductiveConstructor">𝟘ᵐ</a><a id="3127" class="Symbol">}</a> <a id="3129" href="Graded.Usage.Restrictions.html#3129" class="Bound">f</a> <a id="3131" class="Symbol">_</a>   <a id="3135" class="Symbol">=</a>
      <a id="3143" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">subst</a> <a id="3149" class="Symbol">(</a><a id="3150" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">_≤ᵉᵐ_</a> <a id="3156" class="Symbol">_)</a> <a id="3159" class="Symbol">(</a><a id="3160" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a> <a id="3165" href="Graded.Usage.Restrictions.html#3129" class="Bound">f</a> <a id="3167" href="Graded.Mode.html#2377" class="Function">𝟘ᵐ-cong</a><a id="3174" class="Symbol">)</a> <a id="3176" href="Graded.Usage.Erased-matches.html#1267" class="Function">≤ᵉᵐ-reflexive</a>

  <a id="3193" class="Keyword">opaque</a>

    <a id="3205" class="Comment">-- Prodrec-allowed is closed under application of m′ ·ᵐ_ to the</a>
    <a id="3273" class="Comment">-- mode.</a>

    <a id="Usage-restrictions.Prodrec-allowed-·ᵐ"></a><a id="3287" href="Graded.Usage.Restrictions.html#3287" class="Function">Prodrec-allowed-·ᵐ</a> <a id="3306" class="Symbol">:</a>
      <a id="3314" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="3330" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="3332" href="Graded.Usage.Restrictions.html#591" class="Generalizable">r</a> <a id="3334" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="3336" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a> <a id="3338" class="Symbol">→</a> <a id="3340" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="3356" class="Symbol">(</a><a id="3357" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="3360" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="3363" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="3364" class="Symbol">)</a> <a id="3366" href="Graded.Usage.Restrictions.html#591" class="Generalizable">r</a> <a id="3368" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="3370" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a>
    <a id="3376" href="Graded.Usage.Restrictions.html#3287" class="Function">Prodrec-allowed-·ᵐ</a> <a id="3395" class="Symbol">=</a>
      <a id="3403" href="Graded.Usage.Restrictions.html#2587" class="Function">·ᵐ-lemma₁</a> <a id="3413" class="Symbol">(λ</a> <a id="3416" href="Graded.Usage.Restrictions.html#3416" class="Bound">m</a> <a id="3418" class="Symbol">→</a> <a id="3420" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="3436" href="Graded.Usage.Restrictions.html#3416" class="Bound">m</a> <a id="3438" class="Symbol">_</a> <a id="3440" class="Symbol">_</a> <a id="3442" class="Symbol">_)</a>
        <a id="3453" href="Graded.Usage.Restrictions.html#1014" class="Field">Prodrec-allowed-downwards-closed</a>

  <a id="3489" class="Keyword">opaque</a>

    <a id="3501" class="Comment">-- Unitrec-allowed is closed under application of m′ ·ᵐ_ to the</a>
    <a id="3569" class="Comment">-- mode.</a>

    <a id="Usage-restrictions.Unitrec-allowed-·ᵐ"></a><a id="3583" href="Graded.Usage.Restrictions.html#3583" class="Function">Unitrec-allowed-·ᵐ</a> <a id="3602" class="Symbol">:</a>
      <a id="3610" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="3626" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="3628" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="3630" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a> <a id="3632" class="Symbol">→</a> <a id="3634" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="3650" class="Symbol">(</a><a id="3651" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="3654" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="3657" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="3658" class="Symbol">)</a> <a id="3660" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="3662" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a>
    <a id="3668" href="Graded.Usage.Restrictions.html#3583" class="Function">Unitrec-allowed-·ᵐ</a> <a id="3687" class="Symbol">=</a>
      <a id="3695" href="Graded.Usage.Restrictions.html#2587" class="Function">·ᵐ-lemma₁</a> <a id="3705" class="Symbol">(λ</a> <a id="3708" href="Graded.Usage.Restrictions.html#3708" class="Bound">m</a> <a id="3710" class="Symbol">→</a> <a id="3712" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="3728" href="Graded.Usage.Restrictions.html#3708" class="Bound">m</a> <a id="3730" class="Symbol">_</a> <a id="3732" class="Symbol">_)</a>
        <a id="3743" href="Graded.Usage.Restrictions.html#1372" class="Field">Unitrec-allowed-downwards-closed</a>

  <a id="3779" class="Comment">-- Does the strong unit type act as a &quot;sink&quot;?</a>

  <a id="Usage-restrictions.Starˢ-sink"></a><a id="3828" href="Graded.Usage.Restrictions.html#3828" class="Function">Starˢ-sink</a> <a id="3839" class="Symbol">:</a> <a id="3841" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="3847" href="Graded.Usage.Restrictions.html#3828" class="Function">Starˢ-sink</a> <a id="3858" class="Symbol">=</a> <a id="3860" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="3862" href="Graded.Usage.Restrictions.html#1524" class="Field">starˢ-sink</a>

  <a id="3876" class="Comment">-- Does the strong unit type not act as a &quot;sink&quot;?</a>
  <a id="3928" class="Comment">--</a>
  <a id="3933" class="Comment">-- This type is used instead of ¬ Starˢ-sink because &quot;¬ A&quot; does not</a>
  <a id="4003" class="Comment">-- work well as the type of an instance argument.</a>

  <a id="Usage-restrictions.¬Starˢ-sink"></a><a id="4056" href="Graded.Usage.Restrictions.html#4056" class="Function">¬Starˢ-sink</a> <a id="4068" class="Symbol">:</a> <a id="4070" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="4076" href="Graded.Usage.Restrictions.html#4056" class="Function">¬Starˢ-sink</a> <a id="4088" class="Symbol">=</a> <a id="4090" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="4092" class="Symbol">(</a><a id="4093" href="Data.Bool.Base.html#941" class="Function">not</a> <a id="4097" href="Graded.Usage.Restrictions.html#1524" class="Field">starˢ-sink</a><a id="4107" class="Symbol">)</a>

  <a id="4112" class="Comment">-- The strong unit type is not allowed to both act and not act as a</a>
  <a id="4182" class="Comment">-- sink.</a>

  <a id="Usage-restrictions.not-sink-and-no-sink"></a><a id="4194" href="Graded.Usage.Restrictions.html#4194" class="Function">not-sink-and-no-sink</a> <a id="4215" class="Symbol">:</a> <a id="4217" href="Graded.Usage.Restrictions.html#3828" class="Function">Starˢ-sink</a> <a id="4228" class="Symbol">→</a> <a id="4230" href="Graded.Usage.Restrictions.html#4056" class="Function">¬Starˢ-sink</a> <a id="4242" class="Symbol">→</a> <a id="4244" href="Data.Empty.html#895" class="Function">⊥</a>
  <a id="4248" href="Graded.Usage.Restrictions.html#4194" class="Function">not-sink-and-no-sink</a> <a id="4269" href="Graded.Usage.Restrictions.html#4269" class="Bound">sink</a> <a id="4274" href="Graded.Usage.Restrictions.html#4274" class="Bound">¬sink</a> <a id="4280" class="Keyword">with</a> <a id="4285" href="Graded.Usage.Restrictions.html#1524" class="Field">starˢ-sink</a>
  <a id="4298" class="Symbol">…</a> <a id="4300" class="Symbol">|</a> <a id="4302" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="4308" class="Symbol">=</a> <a id="4310" class="Bound">sink</a>
  <a id="4317" class="Symbol">…</a> <a id="4319" class="Symbol">|</a> <a id="4321" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="4326" class="Symbol">=</a> <a id="4328" class="Bound">¬sink</a>

  <a id="4337" class="Comment">-- The strong unit type either acts or does not act as a sink.</a>

  <a id="Usage-restrictions.sink-or-no-sink"></a><a id="4403" href="Graded.Usage.Restrictions.html#4403" class="Function">sink-or-no-sink</a> <a id="4419" class="Symbol">:</a> <a id="4421" href="Graded.Usage.Restrictions.html#3828" class="Function">Starˢ-sink</a> <a id="4432" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="4434" href="Graded.Usage.Restrictions.html#4056" class="Function">¬Starˢ-sink</a>
  <a id="4448" href="Graded.Usage.Restrictions.html#4403" class="Function">sink-or-no-sink</a> <a id="4464" class="Keyword">with</a> <a id="4469" href="Graded.Usage.Restrictions.html#1524" class="Field">starˢ-sink</a>
  <a id="4482" href="Graded.Usage.Restrictions.html#4403" class="Function">…</a> <a id="4484" class="Symbol">|</a> <a id="4486" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="4492" class="Symbol">=</a> <a id="4494" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="4499" class="Symbol">_</a>
  <a id="4503" href="Graded.Usage.Restrictions.html#4403" class="Function">…</a> <a id="4505" class="Symbol">|</a> <a id="4507" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="4512" class="Symbol">=</a> <a id="4514" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="4519" class="Symbol">_</a>

  <a id="4524" class="Keyword">opaque</a>

    <a id="4536" class="Comment">-- The usage rules for J are at least as permissive for m′ ·ᵐ m as</a>
    <a id="4607" class="Comment">-- for m. (See Graded.Usage.Properties.Jₘ-generalised and</a>
    <a id="4669" class="Comment">-- Graded.Usage.Properties.J₀ₘ₁-generalised.)</a>

    <a id="Usage-restrictions.erased-matches-for-J-≤ᵉᵐ·ᵐ"></a><a id="4720" href="Graded.Usage.Restrictions.html#4720" class="Function">erased-matches-for-J-≤ᵉᵐ·ᵐ</a> <a id="4747" class="Symbol">:</a>
      <a id="4755" href="Graded.Usage.Restrictions.html#1781" class="Field">erased-matches-for-J</a> <a id="4776" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="4778" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="4782" href="Graded.Usage.Restrictions.html#1781" class="Field">erased-matches-for-J</a> <a id="4803" class="Symbol">(</a><a id="4804" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="4807" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="4810" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="4811" class="Symbol">)</a>
    <a id="4817" href="Graded.Usage.Restrictions.html#4720" class="Function">erased-matches-for-J-≤ᵉᵐ·ᵐ</a> <a id="4844" class="Symbol">=</a>
      <a id="4852" href="Graded.Usage.Restrictions.html#2881" class="Function">·ᵐ-lemma₂</a> <a id="4862" href="Graded.Usage.Restrictions.html#1781" class="Field">erased-matches-for-J</a> <a id="4883" href="Graded.Usage.Restrictions.html#2016" class="Field">erased-matches-for-J-≤ᵉᵐ</a>

  <a id="4911" class="Keyword">opaque</a>

    <a id="4923" class="Comment">-- The usage rules for K are at least as permissive for m′ ·ᵐ m as</a>
    <a id="4994" class="Comment">-- for m. (See Graded.Usage.Properties.Kₘ-generalised and</a>
    <a id="5056" class="Comment">-- Graded.Usage.Properties.K₀ₘ₁-generalised.)</a>

    <a id="Usage-restrictions.erased-matches-for-K-≤ᵉᵐ·ᵐ"></a><a id="5107" href="Graded.Usage.Restrictions.html#5107" class="Function">erased-matches-for-K-≤ᵉᵐ·ᵐ</a> <a id="5134" class="Symbol">:</a>
      <a id="5142" href="Graded.Usage.Restrictions.html#2206" class="Field">erased-matches-for-K</a> <a id="5163" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="5165" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="5169" href="Graded.Usage.Restrictions.html#2206" class="Field">erased-matches-for-K</a> <a id="5190" class="Symbol">(</a><a id="5191" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="5194" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="5197" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="5198" class="Symbol">)</a>
    <a id="5204" href="Graded.Usage.Restrictions.html#5107" class="Function">erased-matches-for-K-≤ᵉᵐ·ᵐ</a> <a id="5231" class="Symbol">=</a>
      <a id="5239" href="Graded.Usage.Restrictions.html#2881" class="Function">·ᵐ-lemma₂</a> <a id="5249" href="Graded.Usage.Restrictions.html#2206" class="Field">erased-matches-for-K</a> <a id="5270" href="Graded.Usage.Restrictions.html#2441" class="Field">erased-matches-for-K-≤ᵉᵐ</a>
</pre></body></html>