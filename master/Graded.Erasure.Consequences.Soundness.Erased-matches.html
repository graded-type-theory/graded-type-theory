<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Consequences.Soundness.Erased-matches</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Soundness of the extraction function in the presence of certain</a>
<a id="141" class="Comment">-- kinds of erased matches</a>
<a id="168" class="Comment">------------------------------------------------------------------------</a>

<a id="242" class="Keyword">import</a> <a id="249" href="Definition.Typed.html" class="Module">Definition.Typed</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>
<a id="308" class="Keyword">import</a> <a id="315" href="Definition.Untyped.html" class="Module">Definition.Untyped</a>
<a id="334" class="Keyword">open</a> <a id="339" class="Keyword">import</a> <a id="346" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a> <a id="368" class="Symbol">as</a> <a id="371" class="Module">T</a> <a id="373" class="Keyword">using</a> <a id="379" class="Symbol">(</a><a id="380" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="390" class="Symbol">)</a>
<a id="392" class="Keyword">open</a> <a id="397" class="Keyword">import</a> <a id="404" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="420" class="Keyword">import</a> <a id="427" href="Graded.Mode.html" class="Module">Graded.Mode</a>
<a id="439" class="Keyword">import</a> <a id="446" href="Graded.Restrictions.html" class="Module">Graded.Restrictions</a>
<a id="466" class="Keyword">open</a> <a id="471" class="Keyword">import</a> <a id="478" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="504" class="Keyword">open</a> <a id="509" class="Keyword">import</a> <a id="516" href="Tools.Bool.html" class="Module">Tools.Bool</a>
<a id="527" class="Keyword">open</a> <a id="532" class="Keyword">import</a> <a id="539" href="Tools.Nat.html" class="Module">Tools.Nat</a>

<a id="550" class="Keyword">module</a> <a id="557" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html" class="Module">Graded.Erasure.Consequences.Soundness.Erased-matches</a>
  <a id="612" class="Symbol">{</a><a id="613" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#613" class="Bound">a</a><a id="614" class="Symbol">}</a> <a id="616" class="Symbol">{</a><a id="617" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a> <a id="619" class="Symbol">:</a> <a id="621" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="625" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#613" class="Bound">a</a><a id="626" class="Symbol">}</a>
  <a id="630" class="Symbol">(</a><a id="631" class="Keyword">open</a> <a id="636" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="655" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a><a id="656" class="Symbol">)</a>
  <a id="660" class="Symbol">{</a><a id="661" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="663" class="Symbol">:</a> <a id="665" href="Graded.Modality.html#8202" class="Record">Modality</a> <a id="674" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a><a id="675" class="Symbol">}</a>
  <a id="679" class="Symbol">(</a><a id="680" class="Keyword">open</a> <a id="685" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="697" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="698" class="Symbol">)</a>
  <a id="702" class="Symbol">(</a><a id="703" class="Keyword">open</a> <a id="708" href="Graded.Restrictions.html" class="Module">Graded.Restrictions</a> <a id="728" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="729" class="Symbol">)</a>
  <a id="733" class="Symbol">(</a><a id="734" class="Keyword">open</a> <a id="739" href="Graded.Modality.html#8202" class="Module">Modality</a> <a id="748" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="749" class="Symbol">)</a>
  <a id="753" class="Symbol">(</a><a id="754" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="757" class="Symbol">:</a> <a id="759" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="777" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="778" class="Symbol">)</a>
  <a id="782" class="Symbol">(</a><a id="783" class="Keyword">open</a> <a id="788" href="Definition.Typed.Restrictions.html#752" class="Module">Type-restrictions</a> <a id="806" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a><a id="808" class="Symbol">)</a>
  <a id="812" class="Symbol">(</a><a id="813" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a> <a id="816" class="Symbol">:</a> <a id="818" href="Graded.Usage.Restrictions.html#750" class="Record">Usage-restrictions</a> <a id="837" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="838" class="Symbol">)</a>
  <a id="842" class="Symbol">(</a><a id="843" class="Keyword">open</a> <a id="848" href="Graded.Usage.Restrictions.html#750" class="Module">Usage-restrictions</a> <a id="867" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a><a id="869" class="Symbol">)</a>
  <a id="873" class="Symbol">{</a><a id="874" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#874" class="Bound">k</a> <a id="876" class="Symbol">:</a> <a id="878" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="881" class="Symbol">}</a>
  <a id="885" class="Comment">-- A context.</a>
  <a id="901" class="Symbol">(</a><a id="902" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="904" class="Symbol">:</a> <a id="906" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="910" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="915" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#874" class="Bound">k</a><a id="916" class="Symbol">)</a>
  <a id="920" class="Comment">-- If erased matches are allowed for emptyrec when the mode is 𝟙ᵐ,</a>
  <a id="989" class="Comment">-- then Δ is consistent with respect to a variant of the type system</a>
  <a id="1060" class="Comment">-- for which η-equality is allowed for weak unit types.</a>
  <a id="1118" class="Symbol">(</a><a id="1119" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1119" class="Bound">consistent</a> <a id="1130" class="Symbol">:</a>
     <a id="1137" class="Keyword">let</a> <a id="1141" class="Keyword">open</a> <a id="1146" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="1163" class="Symbol">(</a><a id="1164" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="1167" href="Graded.Restrictions.html#5290" class="Function Operator">with-η-for-Unitʷ</a><a id="1183" class="Symbol">)</a> <a id="1185" class="Keyword">in</a>
     <a id="1193" href="Graded.Usage.Restrictions.html#1638" class="Field">Emptyrec-allowed</a> <a id="1210" href="Graded.Mode.html#1117" class="InductiveConstructor">𝟙ᵐ</a> <a id="1213" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="1215" class="Symbol">→</a>
     <a id="1222" href="Definition.Typed.html#21923" class="Function">Consistent</a> <a id="1233" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a><a id="1234" class="Symbol">)</a>
  <a id="1238" class="Comment">-- Certain erased matches are not allowed.</a>
  <a id="1283" class="Symbol">(</a><a id="1284" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1284" class="Bound">only-some-erased-matches</a> <a id="1309" class="Symbol">:</a> <a id="1311" href="Graded.Restrictions.html#9906" class="Function">Only-some-erased-matches</a> <a id="1336" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="1339" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a><a id="1341" class="Symbol">)</a>
  <a id="1345" class="Comment">-- The variant of extraction that is used.</a>
  <a id="1390" class="Symbol">(</a><a id="1391" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1391" class="Bound">str</a> <a id="1395" class="Symbol">:</a> <a id="1397" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="1407" class="Symbol">)</a>
  <a id="1411" class="Comment">-- The modality&#39;s zero is well-behaved.</a>
  <a id="1453" class="Symbol">⦃</a> <a id="1455" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1455" class="Bound">𝟘-well-behaved</a> <a id="1470" class="Symbol">:</a> <a id="1472" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="1494" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a> <a id="1496" href="Graded.Modality.html#8343" class="Field">semiring-with-meet</a> <a id="1515" class="Symbol">⦄</a>
  <a id="1519" class="Keyword">where</a>

<a id="1526" class="Keyword">import</a> <a id="1533" href="Definition.Typed.QuantityTranslation.html" class="Module">Definition.Typed.QuantityTranslation</a> <a id="1570" class="Symbol">as</a> <a id="1573" class="Module">QT</a>
<a id="1576" class="Keyword">open</a> <a id="1581" class="Keyword">import</a> <a id="1588" href="Definition.Untyped.QuantityTranslation.html" class="Module">Definition.Untyped.QuantityTranslation</a>
<a id="1627" class="Keyword">open</a> <a id="1632" class="Keyword">import</a> <a id="1639" href="Definition.Untyped.QuantityTranslation.Identity.html" class="Module">Definition.Untyped.QuantityTranslation.Identity</a> <a id="1687" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a>

<a id="1690" class="Keyword">open</a> <a id="1695" class="Keyword">import</a> <a id="1702" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1717" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a>
<a id="1719" class="Keyword">open</a> <a id="1724" class="Keyword">import</a> <a id="1731" href="Graded.Modality.Morphism.html" class="Module">Graded.Modality.Morphism</a>
<a id="1756" class="Keyword">open</a> <a id="1761" class="Keyword">import</a> <a id="1768" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="1781" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="1783" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a>

<a id="1787" class="Keyword">import</a> <a id="1794" href="Graded.Erasure.Consequences.Soundness.html" class="Module">Graded.Erasure.Consequences.Soundness</a>
<a id="1832" class="Keyword">open</a> <a id="1837" class="Keyword">import</a> <a id="1844" href="Graded.Erasure.Extraction.html" class="Module">Graded.Erasure.Extraction</a> <a id="1870" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a>
<a id="1872" class="Keyword">import</a> <a id="1879" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a>

<a id="1902" class="Keyword">open</a> <a id="1907" class="Keyword">import</a> <a id="1914" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="1929" class="Keyword">open</a> <a id="1934" class="Keyword">import</a> <a id="1941" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="1955" class="Keyword">open</a> <a id="1960" class="Keyword">import</a> <a id="1967" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="1995" class="Symbol">as</a> <a id="1998" class="Module">PE</a>
<a id="2001" class="Keyword">open</a> <a id="2006" class="Keyword">import</a> <a id="2013" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="2024" class="Keyword">private</a> <a id="2032" class="Keyword">variable</a>
  <a id="2043" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2043" class="Generalizable">Γ</a>   <a id="2047" class="Symbol">:</a> <a id="2049" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="2053" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="2058" class="Symbol">_</a>
  <a id="2062" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2062" class="Generalizable">A</a> <a id="2064" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2064" class="Generalizable">t</a> <a id="2066" class="Symbol">:</a> <a id="2068" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="2073" class="Symbol">_</a>
  <a id="2077" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2077" class="Generalizable">s</a>   <a id="2081" class="Symbol">:</a> <a id="2083" href="Definition.Untyped.NotParametrised.html#1617" class="Datatype">Strength</a>
  <a id="2094" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2094" class="Generalizable">l</a>   <a id="2098" class="Symbol">:</a> <a id="2100" href="Definition.Untyped.NotParametrised.html#3897" class="Function">Universe-level</a>

<a id="2116" class="Comment">-- A variant of the type restrictions for which η-equality is allowed</a>
<a id="2186" class="Comment">-- for weak unit types.</a>

<a id="TR-η"></a><a id="2211" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2211" class="Function">TR-η</a> <a id="2216" class="Symbol">:</a> <a id="2218" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="2236" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a>
<a id="2238" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2211" class="Function">TR-η</a> <a id="2243" class="Symbol">=</a> <a id="2245" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="2248" href="Graded.Restrictions.html#5290" class="Function Operator">with-η-for-Unitʷ</a>

<a id="2266" class="Comment">-- TR is used by default.</a>

<a id="2293" class="Keyword">open</a> <a id="2298" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="2315" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a>
<a id="2318" class="Keyword">open</a> <a id="2323" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a> <a id="2345" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a>

<a id="2349" class="Comment">-- The modules T-η and SR-η use TR-η.</a>

<a id="2388" class="Keyword">private</a>
  <a id="2398" class="Keyword">module</a> <a id="T-η"></a><a id="2405" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2405" class="Module">T-η</a>         <a id="2417" class="Symbol">=</a> <a id="2419" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="2436" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2211" class="Function">TR-η</a>
  <a id="2443" class="Keyword">module</a> <a id="SR-η"></a><a id="2450" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2450" class="Module">SR-η</a>        <a id="2462" class="Symbol">=</a> <a id="2464" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a> <a id="2486" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2211" class="Function">TR-η</a>
  <a id="2493" class="Keyword">module</a> <a id="Soundness-η"></a><a id="2500" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2500" class="Module">Soundness-η</a> <a id="2512" class="Symbol">=</a>
    <a id="2518" href="Graded.Erasure.Consequences.Soundness.html#6117" class="Module">Graded.Erasure.Consequences.Soundness.Soundness</a> <a id="2566" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2211" class="Function">TR-η</a> <a id="2571" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a>
      <a id="2580" class="Symbol">(</a><a id="2581" class="Keyword">record</a>
         <a id="2597" class="Symbol">{</a> <a id="2599" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1195" class="Field">consistent</a>                  <a id="2627" class="Symbol">=</a> <a id="2629" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1119" class="Bound">consistent</a>
         <a id="2649" class="Symbol">;</a> <a id="2651" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1316" class="Field">closed-or-no-erased-matches</a> <a id="2679" class="Symbol">=</a>
             <a id="2694" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2699" href="Function.Base.html#1974" class="Function Operator">$</a>
             <a id="2714" href="Graded.Restrictions.html#12401" class="Function">Only-some-erased-matches→No-erased-matches</a>
               <a id="2772" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2211" class="Function">TR-η</a> <a id="2777" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a> <a id="2780" class="Symbol">_</a> <a id="2782" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1284" class="Bound">only-some-erased-matches</a>
         <a id="2816" class="Symbol">})</a>
      <a id="2825" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1391" class="Bound">str</a>

<a id="2830" class="Keyword">opaque</a>

  <a id="2840" class="Comment">-- The relation _⊢_∷_ is contained in T-η._⊢_∷_.</a>

  <a id="⊢∷→⊢∷-η"></a><a id="2892" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2892" class="Function">⊢∷→⊢∷-η</a> <a id="2900" class="Symbol">:</a> <a id="2902" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2043" class="Generalizable">Γ</a> <a id="2904" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="2906" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2064" class="Generalizable">t</a> <a id="2908" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="2910" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2062" class="Generalizable">A</a> <a id="2912" class="Symbol">→</a> <a id="2914" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2043" class="Generalizable">Γ</a> <a id="2916" href="Definition.Typed.html#1755" class="Datatype Operator">T-η.⊢</a> <a id="2922" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2064" class="Generalizable">t</a> <a id="2924" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="2926" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2062" class="Generalizable">A</a>
  <a id="2930" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2892" class="Function">⊢∷→⊢∷-η</a> <a id="2938" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2938" class="Bound">⊢t</a> <a id="2941" class="Symbol">=</a>
    <a id="2947" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="2952" href="Graded.Modality.Morphism.html#8499" class="Field">Is-order-embedding.tr-morphism</a> <a id="2983" href="Graded.Modality.Morphism.html#18098" class="Function">Is-order-embedding-id</a> <a id="3005" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3008" class="Symbol">λ</a>
      <a id="3016" class="Symbol">(</a><a id="3017" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3017" class="Bound">m</a> <a id="3019" class="Symbol">:</a> <a id="3021" href="Graded.Modality.Morphism.html#1400" class="Record">Is-morphism</a> <a id="3033" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="3035" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="3037" href="Function.Base.html#704" class="Function">idᶠ</a><a id="3040" class="Symbol">)</a> <a id="3042" class="Symbol">→</a>
    <a id="3048" href="Tools.PropositionalEquality.html#1583" class="Function">subst₃</a> <a id="3055" href="Definition.Typed.html#1755" class="Datatype Operator">T-η._⊢_∷_</a> <a id="3065" href="Definition.Untyped.QuantityTranslation.Identity.html#2823" class="Function">tr-Con-id</a> <a id="3075" href="Definition.Untyped.QuantityTranslation.Identity.html#2641" class="Function">tr-Term-id</a> <a id="3086" href="Definition.Untyped.QuantityTranslation.Identity.html#2641" class="Function">tr-Term-id</a> <a id="3097" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="3103" href="Definition.Typed.QuantityTranslation.html#3518" class="Function">QT.tr-⊢∷</a> <a id="3112" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="3115" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2211" class="Function">TR-η</a> <a id="3120" href="Function.Base.html#704" class="Function">idᶠ</a> <a id="3124" href="Function.Base.html#704" class="Function">idᶠ</a> <a id="3128" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3017" class="Bound">m</a> <a id="3130" class="Symbol">(</a><a id="3131" href="Graded.Modality.Morphism.html#16614" class="Function">Is-morphism→Is-Σ-morphism</a> <a id="3157" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3017" class="Bound">m</a><a id="3158" class="Symbol">)</a>
      <a id="3166" class="Symbol">(</a><a id="3167" class="Keyword">record</a>
         <a id="3183" class="Symbol">{</a> <a id="3185" href="Graded.Modality.Morphism.Type-restrictions.html#1522" class="Field">Unit-preserved</a>    <a id="3203" class="Symbol">=</a> <a id="3205" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3218" class="Symbol">;</a> <a id="3220" href="Graded.Modality.Morphism.Type-restrictions.html#1679" class="Field">ΠΣ-preserved</a>      <a id="3238" class="Symbol">=</a> <a id="3240" class="Symbol">λ</a> <a id="3242" class="Symbol">{</a><a id="3243" class="Argument">b</a> <a id="3245" class="Symbol">=</a> <a id="3247" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3247" class="Bound">b</a><a id="3248" class="Symbol">}</a> <a id="3250" class="Symbol">→</a>
                                 <a id="3285" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="3291" class="Symbol">(</a><a id="3292" href="Function.Base.html#1638" class="Function">flip</a> <a id="3297" class="Symbol">(</a><a id="3298" href="Definition.Typed.Restrictions.html#1134" class="Field">ΠΣ-allowed</a> <a id="3309" class="Symbol">_)</a> <a id="3312" class="Symbol">_)</a> <a id="3315" href="Function.Base.html#1974" class="Function Operator">$</a>
                                 <a id="3350" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="3357" href="Function.Base.html#1974" class="Function Operator">$</a>
                                 <a id="3392" href="Definition.Untyped.QuantityTranslation.Identity.html#838" class="Function">tr-BinderMode-id</a> <a id="3409" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3247" class="Bound">b</a>
         <a id="3420" class="Symbol">;</a> <a id="3422" href="Graded.Modality.Morphism.Type-restrictions.html#1839" class="Field">K-preserved</a>       <a id="3440" class="Symbol">=</a> <a id="3442" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3455" class="Symbol">;</a> <a id="3457" href="Graded.Modality.Morphism.Type-restrictions.html#1959" class="Field">[]-cong-preserved</a> <a id="3475" class="Symbol">=</a> <a id="3477" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3490" class="Symbol">})</a>
      <a id="3499" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2938" class="Bound">⊢t</a>

<a id="3503" class="Keyword">opaque</a>

  <a id="3513" class="Comment">-- Soundness of erasure for natural numbers.</a>
  <a id="3560" class="Comment">--</a>
  <a id="3565" class="Comment">-- Note that SR-η._⊢_⇒ˢ*_∷ℕ is used in the statement of this</a>
  <a id="3628" class="Comment">-- theorem. This reduction relation uses the rule unitrec-β-η rather</a>
  <a id="3699" class="Comment">-- than unitrec-subst and unitrec-β.</a>

  <a id="soundness-ℕ"></a><a id="3739" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3739" class="Function">soundness-ℕ</a> <a id="3751" class="Symbol">:</a>
    <a id="3757" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="3759" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="3761" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2064" class="Generalizable">t</a> <a id="3763" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="3765" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3767" class="Symbol">→</a> <a id="3769" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3772" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="3775" class="InductiveConstructor">𝟙ᵐ</a> <a id="3778" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="3780" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2064" class="Generalizable">t</a> <a id="3782" class="Symbol">→</a>
    <a id="3788" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="3790" class="Symbol">λ</a> <a id="3792" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3792" class="Bound">n</a> <a id="3794" class="Symbol">→</a> <a id="3796" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="3798" href="Graded.Erasure.SucRed.html#1449" class="Datatype Operator">SR-η.⊢</a> <a id="3805" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2064" class="Generalizable">t</a> <a id="3807" href="Graded.Erasure.SucRed.html#1449" class="Datatype Operator">⇒ˢ*</a> <a id="3811" href="Definition.Untyped.html#3622" class="Function">sucᵏ</a> <a id="3816" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3792" class="Bound">n</a> <a id="3818" href="Graded.Erasure.SucRed.html#1449" class="Datatype Operator">∷ℕ</a> <a id="3821" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3823" href="Graded.Erasure.Extraction.html#2119" class="Function">erase</a> <a id="3829" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1391" class="Bound">str</a> <a id="3833" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2064" class="Generalizable">t</a> <a id="3835" href="Graded.Erasure.SucRed.html#7125" class="Function Operator">⇒ˢ⟨</a> <a id="3839" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1391" class="Bound">str</a> <a id="3843" href="Graded.Erasure.SucRed.html#7125" class="Function Operator">⟩*</a> <a id="3846" href="Graded.Erasure.Target.html#6901" class="Function">T.sucᵏ</a> <a id="3853" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3792" class="Bound">n</a>
  <a id="3857" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3739" class="Function">soundness-ℕ</a> <a id="3869" class="Symbol">=</a> <a id="3871" href="Graded.Erasure.Consequences.Soundness.html#7056" class="Function">Soundness-η.soundness-ℕ</a> <a id="3895" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="3898" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2892" class="Function">⊢∷→⊢∷-η</a>

<a id="3907" class="Keyword">opaque</a>

  <a id="3917" class="Comment">-- Soundness of erasure for unit types.</a>
  <a id="3959" class="Comment">--</a>
  <a id="3964" class="Comment">-- Note that T-η._⊢_⇒*_∷_ is used in the statement of this theorem.</a>
  <a id="4034" class="Comment">-- This reduction relation uses the rule unitrec-β-η rather than</a>
  <a id="4101" class="Comment">-- unitrec-subst and unitrec-β.</a>

  <a id="soundness-Unit"></a><a id="4136" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4136" class="Function">soundness-Unit</a> <a id="4151" class="Symbol">:</a>
    <a id="4157" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="4159" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="4161" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2064" class="Generalizable">t</a> <a id="4163" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="4165" href="Definition.Untyped.html#1832" class="InductiveConstructor">Unit</a> <a id="4170" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2077" class="Generalizable">s</a> <a id="4172" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2094" class="Generalizable">l</a> <a id="4174" class="Symbol">→</a> <a id="4176" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4179" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="4182" class="InductiveConstructor">𝟙ᵐ</a> <a id="4185" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="4187" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2064" class="Generalizable">t</a> <a id="4189" class="Symbol">→</a>
    <a id="4195" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="4197" href="Definition.Typed.html#19323" class="Datatype Operator">T-η.⊢</a> <a id="4203" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2064" class="Generalizable">t</a> <a id="4205" href="Definition.Typed.html#19323" class="Datatype Operator">⇒*</a> <a id="4208" href="Definition.Untyped.html#1876" class="InductiveConstructor">star</a> <a id="4213" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2077" class="Generalizable">s</a> <a id="4215" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2094" class="Generalizable">l</a> <a id="4217" href="Definition.Typed.html#19323" class="Datatype Operator">∷</a> <a id="4219" href="Definition.Untyped.html#1832" class="InductiveConstructor">Unit</a> <a id="4224" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2077" class="Generalizable">s</a> <a id="4226" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2094" class="Generalizable">l</a> <a id="4228" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4230" href="Graded.Erasure.Extraction.html#2119" class="Function">erase</a> <a id="4236" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1391" class="Bound">str</a> <a id="4240" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2064" class="Generalizable">t</a> <a id="4242" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="4247" class="InductiveConstructor">T.star</a>
  <a id="4256" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4136" class="Function">soundness-Unit</a> <a id="4271" class="Symbol">=</a> <a id="4273" href="Graded.Erasure.Consequences.Soundness.html#8060" class="Function">Soundness-η.soundness-Unit</a> <a id="4300" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="4303" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2892" class="Function">⊢∷→⊢∷-η</a>
</pre></body></html>