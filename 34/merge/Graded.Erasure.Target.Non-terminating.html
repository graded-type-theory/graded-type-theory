<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Target.Non-terminating</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- A non-terminating term</a>
<a id="100" class="Comment">------------------------------------------------------------------------</a>

<a id="174" class="Keyword">module</a> <a id="181" href="Graded.Erasure.Target.Non-terminating.html" class="Module">Graded.Erasure.Target.Non-terminating</a> <a id="219" class="Keyword">where</a>

<a id="226" class="Keyword">open</a> <a id="231" class="Keyword">import</a> <a id="238" href="Definition.Untyped.NotParametrised.html" class="Module">Definition.Untyped.NotParametrised</a>

<a id="274" class="Keyword">open</a> <a id="279" class="Keyword">import</a> <a id="286" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a>
<a id="308" class="Keyword">open</a> <a id="313" class="Keyword">import</a> <a id="320" href="Graded.Erasure.Target.Properties.html" class="Module">Graded.Erasure.Target.Properties</a>

<a id="354" class="Keyword">open</a> <a id="359" class="Keyword">import</a> <a id="366" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="378" class="Keyword">open</a> <a id="383" class="Keyword">import</a> <a id="390" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="400" class="Keyword">open</a> <a id="405" class="Keyword">import</a> <a id="412" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="427" class="Keyword">open</a> <a id="432" class="Keyword">import</a> <a id="439" href="Tools.Nat.html" class="Module">Tools.Nat</a>
<a id="449" class="Keyword">open</a> <a id="454" class="Keyword">import</a> <a id="461" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="475" class="Keyword">open</a> <a id="480" class="Keyword">import</a> <a id="487" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="515" class="Keyword">open</a> <a id="520" class="Keyword">import</a> <a id="527" href="Tools.Relation.html" class="Module">Tools.Relation</a>

<a id="543" class="Keyword">private</a> <a id="551" class="Keyword">variable</a>
  <a id="562" href="Graded.Erasure.Target.Non-terminating.html#562" class="Generalizable">n</a>   <a id="566" class="Symbol">:</a> <a id="568" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="574" href="Graded.Erasure.Target.Non-terminating.html#574" class="Generalizable">x</a>   <a id="578" class="Symbol">:</a> <a id="580" href="Data.Fin.Base.html#1154" class="Datatype">Fin</a> <a id="584" class="Symbol">_</a>
  <a id="588" href="Graded.Erasure.Target.Non-terminating.html#588" class="Generalizable">t</a> <a id="590" href="Graded.Erasure.Target.Non-terminating.html#590" class="Generalizable">v</a> <a id="592" class="Symbol">:</a> <a id="594" href="Graded.Erasure.Target.html#1227" class="Datatype">Term</a> <a id="599" class="Symbol">_</a>
  <a id="603" href="Graded.Erasure.Target.Non-terminating.html#603" class="Generalizable">s</a>   <a id="607" class="Symbol">:</a> <a id="609" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a>
  <a id="622" href="Graded.Erasure.Target.Non-terminating.html#622" class="Generalizable">ρ</a>   <a id="626" class="Symbol">:</a> <a id="628" href="Definition.Untyped.NotParametrised.html#2351" class="Datatype">Wk</a> <a id="631" class="Symbol">_</a> <a id="633" class="Symbol">_</a>
  <a id="637" href="Graded.Erasure.Target.Non-terminating.html#637" class="Generalizable">σ</a>   <a id="641" class="Symbol">:</a> <a id="643" href="Graded.Erasure.Target.html#3570" class="Function">Subst</a> <a id="649" class="Symbol">_</a> <a id="651" class="Symbol">_</a>

<a id="654" class="Keyword">opaque</a>

  <a id="664" class="Comment">-- A non-terminating term (which uses applications with the given</a>
  <a id="732" class="Comment">-- strictness).</a>

  <a id="loop"></a><a id="751" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="756" class="Symbol">:</a> <a id="758" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a> <a id="769" class="Symbol">→</a> <a id="771" href="Graded.Erasure.Target.html#1227" class="Datatype">Term</a> <a id="776" href="Graded.Erasure.Target.Non-terminating.html#562" class="Generalizable">n</a>
  <a id="780" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="785" href="Graded.Erasure.Target.Non-terminating.html#785" class="Bound">s</a> <a id="787" class="Symbol">=</a> <a id="789" href="Graded.Erasure.Target.Non-terminating.html#814" class="Function">ω</a> <a id="791" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">∘⟨</a> <a id="794" href="Graded.Erasure.Target.Non-terminating.html#785" class="Bound">s</a> <a id="796" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="798" href="Graded.Erasure.Target.Non-terminating.html#814" class="Function">ω</a>
    <a id="804" class="Keyword">where</a>
    <a id="814" href="Graded.Erasure.Target.Non-terminating.html#814" class="Function">ω</a> <a id="816" class="Symbol">:</a> <a id="818" href="Graded.Erasure.Target.html#1227" class="Datatype">Term</a> <a id="823" href="Graded.Erasure.Target.Non-terminating.html#562" class="Generalizable">n</a>
    <a id="829" href="Graded.Erasure.Target.Non-terminating.html#814" class="Function">ω</a> <a id="831" class="Symbol">=</a> <a id="833" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">lam</a> <a id="837" class="Symbol">(</a><a id="838" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">var</a> <a id="842" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a> <a id="845" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">∘⟨</a> <a id="848" href="Graded.Erasure.Target.Non-terminating.html#785" class="Bound">s</a> <a id="850" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="852" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">var</a> <a id="856" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="858" class="Symbol">)</a>

<a id="861" class="Keyword">opaque</a>
  <a id="870" class="Keyword">unfolding</a> <a id="880" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a>

  <a id="888" class="Comment">-- The term loop s reduces in one step to itself.</a>

  <a id="loop⇒loop"></a><a id="941" href="Graded.Erasure.Target.Non-terminating.html#941" class="Function">loop⇒loop</a> <a id="951" class="Symbol">:</a> <a id="953" class="Symbol">(</a><a id="954" href="Graded.Erasure.Target.html#1227" class="Datatype">Term</a> <a id="959" href="Graded.Erasure.Target.Non-terminating.html#562" class="Generalizable">n</a> <a id="961" href="Function.Base.html#4486" class="Function Operator">∋</a> <a id="963" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="968" href="Graded.Erasure.Target.Non-terminating.html#603" class="Generalizable">s</a><a id="969" class="Symbol">)</a> <a id="971" href="Graded.Erasure.Target.html#7014" class="Datatype Operator">⇒</a> <a id="973" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="978" href="Graded.Erasure.Target.Non-terminating.html#603" class="Generalizable">s</a>
  <a id="982" href="Graded.Erasure.Target.Non-terminating.html#941" class="Function">loop⇒loop</a> <a id="992" class="Symbol">=</a> <a id="994" href="Graded.Erasure.Target.html#7197" class="InductiveConstructor">β-red</a> <a id="1000" class="Symbol">(</a><a id="1001" href="Graded.Erasure.Target.Properties.Reduction.html#4363" class="Function">Value→Value⟨⟩</a> <a id="1015" href="Graded.Erasure.Target.html#6156" class="InductiveConstructor">lam</a><a id="1018" class="Symbol">)</a>

<a id="1021" class="Keyword">opaque</a>

  <a id="1031" class="Comment">-- The term loop s only reduces to terms that can reduce further.</a>

  <a id="loop-reduces-forever"></a><a id="1100" href="Graded.Erasure.Target.Non-terminating.html#1100" class="Function">loop-reduces-forever</a> <a id="1121" class="Symbol">:</a> <a id="1123" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="1128" href="Graded.Erasure.Target.Non-terminating.html#603" class="Generalizable">s</a> <a id="1130" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">⇒*</a> <a id="1133" href="Graded.Erasure.Target.Non-terminating.html#588" class="Generalizable">t</a> <a id="1135" class="Symbol">→</a> <a id="1137" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="1139" class="Symbol">λ</a> <a id="1141" href="Graded.Erasure.Target.Non-terminating.html#1141" class="Bound">u</a> <a id="1143" class="Symbol">→</a> <a id="1145" href="Graded.Erasure.Target.Non-terminating.html#588" class="Generalizable">t</a> <a id="1147" href="Graded.Erasure.Target.html#7014" class="Datatype Operator">⇒</a> <a id="1149" href="Graded.Erasure.Target.Non-terminating.html#1141" class="Bound">u</a>
  <a id="1153" href="Graded.Erasure.Target.Non-terminating.html#1100" class="Function">loop-reduces-forever</a> <a id="1174" href="Graded.Erasure.Target.html#7893" class="InductiveConstructor">refl</a> <a id="1179" class="Symbol">=</a>
    <a id="1185" class="Symbol">_</a> <a id="1187" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1189" href="Graded.Erasure.Target.Non-terminating.html#941" class="Function">loop⇒loop</a>
  <a id="1201" href="Graded.Erasure.Target.Non-terminating.html#1100" class="Function">loop-reduces-forever</a> <a id="1222" class="Symbol">(</a><a id="1223" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">trans</a> <a id="1229" href="Graded.Erasure.Target.Non-terminating.html#1229" class="Bound">nt⇒t</a> <a id="1234" href="Graded.Erasure.Target.Non-terminating.html#1234" class="Bound">t⇒*u</a><a id="1238" class="Symbol">)</a>
    <a id="1244" class="Keyword">rewrite</a> <a id="1252" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a> <a id="1256" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1258" href="Graded.Erasure.Target.Properties.Reduction.html#2101" class="Function">redDet</a> <a id="1265" class="Symbol">_</a> <a id="1267" href="Graded.Erasure.Target.Non-terminating.html#941" class="Function">loop⇒loop</a> <a id="1277" href="Graded.Erasure.Target.Non-terminating.html#1229" class="Bound">nt⇒t</a> <a id="1282" class="Symbol">=</a>
    <a id="1288" href="Graded.Erasure.Target.Non-terminating.html#1100" class="Function">loop-reduces-forever</a> <a id="1309" href="Graded.Erasure.Target.Non-terminating.html#1234" class="Bound">t⇒*u</a>

<a id="1315" class="Keyword">opaque</a>

  <a id="1325" class="Comment">-- The term loop s does not reduce to a value.</a>

  <a id="¬loop⇒*"></a><a id="1375" href="Graded.Erasure.Target.Non-terminating.html#1375" class="Function">¬loop⇒*</a> <a id="1383" class="Symbol">:</a> <a id="1385" href="Graded.Erasure.Target.html#6123" class="Datatype">Value</a> <a id="1391" href="Graded.Erasure.Target.Non-terminating.html#590" class="Generalizable">v</a> <a id="1393" class="Symbol">→</a> <a id="1395" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="1397" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="1402" href="Graded.Erasure.Target.Non-terminating.html#603" class="Generalizable">s</a> <a id="1404" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">⇒*</a> <a id="1407" href="Graded.Erasure.Target.Non-terminating.html#590" class="Generalizable">v</a>
  <a id="1411" href="Graded.Erasure.Target.Non-terminating.html#1375" class="Function">¬loop⇒*</a> <a id="1419" class="Symbol">{</a><a id="1420" href="Graded.Erasure.Target.Non-terminating.html#1420" class="Bound">v</a><a id="1421" class="Symbol">}</a> <a id="1423" class="Symbol">{</a><a id="1424" href="Graded.Erasure.Target.Non-terminating.html#1424" class="Bound">s</a><a id="1425" class="Symbol">}</a> <a id="1427" href="Graded.Erasure.Target.Non-terminating.html#1427" class="Bound">v-val</a> <a id="1433" class="Symbol">=</a>
    <a id="1439" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="1444" href="Graded.Erasure.Target.Non-terminating.html#1424" class="Bound">s</a> <a id="1446" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">⇒*</a> <a id="1449" href="Graded.Erasure.Target.Non-terminating.html#1420" class="Bound">v</a>        <a id="1458" href="Tools.Function.html#904" class="Function">→⟨</a> <a id="1461" href="Graded.Erasure.Target.Non-terminating.html#1100" class="Function">loop-reduces-forever</a> <a id="1482" href="Tools.Function.html#904" class="Function">⟩</a>
    <a id="1488" class="Symbol">(</a><a id="1489" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="1491" class="Symbol">λ</a> <a id="1493" href="Graded.Erasure.Target.Non-terminating.html#1493" class="Bound">v′</a> <a id="1496" class="Symbol">→</a> <a id="1498" href="Graded.Erasure.Target.Non-terminating.html#1420" class="Bound">v</a> <a id="1500" href="Graded.Erasure.Target.html#7014" class="Datatype Operator">⇒</a> <a id="1502" href="Graded.Erasure.Target.Non-terminating.html#1493" class="Bound">v′</a><a id="1504" class="Symbol">)</a>  <a id="1507" href="Tools.Function.html#904" class="Function">→⟨</a> <a id="1510" href="Graded.Erasure.Target.Properties.Reduction.html#1932" class="Function">Value→¬⇒</a> <a id="1519" href="Graded.Erasure.Target.Non-terminating.html#1427" class="Bound">v-val</a> <a id="1525" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="1528" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="1534" href="Tools.Function.html#904" class="Function">⟩</a>
    <a id="1540" href="Data.Empty.html#895" class="Function">⊥</a>                  <a id="1559" href="Tools.Function.html#1132" class="Function Operator">□</a>

<a id="1562" class="Keyword">opaque</a>
  <a id="1571" class="Keyword">unfolding</a> <a id="1581" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a>

  <a id="1589" class="Comment">-- The term loop s is closed.</a>

  <a id="loop-closed"></a><a id="1622" href="Graded.Erasure.Target.Non-terminating.html#1622" class="Function">loop-closed</a> <a id="1634" class="Symbol">:</a> <a id="1636" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="1638" href="Graded.Erasure.Target.html#2196" class="Datatype">HasX</a> <a id="1643" href="Graded.Erasure.Target.Non-terminating.html#574" class="Generalizable">x</a> <a id="1645" class="Symbol">(</a><a id="1646" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="1651" href="Graded.Erasure.Target.Non-terminating.html#603" class="Generalizable">s</a><a id="1652" class="Symbol">)</a>
  <a id="1656" href="Graded.Erasure.Target.Non-terminating.html#1622" class="Function">loop-closed</a> <a id="1668" class="Symbol">(</a><a id="1669" href="Graded.Erasure.Target.html#2306" class="InductiveConstructor">∘ₓˡ</a> <a id="1673" class="Symbol">(</a><a id="1674" href="Graded.Erasure.Target.html#2266" class="InductiveConstructor">lamₓ</a> <a id="1679" class="Symbol">(</a><a id="1680" href="Graded.Erasure.Target.html#2306" class="InductiveConstructor">∘ₓˡ</a> <a id="1684" class="Symbol">())))</a>
  <a id="1692" href="Graded.Erasure.Target.Non-terminating.html#1622" class="Function">loop-closed</a> <a id="1704" class="Symbol">(</a><a id="1705" href="Graded.Erasure.Target.html#2306" class="InductiveConstructor">∘ₓˡ</a> <a id="1709" class="Symbol">(</a><a id="1710" href="Graded.Erasure.Target.html#2266" class="InductiveConstructor">lamₓ</a> <a id="1715" class="Symbol">(</a><a id="1716" href="Graded.Erasure.Target.html#2345" class="InductiveConstructor">∘ₓʳ</a> <a id="1720" class="Symbol">())))</a>
  <a id="1728" href="Graded.Erasure.Target.Non-terminating.html#1622" class="Function">loop-closed</a> <a id="1740" class="Symbol">(</a><a id="1741" href="Graded.Erasure.Target.html#2345" class="InductiveConstructor">∘ₓʳ</a> <a id="1745" class="Symbol">(</a><a id="1746" href="Graded.Erasure.Target.html#2266" class="InductiveConstructor">lamₓ</a> <a id="1751" class="Symbol">(</a><a id="1752" href="Graded.Erasure.Target.html#2306" class="InductiveConstructor">∘ₓˡ</a> <a id="1756" class="Symbol">())))</a>
  <a id="1764" href="Graded.Erasure.Target.Non-terminating.html#1622" class="Function">loop-closed</a> <a id="1776" class="Symbol">(</a><a id="1777" href="Graded.Erasure.Target.html#2345" class="InductiveConstructor">∘ₓʳ</a> <a id="1781" class="Symbol">(</a><a id="1782" href="Graded.Erasure.Target.html#2266" class="InductiveConstructor">lamₓ</a> <a id="1787" class="Symbol">(</a><a id="1788" href="Graded.Erasure.Target.html#2345" class="InductiveConstructor">∘ₓʳ</a> <a id="1792" class="Symbol">())))</a>

<a id="1799" class="Keyword">opaque</a>
  <a id="1808" class="Keyword">unfolding</a> <a id="1818" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a>

  <a id="1826" class="Comment">-- The result of weakening loop s is loop s.</a>

  <a id="wk-loop"></a><a id="1874" href="Graded.Erasure.Target.Non-terminating.html#1874" class="Function">wk-loop</a> <a id="1882" class="Symbol">:</a> <a id="1884" href="Graded.Erasure.Target.html#2923" class="Function">wk</a> <a id="1887" href="Graded.Erasure.Target.Non-terminating.html#622" class="Generalizable">ρ</a> <a id="1889" class="Symbol">(</a><a id="1890" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="1895" href="Graded.Erasure.Target.Non-terminating.html#603" class="Generalizable">s</a><a id="1896" class="Symbol">)</a> <a id="1898" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1900" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="1905" href="Graded.Erasure.Target.Non-terminating.html#603" class="Generalizable">s</a>
  <a id="1909" href="Graded.Erasure.Target.Non-terminating.html#1874" class="Function">wk-loop</a> <a id="1917" class="Symbol">=</a> <a id="1919" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="1925" class="Keyword">opaque</a>
  <a id="1934" class="Keyword">unfolding</a> <a id="1944" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a>

  <a id="1952" class="Comment">-- The result of applying a substitution to loop s is loop s.</a>

  <a id="loop-[]"></a><a id="2017" href="Graded.Erasure.Target.Non-terminating.html#2017" class="Function">loop-[]</a> <a id="2025" class="Symbol">:</a> <a id="2027" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="2032" href="Graded.Erasure.Target.Non-terminating.html#603" class="Generalizable">s</a> <a id="2034" href="Graded.Erasure.Target.html#4865" class="Function Operator">[</a> <a id="2036" href="Graded.Erasure.Target.Non-terminating.html#637" class="Generalizable">σ</a> <a id="2038" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a> <a id="2040" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2042" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="2047" href="Graded.Erasure.Target.Non-terminating.html#603" class="Generalizable">s</a>
  <a id="2051" href="Graded.Erasure.Target.Non-terminating.html#2017" class="Function">loop-[]</a> <a id="2059" class="Symbol">=</a> <a id="2061" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre></body></html>