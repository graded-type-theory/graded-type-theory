<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Usage.Restrictions</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Restrictions on usage derivations</a>
<a id="111" class="Comment">------------------------------------------------------------------------</a>

<a id="185" class="Keyword">import</a> <a id="192" href="Graded.Modality.html" class="Module">Graded.Modality</a>

<a id="209" class="Keyword">module</a> <a id="216" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
  <a id="244" class="Symbol">{</a><a id="245" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a><a id="246" class="Symbol">}</a> <a id="248" class="Symbol">{</a><a id="249" href="Graded.Usage.Restrictions.html#249" class="Bound">M</a> <a id="251" class="Symbol">:</a> <a id="253" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="257" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a><a id="258" class="Symbol">}</a>
  <a id="262" class="Symbol">(</a><a id="263" class="Keyword">open</a> <a id="268" href="Graded.Modality.html" class="Module">Graded.Modality</a> <a id="284" href="Graded.Usage.Restrictions.html#249" class="Bound">M</a><a id="285" class="Symbol">)</a>
  <a id="289" class="Symbol">(</a><a id="290" href="Graded.Usage.Restrictions.html#290" class="Bound">𝕄</a> <a id="292" class="Symbol">:</a> <a id="294" href="Graded.Modality.html#7187" class="Record">Modality</a><a id="302" class="Symbol">)</a>
  <a id="306" class="Keyword">where</a>

<a id="313" class="Keyword">open</a> <a id="318" class="Keyword">import</a> <a id="325" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="337" href="Graded.Usage.Restrictions.html#290" class="Bound">𝕄</a>
<a id="339" class="Keyword">open</a> <a id="344" class="Keyword">import</a> <a id="351" href="Graded.Usage.Erased-matches.html" class="Module">Graded.Usage.Erased-matches</a>

<a id="380" class="Keyword">open</a> <a id="385" class="Keyword">import</a> <a id="392" href="Tools.Bool.html" class="Module">Tools.Bool</a>
<a id="403" class="Keyword">open</a> <a id="408" class="Keyword">import</a> <a id="415" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="430" class="Keyword">open</a> <a id="435" class="Keyword">import</a> <a id="442" href="Tools.Level.html" class="Module">Tools.Level</a>
<a id="454" class="Keyword">open</a> <a id="459" class="Keyword">import</a> <a id="466" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="494" class="Keyword">open</a> <a id="499" class="Keyword">import</a> <a id="506" href="Tools.Relation.html" class="Module">Tools.Relation</a>
<a id="521" class="Keyword">open</a> <a id="526" class="Keyword">import</a> <a id="533" href="Tools.Sum.html" class="Module">Tools.Sum</a>
<a id="543" class="Keyword">open</a> <a id="548" class="Keyword">import</a> <a id="555" href="Tools.Empty.html" class="Module">Tools.Empty</a>

<a id="568" class="Keyword">private</a> <a id="576" class="Keyword">variable</a>
  <a id="587" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="589" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a> <a id="591" href="Graded.Usage.Restrictions.html#591" class="Generalizable">r</a>  <a id="594" class="Symbol">:</a> <a id="596" href="Graded.Usage.Restrictions.html#249" class="Bound">M</a>
  <a id="600" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="602" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a>   <a id="607" class="Symbol">:</a> <a id="609" href="Graded.Mode.html#1102" class="Datatype">Mode</a>
  <a id="616" class="Symbol">⦃</a> <a id="618" href="Graded.Usage.Restrictions.html#618" class="Generalizable">ok</a> <a id="621" class="Symbol">⦄</a> <a id="623" class="Symbol">:</a> <a id="625" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="627" class="Symbol">_</a>

<a id="630" class="Comment">-- Restrictions on/choices for usage derivations.</a>

<a id="681" class="Keyword">record</a> <a id="Usage-restrictions"></a><a id="688" href="Graded.Usage.Restrictions.html#688" class="Record">Usage-restrictions</a> <a id="707" class="Symbol">:</a> <a id="709" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="713" class="Symbol">(</a><a id="714" href="Agda.Primitive.html#931" class="Primitive">lsuc</a> <a id="719" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a><a id="720" class="Symbol">)</a> <a id="722" class="Keyword">where</a>
  <a id="730" class="Keyword">no-eta-equality</a>
  <a id="748" class="Keyword">field</a>
    <a id="758" class="Comment">-- The prodrec constructor&#39;s quantities have to satisfy this</a>
    <a id="823" class="Comment">-- predicate (for the current mode).</a>
    <a id="Usage-restrictions.Prodrec-allowed"></a><a id="864" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="880" class="Symbol">:</a> <a id="882" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="887" class="Symbol">→</a> <a id="889" class="Symbol">(</a><a id="890" href="Graded.Usage.Restrictions.html#890" class="Bound">r</a> <a id="892" href="Graded.Usage.Restrictions.html#892" class="Bound">p</a> <a id="894" href="Graded.Usage.Restrictions.html#894" class="Bound">q</a> <a id="896" class="Symbol">:</a> <a id="898" href="Graded.Usage.Restrictions.html#249" class="Bound">M</a><a id="899" class="Symbol">)</a> <a id="901" class="Symbol">→</a> <a id="903" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="907" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a>

    <a id="914" class="Comment">-- Prodrec-allowed is downwards closed in the mode (if 𝟙ᵐ is seen</a>
    <a id="984" class="Comment">-- as a largest element).</a>
    <a id="Usage-restrictions.Prodrec-allowed-downwards-closed"></a><a id="1014" href="Graded.Usage.Restrictions.html#1014" class="Field">Prodrec-allowed-downwards-closed</a> <a id="1047" class="Symbol">:</a>
      <a id="1055" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="1071" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="1074" href="Graded.Usage.Restrictions.html#591" class="Generalizable">r</a> <a id="1076" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="1078" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a> <a id="1080" class="Symbol">→</a> <a id="1082" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="1098" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="1102" href="Graded.Usage.Restrictions.html#618" class="Generalizable">ok</a> <a id="1105" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a> <a id="1107" href="Graded.Usage.Restrictions.html#591" class="Generalizable">r</a> <a id="1109" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="1111" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a>

    <a id="1118" class="Comment">-- The unitrec constructor&#39;s quantities have to satisfy this</a>
    <a id="1183" class="Comment">-- predicate (for the current mode).</a>
    <a id="Usage-restrictions.Unitrec-allowed"></a><a id="1224" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="1240" class="Symbol">:</a> <a id="1242" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="1247" class="Symbol">→</a> <a id="1249" class="Symbol">(</a><a id="1250" href="Graded.Usage.Restrictions.html#1250" class="Bound">p</a> <a id="1252" href="Graded.Usage.Restrictions.html#1252" class="Bound">q</a> <a id="1254" class="Symbol">:</a> <a id="1256" href="Graded.Usage.Restrictions.html#249" class="Bound">M</a><a id="1257" class="Symbol">)</a> <a id="1259" class="Symbol">→</a> <a id="1261" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1265" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a>

    <a id="1272" class="Comment">-- Unitrec-allowed is downwards closed in the mode (if 𝟙ᵐ is seen</a>
    <a id="1342" class="Comment">-- as a largest element).</a>
    <a id="Usage-restrictions.Unitrec-allowed-downwards-closed"></a><a id="1372" href="Graded.Usage.Restrictions.html#1372" class="Field">Unitrec-allowed-downwards-closed</a> <a id="1405" class="Symbol">:</a>
      <a id="1413" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="1429" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="1432" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="1434" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a> <a id="1436" class="Symbol">→</a> <a id="1438" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="1454" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="1458" href="Graded.Usage.Restrictions.html#618" class="Generalizable">ok</a> <a id="1461" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a> <a id="1463" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="1465" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a>

    <a id="1472" class="Comment">-- The emptyrec constructor&#39;s quantity has to satisfy this</a>
    <a id="1535" class="Comment">-- predicate (for the current mode).</a>
    <a id="Usage-restrictions.Emptyrec-allowed"></a><a id="1576" href="Graded.Usage.Restrictions.html#1576" class="Field">Emptyrec-allowed</a> <a id="1593" class="Symbol">:</a> <a id="1595" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="1600" class="Symbol">→</a> <a id="1602" href="Graded.Usage.Restrictions.html#249" class="Bound">M</a> <a id="1604" class="Symbol">→</a> <a id="1606" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1610" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a>

    <a id="1617" class="Comment">-- Emptyrec-allowed is downwards closed in the mode (if 𝟙ᵐ is seen</a>
    <a id="1688" class="Comment">-- as a largest element).</a>
    <a id="Usage-restrictions.Emptyrec-allowed-downwards-closed"></a><a id="1718" href="Graded.Usage.Restrictions.html#1718" class="Field">Emptyrec-allowed-downwards-closed</a> <a id="1752" class="Symbol">:</a>
      <a id="1760" href="Graded.Usage.Restrictions.html#1576" class="Field">Emptyrec-allowed</a> <a id="1777" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="1780" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="1782" class="Symbol">→</a> <a id="1784" href="Graded.Usage.Restrictions.html#1576" class="Field">Emptyrec-allowed</a> <a id="1801" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="1805" href="Graded.Usage.Restrictions.html#618" class="Generalizable">ok</a> <a id="1808" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a> <a id="1810" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a>

    <a id="1817" class="Comment">-- Should the strong unit type act as a &quot;sink&quot;?</a>
    <a id="Usage-restrictions.starˢ-sink"></a><a id="1869" href="Graded.Usage.Restrictions.html#1869" class="Field">starˢ-sink</a> <a id="1880" class="Symbol">:</a> <a id="1882" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>

    <a id="1892" class="Comment">-- Are most things erased in the usage rule for Id?</a>
    <a id="Usage-restrictions.Id-erased"></a><a id="1948" href="Graded.Usage.Restrictions.html#1948" class="Field">Id-erased</a> <a id="1958" class="Symbol">:</a> <a id="1960" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1964" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a>

    <a id="1971" class="Comment">-- Id-erased is decided.</a>
    <a id="Usage-restrictions.Id-erased?"></a><a id="2000" href="Graded.Usage.Restrictions.html#2000" class="Field">Id-erased?</a> <a id="2011" class="Symbol">:</a> <a id="2013" href="Relation.Nullary.Decidable.Core.html#1485" class="Record">Dec</a> <a id="2017" href="Graded.Usage.Restrictions.html#1948" class="Field">Id-erased</a>

    <a id="2032" class="Comment">-- What kinds of erased matches are allowed for the J rule (for</a>
    <a id="2100" class="Comment">-- the current mode)?</a>
    <a id="Usage-restrictions.erased-matches-for-J"></a><a id="2126" href="Graded.Usage.Restrictions.html#2126" class="Field">erased-matches-for-J</a> <a id="2147" class="Symbol">:</a> <a id="2149" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="2154" class="Symbol">→</a> <a id="2156" href="Graded.Usage.Erased-matches.html#821" class="Datatype">Erased-matches</a>

    <a id="2176" class="Comment">-- The usage rules for J are at least as permissive for 𝟘ᵐ[ ok ]</a>
    <a id="2245" class="Comment">-- as for 𝟙ᵐ. (See Graded.Usage.Properties.Jₘ-generalised and</a>
    <a id="2311" class="Comment">-- Graded.Usage.Properties.J₀ₘ₁-generalised.)</a>
    <a id="Usage-restrictions.erased-matches-for-J-≤ᵉᵐ"></a><a id="2361" href="Graded.Usage.Restrictions.html#2361" class="Field">erased-matches-for-J-≤ᵉᵐ</a> <a id="2386" class="Symbol">:</a>
      <a id="2394" href="Graded.Usage.Restrictions.html#2126" class="Field">erased-matches-for-J</a> <a id="2415" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="2418" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="2422" href="Graded.Usage.Restrictions.html#2126" class="Field">erased-matches-for-J</a> <a id="2443" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="2447" href="Graded.Usage.Restrictions.html#618" class="Generalizable">ok</a> <a id="2450" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a>

    <a id="2457" class="Comment">-- What kinds of erased matches are allowed for the K rule (for</a>
    <a id="2525" class="Comment">-- the current mode)?</a>
    <a id="Usage-restrictions.erased-matches-for-K"></a><a id="2551" href="Graded.Usage.Restrictions.html#2551" class="Field">erased-matches-for-K</a> <a id="2572" class="Symbol">:</a> <a id="2574" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="2579" class="Symbol">→</a> <a id="2581" href="Graded.Usage.Erased-matches.html#821" class="Datatype">Erased-matches</a>

    <a id="2601" class="Comment">-- The usage rules for K are at least as permissive for 𝟘ᵐ[ ok ]</a>
    <a id="2670" class="Comment">-- as for 𝟙ᵐ. (See Graded.Usage.Properties.Kₘ-generalised and</a>
    <a id="2736" class="Comment">-- Graded.Usage.Properties.K₀ₘ₁-generalised.)</a>
    <a id="Usage-restrictions.erased-matches-for-K-≤ᵉᵐ"></a><a id="2786" href="Graded.Usage.Restrictions.html#2786" class="Field">erased-matches-for-K-≤ᵉᵐ</a> <a id="2811" class="Symbol">:</a>
      <a id="2819" href="Graded.Usage.Restrictions.html#2551" class="Field">erased-matches-for-K</a> <a id="2840" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="2843" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="2847" href="Graded.Usage.Restrictions.html#2551" class="Field">erased-matches-for-K</a> <a id="2868" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="2872" href="Graded.Usage.Restrictions.html#618" class="Generalizable">ok</a> <a id="2875" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a>

  <a id="2880" class="Keyword">private</a> <a id="2888" class="Keyword">opaque</a>

    <a id="2900" class="Comment">-- Some lemmas used below.</a>

    <a id="Usage-restrictions.·ᵐ-lemma₁"></a><a id="2932" href="Graded.Usage.Restrictions.html#2932" class="Function">·ᵐ-lemma₁</a> <a id="2942" class="Symbol">:</a>
      <a id="2950" class="Symbol">(</a><a id="2951" href="Graded.Usage.Restrictions.html#2951" class="Bound">P</a> <a id="2953" class="Symbol">:</a> <a id="2955" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="2960" class="Symbol">→</a> <a id="2962" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="2966" href="Graded.Usage.Restrictions.html#245" class="Bound">a</a><a id="2967" class="Symbol">)</a> <a id="2969" class="Symbol">→</a>
      <a id="2977" class="Symbol">(∀</a> <a id="2980" class="Symbol">⦃</a> <a id="2982" href="Graded.Usage.Restrictions.html#2982" class="Bound">ok</a> <a id="2985" class="Symbol">⦄</a> <a id="2987" class="Symbol">→</a> <a id="2989" href="Graded.Usage.Restrictions.html#2951" class="Bound">P</a> <a id="2991" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="2994" class="Symbol">→</a> <a id="2996" href="Graded.Usage.Restrictions.html#2951" class="Bound">P</a> <a id="2998" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="3002" href="Graded.Usage.Restrictions.html#2982" class="Bound">ok</a> <a id="3005" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a><a id="3006" class="Symbol">)</a> <a id="3008" class="Symbol">→</a>
      <a id="3016" href="Graded.Usage.Restrictions.html#2951" class="Bound">P</a> <a id="3018" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="3020" class="Symbol">→</a> <a id="3022" href="Graded.Usage.Restrictions.html#2951" class="Bound">P</a> <a id="3024" class="Symbol">(</a><a id="3025" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="3028" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="3031" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="3032" class="Symbol">)</a>
    <a id="3038" href="Graded.Usage.Restrictions.html#2932" class="Function">·ᵐ-lemma₁</a> <a id="3048" class="Symbol">{</a><a id="3049" class="Argument">m′</a> <a id="3052" class="Symbol">=</a> <a id="3054" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a><a id="3056" class="Symbol">}</a> <a id="3058" class="Symbol">_</a> <a id="3060" class="Symbol">_</a> <a id="3062" class="Symbol">=</a>
      <a id="3070" href="Function.Base.html#704" class="Function">idᶠ</a>
    <a id="3078" href="Graded.Usage.Restrictions.html#2932" class="Function">·ᵐ-lemma₁</a> <a id="3088" class="Symbol">{</a><a id="3089" class="Argument">m</a> <a id="3091" class="Symbol">=</a> <a id="3093" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a><a id="3095" class="Symbol">}</a> <a id="3097" class="Symbol">{</a><a id="3098" class="Argument">m′</a> <a id="3101" class="Symbol">=</a> <a id="3103" href="Graded.Mode.html#1121" class="InductiveConstructor">𝟘ᵐ</a><a id="3105" class="Symbol">}</a> <a id="3107" class="Symbol">_</a> <a id="3109" href="Graded.Usage.Restrictions.html#3109" class="Bound">hyp</a> <a id="3113" class="Symbol">=</a>
      <a id="3121" href="Graded.Usage.Restrictions.html#3109" class="Bound">hyp</a>
    <a id="3129" href="Graded.Usage.Restrictions.html#2932" class="Function">·ᵐ-lemma₁</a> <a id="3139" class="Symbol">{</a><a id="3140" class="Argument">m</a> <a id="3142" class="Symbol">=</a> <a id="3144" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="3148" href="Graded.Usage.Restrictions.html#3148" class="Bound">ok</a> <a id="3151" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a><a id="3152" class="Symbol">}</a> <a id="3154" class="Symbol">{</a><a id="3155" class="Argument">m′</a> <a id="3158" class="Symbol">=</a> <a id="3160" href="Graded.Mode.html#1121" class="InductiveConstructor">𝟘ᵐ</a><a id="3162" class="Symbol">}</a> <a id="3164" href="Graded.Usage.Restrictions.html#3164" class="Bound">P</a> <a id="3166" href="Graded.Usage.Restrictions.html#3166" class="Bound">hyp</a> <a id="3170" class="Symbol">=</a>
      <a id="3178" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">subst</a> <a id="3184" class="Symbol">(λ</a> <a id="3187" href="Graded.Usage.Restrictions.html#3187" class="Bound">m</a> <a id="3189" class="Symbol">→</a> <a id="3191" href="Graded.Usage.Restrictions.html#3164" class="Bound">P</a> <a id="3193" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="3197" href="Graded.Usage.Restrictions.html#3148" class="Bound">ok</a> <a id="3200" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a> <a id="3202" class="Symbol">→</a> <a id="3204" href="Graded.Usage.Restrictions.html#3164" class="Bound">P</a> <a id="3206" href="Graded.Usage.Restrictions.html#3187" class="Bound">m</a><a id="3207" class="Symbol">)</a> <a id="3209" href="Graded.Mode.html#2377" class="Function">𝟘ᵐ-cong</a> <a id="3217" href="Function.Base.html#704" class="Function">idᶠ</a>

    <a id="Usage-restrictions.·ᵐ-lemma₂"></a><a id="3226" href="Graded.Usage.Restrictions.html#3226" class="Function">·ᵐ-lemma₂</a> <a id="3236" class="Symbol">:</a>
      <a id="3244" class="Symbol">(</a><a id="3245" href="Graded.Usage.Restrictions.html#3245" class="Bound">f</a> <a id="3247" class="Symbol">:</a> <a id="3249" href="Graded.Mode.html#1102" class="Datatype">Mode</a> <a id="3254" class="Symbol">→</a> <a id="3256" href="Graded.Usage.Erased-matches.html#821" class="Datatype">Erased-matches</a><a id="3270" class="Symbol">)</a> <a id="3272" class="Symbol">→</a>
      <a id="3280" class="Symbol">(∀</a> <a id="3283" class="Symbol">⦃</a> <a id="3285" href="Graded.Usage.Restrictions.html#3285" class="Bound">ok</a> <a id="3288" class="Symbol">⦄</a> <a id="3290" class="Symbol">→</a> <a id="3292" href="Graded.Usage.Restrictions.html#3245" class="Bound">f</a> <a id="3294" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a> <a id="3297" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="3301" href="Graded.Usage.Restrictions.html#3245" class="Bound">f</a> <a id="3303" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">𝟘ᵐ[</a> <a id="3307" href="Graded.Usage.Restrictions.html#3285" class="Bound">ok</a> <a id="3310" href="Graded.Mode.html#1176" class="InductiveConstructor Operator">]</a><a id="3311" class="Symbol">)</a> <a id="3313" class="Symbol">→</a>
      <a id="3321" href="Graded.Usage.Restrictions.html#3245" class="Bound">f</a> <a id="3323" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="3325" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="3329" href="Graded.Usage.Restrictions.html#3245" class="Bound">f</a> <a id="3331" class="Symbol">(</a><a id="3332" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="3335" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="3338" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="3339" class="Symbol">)</a>
    <a id="3345" href="Graded.Usage.Restrictions.html#3226" class="Function">·ᵐ-lemma₂</a>          <a id="3364" class="Symbol">{</a><a id="3365" class="Argument">m′</a> <a id="3368" class="Symbol">=</a> <a id="3370" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a><a id="3372" class="Symbol">}</a> <a id="3374" class="Symbol">_</a> <a id="3376" class="Symbol">_</a>   <a id="3380" class="Symbol">=</a> <a id="3382" href="Graded.Usage.Erased-matches.html#1267" class="Function">≤ᵉᵐ-reflexive</a>
    <a id="3400" href="Graded.Usage.Restrictions.html#3226" class="Function">·ᵐ-lemma₂</a> <a id="3410" class="Symbol">{</a><a id="3411" class="Argument">m</a> <a id="3413" class="Symbol">=</a> <a id="3415" href="Graded.Mode.html#1157" class="InductiveConstructor">𝟙ᵐ</a><a id="3417" class="Symbol">}</a> <a id="3419" class="Symbol">{</a><a id="3420" class="Argument">m′</a> <a id="3423" class="Symbol">=</a> <a id="3425" href="Graded.Mode.html#1121" class="InductiveConstructor">𝟘ᵐ</a><a id="3427" class="Symbol">}</a> <a id="3429" class="Symbol">_</a> <a id="3431" href="Graded.Usage.Restrictions.html#3431" class="Bound">hyp</a> <a id="3435" class="Symbol">=</a> <a id="3437" href="Graded.Usage.Restrictions.html#3431" class="Bound">hyp</a>
    <a id="3445" href="Graded.Usage.Restrictions.html#3226" class="Function">·ᵐ-lemma₂</a> <a id="3455" class="Symbol">{</a><a id="3456" class="Argument">m</a> <a id="3458" class="Symbol">=</a> <a id="3460" href="Graded.Mode.html#1121" class="InductiveConstructor">𝟘ᵐ</a><a id="3462" class="Symbol">}</a> <a id="3464" class="Symbol">{</a><a id="3465" class="Argument">m′</a> <a id="3468" class="Symbol">=</a> <a id="3470" href="Graded.Mode.html#1121" class="InductiveConstructor">𝟘ᵐ</a><a id="3472" class="Symbol">}</a> <a id="3474" href="Graded.Usage.Restrictions.html#3474" class="Bound">f</a> <a id="3476" class="Symbol">_</a>   <a id="3480" class="Symbol">=</a>
      <a id="3488" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">subst</a> <a id="3494" class="Symbol">(</a><a id="3495" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">_≤ᵉᵐ_</a> <a id="3501" class="Symbol">_)</a> <a id="3504" class="Symbol">(</a><a id="3505" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a> <a id="3510" href="Graded.Usage.Restrictions.html#3474" class="Bound">f</a> <a id="3512" href="Graded.Mode.html#2377" class="Function">𝟘ᵐ-cong</a><a id="3519" class="Symbol">)</a> <a id="3521" href="Graded.Usage.Erased-matches.html#1267" class="Function">≤ᵉᵐ-reflexive</a>

  <a id="3538" class="Keyword">opaque</a>

    <a id="3550" class="Comment">-- Prodrec-allowed is closed under application of m′ ·ᵐ_ to the</a>
    <a id="3618" class="Comment">-- mode.</a>

    <a id="Usage-restrictions.Prodrec-allowed-·ᵐ"></a><a id="3632" href="Graded.Usage.Restrictions.html#3632" class="Function">Prodrec-allowed-·ᵐ</a> <a id="3651" class="Symbol">:</a>
      <a id="3659" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="3675" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="3677" href="Graded.Usage.Restrictions.html#591" class="Generalizable">r</a> <a id="3679" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="3681" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a> <a id="3683" class="Symbol">→</a> <a id="3685" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="3701" class="Symbol">(</a><a id="3702" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="3705" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="3708" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="3709" class="Symbol">)</a> <a id="3711" href="Graded.Usage.Restrictions.html#591" class="Generalizable">r</a> <a id="3713" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="3715" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a>
    <a id="3721" href="Graded.Usage.Restrictions.html#3632" class="Function">Prodrec-allowed-·ᵐ</a> <a id="3740" class="Symbol">=</a>
      <a id="3748" href="Graded.Usage.Restrictions.html#2932" class="Function">·ᵐ-lemma₁</a> <a id="3758" class="Symbol">(λ</a> <a id="3761" href="Graded.Usage.Restrictions.html#3761" class="Bound">m</a> <a id="3763" class="Symbol">→</a> <a id="3765" href="Graded.Usage.Restrictions.html#864" class="Field">Prodrec-allowed</a> <a id="3781" href="Graded.Usage.Restrictions.html#3761" class="Bound">m</a> <a id="3783" class="Symbol">_</a> <a id="3785" class="Symbol">_</a> <a id="3787" class="Symbol">_)</a>
        <a id="3798" href="Graded.Usage.Restrictions.html#1014" class="Field">Prodrec-allowed-downwards-closed</a>

  <a id="3834" class="Keyword">opaque</a>

    <a id="3846" class="Comment">-- Unitrec-allowed is closed under application of m′ ·ᵐ_ to the</a>
    <a id="3914" class="Comment">-- mode.</a>

    <a id="Usage-restrictions.Unitrec-allowed-·ᵐ"></a><a id="3928" href="Graded.Usage.Restrictions.html#3928" class="Function">Unitrec-allowed-·ᵐ</a> <a id="3947" class="Symbol">:</a>
      <a id="3955" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="3971" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="3973" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="3975" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a> <a id="3977" class="Symbol">→</a> <a id="3979" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="3995" class="Symbol">(</a><a id="3996" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="3999" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="4002" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="4003" class="Symbol">)</a> <a id="4005" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="4007" href="Graded.Usage.Restrictions.html#589" class="Generalizable">q</a>
    <a id="4013" href="Graded.Usage.Restrictions.html#3928" class="Function">Unitrec-allowed-·ᵐ</a> <a id="4032" class="Symbol">=</a>
      <a id="4040" href="Graded.Usage.Restrictions.html#2932" class="Function">·ᵐ-lemma₁</a> <a id="4050" class="Symbol">(λ</a> <a id="4053" href="Graded.Usage.Restrictions.html#4053" class="Bound">m</a> <a id="4055" class="Symbol">→</a> <a id="4057" href="Graded.Usage.Restrictions.html#1224" class="Field">Unitrec-allowed</a> <a id="4073" href="Graded.Usage.Restrictions.html#4053" class="Bound">m</a> <a id="4075" class="Symbol">_</a> <a id="4077" class="Symbol">_)</a>
        <a id="4088" href="Graded.Usage.Restrictions.html#1372" class="Field">Unitrec-allowed-downwards-closed</a>

  <a id="4124" class="Keyword">opaque</a>

    <a id="4136" class="Comment">-- Emptyrec-allowed is closed under application of m′ ·ᵐ_ to the</a>
    <a id="4205" class="Comment">-- mode.</a>

    <a id="Usage-restrictions.Emptyrec-allowed-·ᵐ"></a><a id="4219" href="Graded.Usage.Restrictions.html#4219" class="Function">Emptyrec-allowed-·ᵐ</a> <a id="4239" class="Symbol">:</a>
      <a id="4247" href="Graded.Usage.Restrictions.html#1576" class="Field">Emptyrec-allowed</a> <a id="4264" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="4266" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a> <a id="4268" class="Symbol">→</a> <a id="4270" href="Graded.Usage.Restrictions.html#1576" class="Field">Emptyrec-allowed</a> <a id="4287" class="Symbol">(</a><a id="4288" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="4291" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="4294" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="4295" class="Symbol">)</a> <a id="4297" href="Graded.Usage.Restrictions.html#587" class="Generalizable">p</a>
    <a id="4303" href="Graded.Usage.Restrictions.html#4219" class="Function">Emptyrec-allowed-·ᵐ</a> <a id="4323" class="Symbol">=</a>
      <a id="4331" href="Graded.Usage.Restrictions.html#2932" class="Function">·ᵐ-lemma₁</a> <a id="4341" class="Symbol">(λ</a> <a id="4344" href="Graded.Usage.Restrictions.html#4344" class="Bound">m</a> <a id="4346" class="Symbol">→</a> <a id="4348" href="Graded.Usage.Restrictions.html#1576" class="Field">Emptyrec-allowed</a> <a id="4365" href="Graded.Usage.Restrictions.html#4344" class="Bound">m</a> <a id="4367" class="Symbol">_)</a>
        <a id="4378" href="Graded.Usage.Restrictions.html#1718" class="Field">Emptyrec-allowed-downwards-closed</a>

  <a id="4415" class="Comment">-- Does the strong unit type act as a &quot;sink&quot;?</a>

  <a id="Usage-restrictions.Starˢ-sink"></a><a id="4464" href="Graded.Usage.Restrictions.html#4464" class="Function">Starˢ-sink</a> <a id="4475" class="Symbol">:</a> <a id="4477" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="4483" href="Graded.Usage.Restrictions.html#4464" class="Function">Starˢ-sink</a> <a id="4494" class="Symbol">=</a> <a id="4496" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="4498" href="Graded.Usage.Restrictions.html#1869" class="Field">starˢ-sink</a>

  <a id="4512" class="Comment">-- Does the strong unit type not act as a &quot;sink&quot;?</a>
  <a id="4564" class="Comment">--</a>
  <a id="4569" class="Comment">-- This type is used instead of ¬ Starˢ-sink because &quot;¬ A&quot; does not</a>
  <a id="4639" class="Comment">-- work well as the type of an instance argument.</a>

  <a id="Usage-restrictions.¬Starˢ-sink"></a><a id="4692" href="Graded.Usage.Restrictions.html#4692" class="Function">¬Starˢ-sink</a> <a id="4704" class="Symbol">:</a> <a id="4706" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="4712" href="Graded.Usage.Restrictions.html#4692" class="Function">¬Starˢ-sink</a> <a id="4724" class="Symbol">=</a> <a id="4726" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="4728" class="Symbol">(</a><a id="4729" href="Data.Bool.Base.html#941" class="Function">not</a> <a id="4733" href="Graded.Usage.Restrictions.html#1869" class="Field">starˢ-sink</a><a id="4743" class="Symbol">)</a>

  <a id="4748" class="Comment">-- The strong unit type is not allowed to both act and not act as a</a>
  <a id="4818" class="Comment">-- sink.</a>

  <a id="Usage-restrictions.not-sink-and-no-sink"></a><a id="4830" href="Graded.Usage.Restrictions.html#4830" class="Function">not-sink-and-no-sink</a> <a id="4851" class="Symbol">:</a> <a id="4853" href="Graded.Usage.Restrictions.html#4464" class="Function">Starˢ-sink</a> <a id="4864" class="Symbol">→</a> <a id="4866" href="Graded.Usage.Restrictions.html#4692" class="Function">¬Starˢ-sink</a> <a id="4878" class="Symbol">→</a> <a id="4880" href="Data.Empty.html#895" class="Function">⊥</a>
  <a id="4884" href="Graded.Usage.Restrictions.html#4830" class="Function">not-sink-and-no-sink</a> <a id="4905" href="Graded.Usage.Restrictions.html#4905" class="Bound">sink</a> <a id="4910" href="Graded.Usage.Restrictions.html#4910" class="Bound">¬sink</a> <a id="4916" class="Keyword">with</a> <a id="4921" href="Graded.Usage.Restrictions.html#1869" class="Field">starˢ-sink</a>
  <a id="4934" class="Symbol">…</a> <a id="4936" class="Symbol">|</a> <a id="4938" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="4944" class="Symbol">=</a> <a id="4946" class="Bound">sink</a>
  <a id="4953" class="Symbol">…</a> <a id="4955" class="Symbol">|</a> <a id="4957" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="4962" class="Symbol">=</a> <a id="4964" class="Bound">¬sink</a>

  <a id="4973" class="Comment">-- The strong unit type either acts or does not act as a sink.</a>

  <a id="Usage-restrictions.sink-or-no-sink"></a><a id="5039" href="Graded.Usage.Restrictions.html#5039" class="Function">sink-or-no-sink</a> <a id="5055" class="Symbol">:</a> <a id="5057" href="Graded.Usage.Restrictions.html#4464" class="Function">Starˢ-sink</a> <a id="5068" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5070" href="Graded.Usage.Restrictions.html#4692" class="Function">¬Starˢ-sink</a>
  <a id="5084" href="Graded.Usage.Restrictions.html#5039" class="Function">sink-or-no-sink</a> <a id="5100" class="Keyword">with</a> <a id="5105" href="Graded.Usage.Restrictions.html#1869" class="Field">starˢ-sink</a>
  <a id="5118" href="Graded.Usage.Restrictions.html#5039" class="Function">…</a> <a id="5120" class="Symbol">|</a> <a id="5122" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="5128" class="Symbol">=</a> <a id="5130" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="5135" class="Symbol">_</a>
  <a id="5139" href="Graded.Usage.Restrictions.html#5039" class="Function">…</a> <a id="5141" class="Symbol">|</a> <a id="5143" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="5148" class="Symbol">=</a> <a id="5150" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="5155" class="Symbol">_</a>

  <a id="5160" class="Keyword">opaque</a>

    <a id="5172" class="Comment">-- The usage rules for J are at least as permissive for m′ ·ᵐ m as</a>
    <a id="5243" class="Comment">-- for m. (See Graded.Usage.Properties.Jₘ-generalised and</a>
    <a id="5305" class="Comment">-- Graded.Usage.Properties.J₀ₘ₁-generalised.)</a>

    <a id="Usage-restrictions.erased-matches-for-J-≤ᵉᵐ·ᵐ"></a><a id="5356" href="Graded.Usage.Restrictions.html#5356" class="Function">erased-matches-for-J-≤ᵉᵐ·ᵐ</a> <a id="5383" class="Symbol">:</a>
      <a id="5391" href="Graded.Usage.Restrictions.html#2126" class="Field">erased-matches-for-J</a> <a id="5412" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="5414" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="5418" href="Graded.Usage.Restrictions.html#2126" class="Field">erased-matches-for-J</a> <a id="5439" class="Symbol">(</a><a id="5440" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="5443" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="5446" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="5447" class="Symbol">)</a>
    <a id="5453" href="Graded.Usage.Restrictions.html#5356" class="Function">erased-matches-for-J-≤ᵉᵐ·ᵐ</a> <a id="5480" class="Symbol">=</a>
      <a id="5488" href="Graded.Usage.Restrictions.html#3226" class="Function">·ᵐ-lemma₂</a> <a id="5498" href="Graded.Usage.Restrictions.html#2126" class="Field">erased-matches-for-J</a> <a id="5519" href="Graded.Usage.Restrictions.html#2361" class="Field">erased-matches-for-J-≤ᵉᵐ</a>

  <a id="5547" class="Keyword">opaque</a>

    <a id="5559" class="Comment">-- The usage rules for K are at least as permissive for m′ ·ᵐ m as</a>
    <a id="5630" class="Comment">-- for m. (See Graded.Usage.Properties.Kₘ-generalised and</a>
    <a id="5692" class="Comment">-- Graded.Usage.Properties.K₀ₘ₁-generalised.)</a>

    <a id="Usage-restrictions.erased-matches-for-K-≤ᵉᵐ·ᵐ"></a><a id="5743" href="Graded.Usage.Restrictions.html#5743" class="Function">erased-matches-for-K-≤ᵉᵐ·ᵐ</a> <a id="5770" class="Symbol">:</a>
      <a id="5778" href="Graded.Usage.Restrictions.html#2551" class="Field">erased-matches-for-K</a> <a id="5799" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a> <a id="5801" href="Graded.Usage.Erased-matches.html#1099" class="Function Operator">≤ᵉᵐ</a> <a id="5805" href="Graded.Usage.Restrictions.html#2551" class="Field">erased-matches-for-K</a> <a id="5826" class="Symbol">(</a><a id="5827" href="Graded.Usage.Restrictions.html#602" class="Generalizable">m′</a> <a id="5830" href="Graded.Mode.html#4823" class="Function Operator">·ᵐ</a> <a id="5833" href="Graded.Usage.Restrictions.html#600" class="Generalizable">m</a><a id="5834" class="Symbol">)</a>
    <a id="5840" href="Graded.Usage.Restrictions.html#5743" class="Function">erased-matches-for-K-≤ᵉᵐ·ᵐ</a> <a id="5867" class="Symbol">=</a>
      <a id="5875" href="Graded.Usage.Restrictions.html#3226" class="Function">·ᵐ-lemma₂</a> <a id="5885" href="Graded.Usage.Restrictions.html#2551" class="Field">erased-matches-for-K</a> <a id="5906" href="Graded.Usage.Restrictions.html#2786" class="Field">erased-matches-for-K-≤ᵉᵐ</a>
</pre></body></html>