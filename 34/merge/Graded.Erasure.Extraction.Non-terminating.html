<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Extraction.Non-terminating</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- If the extraction function uses strict applications and removes</a>
<a id="141" class="Comment">-- erasable arguments entirely, then it may be the case that</a>
<a id="202" class="Comment">-- well-typed and well-resourced terms extract to terms that do not</a>
<a id="270" class="Comment">-- terminate</a>
<a id="283" class="Comment">------------------------------------------------------------------------</a>

<a id="357" class="Comment">-- In &quot;A New Extraction for Coq&quot; Letouzey points out that uses of the</a>
<a id="427" class="Comment">-- eliminator for the empty type False can lead to problems similar to</a>
<a id="498" class="Comment">-- the one presented below if all logical arguments are removed</a>
<a id="562" class="Comment">-- entirely, given that the eliminator is replaced with code that</a>
<a id="628" class="Comment">-- throws an exception. However, the example discussed below does not</a>
<a id="698" class="Comment">-- rely on how emptyrec is extracted, but is more similar to one in</a>
<a id="766" class="Comment">-- Mishra-Linger&#39;s PhD thesis (see Figure 5.1).</a>
<a id="814" class="Comment">--</a>
<a id="817" class="Comment">-- The example looks roughly like this:</a>
<a id="857" class="Comment">--</a>
<a id="860" class="Comment">--   (λ^ω _. zero)</a>
<a id="879" class="Comment">--     (λ⁰ (bot : ⊥).</a>
<a id="901" class="Comment">--        (λ^ω+ω x. cast bot x x) (cast bot (λ^ω+ω x. cast bot x x)))</a>
<a id="971" class="Comment">--</a>
<a id="974" class="Comment">-- If erased arguments are removed entirely, then we end up with a</a>
<a id="1041" class="Comment">-- term like the following one:</a>
<a id="1073" class="Comment">--</a>
<a id="1076" class="Comment">--   (λ _. zero) ((λ x. x x) (λ x. x x))</a>
<a id="1117" class="Comment">--</a>
<a id="1120" class="Comment">-- If strict applications are used, then this program does not</a>
<a id="1183" class="Comment">-- terminate.</a>

<a id="1198" class="Keyword">open</a> <a id="1203" class="Keyword">import</a> <a id="1210" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="1226" class="Keyword">open</a> <a id="1231" class="Keyword">import</a> <a id="1238" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="1264" class="Keyword">open</a> <a id="1269" class="Keyword">import</a> <a id="1276" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="1307" class="Keyword">module</a> <a id="1314" href="Graded.Erasure.Extraction.Non-terminating.html" class="Module">Graded.Erasure.Extraction.Non-terminating</a>
  <a id="1358" class="Symbol">{</a><a id="1359" href="Graded.Erasure.Extraction.Non-terminating.html#1359" class="Bound">a</a><a id="1360" class="Symbol">}</a> <a id="1362" class="Symbol">{</a><a id="1363" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="1365" class="Symbol">:</a> <a id="1367" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1371" href="Graded.Erasure.Extraction.Non-terminating.html#1359" class="Bound">a</a><a id="1372" class="Symbol">}</a>
  <a id="1376" class="Symbol">{</a><a id="1377" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="1379" class="Symbol">:</a> <a id="1381" href="Graded.Modality.html#7187" class="Record">Modality</a> <a id="1390" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a><a id="1391" class="Symbol">}</a>
  <a id="1395" class="Symbol">(</a><a id="1396" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a> <a id="1399" class="Symbol">:</a> <a id="1401" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="1419" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a><a id="1420" class="Symbol">)</a>
  <a id="1424" class="Symbol">(</a><a id="1425" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a> <a id="1428" class="Symbol">:</a> <a id="1430" href="Graded.Usage.Restrictions.html#688" class="Record">Usage-restrictions</a> <a id="1449" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a><a id="1450" class="Symbol">)</a>
  <a id="1454" class="Keyword">where</a>

<a id="1461" class="Keyword">open</a> <a id="1466" href="Graded.Modality.html#7187" class="Module">Modality</a> <a id="1475" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1477" class="Keyword">open</a> <a id="1482" href="Definition.Typed.Restrictions.html#752" class="Module">Type-restrictions</a> <a id="1500" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1503" class="Keyword">open</a> <a id="1508" href="Graded.Usage.Restrictions.html#688" class="Module">Usage-restrictions</a> <a id="1527" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>

<a id="1531" class="Keyword">open</a> <a id="1536" class="Keyword">import</a> <a id="1543" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="1560" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1563" class="Keyword">open</a> <a id="1568" class="Keyword">import</a> <a id="1575" href="Definition.Typed.Consequences.DerivedRules.html" class="Module">Definition.Typed.Consequences.DerivedRules</a> <a id="1618" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1621" class="Keyword">open</a> <a id="1626" class="Keyword">import</a> <a id="1633" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="1661" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1664" class="Keyword">open</a> <a id="1669" class="Keyword">import</a> <a id="1676" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="1695" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a>
<a id="1697" class="Keyword">open</a> <a id="1702" class="Keyword">import</a> <a id="1709" href="Definition.Untyped.Identity.html" class="Module">Definition.Untyped.Identity</a> <a id="1737" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>

<a id="1740" class="Keyword">open</a> <a id="1745" class="Keyword">import</a> <a id="1752" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1767" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1769" class="Keyword">open</a> <a id="1774" class="Keyword">import</a> <a id="1781" href="Graded.Context.Properties.html" class="Module">Graded.Context.Properties</a> <a id="1807" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1809" class="Keyword">open</a> <a id="1814" class="Keyword">import</a> <a id="1821" href="Graded.Derived.Identity.html" class="Module">Graded.Derived.Identity</a> <a id="1845" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>
<a id="1848" class="Keyword">open</a> <a id="1853" class="Keyword">import</a> <a id="1860" href="Graded.Erasure.Extraction.html" class="Module">Graded.Erasure.Extraction</a> <a id="1886" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1888" class="Keyword">open</a> <a id="1893" class="Keyword">import</a> <a id="1900" href="Graded.Erasure.Extraction.Properties.html" class="Module">Graded.Erasure.Extraction.Properties</a> <a id="1937" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1939" class="Keyword">open</a> <a id="1944" class="Keyword">import</a> <a id="1951" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a> <a id="1973" class="Symbol">as</a> <a id="1976" class="Module">T</a> <a id="1978" class="Keyword">using</a> <a id="1984" class="Symbol">(</a><a id="1985" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="1995" class="Symbol">;</a> <a id="1997" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a><a id="2003" class="Symbol">)</a>
<a id="2005" class="Keyword">open</a> <a id="2010" class="Keyword">import</a> <a id="2017" href="Graded.Erasure.Target.Non-terminating.html" class="Module">Graded.Erasure.Target.Non-terminating</a>
<a id="2055" class="Keyword">open</a> <a id="2060" class="Keyword">import</a> <a id="2067" href="Graded.Erasure.Target.Properties.html" class="Module">Graded.Erasure.Target.Properties</a>
<a id="2100" class="Keyword">open</a> <a id="2105" class="Keyword">import</a> <a id="2112" href="Graded.Modality.Properties.html" class="Module">Graded.Modality.Properties</a> <a id="2139" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="2141" class="Keyword">open</a> <a id="2146" class="Keyword">import</a> <a id="2153" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="2165" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="2167" class="Keyword">open</a> <a id="2172" class="Keyword">import</a> <a id="2179" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="2192" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="2194" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>
<a id="2197" class="Keyword">open</a> <a id="2202" class="Keyword">import</a> <a id="2209" href="Graded.Usage.Properties.html" class="Module">Graded.Usage.Properties</a> <a id="2233" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="2235" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>

<a id="2239" class="Keyword">open</a> <a id="2244" class="Keyword">import</a> <a id="2251" href="Tools.Bool.html" class="Module">Tools.Bool</a> <a id="2262" class="Keyword">using</a> <a id="2268" class="Symbol">(</a><a id="2269" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="2273" class="Symbol">;</a> <a id="2275" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="2279" class="Symbol">)</a>
<a id="2281" class="Keyword">open</a> <a id="2286" class="Keyword">import</a> <a id="2293" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="2305" class="Keyword">open</a> <a id="2310" class="Keyword">import</a> <a id="2317" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="2327" class="Keyword">open</a> <a id="2332" class="Keyword">import</a> <a id="2339" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="2354" class="Keyword">open</a> <a id="2359" class="Keyword">import</a> <a id="2366" href="Tools.Nat.html" class="Module">Tools.Nat</a> <a id="2376" class="Keyword">using</a> <a id="2382" class="Symbol">(</a><a id="2383" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="2386" class="Symbol">;</a> <a id="2388" href="Tools.Nat.html#1726" class="InductiveConstructor">1+</a><a id="2390" class="Symbol">)</a>
<a id="2392" class="Keyword">open</a> <a id="2397" class="Keyword">import</a> <a id="2404" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="2418" class="Keyword">open</a> <a id="2423" class="Keyword">import</a> <a id="2430" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="2458" class="Symbol">as</a> <a id="2461" class="Module">PE</a> <a id="2464" class="Keyword">using</a> <a id="2470" class="Symbol">(</a><a id="2471" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="2474" class="Symbol">;</a> <a id="2476" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">_≢_</a><a id="2479" class="Symbol">)</a>
<a id="2481" class="Keyword">import</a> <a id="2488" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>
<a id="2526" class="Keyword">open</a> <a id="2531" class="Keyword">import</a> <a id="2538" href="Tools.Relation.html" class="Module">Tools.Relation</a>
<a id="2553" class="Keyword">open</a> <a id="2558" class="Keyword">import</a> <a id="2565" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="2576" class="Keyword">private</a> <a id="2584" class="Keyword">variable</a>
  <a id="2595" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a>           <a id="2607" class="Symbol">:</a> <a id="2609" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
  <a id="2616" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>           <a id="2628" class="Symbol">:</a> <a id="2630" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="2636" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a>           <a id="2648" class="Symbol">:</a> <a id="2650" href="Definition.Untyped.NotParametrised.html#791" class="Datatype">Con</a> <a id="2654" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="2659" class="Symbol">_</a>
  <a id="2663" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="2665" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="2667" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="2669" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a>     <a id="2675" class="Symbol">:</a> <a id="2677" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="2682" class="Symbol">_</a>
  <a id="2686" href="Graded.Erasure.Extraction.Non-terminating.html#2686" class="Generalizable">γ₁</a> <a id="2689" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">γ₂</a> <a id="2692" href="Graded.Erasure.Extraction.Non-terminating.html#2692" class="Generalizable">γ₃</a> <a id="2695" href="Graded.Erasure.Extraction.Non-terminating.html#2695" class="Generalizable">γ₄</a> <a id="2698" class="Symbol">:</a> <a id="2700" href="Graded.Context.html#692" class="Datatype">Conₘ</a> <a id="2705" class="Symbol">_</a>
  <a id="2709" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="2711" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a>         <a id="2721" class="Symbol">:</a> <a id="2723" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a>
  <a id="2727" href="Graded.Erasure.Extraction.Non-terminating.html#2727" class="Generalizable">v</a>           <a id="2739" class="Symbol">:</a> <a id="2741" href="Graded.Erasure.Target.html#1227" class="Datatype">T.Term</a> <a id="2748" class="Symbol">_</a>
  <a id="2752" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a>           <a id="2764" class="Symbol">:</a> <a id="2766" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a>

<a id="2778" class="Comment">-- Some lemmas used below.</a>

<a id="2806" class="Keyword">private</a> <a id="2814" class="Keyword">module</a> <a id="Lemmas"></a><a id="2821" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="2828" class="Symbol">(</a><a id="2829" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="2832" class="Symbol">:</a> <a id="2834" href="Definition.Typed.html#1178" class="Datatype Operator">⊢</a> <a id="2836" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a><a id="2837" class="Symbol">)</a> <a id="2839" class="Keyword">where</a> <a id="2845" class="Keyword">opaque</a>

  <a id="Lemmas.Empty⊢ℕ∷U"></a><a id="2855" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="2865" class="Symbol">:</a> <a id="2867" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="2869" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="2871" href="Definition.Untyped.html#2905" class="InductiveConstructor">Empty</a> <a id="2877" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="2879" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="2881" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="2883" href="Definition.Untyped.html#2853" class="InductiveConstructor">U</a>
  <a id="2887" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="2897" class="Symbol">=</a> <a id="2899" href="Definition.Typed.html#1945" class="InductiveConstructor">ℕⱼ</a> <a id="2902" class="Symbol">(</a><a id="2903" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="2906" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">∙[</a> <a id="2909" href="Definition.Typed.html#1398" class="InductiveConstructor">Emptyⱼ</a> <a id="2916" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">]</a><a id="2917" class="Symbol">)</a>

  <a id="Lemmas.Empty⊢ℕ"></a><a id="2922" href="Graded.Erasure.Extraction.Non-terminating.html#2922" class="Function">Empty⊢ℕ</a> <a id="2930" class="Symbol">:</a> <a id="2932" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="2934" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="2936" href="Definition.Untyped.html#2905" class="InductiveConstructor">Empty</a> <a id="2942" href="Definition.Typed.html#1300" class="Datatype Operator">⊢</a> <a id="2944" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a>
  <a id="2948" href="Graded.Erasure.Extraction.Non-terminating.html#2922" class="Function">Empty⊢ℕ</a> <a id="2956" class="Symbol">=</a> <a id="2958" href="Definition.Typed.html#1665" class="InductiveConstructor">univ</a> <a id="2963" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a>

  <a id="Lemmas.Empty∙ℕ⊢ℕ∷U"></a><a id="2976" href="Graded.Erasure.Extraction.Non-terminating.html#2976" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="2988" class="Symbol">:</a> <a id="2990" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="2992" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="2994" href="Definition.Untyped.html#2905" class="InductiveConstructor">Empty</a> <a id="3000" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="3002" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="3004" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="3006" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="3008" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="3010" href="Definition.Untyped.html#2853" class="InductiveConstructor">U</a>
  <a id="3014" href="Graded.Erasure.Extraction.Non-terminating.html#2976" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="3026" class="Symbol">=</a> <a id="3028" href="Definition.Typed.html#1945" class="InductiveConstructor">ℕⱼ</a> <a id="3031" class="Symbol">(</a><a id="3032" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="3035" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">∙[</a> <a id="3038" href="Definition.Typed.html#1398" class="InductiveConstructor">Emptyⱼ</a> <a id="3045" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">]</a> <a id="3047" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">∙[</a> <a id="3050" href="Definition.Typed.html#1373" class="InductiveConstructor">ℕⱼ</a> <a id="3053" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">]</a><a id="3054" class="Symbol">)</a>

  <a id="Lemmas.Empty∙ℕ∙ℕ⊢ℕ∷U"></a><a id="3059" href="Graded.Erasure.Extraction.Non-terminating.html#3059" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="3073" class="Symbol">:</a> <a id="3075" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="3077" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="3079" href="Definition.Untyped.html#2905" class="InductiveConstructor">Empty</a> <a id="3085" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="3087" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="3089" href="Definition.Untyped.NotParametrised.html#904" class="InductiveConstructor Operator">∙</a> <a id="3091" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="3093" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="3095" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="3097" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="3099" href="Definition.Untyped.html#2853" class="InductiveConstructor">U</a>
  <a id="3103" href="Graded.Erasure.Extraction.Non-terminating.html#3059" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="3117" class="Symbol">=</a> <a id="3119" href="Definition.Typed.html#1945" class="InductiveConstructor">ℕⱼ</a> <a id="3122" class="Symbol">(</a><a id="3123" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="3126" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">∙[</a> <a id="3129" href="Definition.Typed.html#1398" class="InductiveConstructor">Emptyⱼ</a> <a id="3136" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">]</a> <a id="3138" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">∙[</a> <a id="3141" href="Definition.Typed.html#1373" class="InductiveConstructor">ℕⱼ</a> <a id="3144" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">]</a> <a id="3146" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">∙[</a> <a id="3149" href="Definition.Typed.html#1373" class="InductiveConstructor">ℕⱼ</a> <a id="3152" href="Definition.Typed.Properties.Well-formed.html#3728" class="Function Operator">]</a><a id="3153" class="Symbol">)</a>

<a id="3156" class="Keyword">opaque</a>

  <a id="3166" class="Comment">-- Another lemma used below.</a>

  <a id="▸Πℕℕ"></a><a id="3198" href="Graded.Erasure.Extraction.Non-terminating.html#3198" class="Function">▸Πℕℕ</a> <a id="3203" class="Symbol">:</a> <a id="3205" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="3207" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="3209" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="3211" class="Symbol">→</a> <a id="3213" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3216" class="Symbol">{</a><a id="3217" class="Argument">n</a> <a id="3219" class="Symbol">=</a> <a id="3221" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="3222" class="Symbol">}</a> <a id="3224" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="3227" class="InductiveConstructor">𝟙ᵐ</a> <a id="3230" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="3232" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">Π</a> <a id="3234" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="3236" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">,</a> <a id="3238" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="3240" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▷</a> <a id="3242" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="3244" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▹</a> <a id="3246" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a>
  <a id="3250" href="Graded.Erasure.Extraction.Non-terminating.html#3198" class="Function">▸Πℕℕ</a> <a id="3255" class="Symbol">{</a><a id="3256" href="Graded.Erasure.Extraction.Non-terminating.html#3256" class="Bound">q</a><a id="3257" class="Symbol">}</a> <a id="3259" href="Graded.Erasure.Extraction.Non-terminating.html#3259" class="Bound">q≤𝟘</a> <a id="3263" class="Symbol">=</a> <a id="3265" href="Graded.Usage.html#14317" class="InductiveConstructor">sub</a>
    <a id="3273" class="Symbol">(</a><a id="3274" href="Graded.Usage.html#8359" class="InductiveConstructor">ΠΣₘ</a> <a id="3278" href="Graded.Usage.html#8271" class="InductiveConstructor">ℕₘ</a> <a id="3281" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3283" href="Graded.Usage.html#14317" class="InductiveConstructor">sub</a> <a id="3287" href="Graded.Usage.html#8271" class="InductiveConstructor">ℕₘ</a> <a id="3290" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3292" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
        <a id="3306" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3309" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="3311" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="3313" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="3315" href="Graded.Erasure.Extraction.Non-terminating.html#3256" class="Bound">q</a>  <a id="3318" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">≈⟨</a> <a id="3321" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="3329" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="3331" href="Graded.Modality.html#2917" class="Function">·-identityˡ</a> <a id="3343" class="Symbol">_</a> <a id="3345" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">⟩</a>
        <a id="3355" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3358" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="3360" href="Graded.Erasure.Extraction.Non-terminating.html#3256" class="Bound">q</a>      <a id="3367" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">≤⟨</a> <a id="3370" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="3378" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="3380" href="Graded.Erasure.Extraction.Non-terminating.html#3259" class="Bound">q≤𝟘</a> <a id="3384" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">⟩</a>
        <a id="3394" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>          <a id="3406" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="3407" class="Symbol">)</a>
    <a id="3413" class="Symbol">(</a><a id="3414" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
       <a id="3427" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>        <a id="3437" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="3441" href="Graded.Context.Properties.Addition.html#926" class="Function">+ᶜ-identityʳ</a> <a id="3454" class="Symbol">_</a> <a id="3456" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
       <a id="3465" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3468" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="3471" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="3475" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="3476" class="Symbol">)</a>
    <a id="3482" class="Keyword">where</a>
    <a id="3492" class="Keyword">open</a> <a id="3497" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="3511" class="Comment">------------------------------------------------------------------------</a>
<a id="3584" class="Comment">-- The term former cast</a>

<a id="3609" class="Keyword">opaque</a>

  <a id="3619" class="Comment">-- A cast lemma.</a>

  <a id="cast"></a><a id="3639" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="3644" class="Symbol">:</a> <a id="3646" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="3651" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3653" class="Symbol">→</a> <a id="3655" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="3660" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3662" class="Symbol">→</a> <a id="3664" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="3669" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3671" class="Symbol">→</a> <a id="3673" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="3678" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3680" class="Symbol">→</a> <a id="3682" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="3687" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>
  <a id="3691" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="3696" href="Graded.Erasure.Extraction.Non-terminating.html#3696" class="Bound">t</a> <a id="3698" href="Graded.Erasure.Extraction.Non-terminating.html#3698" class="Bound">A</a> <a id="3700" href="Graded.Erasure.Extraction.Non-terminating.html#3700" class="Bound">B</a> <a id="3702" href="Graded.Erasure.Extraction.Non-terminating.html#3702" class="Bound">u</a> <a id="3704" class="Symbol">=</a>
    <a id="3710" href="Definition.Untyped.Identity.html#876" class="Function">subst</a> <a id="3716" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="3718" href="Definition.Untyped.html#2853" class="InductiveConstructor">U</a> <a id="3720" class="Symbol">(</a><a id="3721" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="3725" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="3727" class="Symbol">)</a> <a id="3729" href="Graded.Erasure.Extraction.Non-terminating.html#3698" class="Bound">A</a> <a id="3731" href="Graded.Erasure.Extraction.Non-terminating.html#3700" class="Bound">B</a> <a id="3733" class="Symbol">(</a><a id="3734" href="Definition.Untyped.html#4418" class="InductiveConstructor">emptyrec</a> <a id="3743" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="3745" class="Symbol">(</a><a id="3746" href="Definition.Untyped.html#4480" class="InductiveConstructor">Id</a> <a id="3749" href="Definition.Untyped.html#2853" class="InductiveConstructor">U</a> <a id="3751" href="Graded.Erasure.Extraction.Non-terminating.html#3698" class="Bound">A</a> <a id="3753" href="Graded.Erasure.Extraction.Non-terminating.html#3700" class="Bound">B</a><a id="3754" class="Symbol">)</a> <a id="3756" href="Graded.Erasure.Extraction.Non-terminating.html#3696" class="Bound">t</a><a id="3757" class="Symbol">)</a> <a id="3759" href="Graded.Erasure.Extraction.Non-terminating.html#3702" class="Bound">u</a>

<a id="3762" class="Keyword">opaque</a>
  <a id="3771" class="Keyword">unfolding</a> <a id="3781" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="3786" href="Definition.Untyped.Identity.html#876" class="Function">subst</a>

  <a id="3795" class="Comment">-- An extraction lemma for cast.</a>

  <a id="erase-cast"></a><a id="3831" href="Graded.Erasure.Extraction.Non-terminating.html#3831" class="Function">erase-cast</a> <a id="3842" class="Symbol">:</a> <a id="3844" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="3851" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a> <a id="3853" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="3855" class="Symbol">(</a><a id="3856" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="3861" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="3863" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="3865" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="3867" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a><a id="3868" class="Symbol">)</a> <a id="3870" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3872" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="3879" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a> <a id="3881" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="3883" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a>
  <a id="3887" href="Graded.Erasure.Extraction.Non-terminating.html#3831" class="Function">erase-cast</a> <a id="3898" class="Symbol">=</a> <a id="3900" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a>

<a id="3909" class="Keyword">opaque</a>
  <a id="3918" class="Keyword">unfolding</a> <a id="3928" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a>

  <a id="3936" class="Comment">-- A typing rule for cast.</a>

  <a id="⊢cast"></a><a id="3966" href="Graded.Erasure.Extraction.Non-terminating.html#3966" class="Function">⊢cast</a> <a id="3972" class="Symbol">:</a>
    <a id="3978" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="3980" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="3982" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="3984" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="3986" href="Definition.Untyped.html#2905" class="InductiveConstructor">Empty</a> <a id="3992" class="Symbol">→</a>
    <a id="3998" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4000" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="4002" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4004" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="4006" href="Definition.Untyped.html#2853" class="InductiveConstructor">U</a> <a id="4008" class="Symbol">→</a>
    <a id="4014" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4016" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="4018" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4020" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="4022" href="Definition.Untyped.html#2853" class="InductiveConstructor">U</a> <a id="4024" class="Symbol">→</a>
    <a id="4030" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4032" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="4034" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a> <a id="4036" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="4038" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4040" class="Symbol">→</a>
    <a id="4046" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4048" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="4050" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="4055" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="4057" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4059" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4061" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a> <a id="4063" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="4065" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a>
  <a id="4069" href="Graded.Erasure.Extraction.Non-terminating.html#3966" class="Function">⊢cast</a> <a id="4075" href="Graded.Erasure.Extraction.Non-terminating.html#4075" class="Bound">⊢t</a> <a id="4078" href="Graded.Erasure.Extraction.Non-terminating.html#4078" class="Bound">⊢A</a> <a id="4081" href="Graded.Erasure.Extraction.Non-terminating.html#4081" class="Bound">⊢B</a> <a id="4084" class="Symbol">=</a>
    <a id="4090" href="Definition.Typed.Consequences.DerivedRules.Identity.html#11237" class="Function">⊢subst</a> <a id="4097" class="Symbol">(</a><a id="4098" href="Definition.Typed.html#1665" class="InductiveConstructor">univ</a> <a id="4103" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4105" href="Definition.Typed.Properties.html#18069" class="Function">var₀</a> <a id="4110" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4112" href="Definition.Typed.html#1348" class="InductiveConstructor">Uⱼ</a> <a id="4115" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4117" href="Definition.Typed.Properties.Well-formed.html#754" class="Function">wfTerm</a> <a id="4124" href="Graded.Erasure.Extraction.Non-terminating.html#4075" class="Bound">⊢t</a><a id="4126" class="Symbol">)</a> <a id="4128" class="Symbol">(</a><a id="4129" href="Definition.Typed.html#3577" class="InductiveConstructor">emptyrecⱼ</a> <a id="4139" class="Symbol">(</a><a id="4140" href="Definition.Typed.html#1593" class="InductiveConstructor">Idⱼ</a> <a id="4144" href="Graded.Erasure.Extraction.Non-terminating.html#4078" class="Bound">⊢A</a> <a id="4147" href="Graded.Erasure.Extraction.Non-terminating.html#4081" class="Bound">⊢B</a><a id="4149" class="Symbol">)</a> <a id="4151" href="Graded.Erasure.Extraction.Non-terminating.html#4075" class="Bound">⊢t</a><a id="4153" class="Symbol">)</a>

<a id="4156" class="Keyword">opaque</a>
  <a id="4165" class="Keyword">unfolding</a> <a id="4175" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a>

  <a id="4183" class="Comment">-- A usage rule for cast.</a>

  <a id="▸cast"></a><a id="4212" href="Graded.Erasure.Extraction.Non-terminating.html#4212" class="Function">▸cast</a> <a id="4218" class="Symbol">:</a>
    <a id="4224" href="Graded.Usage.Restrictions.html#1576" class="Field">Emptyrec-allowed</a> <a id="4241" class="InductiveConstructor">𝟙ᵐ</a> <a id="4244" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="4246" class="Symbol">→</a>
    <a id="4252" href="Graded.Erasure.Extraction.Non-terminating.html#2686" class="Generalizable">γ₁</a> <a id="4255" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="4258" href="Graded.Mode.html#3339" class="Function">𝟘ᵐ?</a> <a id="4262" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="4264" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="4266" class="Symbol">→</a>
    <a id="4272" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">γ₂</a> <a id="4275" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="4278" class="InductiveConstructor">𝟙ᵐ</a> <a id="4281" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="4283" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4285" class="Symbol">→</a>
    <a id="4291" href="Graded.Erasure.Extraction.Non-terminating.html#2692" class="Generalizable">γ₃</a> <a id="4294" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="4297" class="InductiveConstructor">𝟙ᵐ</a> <a id="4300" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="4302" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4304" class="Symbol">→</a>
    <a id="4310" href="Graded.Erasure.Extraction.Non-terminating.html#2695" class="Generalizable">γ₄</a> <a id="4313" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="4316" class="InductiveConstructor">𝟙ᵐ</a> <a id="4319" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="4321" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a> <a id="4323" class="Symbol">→</a>
    <a id="4329" href="Graded.Modality.html#851" class="Function">ω</a> <a id="4331" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="4334" class="Symbol">(</a><a id="4335" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">γ₂</a> <a id="4338" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4341" href="Graded.Erasure.Extraction.Non-terminating.html#2692" class="Generalizable">γ₃</a> <a id="4344" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4347" href="Graded.Erasure.Extraction.Non-terminating.html#2695" class="Generalizable">γ₄</a><a id="4349" class="Symbol">)</a> <a id="4351" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="4354" class="InductiveConstructor">𝟙ᵐ</a> <a id="4357" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="4359" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="4364" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="4366" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4368" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4370" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a>
  <a id="4374" href="Graded.Erasure.Extraction.Non-terminating.html#4212" class="Function">▸cast</a> <a id="4380" class="Symbol">{</a><a id="4381" href="Graded.Erasure.Extraction.Non-terminating.html#4381" class="Bound">γ₁</a><a id="4383" class="Symbol">}</a> <a id="4385" class="Symbol">{</a><a id="4386" href="Graded.Erasure.Extraction.Non-terminating.html#4386" class="Bound">γ₂</a><a id="4388" class="Symbol">}</a> <a id="4390" class="Symbol">{</a><a id="4391" href="Graded.Erasure.Extraction.Non-terminating.html#4391" class="Bound">γ₃</a><a id="4393" class="Symbol">}</a> <a id="4395" class="Symbol">{</a><a id="4396" href="Graded.Erasure.Extraction.Non-terminating.html#4396" class="Bound">γ₄</a><a id="4398" class="Symbol">}</a> <a id="4400" href="Graded.Erasure.Extraction.Non-terminating.html#4400" class="Bound">ok</a> <a id="4403" href="Graded.Erasure.Extraction.Non-terminating.html#4403" class="Bound">▸t</a> <a id="4406" href="Graded.Erasure.Extraction.Non-terminating.html#4406" class="Bound">▸A</a> <a id="4409" href="Graded.Erasure.Extraction.Non-terminating.html#4409" class="Bound">▸B</a> <a id="4412" href="Graded.Erasure.Extraction.Non-terminating.html#4412" class="Bound">▸u</a> <a id="4415" class="Symbol">=</a>
    <a id="4421" href="Graded.Usage.html#14317" class="InductiveConstructor">sub</a> <a id="4425" class="Symbol">(</a><a id="4426" href="Graded.Derived.Identity.html#1182" class="Function">▸subst</a> <a id="4433" href="Graded.Usage.html#8245" class="InductiveConstructor">Uₘ</a>
           <a id="4447" class="Symbol">(</a><a id="4448" href="Graded.Usage.html#14317" class="InductiveConstructor">sub</a> <a id="4452" href="Graded.Usage.html#8477" class="InductiveConstructor">var</a> <a id="4456" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4458" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
              <a id="4478" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4481" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="4483" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="4485" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="4487" href="Graded.Modality.html#849" class="Function">𝟙</a>   <a id="4491" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">≈⟨</a> <a id="4494" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="4502" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="4504" href="Graded.Modality.html#2959" class="Function">·-identityʳ</a> <a id="4516" class="Symbol">_</a> <a id="4518" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">⟩</a>
              <a id="4534" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4537" href="Graded.Context.html#1107" class="Function Operator">,</a> <a id="4539" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a> <a id="4542" href="Graded.Context.html#1107" class="Function Operator">≔</a> <a id="4544" href="Graded.Modality.html#849" class="Function">𝟙</a>  <a id="4547" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="4548" class="Symbol">)</a>
           <a id="4561" href="Graded.Erasure.Extraction.Non-terminating.html#4406" class="Bound">▸A</a> <a id="4564" href="Graded.Erasure.Extraction.Non-terminating.html#4409" class="Bound">▸B</a>
           <a id="4578" class="Symbol">(</a><a id="4579" href="Graded.Usage.html#11580" class="InductiveConstructor">emptyrecₘ</a> <a id="4589" class="Symbol">(</a><a id="4590" href="Graded.Usage.Properties.html#2551" class="Function">▸-cong</a> <a id="4597" class="Symbol">(</a><a id="4598" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">PE.sym</a> <a id="4605" href="Graded.Mode.html#17885" class="Function">⌞𝟘⌟≡𝟘ᵐ?</a><a id="4612" class="Symbol">)</a> <a id="4614" href="Graded.Erasure.Extraction.Non-terminating.html#4403" class="Bound">▸t</a><a id="4616" class="Symbol">)</a>
              <a id="4632" class="Symbol">(</a><a id="4633" href="Graded.Usage.Properties.html#48832" class="Function">Idₘ-generalised</a> <a id="4649" href="Graded.Usage.html#8245" class="InductiveConstructor">Uₘ</a> <a id="4652" class="Symbol">(</a><a id="4653" href="Graded.Usage.Properties.html#3633" class="Function">▸-𝟘ᵐ?</a> <a id="4659" href="Graded.Erasure.Extraction.Non-terminating.html#4406" class="Bound">▸A</a> <a id="4662" class="Symbol">.</a><a id="4663" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4668" class="Symbol">)</a> <a id="4670" class="Symbol">(</a><a id="4671" href="Graded.Usage.Properties.html#3633" class="Function">▸-𝟘ᵐ?</a> <a id="4677" href="Graded.Erasure.Extraction.Non-terminating.html#4409" class="Bound">▸B</a> <a id="4680" class="Symbol">.</a><a id="4681" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4686" class="Symbol">)</a>
                 <a id="4705" class="Symbol">(λ</a> <a id="4708" href="Graded.Erasure.Extraction.Non-terminating.html#4708" class="Bound">_</a> <a id="4710" class="Symbol">→</a> <a id="4712" href="Graded.Context.Properties.Meet.html#2443" class="Function">∧ᶜ-decreasingˡ</a> <a id="4727" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4730" class="Symbol">_)</a>
                 <a id="4750" class="Symbol">(λ</a> <a id="4753" href="Graded.Erasure.Extraction.Non-terminating.html#4753" class="Bound">_</a> <a id="4755" class="Symbol">→</a> <a id="4757" href="Graded.Context.Properties.Meet.html#2657" class="Function">∧ᶜ-decreasingʳ</a> <a id="4772" class="Symbol">_</a> <a id="4774" class="Symbol">_))</a>
              <a id="4792" href="Graded.Erasure.Extraction.Non-terminating.html#4400" class="Bound">ok</a><a id="4794" class="Symbol">)</a>
           <a id="4807" href="Graded.Erasure.Extraction.Non-terminating.html#4412" class="Bound">▸u</a><a id="4809" class="Symbol">)</a>
    <a id="4815" class="Symbol">(</a><a id="4816" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
       <a id="4829" href="Graded.Modality.html#851" class="Function">ω</a> <a id="4831" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="4834" class="Symbol">(</a><a id="4835" href="Graded.Erasure.Extraction.Non-terminating.html#4386" class="Bound">γ₂</a> <a id="4838" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4841" href="Graded.Erasure.Extraction.Non-terminating.html#4391" class="Bound">γ₃</a> <a id="4844" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4847" href="Graded.Erasure.Extraction.Non-terminating.html#4396" class="Bound">γ₄</a><a id="4849" class="Symbol">)</a>                   <a id="4869" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="4873" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="4882" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="4935" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="4944" class="Symbol">(</a><a id="4945" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="4958" class="Symbol">_)</a> <a id="4961" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5014" href="Graded.Context.Properties.Addition.html#2641" class="Function">+ᶜ-congˡ</a> <a id="5023" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5076" href="Graded.Context.Properties.Addition.html#2641" class="Function">+ᶜ-congˡ</a> <a id="5085" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5138" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="5147" class="Symbol">(</a><a id="5148" href="Graded.Context.Properties.Addition.html#2746" class="Function">+ᶜ-congʳ</a> <a id="5157" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5159" href="Graded.Context.Properties.Multiplication.html#898" class="Function">·ᶜ-zeroˡ</a> <a id="5168" class="Symbol">_)</a> <a id="5171" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5224" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="5237" class="Symbol">_</a> <a id="5239" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
       <a id="5248" href="Graded.Modality.html#851" class="Function">ω</a> <a id="5250" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="5253" class="Symbol">(</a><a id="5254" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="5257" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5260" href="Graded.Erasure.Extraction.Non-terminating.html#4386" class="Bound">γ₂</a> <a id="5263" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5266" href="Graded.Erasure.Extraction.Non-terminating.html#4391" class="Bound">γ₃</a> <a id="5269" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5272" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="5274" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="5277" href="Graded.Erasure.Extraction.Non-terminating.html#4381" class="Bound">γ₁</a> <a id="5280" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5283" href="Graded.Erasure.Extraction.Non-terminating.html#4396" class="Bound">γ₄</a><a id="5285" class="Symbol">)</a>  <a id="5288" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="5289" class="Symbol">)</a>
    <a id="5295" class="Keyword">where</a>
    <a id="5305" class="Keyword">open</a> <a id="5310" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="5324" class="Comment">------------------------------------------------------------------------</a>
<a id="5397" class="Comment">-- The term former λx∙xx</a>

<a id="5423" class="Keyword">opaque</a>

  <a id="5433" class="Comment">-- A term that is roughly &quot;λ x. x x&quot;.</a>

  <a id="λx∙xx"></a><a id="5474" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="5480" class="Symbol">:</a> <a id="5482" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="5484" class="Symbol">→</a> <a id="5486" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="5491" class="Symbol">(</a><a id="5492" href="Tools.Nat.html#1726" class="InductiveConstructor">1+</a> <a id="5495" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="5496" class="Symbol">)</a>
  <a id="5500" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="5506" href="Graded.Erasure.Extraction.Non-terminating.html#5506" class="Bound">p</a> <a id="5508" class="Symbol">=</a>
    <a id="5514" href="Definition.Untyped.html#3516" class="InductiveConstructor">lam</a> <a id="5518" class="Symbol">(</a><a id="5519" href="Graded.Modality.html#851" class="Function">ω</a> <a id="5521" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="5523" href="Graded.Modality.html#851" class="Function">ω</a><a id="5524" class="Symbol">)</a> <a id="5526" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="5532" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="5537" class="Symbol">(</a><a id="5538" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="5542" href="Tools.Fin.html#439" class="Function">x1</a><a id="5544" class="Symbol">)</a> <a id="5546" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="5548" class="Symbol">(</a><a id="5549" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">Π</a> <a id="5551" href="Graded.Modality.html#851" class="Function">ω</a> <a id="5553" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">,</a> <a id="5555" href="Graded.Erasure.Extraction.Non-terminating.html#5506" class="Bound">p</a> <a id="5557" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▷</a> <a id="5559" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="5561" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▹</a> <a id="5563" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a><a id="5564" class="Symbol">)</a> <a id="5566" class="Symbol">(</a><a id="5567" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="5571" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="5573" class="Symbol">)</a> <a id="5575" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">∘⟨</a> <a id="5578" href="Graded.Modality.html#851" class="Function">ω</a> <a id="5580" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">⟩</a> <a id="5582" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="5586" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a>

<a id="5590" class="Keyword">opaque</a>
  <a id="5599" class="Keyword">unfolding</a> <a id="5609" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a>

  <a id="5618" class="Comment">-- An extraction lemma for λx∙xx.</a>

  <a id="erase-λx∙xx"></a><a id="5655" href="Graded.Erasure.Extraction.Non-terminating.html#5655" class="Function">erase-λx∙xx</a> <a id="5667" class="Symbol">:</a>
    <a id="5673" class="Symbol">⦃</a> <a id="5675" href="Graded.Erasure.Extraction.Non-terminating.html#5675" class="Bound">𝟘-well-behaved</a> <a id="5690" class="Symbol">:</a> <a id="5692" href="Graded.Modality.html#3438" class="Record">Has-well-behaved-zero</a> <a id="5714" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="5716" href="Graded.Modality.html#7300" class="Function">semiring-with-meet</a> <a id="5735" class="Symbol">⦄</a> <a id="5737" class="Symbol">→</a>
    <a id="5743" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="5750" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a> <a id="5752" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="5754" class="Symbol">(</a><a id="5755" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="5761" class="Symbol">{</a><a id="5762" class="Argument">n</a> <a id="5764" class="Symbol">=</a> <a id="5766" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="5767" class="Symbol">}</a> <a id="5769" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="5770" class="Symbol">)</a> <a id="5772" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="5778" class="InductiveConstructor">T.lam</a> <a id="5784" class="Symbol">(</a><a id="5785" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="5791" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a> <a id="5794" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="5799" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="5801" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="5803" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="5809" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="5811" class="Symbol">)</a>
  <a id="5815" href="Graded.Erasure.Extraction.Non-terminating.html#5655" class="Function">erase-λx∙xx</a> <a id="5827" class="Symbol">{</a><a id="5828" href="Graded.Erasure.Extraction.Non-terminating.html#5828" class="Bound">b</a><a id="5829" class="Symbol">}</a> <a id="5831" class="Symbol">{</a><a id="5832" href="Graded.Erasure.Extraction.Non-terminating.html#5832" class="Bound">s</a><a id="5833" class="Symbol">}</a> <a id="5835" class="Symbol">{</a><a id="5836" href="Graded.Erasure.Extraction.Non-terminating.html#5836" class="Bound">p</a><a id="5837" class="Symbol">}</a> <a id="5839" class="Symbol">=</a>
    <a id="5845" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="5852" href="Graded.Erasure.Extraction.Non-terminating.html#5828" class="Bound">b</a> <a id="5854" href="Graded.Erasure.Extraction.Non-terminating.html#5832" class="Bound">s</a> <a id="5856" class="Symbol">(</a><a id="5857" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="5863" href="Graded.Erasure.Extraction.Non-terminating.html#5836" class="Bound">p</a><a id="5864" class="Symbol">)</a>                                          <a id="5907" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="5910" href="Graded.Erasure.Extraction.Properties.html#3254" class="Function">lam-≢𝟘</a> <a id="5917" href="Graded.Erasure.Extraction.Non-terminating.html#5828" class="Bound">b</a> <a id="5919" class="Symbol">(</a><a id="5920" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="5924" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5927" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5933" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5936" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1135" class="Function">+-positive</a><a id="5946" class="Symbol">)</a> <a id="5948" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>

    <a id="5955" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a>
      <a id="5967" class="Symbol">(</a><a id="5968" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="5975" href="Graded.Erasure.Extraction.Non-terminating.html#5828" class="Bound">b</a> <a id="5977" href="Graded.Erasure.Extraction.Non-terminating.html#5832" class="Bound">s</a> <a id="5979" href="Function.Base.html#1974" class="Function Operator">$</a>
       <a id="5988" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="5993" class="Symbol">(</a><a id="5994" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="5998" href="Tools.Fin.html#439" class="Function">x1</a><a id="6000" class="Symbol">)</a> <a id="6002" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="6004" class="Symbol">(</a><a id="6005" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">Π</a> <a id="6007" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6009" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">,</a> <a id="6011" href="Graded.Erasure.Extraction.Non-terminating.html#5836" class="Bound">p</a> <a id="6013" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▷</a> <a id="6015" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="6017" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▹</a> <a id="6019" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a><a id="6020" class="Symbol">)</a> <a id="6022" class="Symbol">(</a><a id="6023" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="6027" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="6029" class="Symbol">)</a> <a id="6031" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">∘⟨</a> <a id="6034" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6036" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">⟩</a> <a id="6038" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="6042" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="6044" class="Symbol">)</a>  <a id="6047" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="6050" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a> <a id="6058" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6064" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6066" href="Graded.Erasure.Extraction.Properties.html#3075" class="Function">∘-≢𝟘</a> <a id="6071" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="6075" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>

    <a id="6082" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a>
      <a id="6094" class="Symbol">(</a><a id="6095" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="6102" href="Graded.Erasure.Extraction.Non-terminating.html#5828" class="Bound">b</a> <a id="6104" href="Graded.Erasure.Extraction.Non-terminating.html#5832" class="Bound">s</a>
         <a id="6115" class="Symbol">(</a><a id="6116" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="6121" class="Symbol">(</a><a id="6122" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="6126" href="Tools.Fin.html#439" class="Function">x1</a><a id="6128" class="Symbol">)</a> <a id="6130" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="6132" class="Symbol">(</a><a id="6133" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">Π</a> <a id="6135" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6137" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">,</a> <a id="6139" href="Graded.Erasure.Extraction.Non-terminating.html#5836" class="Bound">p</a> <a id="6141" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▷</a> <a id="6143" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="6145" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▹</a> <a id="6147" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a><a id="6148" class="Symbol">)</a> <a id="6150" class="Symbol">(</a><a id="6151" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="6155" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="6157" class="Symbol">))</a>
         <a id="6169" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6174" href="Graded.Erasure.Extraction.Non-terminating.html#5832" class="Bound">s</a> <a id="6176" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6178" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6184" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="6186" class="Symbol">)</a>                                       <a id="6226" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="6229" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a> <a id="6237" class="Symbol">(λ</a> <a id="6240" href="Graded.Erasure.Extraction.Non-terminating.html#6240" class="Bound">t</a> <a id="6242" class="Symbol">→</a> <a id="6244" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6250" class="Symbol">(</a><a id="6251" href="Graded.Erasure.Extraction.Non-terminating.html#6240" class="Bound">t</a> <a id="6253" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6258" class="Symbol">_</a> <a id="6260" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6262" class="Symbol">_))</a> <a id="6266" href="Graded.Erasure.Extraction.Non-terminating.html#3831" class="Function">erase-cast</a> <a id="6277" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>

    <a id="6284" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6290" class="Symbol">(</a><a id="6291" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6297" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a> <a id="6300" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6305" href="Graded.Erasure.Extraction.Non-terminating.html#5832" class="Bound">s</a> <a id="6307" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6309" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6315" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="6317" class="Symbol">)</a>                            <a id="6346" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a>
    <a id="6352" class="Keyword">where</a>
    <a id="6362" class="Keyword">open</a> <a id="6367" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="6406" class="Keyword">opaque</a>
  <a id="6415" class="Keyword">unfolding</a> <a id="6425" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a>

  <a id="6434" class="Comment">-- A typing rule for λx∙xx.</a>

  <a id="⊢λx∙xx"></a><a id="6465" href="Graded.Erasure.Extraction.Non-terminating.html#6465" class="Function">⊢λx∙xx</a> <a id="6472" class="Symbol">:</a>
    <a id="6478" href="Definition.Typed.Restrictions.html#1500" class="Function">Π-allowed</a> <a id="6488" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6490" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6492" class="Symbol">→</a>
    <a id="6498" href="Definition.Typed.Restrictions.html#1500" class="Function">Π-allowed</a> <a id="6508" class="Symbol">(</a><a id="6509" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6511" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="6513" href="Graded.Modality.html#851" class="Function">ω</a><a id="6514" class="Symbol">)</a> <a id="6516" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6518" class="Symbol">→</a>
    <a id="6524" href="Definition.Typed.html#1178" class="Datatype Operator">⊢</a> <a id="6526" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="6528" class="Symbol">→</a>
    <a id="6534" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="6536" class="InductiveConstructor Operator">∙</a> <a id="6538" href="Definition.Untyped.html#2905" class="InductiveConstructor">Empty</a> <a id="6544" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="6546" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="6552" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6554" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="6556" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">Π</a> <a id="6558" class="Symbol">(</a><a id="6559" href="Graded.Modality.html#851" class="Function">ω</a> <a id="6561" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="6563" href="Graded.Modality.html#851" class="Function">ω</a><a id="6564" class="Symbol">)</a> <a id="6566" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">,</a> <a id="6568" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6570" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▷</a> <a id="6572" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="6574" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▹</a> <a id="6576" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a>
  <a id="6580" href="Graded.Erasure.Extraction.Non-terminating.html#6465" class="Function">⊢λx∙xx</a> <a id="6587" href="Graded.Erasure.Extraction.Non-terminating.html#6587" class="Bound">ω-ok</a> <a id="6592" href="Graded.Erasure.Extraction.Non-terminating.html#6592" class="Bound">ω+ω-ok</a> <a id="6599" href="Graded.Erasure.Extraction.Non-terminating.html#6599" class="Bound">⊢Γ</a> <a id="6602" class="Symbol">=</a>
    <a id="6608" href="Definition.Typed.Consequences.DerivedRules.Pi.html#1407" class="Function">lamⱼ′</a> <a id="6614" href="Graded.Erasure.Extraction.Non-terminating.html#6592" class="Bound">ω+ω-ok</a> <a id="6621" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="6627" href="Graded.Erasure.Extraction.Non-terminating.html#3966" class="Function">⊢cast</a> <a id="6633" class="Symbol">(</a><a id="6634" href="Definition.Typed.Properties.html#18188" class="Function">var₁</a> <a id="6639" href="Graded.Erasure.Extraction.Non-terminating.html#2922" class="Function">Empty⊢ℕ</a><a id="6646" class="Symbol">)</a> <a id="6648" href="Graded.Erasure.Extraction.Non-terminating.html#2976" class="Function">Empty∙ℕ⊢ℕ∷U</a>
      <a id="6666" class="Symbol">(</a><a id="6667" href="Definition.Typed.html#1802" class="InductiveConstructor">ΠΣⱼ</a> <a id="6671" href="Graded.Erasure.Extraction.Non-terminating.html#2976" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="6683" href="Graded.Erasure.Extraction.Non-terminating.html#3059" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="6697" href="Graded.Erasure.Extraction.Non-terminating.html#6587" class="Bound">ω-ok</a><a id="6701" class="Symbol">)</a> <a id="6703" class="Symbol">(</a><a id="6704" href="Definition.Typed.Properties.html#18069" class="Function">var₀</a> <a id="6709" href="Graded.Erasure.Extraction.Non-terminating.html#2922" class="Function">Empty⊢ℕ</a><a id="6716" class="Symbol">)</a> <a id="6718" href="Definition.Typed.html#2360" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="6725" href="Definition.Typed.Properties.html#18069" class="Function">var₀</a> <a id="6730" href="Graded.Erasure.Extraction.Non-terminating.html#2922" class="Function">Empty⊢ℕ</a>
    <a id="6742" class="Keyword">where</a>
    <a id="6752" class="Keyword">open</a> <a id="6757" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="6764" href="Graded.Erasure.Extraction.Non-terminating.html#6599" class="Bound">⊢Γ</a>

<a id="6768" class="Keyword">opaque</a>
  <a id="6777" class="Keyword">unfolding</a> <a id="6787" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a>

  <a id="6796" class="Comment">-- A usage rule for λx∙xx.</a>

  <a id="▸λx∙xx"></a><a id="6826" href="Graded.Erasure.Extraction.Non-terminating.html#6826" class="Function">▸λx∙xx</a> <a id="6833" class="Symbol">:</a>
    <a id="6839" href="Graded.Usage.Restrictions.html#1576" class="Field">Emptyrec-allowed</a> <a id="6856" class="InductiveConstructor">𝟙ᵐ</a> <a id="6859" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="6861" class="Symbol">→</a>
    <a id="6867" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6869" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="6871" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="6873" class="Symbol">→</a>
    <a id="6879" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="6882" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="6885" class="InductiveConstructor">𝟙ᵐ</a> <a id="6888" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="6890" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="6896" class="Symbol">{</a><a id="6897" class="Argument">n</a> <a id="6899" class="Symbol">=</a> <a id="6901" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="6902" class="Symbol">}</a> <a id="6904" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a>
  <a id="6908" href="Graded.Erasure.Extraction.Non-terminating.html#6826" class="Function">▸λx∙xx</a> <a id="6915" class="Symbol">{</a><a id="6916" href="Graded.Erasure.Extraction.Non-terminating.html#6916" class="Bound">p</a><a id="6917" class="Symbol">}</a> <a id="6919" href="Graded.Erasure.Extraction.Non-terminating.html#6919" class="Bound">ok</a> <a id="6922" href="Graded.Erasure.Extraction.Non-terminating.html#6922" class="Bound">p≤𝟘</a> <a id="6926" class="Symbol">=</a>
    <a id="6932" href="Graded.Usage.html#8522" class="InductiveConstructor">lamₘ</a> <a id="6937" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6939" href="Graded.Usage.html#14317" class="InductiveConstructor">sub</a> <a id="6943" class="Symbol">(</a><a id="6944" href="Graded.Erasure.Extraction.Non-terminating.html#4212" class="Function">▸cast</a> <a id="6950" href="Graded.Erasure.Extraction.Non-terminating.html#6919" class="Bound">ok</a> <a id="6953" href="Graded.Usage.html#8477" class="InductiveConstructor">var</a> <a id="6957" href="Graded.Usage.html#8271" class="InductiveConstructor">ℕₘ</a> <a id="6960" class="Symbol">(</a><a id="6961" href="Graded.Erasure.Extraction.Non-terminating.html#3198" class="Function">▸Πℕℕ</a> <a id="6966" href="Graded.Erasure.Extraction.Non-terminating.html#6922" class="Bound">p≤𝟘</a><a id="6969" class="Symbol">)</a> <a id="6971" href="Graded.Usage.html#8477" class="InductiveConstructor">var</a> <a id="6975" href="Graded.Usage.html#8591" class="InductiveConstructor Operator">∘ₘ</a> <a id="6978" href="Graded.Usage.html#8477" class="InductiveConstructor">var</a><a id="6981" class="Symbol">)</a> <a id="6983" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6985" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
      <a id="6997" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7000" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7002" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="7004" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="7006" class="Symbol">(</a><a id="7007" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7009" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="7011" href="Graded.Modality.html#851" class="Function">ω</a><a id="7012" class="Symbol">)</a>                                      <a id="7051" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">≈⟨</a> <a id="7054" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="7062" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="7064" href="Graded.Modality.html#2917" class="Function">·-identityˡ</a> <a id="7076" class="Symbol">_</a> <a id="7078" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">⟩</a>
      <a id="7086" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7089" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7091" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7093" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="7095" href="Graded.Modality.html#851" class="Function">ω</a>                                            <a id="7140" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="7144" class="Symbol">(</a><a id="7145" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="7154" class="Symbol">(</a><a id="7155" href="Graded.Context.Properties.Addition.html#2458" class="Function">+ᶜ-cong</a> <a id="7163" class="Symbol">(</a><a id="7164" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="7173" class="Symbol">_)</a> <a id="7176" class="Symbol">(</a><a id="7177" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="7186" class="Symbol">_))</a> <a id="7190" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                 <a id="7257" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="7270" class="Symbol">_)</a> <a id="7273" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a>
                                                                <a id="7339" href="Algebra.Structures.html#11625" class="Function">+-cong</a> <a id="7346" class="Symbol">(</a><a id="7347" href="Graded.Modality.html#2959" class="Function">·-identityʳ</a> <a id="7359" class="Symbol">_)</a> <a id="7362" href="Graded.Mode.html#19667" class="Function">·⌜⌞⌟⌝</a> <a id="7368" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
      <a id="7376" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7378" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7381" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7384" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7387" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7389" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7392" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7395" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7397" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7399" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="7401" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="7403" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="7405" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7407" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="7409" href="Graded.Mode.html#4878" class="Function Operator">⌜</a> <a id="7411" href="Graded.Mode.html#5213" class="Function Operator">⌞</a> <a id="7413" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7415" href="Graded.Mode.html#5213" class="Function Operator">⌟</a> <a id="7417" href="Graded.Mode.html#4878" class="Function Operator">⌝</a>            <a id="7430" href="Relation.Binary.Reasoning.Syntax.html#11017" class="Function">≡⟨⟩</a>
      <a id="7440" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7442" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7445" class="Symbol">(</a><a id="7446" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7449" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7451" href="Graded.Modality.html#849" class="Function">𝟙</a><a id="7452" class="Symbol">)</a> <a id="7454" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7457" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7459" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7462" class="Symbol">(</a><a id="7463" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7466" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7468" href="Graded.Mode.html#4878" class="Function Operator">⌜</a> <a id="7470" href="Graded.Mode.html#5213" class="Function Operator">⌞</a> <a id="7472" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7474" href="Graded.Mode.html#5213" class="Function Operator">⌟</a> <a id="7476" href="Graded.Mode.html#4878" class="Function Operator">⌝</a><a id="7477" class="Symbol">)</a>                <a id="7494" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="7498" href="Graded.Context.Properties.Addition.html#2746" class="Function">+ᶜ-congʳ</a> <a id="7507" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7573" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="7582" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7648" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="7657" class="Symbol">(</a><a id="7658" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="7671" class="Symbol">_)</a> <a id="7674" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7740" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="7753" class="Symbol">_</a> <a id="7755" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
      <a id="7763" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7765" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7768" class="Symbol">(</a><a id="7769" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7772" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7775" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7778" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7781" class="Symbol">(</a><a id="7782" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7785" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7787" href="Graded.Modality.html#849" class="Function">𝟙</a><a id="7788" class="Symbol">))</a> <a id="7791" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7794" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7796" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7799" class="Symbol">(</a><a id="7800" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7803" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7805" href="Graded.Mode.html#4878" class="Function Operator">⌜</a> <a id="7807" href="Graded.Mode.html#5213" class="Function Operator">⌞</a> <a id="7809" href="Graded.Modality.html#851" class="Function">ω</a> <a id="7811" href="Graded.Mode.html#5213" class="Function Operator">⌟</a> <a id="7813" href="Graded.Mode.html#4878" class="Function Operator">⌝</a><a id="7814" class="Symbol">)</a>  <a id="7817" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a>
    <a id="7823" class="Keyword">where</a>
    <a id="7833" class="Keyword">open</a> <a id="7838" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="7852" class="Comment">------------------------------------------------------------------------</a>
<a id="7925" class="Comment">-- The term former extracts-to-loop</a>

<a id="7962" class="Keyword">opaque</a>

  <a id="7972" class="Comment">-- A term for which the extraction is loop s (for some s) if</a>
  <a id="8035" class="Comment">-- erasable arguments are removed entirely.</a>

  <a id="extracts-to-loop"></a><a id="8082" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a> <a id="8099" class="Symbol">:</a> <a id="8101" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="8103" class="Symbol">→</a> <a id="8105" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="8110" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>
  <a id="8114" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a> <a id="8131" href="Graded.Erasure.Extraction.Non-terminating.html#8131" class="Bound">p</a> <a id="8133" class="Symbol">=</a>
    <a id="8139" href="Definition.Untyped.html#3516" class="InductiveConstructor">lam</a> <a id="8143" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="8145" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="8151" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="8157" href="Graded.Erasure.Extraction.Non-terminating.html#8131" class="Bound">p</a> <a id="8159" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">∘⟨</a> <a id="8162" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8164" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="8166" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8168" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">⟩</a> <a id="8170" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="8175" class="Symbol">(</a><a id="8176" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="8180" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="8182" class="Symbol">)</a> <a id="8184" class="Symbol">(</a><a id="8185" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">Π</a> <a id="8187" class="Symbol">(</a><a id="8188" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8190" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="8192" href="Graded.Modality.html#851" class="Function">ω</a><a id="8193" class="Symbol">)</a> <a id="8195" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">,</a> <a id="8197" href="Graded.Erasure.Extraction.Non-terminating.html#8131" class="Bound">p</a> <a id="8199" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▷</a> <a id="8201" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="8203" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▹</a> <a id="8205" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a><a id="8206" class="Symbol">)</a> <a id="8208" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="8210" class="Symbol">(</a><a id="8211" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="8217" href="Graded.Erasure.Extraction.Non-terminating.html#8131" class="Bound">p</a><a id="8218" class="Symbol">)</a>

<a id="8221" class="Keyword">opaque</a>
  <a id="8230" class="Keyword">unfolding</a> <a id="8240" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a> <a id="8257" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a>

  <a id="8265" class="Comment">-- An extraction lemma for extracts-to-loop.</a>

  <a id="erase-extracts-to-loop"></a><a id="8313" href="Graded.Erasure.Extraction.Non-terminating.html#8313" class="Function">erase-extracts-to-loop</a> <a id="8336" class="Symbol">:</a>
    <a id="8342" class="Symbol">⦃</a> <a id="8344" href="Graded.Erasure.Extraction.Non-terminating.html#8344" class="Bound">𝟘-well-behaved</a> <a id="8359" class="Symbol">:</a> <a id="8361" href="Graded.Modality.html#3438" class="Record">Has-well-behaved-zero</a> <a id="8383" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="8385" href="Graded.Modality.html#7300" class="Function">semiring-with-meet</a> <a id="8404" class="Symbol">⦄</a> <a id="8406" class="Symbol">→</a>
    <a id="8412" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="8419" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8424" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="8426" class="Symbol">(</a><a id="8427" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a> <a id="8444" class="Symbol">{</a><a id="8445" class="Argument">n</a> <a id="8447" class="Symbol">=</a> <a id="8449" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="8450" class="Symbol">}</a> <a id="8452" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="8453" class="Symbol">)</a> <a id="8455" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8457" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="8462" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a>
  <a id="8466" href="Graded.Erasure.Extraction.Non-terminating.html#8313" class="Function">erase-extracts-to-loop</a> <a id="8489" class="Symbol">{</a><a id="8490" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a><a id="8491" class="Symbol">}</a> <a id="8493" class="Symbol">{</a><a id="8494" href="Graded.Erasure.Extraction.Non-terminating.html#8494" class="Bound">p</a><a id="8495" class="Symbol">}</a> <a id="8497" class="Symbol">=</a>
    <a id="8503" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="8510" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8515" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a> <a id="8517" class="Symbol">(</a><a id="8518" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a> <a id="8535" href="Graded.Erasure.Extraction.Non-terminating.html#8494" class="Bound">p</a><a id="8536" class="Symbol">)</a>                       <a id="8560" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="8563" href="Graded.Erasure.Extraction.Properties.html#3651" class="Function">lam-𝟘-remove</a> <a id="8576" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>

    <a id="8583" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="8590" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8595" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a>
      <a id="8603" class="Symbol">(</a><a id="8604" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="8610" href="Graded.Erasure.Extraction.Non-terminating.html#8494" class="Bound">p</a> <a id="8612" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">∘⟨</a> <a id="8615" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8617" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="8619" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8621" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">⟩</a>
       <a id="8630" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="8635" class="Symbol">(</a><a id="8636" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="8640" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="8642" class="Symbol">)</a> <a id="8644" class="Symbol">(</a><a id="8645" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">Π</a> <a id="8647" class="Symbol">(</a><a id="8648" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8650" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="8652" href="Graded.Modality.html#851" class="Function">ω</a><a id="8653" class="Symbol">)</a> <a id="8655" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">,</a> <a id="8657" href="Graded.Erasure.Extraction.Non-terminating.html#8494" class="Bound">p</a> <a id="8659" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▷</a> <a id="8661" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="8663" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▹</a> <a id="8665" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a><a id="8666" class="Symbol">)</a> <a id="8668" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="8670" class="Symbol">(</a><a id="8671" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="8677" href="Graded.Erasure.Extraction.Non-terminating.html#8494" class="Bound">p</a><a id="8678" class="Symbol">))</a>
      <a id="8687" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="8691" href="Graded.Erasure.Extraction.html#852" class="Function">loop?</a> <a id="8697" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a> <a id="8699" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="8742" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="8745" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a> <a id="8753" href="Graded.Erasure.Target.html#4865" class="Function Operator">T._[</a> <a id="8758" class="Symbol">_</a> <a id="8760" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a> <a id="8762" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="8828" href="Graded.Erasure.Extraction.Properties.html#3075" class="Function">∘-≢𝟘</a> <a id="8833" class="Symbol">(</a><a id="8834" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="8838" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="8841" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="8847" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="8850" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1135" class="Function">+-positive</a><a id="8860" class="Symbol">)</a> <a id="8862" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>
    <a id="8868" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="8875" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8880" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a> <a id="8882" class="Symbol">(</a><a id="8883" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="8889" href="Graded.Erasure.Extraction.Non-terminating.html#8494" class="Bound">p</a><a id="8890" class="Symbol">)</a> <a id="8892" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="8897" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a> <a id="8899" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
      <a id="8907" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="8914" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8919" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a>
        <a id="8929" class="Symbol">(</a><a id="8930" href="Graded.Erasure.Extraction.Non-terminating.html#3639" class="Function">cast</a> <a id="8935" class="Symbol">(</a><a id="8936" href="Definition.Untyped.html#2423" class="InductiveConstructor">var</a> <a id="8940" href="Data.Fin.Base.html#1176" class="InductiveConstructor">x0</a><a id="8942" class="Symbol">)</a> <a id="8944" class="Symbol">(</a><a id="8945" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">Π</a> <a id="8947" class="Symbol">(</a><a id="8948" href="Graded.Modality.html#851" class="Function">ω</a> <a id="8950" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="8952" href="Graded.Modality.html#851" class="Function">ω</a><a id="8953" class="Symbol">)</a> <a id="8955" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">,</a> <a id="8957" href="Graded.Erasure.Extraction.Non-terminating.html#8494" class="Bound">p</a> <a id="8959" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▷</a> <a id="8961" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="8963" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▹</a> <a id="8965" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a><a id="8966" class="Symbol">)</a> <a id="8968" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="8970" class="Symbol">(</a><a id="8971" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="8977" href="Graded.Erasure.Extraction.Non-terminating.html#8494" class="Bound">p</a><a id="8978" class="Symbol">))</a>
      <a id="8987" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="8991" href="Graded.Erasure.Extraction.html#852" class="Function">loop?</a> <a id="8997" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a> <a id="8999" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="9042" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="9045" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a>
                                                                  <a id="9119" class="Symbol">(λ</a> <a id="9122" href="Graded.Erasure.Extraction.Non-terminating.html#9122" class="Bound">t</a> <a id="9124" class="Symbol">→</a> <a id="9126" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="9133" class="Symbol">_</a> <a id="9135" class="Symbol">_</a> <a id="9137" class="Symbol">(</a><a id="9138" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="9144" class="Symbol">_)</a> <a id="9147" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9152" class="Symbol">_</a> <a id="9154" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="9156" href="Graded.Erasure.Extraction.Non-terminating.html#9122" class="Bound">t</a> <a id="9158" href="Graded.Erasure.Target.html#4865" class="Function Operator">T.[</a> <a id="9162" class="Symbol">_</a> <a id="9164" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a><a id="9165" class="Symbol">)</a>
                                                                  <a id="9233" href="Graded.Erasure.Extraction.Non-terminating.html#3831" class="Function">erase-cast</a> <a id="9244" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>
    <a id="9250" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="9257" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9262" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a> <a id="9264" class="Symbol">(</a><a id="9265" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="9271" href="Graded.Erasure.Extraction.Non-terminating.html#8494" class="Bound">p</a><a id="9272" class="Symbol">)</a> <a id="9274" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9279" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a> <a id="9281" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
      <a id="9289" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="9296" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9301" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a> <a id="9303" class="Symbol">(</a><a id="9304" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="9310" href="Graded.Erasure.Extraction.Non-terminating.html#8494" class="Bound">p</a><a id="9311" class="Symbol">)</a>
      <a id="9319" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="9323" href="Graded.Erasure.Extraction.html#852" class="Function">loop?</a> <a id="9329" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a> <a id="9331" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="9374" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="9377" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a> <a id="9385" class="Symbol">(λ</a> <a id="9388" href="Graded.Erasure.Extraction.Non-terminating.html#9388" class="Bound">t</a> <a id="9390" class="Symbol">→</a> <a id="9392" href="Graded.Erasure.Extraction.Non-terminating.html#9388" class="Bound">t</a> <a id="9394" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9399" class="Symbol">_</a> <a id="9401" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="9403" href="Graded.Erasure.Extraction.Non-terminating.html#9388" class="Bound">t</a> <a id="9405" href="Graded.Erasure.Target.html#4865" class="Function Operator">T.[</a> <a id="9409" class="Symbol">_</a> <a id="9411" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a><a id="9412" class="Symbol">)</a>
                                                                <a id="9478" href="Graded.Erasure.Extraction.Non-terminating.html#5655" class="Function">erase-λx∙xx</a> <a id="9490" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>
    <a id="9496" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="9501" href="Graded.Erasure.Extraction.Non-terminating.html#8490" class="Bound">s</a>                                                   <a id="9553" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a>
    <a id="9559" class="Keyword">where</a>
    <a id="9569" class="Keyword">open</a> <a id="9574" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="9613" class="Keyword">opaque</a>
  <a id="9622" class="Keyword">unfolding</a> <a id="9632" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a>

  <a id="9652" class="Comment">-- A typing rule for extracts-to-loop.</a>

  <a id="⊢extracts-to-loop"></a><a id="9694" href="Graded.Erasure.Extraction.Non-terminating.html#9694" class="Function">⊢extracts-to-loop</a> <a id="9712" class="Symbol">:</a>
    <a id="9718" href="Definition.Typed.Restrictions.html#1500" class="Function">Π-allowed</a> <a id="9728" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="9730" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="9732" class="Symbol">→</a>
    <a id="9738" href="Definition.Typed.Restrictions.html#1500" class="Function">Π-allowed</a> <a id="9748" href="Graded.Modality.html#851" class="Function">ω</a> <a id="9750" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="9752" class="Symbol">→</a>
    <a id="9758" href="Definition.Typed.Restrictions.html#1500" class="Function">Π-allowed</a> <a id="9768" class="Symbol">(</a><a id="9769" href="Graded.Modality.html#851" class="Function">ω</a> <a id="9771" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="9773" href="Graded.Modality.html#851" class="Function">ω</a><a id="9774" class="Symbol">)</a> <a id="9776" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="9778" class="Symbol">→</a>
    <a id="9784" href="Definition.Typed.html#1178" class="Datatype Operator">⊢</a> <a id="9786" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="9788" class="Symbol">→</a>
    <a id="9794" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="9796" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="9798" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a> <a id="9815" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="9817" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="9819" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">Π</a> <a id="9821" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="9823" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">,</a> <a id="9825" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="9827" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▷</a> <a id="9829" href="Definition.Untyped.html#2905" class="InductiveConstructor">Empty</a> <a id="9835" href="Definition.Untyped.html#3155" class="InductiveConstructor Operator">▹</a> <a id="9837" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a>
  <a id="9841" href="Graded.Erasure.Extraction.Non-terminating.html#9694" class="Function">⊢extracts-to-loop</a> <a id="9859" href="Graded.Erasure.Extraction.Non-terminating.html#9859" class="Bound">𝟘-ok</a> <a id="9864" href="Graded.Erasure.Extraction.Non-terminating.html#9864" class="Bound">ω-ok</a> <a id="9869" href="Graded.Erasure.Extraction.Non-terminating.html#9869" class="Bound">ω+ω-ok</a> <a id="9876" href="Graded.Erasure.Extraction.Non-terminating.html#9876" class="Bound">⊢Γ</a> <a id="9879" class="Symbol">=</a>
    <a id="9885" href="Definition.Typed.Consequences.DerivedRules.Pi.html#1407" class="Function">lamⱼ′</a> <a id="9891" href="Graded.Erasure.Extraction.Non-terminating.html#9859" class="Bound">𝟘-ok</a> <a id="9896" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="9902" href="Graded.Erasure.Extraction.Non-terminating.html#6465" class="Function">⊢λx∙xx</a> <a id="9909" href="Graded.Erasure.Extraction.Non-terminating.html#9864" class="Bound">ω-ok</a> <a id="9914" href="Graded.Erasure.Extraction.Non-terminating.html#9869" class="Bound">ω+ω-ok</a> <a id="9921" href="Graded.Erasure.Extraction.Non-terminating.html#9876" class="Bound">⊢Γ</a> <a id="9924" href="Definition.Typed.html#2360" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="9931" href="Graded.Erasure.Extraction.Non-terminating.html#3966" class="Function">⊢cast</a> <a id="9937" class="Symbol">(</a><a id="9938" href="Definition.Typed.Properties.html#18069" class="Function">var₀</a> <a id="9943" class="Symbol">(</a><a id="9944" href="Definition.Typed.html#1398" class="InductiveConstructor">Emptyⱼ</a> <a id="9951" href="Graded.Erasure.Extraction.Non-terminating.html#9876" class="Bound">⊢Γ</a><a id="9953" class="Symbol">))</a> <a id="9956" class="Symbol">(</a><a id="9957" href="Definition.Typed.html#1802" class="InductiveConstructor">ΠΣⱼ</a> <a id="9961" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="9971" href="Graded.Erasure.Extraction.Non-terminating.html#2976" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="9983" href="Graded.Erasure.Extraction.Non-terminating.html#9869" class="Bound">ω+ω-ok</a><a id="9989" class="Symbol">)</a>
      <a id="9997" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="10007" class="Symbol">(</a><a id="10008" href="Graded.Erasure.Extraction.Non-terminating.html#6465" class="Function">⊢λx∙xx</a> <a id="10015" href="Graded.Erasure.Extraction.Non-terminating.html#9864" class="Bound">ω-ok</a> <a id="10020" href="Graded.Erasure.Extraction.Non-terminating.html#9869" class="Bound">ω+ω-ok</a> <a id="10027" href="Graded.Erasure.Extraction.Non-terminating.html#9876" class="Bound">⊢Γ</a><a id="10029" class="Symbol">)</a>
    <a id="10035" class="Keyword">where</a>
    <a id="10045" class="Keyword">open</a> <a id="10050" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="10057" href="Graded.Erasure.Extraction.Non-terminating.html#9876" class="Bound">⊢Γ</a>

<a id="10061" class="Keyword">opaque</a>
  <a id="10070" class="Keyword">unfolding</a> <a id="10080" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a>

  <a id="10100" class="Comment">-- A usage rule for extracts-to-loop.</a>

  <a id="▸extracts-to-loop"></a><a id="10141" href="Graded.Erasure.Extraction.Non-terminating.html#10141" class="Function">▸extracts-to-loop</a> <a id="10159" class="Symbol">:</a>
    <a id="10165" class="Symbol">⦃</a> <a id="10167" href="Graded.Erasure.Extraction.Non-terminating.html#10167" class="Bound">𝟘-well-behaved</a> <a id="10182" class="Symbol">:</a> <a id="10184" href="Graded.Modality.html#3438" class="Record">Has-well-behaved-zero</a> <a id="10206" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="10208" href="Graded.Modality.html#7300" class="Function">semiring-with-meet</a> <a id="10227" class="Symbol">⦄</a> <a id="10229" class="Symbol">→</a>
    <a id="10235" href="Graded.Usage.Restrictions.html#1576" class="Field">Emptyrec-allowed</a> <a id="10252" class="InductiveConstructor">𝟙ᵐ</a> <a id="10255" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="10257" class="Symbol">→</a>
    <a id="10263" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="10265" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="10267" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="10269" class="Symbol">→</a>
    <a id="10275" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10278" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="10281" class="InductiveConstructor">𝟙ᵐ</a> <a id="10284" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="10286" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a> <a id="10303" class="Symbol">{</a><a id="10304" class="Argument">n</a> <a id="10306" class="Symbol">=</a> <a id="10308" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="10309" class="Symbol">}</a> <a id="10311" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a>
  <a id="10315" href="Graded.Erasure.Extraction.Non-terminating.html#10141" class="Function">▸extracts-to-loop</a> <a id="10333" class="Symbol">{</a><a id="10334" href="Graded.Erasure.Extraction.Non-terminating.html#10334" class="Bound">p</a><a id="10335" class="Symbol">}</a> <a id="10337" class="Symbol">{</a><a id="10338" href="Graded.Erasure.Extraction.Non-terminating.html#10338" class="Bound">n</a><a id="10339" class="Symbol">}</a> <a id="10341" href="Graded.Erasure.Extraction.Non-terminating.html#10341" class="Bound">ok</a> <a id="10344" href="Graded.Erasure.Extraction.Non-terminating.html#10344" class="Bound">p≤𝟘</a> <a id="10348" class="Symbol">=</a> <a id="10350" href="Graded.Usage.html#8522" class="InductiveConstructor">lamₘ</a> <a id="10355" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10357" href="Graded.Usage.html#14317" class="InductiveConstructor">sub</a>
    <a id="10365" class="Symbol">(</a><a id="10366" href="Graded.Erasure.Extraction.Non-terminating.html#11005" class="Function">▸λx∙xx′</a> <a id="10374" href="Graded.Usage.html#8591" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="10382" href="Graded.Usage.html#14317" class="InductiveConstructor">sub</a>
       <a id="10393" class="Symbol">(</a><a id="10394" href="Graded.Usage.Properties.html#2551" class="Function">▸-cong</a> <a id="10401" class="Symbol">(</a><a id="10402" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">PE.sym</a> <a id="10409" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10411" href="Graded.Mode.html#18515" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="10420" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10422" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="10426" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="10429" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="10435" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="10438" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1135" class="Function">+-positive</a><a id="10448" class="Symbol">)</a> <a id="10450" href="Function.Base.html#1974" class="Function Operator">$</a>
        <a id="10460" href="Graded.Erasure.Extraction.Non-terminating.html#4212" class="Function">▸cast</a> <a id="10466" href="Graded.Erasure.Extraction.Non-terminating.html#10341" class="Bound">ok</a> <a id="10469" href="Graded.Usage.html#8477" class="InductiveConstructor">var</a> <a id="10473" class="Symbol">(</a><a id="10474" href="Graded.Erasure.Extraction.Non-terminating.html#3198" class="Function">▸Πℕℕ</a> <a id="10479" href="Graded.Erasure.Extraction.Non-terminating.html#10344" class="Bound">p≤𝟘</a><a id="10482" class="Symbol">)</a> <a id="10484" href="Graded.Usage.html#8271" class="InductiveConstructor">ℕₘ</a> <a id="10487" href="Graded.Erasure.Extraction.Non-terminating.html#11005" class="Function">▸λx∙xx′</a><a id="10494" class="Symbol">)</a>
     <a id="10501" class="Symbol">(</a><a id="10502" class="Keyword">let</a> <a id="10506" class="Keyword">open</a> <a id="10511" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a> <a id="10524" class="Keyword">in</a> <a id="10527" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
        <a id="10541" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>                     <a id="10564" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="10568" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="10577" class="Symbol">_</a> <a id="10579" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
        <a id="10589" href="Graded.Modality.html#851" class="Function">ω</a> <a id="10591" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="10594" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>                <a id="10612" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="10616" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="10625" href="Function.Base.html#1974" class="Function Operator">$</a>
                                   <a id="10662" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="10671" class="Symbol">(</a><a id="10672" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="10685" class="Symbol">_)</a> <a id="10688" href="Function.Base.html#1974" class="Function Operator">$</a>
                                   <a id="10725" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="10738" class="Symbol">_</a> <a id="10740" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
        <a id="10750" href="Graded.Modality.html#851" class="Function">ω</a> <a id="10752" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="10755" class="Symbol">(</a><a id="10756" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10759" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="10762" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10765" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="10768" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a><a id="10770" class="Symbol">)</a>  <a id="10773" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="10774" class="Symbol">))</a>
    <a id="10781" class="Symbol">(</a><a id="10782" class="Keyword">let</a> <a id="10786" class="Keyword">open</a> <a id="10791" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a> <a id="10804" class="Keyword">in</a> <a id="10807" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
       <a id="10820" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10823" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="10825" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="10827" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="10829" href="Graded.Modality.html#847" class="Function">𝟘</a>           <a id="10841" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">≈⟨</a> <a id="10844" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="10852" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="10854" href="Graded.Modality.html#3176" class="Function">·-zeroʳ</a> <a id="10862" class="Symbol">_</a> <a id="10864" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">⟩</a>
       <a id="10873" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>                   <a id="10894" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="10898" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="10907" class="Symbol">_</a> <a id="10909" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
       <a id="10918" class="Symbol">(</a><a id="10919" href="Graded.Modality.html#851" class="Function">ω</a> <a id="10921" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="10923" href="Graded.Modality.html#851" class="Function">ω</a><a id="10924" class="Symbol">)</a> <a id="10926" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="10929" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>        <a id="10939" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="10943" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="10956" class="Symbol">_</a> <a id="10958" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
       <a id="10967" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10970" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="10973" class="Symbol">(</a><a id="10974" href="Graded.Modality.html#851" class="Function">ω</a> <a id="10976" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="10978" href="Graded.Modality.html#851" class="Function">ω</a><a id="10979" class="Symbol">)</a> <a id="10981" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="10984" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="10988" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="10989" class="Symbol">)</a>
    <a id="10995" class="Keyword">where</a>
    <a id="11005" href="Graded.Erasure.Extraction.Non-terminating.html#11005" class="Function">▸λx∙xx′</a> <a id="11013" class="Symbol">:</a> <a id="11015" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="11018" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="11021" href="Graded.Mode.html#1117" class="InductiveConstructor">𝟙ᵐ</a> <a id="11024" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="11026" href="Graded.Erasure.Extraction.Non-terminating.html#5474" class="Function">λx∙xx</a> <a id="11032" class="Symbol">{</a><a id="11033" class="Argument">n</a> <a id="11035" class="Symbol">=</a> <a id="11037" href="Graded.Erasure.Extraction.Non-terminating.html#10338" class="Bound">n</a><a id="11038" class="Symbol">}</a> <a id="11040" href="Graded.Erasure.Extraction.Non-terminating.html#10334" class="Bound">p</a>
    <a id="11046" href="Graded.Erasure.Extraction.Non-terminating.html#11005" class="Function">▸λx∙xx′</a> <a id="11054" class="Symbol">=</a> <a id="11056" href="Graded.Erasure.Extraction.Non-terminating.html#6826" class="Function">▸λx∙xx</a> <a id="11063" href="Graded.Erasure.Extraction.Non-terminating.html#10341" class="Bound">ok</a> <a id="11066" href="Graded.Erasure.Extraction.Non-terminating.html#10344" class="Bound">p≤𝟘</a>

<a id="11071" class="Comment">------------------------------------------------------------------------</a>
<a id="11144" class="Comment">-- The term former loops</a>

<a id="11170" class="Keyword">opaque</a>

  <a id="11180" class="Comment">-- A term for which the extraction does not terminate if erasable</a>
  <a id="11248" class="Comment">-- arguments are removed entirely and strict applications are used</a>
  <a id="11317" class="Comment">-- (if ω is non-zero).</a>

  <a id="loops"></a><a id="11343" href="Graded.Erasure.Extraction.Non-terminating.html#11343" class="Function">loops</a> <a id="11349" class="Symbol">:</a> <a id="11351" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="11353" class="Symbol">→</a> <a id="11355" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="11360" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>
  <a id="11364" href="Graded.Erasure.Extraction.Non-terminating.html#11343" class="Function">loops</a> <a id="11370" href="Graded.Erasure.Extraction.Non-terminating.html#11370" class="Bound">p</a> <a id="11372" class="Symbol">=</a> <a id="11374" href="Definition.Untyped.html#3516" class="InductiveConstructor">lam</a> <a id="11378" href="Graded.Modality.html#851" class="Function">ω</a> <a id="11380" href="Definition.Untyped.html#4052" class="InductiveConstructor">zero</a> <a id="11385" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">∘⟨</a> <a id="11388" href="Graded.Modality.html#851" class="Function">ω</a> <a id="11390" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">⟩</a> <a id="11392" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a> <a id="11409" href="Graded.Erasure.Extraction.Non-terminating.html#11370" class="Bound">p</a>

<a id="11412" class="Keyword">opaque</a>
  <a id="11421" class="Keyword">unfolding</a> <a id="11431" href="Graded.Erasure.Extraction.Non-terminating.html#11343" class="Function">loops</a>

  <a id="11440" class="Comment">-- An extraction lemma for loops.</a>

  <a id="erase-loops"></a><a id="11477" href="Graded.Erasure.Extraction.Non-terminating.html#11477" class="Function">erase-loops</a> <a id="11489" class="Symbol">:</a>
    <a id="11495" class="Symbol">⦃</a> <a id="11497" href="Graded.Erasure.Extraction.Non-terminating.html#11497" class="Bound">𝟘-well-behaved</a> <a id="11512" class="Symbol">:</a> <a id="11514" href="Graded.Modality.html#3438" class="Record">Has-well-behaved-zero</a> <a id="11536" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="11538" href="Graded.Modality.html#7300" class="Function">semiring-with-meet</a> <a id="11557" class="Symbol">⦄</a> <a id="11559" class="Symbol">→</a>
    <a id="11565" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="11572" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11577" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="11579" class="Symbol">(</a><a id="11580" href="Graded.Erasure.Extraction.Non-terminating.html#11343" class="Function">loops</a> <a id="11586" class="Symbol">{</a><a id="11587" class="Argument">n</a> <a id="11589" class="Symbol">=</a> <a id="11591" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="11592" class="Symbol">}</a> <a id="11594" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="11595" class="Symbol">)</a> <a id="11597" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="11603" class="InductiveConstructor">T.lam</a> <a id="11609" class="InductiveConstructor">T.zero</a> <a id="11616" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11621" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="11623" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="11625" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="11630" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a>
  <a id="11634" href="Graded.Erasure.Extraction.Non-terminating.html#11477" class="Function">erase-loops</a> <a id="11646" class="Symbol">{</a><a id="11647" href="Graded.Erasure.Extraction.Non-terminating.html#11647" class="Bound">s</a><a id="11648" class="Symbol">}</a> <a id="11650" class="Symbol">{</a><a id="11651" href="Graded.Erasure.Extraction.Non-terminating.html#11651" class="Bound">p</a><a id="11652" class="Symbol">}</a> <a id="11654" class="Symbol">=</a>
    <a id="11660" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="11667" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11672" href="Graded.Erasure.Extraction.Non-terminating.html#11647" class="Bound">s</a> <a id="11674" class="Symbol">(</a><a id="11675" href="Definition.Untyped.html#3516" class="InductiveConstructor">lam</a> <a id="11679" href="Graded.Modality.html#851" class="Function">ω</a> <a id="11681" href="Definition.Untyped.html#4052" class="InductiveConstructor">zero</a> <a id="11686" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">∘⟨</a> <a id="11689" href="Graded.Modality.html#851" class="Function">ω</a> <a id="11691" href="Definition.Untyped.html#3560" class="InductiveConstructor Operator">⟩</a> <a id="11693" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a> <a id="11710" href="Graded.Erasure.Extraction.Non-terminating.html#11651" class="Bound">p</a><a id="11711" class="Symbol">)</a>  <a id="11714" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="11717" href="Graded.Erasure.Extraction.Properties.html#3075" class="Function">∘-≢𝟘</a> <a id="11722" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="11726" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>

    <a id="11733" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="11740" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11745" href="Graded.Erasure.Extraction.Non-terminating.html#11647" class="Bound">s</a> <a id="11747" class="Symbol">(</a><a id="11748" href="Definition.Untyped.html#3516" class="InductiveConstructor">lam</a> <a id="11752" href="Graded.Modality.html#851" class="Function">ω</a> <a id="11754" href="Definition.Untyped.html#4052" class="InductiveConstructor">zero</a><a id="11758" class="Symbol">)</a> <a id="11760" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11765" href="Graded.Erasure.Extraction.Non-terminating.html#11647" class="Bound">s</a> <a id="11767" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
    <a id="11773" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="11780" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11785" href="Graded.Erasure.Extraction.Non-terminating.html#11647" class="Bound">s</a> <a id="11787" class="Symbol">(</a><a id="11788" href="Graded.Erasure.Extraction.Non-terminating.html#8082" class="Function">extracts-to-loop</a> <a id="11805" href="Graded.Erasure.Extraction.Non-terminating.html#11651" class="Bound">p</a><a id="11806" class="Symbol">)</a>                    <a id="11827" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">≡⟨</a> <a id="11830" href="Relation.Binary.PropositionalEquality.Core.html#1395" class="Function">PE.cong₂</a> <a id="11839" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T._∘⟨</a> <a id="11845" class="Symbol">_</a> <a id="11847" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩_</a> <a id="11850" class="Symbol">(</a><a id="11851" href="Graded.Erasure.Extraction.Properties.html#3254" class="Function">lam-≢𝟘</a> <a id="11858" class="Symbol">_</a> <a id="11860" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a><a id="11863" class="Symbol">)</a>
                                                             <a id="11926" href="Graded.Erasure.Extraction.Non-terminating.html#8313" class="Function">erase-extracts-to-loop</a> <a id="11949" href="Relation.Binary.Reasoning.Syntax.html#10986" class="Function">⟩</a>
    <a id="11955" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="11961" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="11968" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11973" href="Graded.Erasure.Extraction.Non-terminating.html#11647" class="Bound">s</a> <a id="11975" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="11977" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="11982" href="Graded.Erasure.Extraction.Non-terminating.html#11647" class="Bound">s</a>                          <a id="12009" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a>
    <a id="12015" class="Keyword">where</a>
    <a id="12025" class="Keyword">open</a> <a id="12030" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="12069" class="Keyword">opaque</a>

  <a id="12079" class="Comment">-- If ω is non-zero, erasable arguments are removed entirely, and</a>
  <a id="12147" class="Comment">-- strict applications are used, then the extraction of loops p does</a>
  <a id="12218" class="Comment">-- not reduce to a value.</a>

  <a id="loops-does-not-reduce-to-a-value"></a><a id="12247" href="Graded.Erasure.Extraction.Non-terminating.html#12247" class="Function">loops-does-not-reduce-to-a-value</a> <a id="12280" class="Symbol">:</a>
    <a id="12286" class="Symbol">⦃</a> <a id="12288" href="Graded.Erasure.Extraction.Non-terminating.html#12288" class="Bound">𝟘-well-behaved</a> <a id="12303" class="Symbol">:</a> <a id="12305" href="Graded.Modality.html#3438" class="Record">Has-well-behaved-zero</a> <a id="12327" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="12329" href="Graded.Modality.html#7300" class="Function">semiring-with-meet</a> <a id="12348" class="Symbol">⦄</a> <a id="12350" class="Symbol">→</a>
    <a id="12356" href="Graded.Erasure.Target.html#6123" class="Datatype">T.Value</a> <a id="12364" href="Graded.Erasure.Extraction.Non-terminating.html#2727" class="Generalizable">v</a> <a id="12366" class="Symbol">→</a>
    <a id="12372" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="12374" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="12381" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="12386" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12393" class="Symbol">(</a><a id="12394" href="Graded.Erasure.Extraction.Non-terminating.html#11343" class="Function">loops</a> <a id="12400" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="12401" class="Symbol">)</a> <a id="12403" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12408" href="Graded.Erasure.Extraction.Non-terminating.html#2727" class="Generalizable">v</a>
  <a id="12412" href="Graded.Erasure.Extraction.Non-terminating.html#12247" class="Function">loops-does-not-reduce-to-a-value</a> <a id="12445" class="Symbol">{</a><a id="12446" href="Graded.Erasure.Extraction.Non-terminating.html#12446" class="Bound">v</a><a id="12447" class="Symbol">}</a> <a id="12449" class="Symbol">{</a><a id="12450" href="Graded.Erasure.Extraction.Non-terminating.html#12450" class="Bound">p</a><a id="12451" class="Symbol">}</a> <a id="12453" href="Graded.Erasure.Extraction.Non-terminating.html#12453" class="Bound">v-value</a> <a id="12461" class="Symbol">=</a>
    <a id="12467" href="Graded.Erasure.Extraction.html#2329" class="Function">erase′</a> <a id="12474" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="12479" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12486" class="Symbol">(</a><a id="12487" href="Graded.Erasure.Extraction.Non-terminating.html#11343" class="Function">loops</a> <a id="12493" href="Graded.Erasure.Extraction.Non-terminating.html#12450" class="Bound">p</a><a id="12494" class="Symbol">)</a> <a id="12496" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12501" href="Graded.Erasure.Extraction.Non-terminating.html#12446" class="Bound">v</a>            <a id="12514" href="Tools.Function.html#1018" class="Function">≡⟨</a> <a id="12517" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">PE.cong</a> <a id="12525" class="Symbol">(</a><a id="12526" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T._⇒*</a> <a id="12532" class="Symbol">_)</a> <a id="12535" href="Graded.Erasure.Extraction.Non-terminating.html#11477" class="Function">erase-loops</a> <a id="12547" href="Tools.Function.html#1018" class="Function">⟩→</a>
    <a id="12554" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="12560" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="12567" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="12572" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12579" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="12581" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12586" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12593" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12598" href="Graded.Erasure.Extraction.Non-terminating.html#12446" class="Bound">v</a>  <a id="12601" href="Tools.Function.html#904" class="Function">→⟨</a> <a id="12604" href="Graded.Erasure.Extraction.Non-terminating.html#12680" class="Function">helper</a> <a id="12611" href="Tools.Function.html#904" class="Function">⟩</a>
    <a id="12617" href="Data.Empty.html#895" class="Function">⊥</a>                                              <a id="12664" href="Tools.Function.html#1132" class="Function Operator">□</a>
    <a id="12670" class="Keyword">where</a>
    <a id="12680" href="Graded.Erasure.Extraction.Non-terminating.html#12680" class="Function">helper</a> <a id="12687" class="Symbol">:</a> <a id="12689" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="12691" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="12697" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="12704" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="12709" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12716" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="12718" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12723" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="12725" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12730" href="Graded.Erasure.Extraction.Non-terminating.html#12446" class="Bound">v</a>
    <a id="12736" href="Graded.Erasure.Extraction.Non-terminating.html#12680" class="Function">helper</a> <a id="12743" href="Graded.Erasure.Target.html#7893" class="InductiveConstructor">T.refl</a> <a id="12750" class="Symbol">=</a>
      <a id="12758" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="12763" href="Graded.Erasure.Extraction.Non-terminating.html#12453" class="Bound">v-value</a> <a id="12771" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="12774" class="Symbol">λ</a> <a id="12776" class="Symbol">()</a>
    <a id="12783" href="Graded.Erasure.Extraction.Non-terminating.html#12680" class="Function">helper</a> <a id="12790" class="Symbol">(</a><a id="12791" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12799" class="Symbol">(</a><a id="12800" href="Graded.Erasure.Target.html#7049" class="InductiveConstructor">T.app-subst</a> <a id="12812" class="Symbol">())</a>     <a id="12820" class="Symbol">_)</a>
    <a id="12827" href="Graded.Erasure.Extraction.Non-terminating.html#12680" class="Function">helper</a> <a id="12834" class="Symbol">(</a><a id="12835" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12843" class="Symbol">(</a><a id="12844" href="Graded.Erasure.Target.html#7197" class="InductiveConstructor">T.β-red</a> <a id="12852" href="Graded.Erasure.Extraction.Non-terminating.html#12852" class="Bound">loop-value</a><a id="12862" class="Symbol">)</a> <a id="12864" class="Symbol">_)</a> <a id="12867" class="Symbol">=</a>
      <a id="12875" href="Graded.Erasure.Target.Non-terminating.html#1375" class="Function">¬loop⇒*</a> <a id="12883" href="Graded.Erasure.Extraction.Non-terminating.html#12852" class="Bound">loop-value</a> <a id="12894" href="Graded.Erasure.Target.html#7893" class="InductiveConstructor">T.refl</a>
    <a id="12905" href="Graded.Erasure.Extraction.Non-terminating.html#12680" class="Function">helper</a> <a id="12912" class="Symbol">(</a><a id="12913" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12921" class="Symbol">(</a><a id="12922" href="Graded.Erasure.Target.html#7103" class="InductiveConstructor">T.app-subst-arg</a> <a id="12938" class="Symbol">_</a> <a id="12940" href="Graded.Erasure.Extraction.Non-terminating.html#12940" class="Bound">loop⇒</a><a id="12945" class="Symbol">)</a> <a id="12947" href="Graded.Erasure.Extraction.Non-terminating.html#12947" class="Bound">⇒*v</a><a id="12950" class="Symbol">)</a>
      <a id="12958" class="Keyword">rewrite</a> <a id="12966" href="Graded.Erasure.Target.Properties.Reduction.html#2101" class="Function">redDet</a> <a id="12973" class="Symbol">_</a> <a id="12975" href="Graded.Erasure.Extraction.Non-terminating.html#12940" class="Bound">loop⇒</a> <a id="12981" href="Graded.Erasure.Target.Non-terminating.html#941" class="Function">loop⇒loop</a> <a id="12991" class="Symbol">=</a>
      <a id="12999" href="Graded.Erasure.Extraction.Non-terminating.html#12680" class="Function">helper</a> <a id="13006" href="Graded.Erasure.Extraction.Non-terminating.html#12947" class="Bound">⇒*v</a>

<a id="13011" class="Keyword">opaque</a>
  <a id="13020" class="Keyword">unfolding</a> <a id="13030" href="Graded.Erasure.Extraction.Non-terminating.html#11343" class="Function">loops</a>

  <a id="13039" class="Comment">-- A typing rule for loops.</a>

  <a id="⊢loops"></a><a id="13070" href="Graded.Erasure.Extraction.Non-terminating.html#13070" class="Function">⊢loops</a> <a id="13077" class="Symbol">:</a>
    <a id="13083" href="Definition.Typed.Restrictions.html#1500" class="Function">Π-allowed</a> <a id="13093" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="13095" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="13097" class="Symbol">→</a>
    <a id="13103" href="Definition.Typed.Restrictions.html#1500" class="Function">Π-allowed</a> <a id="13113" href="Graded.Modality.html#851" class="Function">ω</a> <a id="13115" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="13117" class="Symbol">→</a>
    <a id="13123" href="Definition.Typed.Restrictions.html#1500" class="Function">Π-allowed</a> <a id="13133" class="Symbol">(</a><a id="13134" href="Graded.Modality.html#851" class="Function">ω</a> <a id="13136" href="Graded.Modality.html#823" class="Function Operator">+</a> <a id="13138" href="Graded.Modality.html#851" class="Function">ω</a><a id="13139" class="Symbol">)</a> <a id="13141" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="13143" class="Symbol">→</a>
    <a id="13149" href="Definition.Typed.html#1178" class="Datatype Operator">⊢</a> <a id="13151" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="13153" class="Symbol">→</a>
    <a id="13159" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="13161" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="13163" href="Graded.Erasure.Extraction.Non-terminating.html#11343" class="Function">loops</a> <a id="13169" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="13171" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="13173" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a>
  <a id="13177" href="Graded.Erasure.Extraction.Non-terminating.html#13070" class="Function">⊢loops</a> <a id="13184" href="Graded.Erasure.Extraction.Non-terminating.html#13184" class="Bound">𝟘-ok</a> <a id="13189" href="Graded.Erasure.Extraction.Non-terminating.html#13189" class="Bound">ω-ok</a> <a id="13194" href="Graded.Erasure.Extraction.Non-terminating.html#13194" class="Bound">ω+ω-ok</a> <a id="13201" href="Graded.Erasure.Extraction.Non-terminating.html#13201" class="Bound">⊢Γ</a> <a id="13204" class="Symbol">=</a>
    <a id="13210" href="Definition.Typed.Consequences.DerivedRules.Pi.html#1407" class="Function">lamⱼ′</a> <a id="13216" href="Graded.Erasure.Extraction.Non-terminating.html#13189" class="Bound">ω-ok</a> <a id="13221" class="Symbol">(</a><a id="13222" href="Definition.Typed.html#3202" class="InductiveConstructor">zeroⱼ</a> <a id="13228" class="Symbol">(</a><a id="13229" href="Graded.Erasure.Extraction.Non-terminating.html#13201" class="Bound">⊢Γ</a> <a id="13232" href="Definition.Typed.html#1226" class="InductiveConstructor Operator">∙</a> <a id="13234" href="Definition.Typed.Consequences.DerivedRules.Pi-Sigma.html#826" class="Function">ΠΣⱼ′</a> <a id="13239" href="Graded.Erasure.Extraction.Non-terminating.html#2922" class="Function">Empty⊢ℕ</a> <a id="13247" href="Graded.Erasure.Extraction.Non-terminating.html#13184" class="Bound">𝟘-ok</a><a id="13251" class="Symbol">))</a> <a id="13254" href="Definition.Typed.html#2360" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="13261" href="Graded.Erasure.Extraction.Non-terminating.html#9694" class="Function">⊢extracts-to-loop</a> <a id="13279" href="Graded.Erasure.Extraction.Non-terminating.html#13184" class="Bound">𝟘-ok</a> <a id="13284" href="Graded.Erasure.Extraction.Non-terminating.html#13189" class="Bound">ω-ok</a> <a id="13289" href="Graded.Erasure.Extraction.Non-terminating.html#13194" class="Bound">ω+ω-ok</a> <a id="13296" href="Graded.Erasure.Extraction.Non-terminating.html#13201" class="Bound">⊢Γ</a>
    <a id="13303" class="Keyword">where</a>
    <a id="13313" class="Keyword">open</a> <a id="13318" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="13325" href="Graded.Erasure.Extraction.Non-terminating.html#13201" class="Bound">⊢Γ</a>

<a id="13329" class="Keyword">opaque</a>
  <a id="13338" class="Keyword">unfolding</a> <a id="13348" href="Graded.Erasure.Extraction.Non-terminating.html#11343" class="Function">loops</a>

  <a id="13357" class="Comment">-- A usage rule for loops.</a>

  <a id="▸loops"></a><a id="13387" href="Graded.Erasure.Extraction.Non-terminating.html#13387" class="Function">▸loops</a> <a id="13394" class="Symbol">:</a>
    <a id="13400" class="Symbol">⦃</a> <a id="13402" href="Graded.Erasure.Extraction.Non-terminating.html#13402" class="Bound">𝟘-well-behaved</a> <a id="13417" class="Symbol">:</a> <a id="13419" href="Graded.Modality.html#3438" class="Record">Has-well-behaved-zero</a> <a id="13441" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="13443" href="Graded.Modality.html#7300" class="Function">semiring-with-meet</a> <a id="13462" class="Symbol">⦄</a> <a id="13464" class="Symbol">→</a>
    <a id="13470" href="Graded.Usage.Restrictions.html#1576" class="Field">Emptyrec-allowed</a> <a id="13487" class="InductiveConstructor">𝟙ᵐ</a> <a id="13490" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="13492" class="Symbol">→</a>
    <a id="13498" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="13500" href="Graded.Modality.html#1286" class="Function Operator">≤</a> <a id="13502" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="13504" class="Symbol">→</a>
    <a id="13510" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13513" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="13516" class="InductiveConstructor">𝟙ᵐ</a> <a id="13519" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="13521" href="Graded.Erasure.Extraction.Non-terminating.html#11343" class="Function">loops</a> <a id="13527" class="Symbol">{</a><a id="13528" class="Argument">n</a> <a id="13530" class="Symbol">=</a> <a id="13532" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="13533" class="Symbol">}</a> <a id="13535" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a>
  <a id="13539" href="Graded.Erasure.Extraction.Non-terminating.html#13387" class="Function">▸loops</a> <a id="13546" href="Graded.Erasure.Extraction.Non-terminating.html#13546" class="Bound">ok</a> <a id="13549" href="Graded.Erasure.Extraction.Non-terminating.html#13549" class="Bound">p≤𝟘</a> <a id="13553" class="Symbol">=</a> <a id="13555" href="Graded.Usage.html#14317" class="InductiveConstructor">sub</a>
    <a id="13563" class="Symbol">(</a><a id="13564" href="Graded.Usage.html#8522" class="InductiveConstructor">lamₘ</a>
       <a id="13576" class="Symbol">(</a><a id="13577" href="Graded.Usage.html#14317" class="InductiveConstructor">sub</a> <a id="13581" href="Graded.Usage.html#9341" class="InductiveConstructor">zeroₘ</a> <a id="13587" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="13589" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
          <a id="13605" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13608" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="13610" href="Graded.Modality.html#849" class="Function">𝟙</a> <a id="13612" href="Graded.Modality.html#827" class="Function Operator">·</a> <a id="13614" href="Graded.Modality.html#851" class="Function">ω</a>  <a id="13617" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">≈⟨</a> <a id="13620" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="13628" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="13630" href="Graded.Modality.html#2917" class="Function">·-identityˡ</a> <a id="13642" class="Symbol">_</a> <a id="13644" href="Relation.Binary.Reasoning.Syntax.html#7049" class="Function">⟩</a>
          <a id="13656" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13659" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="13661" href="Graded.Modality.html#851" class="Function">ω</a>      <a id="13668" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">≤⟨</a> <a id="13671" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="13679" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="13681" href="Graded.Modality.Properties.Addition.html#3754" class="Function">ω≤𝟘</a> <a id="13685" href="Relation.Binary.Reasoning.Syntax.html#5482" class="Function">⟩</a>
          <a id="13697" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>          <a id="13709" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="13710" class="Symbol">)</a> <a id="13712" href="Graded.Usage.html#8591" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="13720" href="Graded.Usage.Properties.html#2551" class="Function">▸-cong</a> <a id="13727" class="Symbol">(</a><a id="13728" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">PE.sym</a> <a id="13735" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="13737" href="Graded.Mode.html#18515" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="13746" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a><a id="13749" class="Symbol">)</a>
       <a id="13758" class="Symbol">(</a><a id="13759" href="Graded.Erasure.Extraction.Non-terminating.html#10141" class="Function">▸extracts-to-loop</a> <a id="13777" href="Graded.Erasure.Extraction.Non-terminating.html#13546" class="Bound">ok</a> <a id="13780" href="Graded.Erasure.Extraction.Non-terminating.html#13549" class="Bound">p≤𝟘</a><a id="13783" class="Symbol">))</a>
    <a id="13790" class="Symbol">(</a><a id="13791" href="Relation.Binary.Reasoning.Syntax.html#1510" class="Function Operator">begin</a>
       <a id="13804" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>             <a id="13819" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">≈˘⟨</a> <a id="13823" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="13832" class="Symbol">(</a><a id="13833" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="13846" class="Symbol">_)</a> <a id="13849" class="Symbol">(</a><a id="13850" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="13859" class="Symbol">_)</a> <a id="13862" href="Relation.Binary.Reasoning.Syntax.html#7400" class="Function">⟩</a>
       <a id="13871" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13874" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="13877" href="Graded.Modality.html#851" class="Function">ω</a> <a id="13879" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="13882" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="13886" href="Relation.Binary.Reasoning.Syntax.html#12283" class="Function Operator">∎</a><a id="13887" class="Symbol">)</a>
    <a id="13893" class="Keyword">where</a>
    <a id="13903" class="Keyword">open</a> <a id="13908" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>
</pre></body></html>