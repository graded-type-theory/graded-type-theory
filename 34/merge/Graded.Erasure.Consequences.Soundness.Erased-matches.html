<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Consequences.Soundness.Erased-matches</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Soundness of the extraction function in the presence of certain</a>
<a id="141" class="Comment">-- kinds of erased matches</a>
<a id="168" class="Comment">------------------------------------------------------------------------</a>

<a id="242" class="Keyword">import</a> <a id="249" href="Definition.Typed.html" class="Module">Definition.Typed</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>
<a id="308" class="Keyword">import</a> <a id="315" href="Definition.Untyped.html" class="Module">Definition.Untyped</a>
<a id="334" class="Keyword">open</a> <a id="339" class="Keyword">import</a> <a id="346" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a> <a id="368" class="Symbol">as</a> <a id="371" class="Module">T</a> <a id="373" class="Keyword">using</a> <a id="379" class="Symbol">(</a><a id="380" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="390" class="Symbol">)</a>
<a id="392" class="Keyword">open</a> <a id="397" class="Keyword">import</a> <a id="404" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="420" class="Keyword">import</a> <a id="427" href="Graded.Mode.html" class="Module">Graded.Mode</a>
<a id="439" class="Keyword">import</a> <a id="446" href="Graded.Restrictions.html" class="Module">Graded.Restrictions</a>
<a id="466" class="Keyword">open</a> <a id="471" class="Keyword">import</a> <a id="478" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="504" class="Keyword">open</a> <a id="509" class="Keyword">import</a> <a id="516" href="Tools.Bool.html" class="Module">Tools.Bool</a>
<a id="527" class="Keyword">open</a> <a id="532" class="Keyword">import</a> <a id="539" href="Tools.Nat.html" class="Module">Tools.Nat</a>

<a id="550" class="Keyword">module</a> <a id="557" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html" class="Module">Graded.Erasure.Consequences.Soundness.Erased-matches</a>
  <a id="612" class="Symbol">{</a><a id="613" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#613" class="Bound">a</a><a id="614" class="Symbol">}</a> <a id="616" class="Symbol">{</a><a id="617" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a> <a id="619" class="Symbol">:</a> <a id="621" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="625" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#613" class="Bound">a</a><a id="626" class="Symbol">}</a>
  <a id="630" class="Symbol">(</a><a id="631" class="Keyword">open</a> <a id="636" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="655" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a><a id="656" class="Symbol">)</a>
  <a id="660" class="Symbol">{</a><a id="661" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="663" class="Symbol">:</a> <a id="665" href="Graded.Modality.html#7187" class="Record">Modality</a> <a id="674" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a><a id="675" class="Symbol">}</a>
  <a id="679" class="Symbol">(</a><a id="680" class="Keyword">open</a> <a id="685" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="697" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="698" class="Symbol">)</a>
  <a id="702" class="Symbol">(</a><a id="703" class="Keyword">open</a> <a id="708" href="Graded.Restrictions.html" class="Module">Graded.Restrictions</a> <a id="728" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="729" class="Symbol">)</a>
  <a id="733" class="Symbol">(</a><a id="734" class="Keyword">open</a> <a id="739" href="Graded.Modality.html#7187" class="Module">Modality</a> <a id="748" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="749" class="Symbol">)</a>
  <a id="753" class="Symbol">(</a><a id="754" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="757" class="Symbol">:</a> <a id="759" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="777" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="778" class="Symbol">)</a>
  <a id="782" class="Symbol">(</a><a id="783" class="Keyword">open</a> <a id="788" href="Definition.Typed.Restrictions.html#752" class="Module">Type-restrictions</a> <a id="806" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a><a id="808" class="Symbol">)</a>
  <a id="812" class="Symbol">(</a><a id="813" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a> <a id="816" class="Symbol">:</a> <a id="818" href="Graded.Usage.Restrictions.html#688" class="Record">Usage-restrictions</a> <a id="837" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a><a id="838" class="Symbol">)</a>
  <a id="842" class="Symbol">(</a><a id="843" class="Keyword">open</a> <a id="848" href="Graded.Usage.Restrictions.html#688" class="Module">Usage-restrictions</a> <a id="867" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a><a id="869" class="Symbol">)</a>
  <a id="873" class="Symbol">{</a><a id="874" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#874" class="Bound">k</a> <a id="876" class="Symbol">:</a> <a id="878" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="881" class="Symbol">}</a>
  <a id="885" class="Comment">-- A context.</a>
  <a id="901" class="Symbol">(</a><a id="902" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="904" class="Symbol">:</a> <a id="906" href="Definition.Untyped.NotParametrised.html#791" class="Datatype">Con</a> <a id="910" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="915" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#874" class="Bound">k</a><a id="916" class="Symbol">)</a>
  <a id="920" class="Comment">-- If erased matches are allowed for emptyrec when the mode is 𝟙ᵐ,</a>
  <a id="989" class="Comment">-- then Δ is consistent with respect to a variant of the type system</a>
  <a id="1060" class="Comment">-- for which η-equality is allowed for the weak unit type.</a>
  <a id="1121" class="Symbol">(</a><a id="1122" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1122" class="Bound">consistent</a> <a id="1133" class="Symbol">:</a>
     <a id="1140" class="Keyword">let</a> <a id="1144" class="Keyword">open</a> <a id="1149" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="1166" class="Symbol">(</a><a id="1167" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="1170" href="Graded.Restrictions.html#5275" class="Function Operator">with-η-for-Unitʷ</a><a id="1186" class="Symbol">)</a> <a id="1188" class="Keyword">in</a>
     <a id="1196" href="Graded.Usage.Restrictions.html#1576" class="Field">Emptyrec-allowed</a> <a id="1213" href="Graded.Mode.html#1117" class="InductiveConstructor">𝟙ᵐ</a> <a id="1216" href="Graded.Modality.html#847" class="Function">𝟘</a> <a id="1218" class="Symbol">→</a>
     <a id="1225" href="Definition.Typed.html#21623" class="Function">Consistent</a> <a id="1236" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a><a id="1237" class="Symbol">)</a>
  <a id="1241" class="Comment">-- Certain erased matches are not allowed.</a>
  <a id="1286" class="Symbol">(</a><a id="1287" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1287" class="Bound">only-some-erased-matches</a> <a id="1312" class="Symbol">:</a> <a id="1314" href="Graded.Restrictions.html#9712" class="Function">Only-some-erased-matches</a> <a id="1339" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="1342" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a><a id="1344" class="Symbol">)</a>
  <a id="1348" class="Comment">-- The variant of extraction that is used.</a>
  <a id="1393" class="Symbol">(</a><a id="1394" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1394" class="Bound">str</a> <a id="1398" class="Symbol">:</a> <a id="1400" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="1410" class="Symbol">)</a>
  <a id="1414" class="Comment">-- The modality&#39;s zero is well-behaved.</a>
  <a id="1456" class="Symbol">⦃</a> <a id="1458" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1458" class="Bound">𝟘-well-behaved</a> <a id="1473" class="Symbol">:</a> <a id="1475" href="Graded.Modality.html#3438" class="Record">Has-well-behaved-zero</a> <a id="1497" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a> <a id="1499" href="Graded.Modality.html#7300" class="Field">semiring-with-meet</a> <a id="1518" class="Symbol">⦄</a>
  <a id="1522" class="Keyword">where</a>

<a id="1529" class="Keyword">import</a> <a id="1536" href="Definition.Typed.QuantityTranslation.html" class="Module">Definition.Typed.QuantityTranslation</a> <a id="1573" class="Symbol">as</a> <a id="1576" class="Module">QT</a>
<a id="1579" class="Keyword">open</a> <a id="1584" class="Keyword">import</a> <a id="1591" href="Definition.Untyped.QuantityTranslation.html" class="Module">Definition.Untyped.QuantityTranslation</a>
<a id="1630" class="Keyword">open</a> <a id="1635" class="Keyword">import</a> <a id="1642" href="Definition.Untyped.QuantityTranslation.Identity.html" class="Module">Definition.Untyped.QuantityTranslation.Identity</a> <a id="1690" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#617" class="Bound">M</a>

<a id="1693" class="Keyword">open</a> <a id="1698" class="Keyword">import</a> <a id="1705" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1720" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a>
<a id="1722" class="Keyword">open</a> <a id="1727" class="Keyword">import</a> <a id="1734" href="Graded.Modality.Morphism.html" class="Module">Graded.Modality.Morphism</a>
<a id="1759" class="Keyword">open</a> <a id="1764" class="Keyword">import</a> <a id="1771" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="1784" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="1786" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a>

<a id="1790" class="Keyword">import</a> <a id="1797" href="Graded.Erasure.Consequences.Soundness.html" class="Module">Graded.Erasure.Consequences.Soundness</a>
<a id="1835" class="Keyword">open</a> <a id="1840" class="Keyword">import</a> <a id="1847" href="Graded.Erasure.Extraction.html" class="Module">Graded.Erasure.Extraction</a> <a id="1873" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a>
<a id="1875" class="Keyword">import</a> <a id="1882" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a>

<a id="1905" class="Keyword">open</a> <a id="1910" class="Keyword">import</a> <a id="1917" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="1932" class="Keyword">open</a> <a id="1937" class="Keyword">import</a> <a id="1944" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="1958" class="Keyword">open</a> <a id="1963" class="Keyword">import</a> <a id="1970" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="1998" class="Symbol">as</a> <a id="2001" class="Module">PE</a>
<a id="2004" class="Keyword">open</a> <a id="2009" class="Keyword">import</a> <a id="2016" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="2027" class="Keyword">private</a> <a id="2035" class="Keyword">variable</a>
  <a id="2046" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2046" class="Generalizable">Γ</a>   <a id="2050" class="Symbol">:</a> <a id="2052" href="Definition.Untyped.NotParametrised.html#791" class="Datatype">Con</a> <a id="2056" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="2061" class="Symbol">_</a>
  <a id="2065" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2065" class="Generalizable">A</a> <a id="2067" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2067" class="Generalizable">t</a> <a id="2069" class="Symbol">:</a> <a id="2071" href="Definition.Untyped.html#2392" class="Datatype">Term</a> <a id="2076" class="Symbol">_</a>
  <a id="2080" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2080" class="Generalizable">s</a>   <a id="2084" class="Symbol">:</a> <a id="2086" href="Definition.Untyped.NotParametrised.html#1526" class="Datatype">Strength</a>

<a id="2096" class="Comment">-- A variant of the type restrictions for which η-equality is allowed</a>
<a id="2166" class="Comment">-- for the weak unit type.</a>

<a id="TR-η"></a><a id="2194" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2194" class="Function">TR-η</a> <a id="2199" class="Symbol">:</a> <a id="2201" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="2219" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a>
<a id="2221" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2194" class="Function">TR-η</a> <a id="2226" class="Symbol">=</a> <a id="2228" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="2231" href="Graded.Restrictions.html#5275" class="Function Operator">with-η-for-Unitʷ</a>

<a id="2249" class="Comment">-- TR is used by default.</a>

<a id="2276" class="Keyword">open</a> <a id="2281" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="2298" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a>
<a id="2301" class="Keyword">open</a> <a id="2306" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a> <a id="2328" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a>

<a id="2332" class="Comment">-- The modules T-η and SR-η use TR-η.</a>

<a id="2371" class="Keyword">private</a>
  <a id="2381" class="Keyword">module</a> <a id="T-η"></a><a id="2388" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2388" class="Module">T-η</a>         <a id="2400" class="Symbol">=</a> <a id="2402" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="2419" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2194" class="Function">TR-η</a>
  <a id="2426" class="Keyword">module</a> <a id="SR-η"></a><a id="2433" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2433" class="Module">SR-η</a>        <a id="2445" class="Symbol">=</a> <a id="2447" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a> <a id="2469" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2194" class="Function">TR-η</a>
  <a id="2476" class="Keyword">module</a> <a id="Soundness-η"></a><a id="2483" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2483" class="Module">Soundness-η</a> <a id="2495" class="Symbol">=</a>
    <a id="2501" href="Graded.Erasure.Consequences.Soundness.html#6258" class="Module">Graded.Erasure.Consequences.Soundness.Soundness</a> <a id="2549" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2194" class="Function">TR-η</a> <a id="2554" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a>
      <a id="2563" class="Symbol">(</a><a id="2564" class="Keyword">record</a>
         <a id="2580" class="Symbol">{</a> <a id="2582" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1195" class="Field">consistent</a>                  <a id="2610" class="Symbol">=</a> <a id="2612" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1122" class="Bound">consistent</a>
         <a id="2632" class="Symbol">;</a> <a id="2634" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1316" class="Field">closed-or-no-erased-matches</a> <a id="2662" class="Symbol">=</a>
             <a id="2677" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2682" href="Function.Base.html#1974" class="Function Operator">$</a>
             <a id="2697" href="Graded.Restrictions.html#12210" class="Function">Only-some-erased-matches→No-erased-matches</a>
               <a id="2755" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2194" class="Function">TR-η</a> <a id="2760" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#813" class="Bound">UR</a> <a id="2763" class="Symbol">_</a> <a id="2765" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1287" class="Bound">only-some-erased-matches</a>
         <a id="2799" class="Symbol">})</a>
      <a id="2808" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1394" class="Bound">str</a>

<a id="2813" class="Keyword">opaque</a>

  <a id="2823" class="Comment">-- The relation _⊢_∷_ is contained in T-η._⊢_∷_.</a>

  <a id="⊢∷→⊢∷-η"></a><a id="2875" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2875" class="Function">⊢∷→⊢∷-η</a> <a id="2883" class="Symbol">:</a> <a id="2885" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2046" class="Generalizable">Γ</a> <a id="2887" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="2889" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2067" class="Generalizable">t</a> <a id="2891" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="2893" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2065" class="Generalizable">A</a> <a id="2895" class="Symbol">→</a> <a id="2897" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2046" class="Generalizable">Γ</a> <a id="2899" href="Definition.Typed.html#1743" class="Datatype Operator">T-η.⊢</a> <a id="2905" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2067" class="Generalizable">t</a> <a id="2907" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="2909" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2065" class="Generalizable">A</a>
  <a id="2913" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2875" class="Function">⊢∷→⊢∷-η</a> <a id="2921" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2921" class="Bound">⊢t</a> <a id="2924" class="Symbol">=</a>
    <a id="2930" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="2935" href="Graded.Modality.Morphism.html#8438" class="Field">Is-order-embedding.tr-morphism</a> <a id="2966" href="Graded.Modality.Morphism.html#17999" class="Function">Is-order-embedding-id</a> <a id="2988" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="2991" class="Symbol">λ</a>
      <a id="2999" class="Symbol">(</a><a id="3000" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3000" class="Bound">m</a> <a id="3002" class="Symbol">:</a> <a id="3004" href="Graded.Modality.Morphism.html#1377" class="Record">Is-morphism</a> <a id="3016" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="3018" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#661" class="Bound">𝕄</a> <a id="3020" href="Function.Base.html#704" class="Function">idᶠ</a><a id="3023" class="Symbol">)</a> <a id="3025" class="Symbol">→</a>
    <a id="3031" href="Tools.PropositionalEquality.html#1467" class="Function">subst₃</a> <a id="3038" href="Definition.Typed.html#1743" class="Datatype Operator">T-η._⊢_∷_</a> <a id="3048" href="Definition.Untyped.QuantityTranslation.Identity.html#2568" class="Function">tr-Con-id</a> <a id="3058" href="Definition.Untyped.QuantityTranslation.Identity.html#2159" class="Function">tr-Term-id</a> <a id="3069" href="Definition.Untyped.QuantityTranslation.Identity.html#2159" class="Function">tr-Term-id</a> <a id="3080" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="3086" href="Definition.Typed.QuantityTranslation.html#3518" class="Function">QT.tr-⊢∷</a> <a id="3095" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#754" class="Bound">TR</a> <a id="3098" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2194" class="Function">TR-η</a> <a id="3103" href="Function.Base.html#704" class="Function">idᶠ</a> <a id="3107" href="Function.Base.html#704" class="Function">idᶠ</a> <a id="3111" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3000" class="Bound">m</a> <a id="3113" class="Symbol">(</a><a id="3114" href="Graded.Modality.Morphism.html#16515" class="Function">Is-morphism→Is-Σ-morphism</a> <a id="3140" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3000" class="Bound">m</a><a id="3141" class="Symbol">)</a>
      <a id="3149" class="Symbol">(</a><a id="3150" class="Keyword">record</a>
         <a id="3166" class="Symbol">{</a> <a id="3168" href="Graded.Modality.Morphism.Type-restrictions.html#1503" class="Field">Unit-preserved</a>    <a id="3186" class="Symbol">=</a> <a id="3188" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3201" class="Symbol">;</a> <a id="3203" href="Graded.Modality.Morphism.Type-restrictions.html#1660" class="Field">ΠΣ-preserved</a>      <a id="3221" class="Symbol">=</a> <a id="3223" class="Symbol">λ</a> <a id="3225" class="Symbol">{</a><a id="3226" class="Argument">b</a> <a id="3228" class="Symbol">=</a> <a id="3230" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3230" class="Bound">b</a><a id="3231" class="Symbol">}</a> <a id="3233" class="Symbol">→</a>
                                 <a id="3268" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">subst</a> <a id="3274" class="Symbol">(</a><a id="3275" href="Function.Base.html#1638" class="Function">flip</a> <a id="3280" class="Symbol">(</a><a id="3281" href="Definition.Typed.Restrictions.html#1134" class="Field">ΠΣ-allowed</a> <a id="3292" class="Symbol">_)</a> <a id="3295" class="Symbol">_)</a> <a id="3298" href="Function.Base.html#1974" class="Function Operator">$</a>
                                 <a id="3333" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">PE.sym</a> <a id="3340" href="Function.Base.html#1974" class="Function Operator">$</a>
                                 <a id="3375" href="Definition.Untyped.QuantityTranslation.Identity.html#794" class="Function">tr-BinderMode-id</a> <a id="3392" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3230" class="Bound">b</a>
         <a id="3403" class="Symbol">;</a> <a id="3405" href="Graded.Modality.Morphism.Type-restrictions.html#1820" class="Field">K-preserved</a>       <a id="3423" class="Symbol">=</a> <a id="3425" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3438" class="Symbol">;</a> <a id="3440" href="Graded.Modality.Morphism.Type-restrictions.html#1940" class="Field">[]-cong-preserved</a> <a id="3458" class="Symbol">=</a> <a id="3460" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3473" class="Symbol">})</a>
      <a id="3482" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2921" class="Bound">⊢t</a>

<a id="3486" class="Keyword">opaque</a>

  <a id="3496" class="Comment">-- Soundness of erasure for natural numbers.</a>
  <a id="3543" class="Comment">--</a>
  <a id="3548" class="Comment">-- Note that SR-η._⊢_⇒ˢ*_∷ℕ is used in the statement of this</a>
  <a id="3611" class="Comment">-- theorem. This reduction relation uses the rule unitrec-β-η rather</a>
  <a id="3682" class="Comment">-- than unitrec-subst and unitrec-β.</a>

  <a id="soundness-ℕ"></a><a id="3722" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3722" class="Function">soundness-ℕ</a> <a id="3734" class="Symbol">:</a>
    <a id="3740" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="3742" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="3744" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2067" class="Generalizable">t</a> <a id="3746" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="3748" href="Definition.Untyped.html#2878" class="InductiveConstructor">ℕ</a> <a id="3750" class="Symbol">→</a> <a id="3752" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3755" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="3758" class="InductiveConstructor">𝟙ᵐ</a> <a id="3761" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="3763" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2067" class="Generalizable">t</a> <a id="3765" class="Symbol">→</a>
    <a id="3771" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="3773" class="Symbol">λ</a> <a id="3775" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3775" class="Bound">n</a> <a id="3777" class="Symbol">→</a> <a id="3779" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="3781" href="Graded.Erasure.SucRed.html#1449" class="Datatype Operator">SR-η.⊢</a> <a id="3788" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2067" class="Generalizable">t</a> <a id="3790" href="Graded.Erasure.SucRed.html#1449" class="Datatype Operator">⇒ˢ*</a> <a id="3794" href="Definition.Untyped.html#6630" class="Function">sucᵏ</a> <a id="3799" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3775" class="Bound">n</a> <a id="3801" href="Graded.Erasure.SucRed.html#1449" class="Datatype Operator">∷ℕ</a> <a id="3804" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3806" href="Graded.Erasure.Extraction.html#2117" class="Function">erase</a> <a id="3812" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1394" class="Bound">str</a> <a id="3816" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2067" class="Generalizable">t</a> <a id="3818" href="Graded.Erasure.SucRed.html#7125" class="Function Operator">⇒ˢ⟨</a> <a id="3822" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1394" class="Bound">str</a> <a id="3826" href="Graded.Erasure.SucRed.html#7125" class="Function Operator">⟩*</a> <a id="3829" href="Graded.Erasure.Target.html#6901" class="Function">T.sucᵏ</a> <a id="3836" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3775" class="Bound">n</a>
  <a id="3840" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3722" class="Function">soundness-ℕ</a> <a id="3852" class="Symbol">=</a> <a id="3854" href="Graded.Erasure.Consequences.Soundness.html#7261" class="Function">Soundness-η.soundness-ℕ</a> <a id="3878" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="3881" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2875" class="Function">⊢∷→⊢∷-η</a>

<a id="3890" class="Keyword">opaque</a>

  <a id="3900" class="Comment">-- Soundness of erasure for unit types.</a>
  <a id="3942" class="Comment">--</a>
  <a id="3947" class="Comment">-- Note that T-η._⊢_⇒*_∷_ is used in the statement of this theorem.</a>
  <a id="4017" class="Comment">-- This reduction relation uses the rule unitrec-β-η rather than</a>
  <a id="4084" class="Comment">-- unitrec-subst and unitrec-β.</a>

  <a id="soundness-Unit"></a><a id="4119" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4119" class="Function">soundness-Unit</a> <a id="4134" class="Symbol">:</a>
    <a id="4140" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="4142" href="Definition.Typed.html#1743" class="Datatype Operator">⊢</a> <a id="4144" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2067" class="Generalizable">t</a> <a id="4146" href="Definition.Typed.html#1743" class="Datatype Operator">∷</a> <a id="4148" href="Definition.Untyped.html#2974" class="InductiveConstructor">Unit</a> <a id="4153" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2080" class="Generalizable">s</a> <a id="4155" class="Symbol">→</a> <a id="4157" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4160" href="Graded.Usage.html#8181" class="Datatype Operator">▸[</a> <a id="4163" class="InductiveConstructor">𝟙ᵐ</a> <a id="4166" href="Graded.Usage.html#8181" class="Datatype Operator">]</a> <a id="4168" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2067" class="Generalizable">t</a> <a id="4170" class="Symbol">→</a>
    <a id="4176" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#902" class="Bound">Δ</a> <a id="4178" href="Definition.Typed.html#19096" class="Datatype Operator">T-η.⊢</a> <a id="4184" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2067" class="Generalizable">t</a> <a id="4186" href="Definition.Typed.html#19096" class="Datatype Operator">⇒*</a> <a id="4189" href="Definition.Untyped.html#4239" class="InductiveConstructor">star</a> <a id="4194" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2080" class="Generalizable">s</a> <a id="4196" href="Definition.Typed.html#19096" class="Datatype Operator">∷</a> <a id="4198" href="Definition.Untyped.html#2974" class="InductiveConstructor">Unit</a> <a id="4203" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2080" class="Generalizable">s</a> <a id="4205" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4207" href="Graded.Erasure.Extraction.html#2117" class="Function">erase</a> <a id="4213" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1394" class="Bound">str</a> <a id="4217" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2067" class="Generalizable">t</a> <a id="4219" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="4224" class="InductiveConstructor">T.star</a>
  <a id="4233" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4119" class="Function">soundness-Unit</a> <a id="4248" class="Symbol">=</a> <a id="4250" href="Graded.Erasure.Consequences.Soundness.html#8125" class="Function">Soundness-η.soundness-Unit</a> <a id="4277" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="4280" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2875" class="Function">⊢∷→⊢∷-η</a>
</pre></body></html>