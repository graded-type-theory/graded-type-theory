<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Heap.Typed.Substitution</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Properties of well-formed heaps as substitutions</a>
<a id="126" class="Comment">------------------------------------------------------------------------</a>

<a id="200" class="Keyword">open</a> <a id="205" class="Keyword">import</a> <a id="212" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="228" class="Keyword">open</a> <a id="233" class="Keyword">import</a> <a id="240" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>
<a id="308" class="Keyword">open</a> <a id="313" class="Keyword">import</a> <a id="320" href="Graded.Usage.Restrictions.Natrec.html" class="Module">Graded.Usage.Restrictions.Natrec</a>

<a id="354" class="Keyword">module</a> <a id="361" href="Graded.Heap.Typed.Substitution.html" class="Module">Graded.Heap.Typed.Substitution</a>
  <a id="394" class="Symbol">{</a><a id="395" href="Graded.Heap.Typed.Substitution.html#395" class="Bound">a</a><a id="396" class="Symbol">}</a> <a id="398" class="Symbol">{</a><a id="399" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a> <a id="401" class="Symbol">:</a> <a id="403" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="407" href="Graded.Heap.Typed.Substitution.html#395" class="Bound">a</a><a id="408" class="Symbol">}</a> <a id="410" class="Symbol">{</a><a id="411" href="Graded.Heap.Typed.Substitution.html#411" class="Bound">𝕄</a> <a id="413" class="Symbol">:</a> <a id="415" href="Graded.Modality.html#9432" class="Record">Modality</a> <a id="424" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a><a id="425" class="Symbol">}</a>
  <a id="429" class="Symbol">(</a><a id="430" href="Graded.Heap.Typed.Substitution.html#430" class="Bound">UR</a> <a id="433" class="Symbol">:</a> <a id="435" href="Graded.Usage.Restrictions.html#812" class="Record">Usage-restrictions</a> <a id="454" href="Graded.Heap.Typed.Substitution.html#411" class="Bound">𝕄</a><a id="455" class="Symbol">)</a>
  <a id="459" class="Symbol">(</a><a id="460" href="Graded.Heap.Typed.Substitution.html#460" class="Bound">TR</a> <a id="463" class="Symbol">:</a> <a id="465" href="Definition.Typed.Restrictions.html#831" class="Record">Type-restrictions</a> <a id="483" href="Graded.Heap.Typed.Substitution.html#411" class="Bound">𝕄</a><a id="484" class="Symbol">)</a>
  <a id="488" class="Symbol">(</a><a id="489" class="Keyword">open</a> <a id="494" href="Graded.Usage.Restrictions.html#812" class="Module">Usage-restrictions</a> <a id="513" href="Graded.Heap.Typed.Substitution.html#430" class="Bound">UR</a><a id="515" class="Symbol">)</a>
  <a id="519" class="Symbol">(</a><a id="520" href="Graded.Heap.Typed.Substitution.html#520" class="Bound">factoring-nr</a> <a id="533" class="Symbol">:</a>
    <a id="539" class="Symbol">⦃</a> <a id="541" href="Graded.Heap.Typed.Substitution.html#541" class="Bound">has-nr</a> <a id="548" class="Symbol">:</a> <a id="550" href="Graded.Usage.Restrictions.html#3514" class="Function">Nr-available</a> <a id="563" class="Symbol">⦄</a> <a id="565" class="Symbol">→</a>
    <a id="571" href="Graded.Modality.html#7108" class="Record">Is-factoring-nr</a> <a id="587" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a> <a id="589" class="Symbol">(</a><a id="590" href="Graded.Usage.Restrictions.Natrec.html#2401" class="Function">Natrec-mode-Has-nr</a> <a id="609" href="Graded.Heap.Typed.Substitution.html#411" class="Bound">𝕄</a> <a id="611" href="Graded.Heap.Typed.Substitution.html#541" class="Bound">has-nr</a><a id="617" class="Symbol">))</a>
  <a id="622" class="Keyword">where</a>

<a id="629" class="Keyword">open</a> <a id="634" href="Definition.Typed.Restrictions.html#831" class="Module">Type-restrictions</a> <a id="652" href="Graded.Heap.Typed.Substitution.html#460" class="Bound">TR</a>

<a id="656" class="Keyword">open</a> <a id="661" class="Keyword">import</a> <a id="668" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="687" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a>
<a id="689" class="Keyword">open</a> <a id="694" class="Keyword">import</a> <a id="701" href="Definition.Untyped.Properties.html" class="Module">Definition.Untyped.Properties</a> <a id="731" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a>
<a id="733" class="Keyword">open</a> <a id="738" class="Keyword">import</a> <a id="745" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="762" href="Graded.Heap.Typed.Substitution.html#460" class="Bound">TR</a>
<a id="765" class="Keyword">open</a> <a id="770" class="Keyword">import</a> <a id="777" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="805" href="Graded.Heap.Typed.Substitution.html#460" class="Bound">TR</a>
<a id="808" class="Keyword">open</a> <a id="813" class="Keyword">import</a> <a id="820" href="Definition.Typed.Substitution.html" class="Module">Definition.Typed.Substitution</a> <a id="850" href="Graded.Heap.Typed.Substitution.html#460" class="Bound">TR</a>

<a id="854" class="Keyword">open</a> <a id="859" class="Keyword">import</a> <a id="866" href="Graded.Heap.Typed.html" class="Module">Graded.Heap.Typed</a> <a id="884" href="Graded.Heap.Typed.Substitution.html#430" class="Bound">UR</a> <a id="887" href="Graded.Heap.Typed.Substitution.html#460" class="Bound">TR</a> <a id="890" href="Graded.Heap.Typed.Substitution.html#520" class="Bound">factoring-nr</a>
<a id="903" class="Keyword">open</a> <a id="908" class="Keyword">import</a> <a id="915" href="Graded.Heap.Untyped.html" class="Module">Graded.Heap.Untyped</a> <a id="935" href="Definition.Typed.Restrictions.html#955" class="Function">type-variant</a> <a id="948" href="Graded.Heap.Typed.Substitution.html#430" class="Bound">UR</a> <a id="951" href="Graded.Heap.Typed.Substitution.html#520" class="Bound">factoring-nr</a>

<a id="965" class="Keyword">open</a> <a id="970" class="Keyword">import</a> <a id="977" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="992" class="Keyword">open</a> <a id="997" class="Keyword">import</a> <a id="1004" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="1018" class="Keyword">import</a> <a id="1025" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="1053" class="Symbol">as</a> <a id="1056" class="Module">PE</a>

<a id="1060" class="Keyword">private</a> <a id="1068" class="Keyword">variable</a>
  <a id="1079" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="1081" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="1083" class="Symbol">:</a> <a id="1085" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="1089" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1094" class="Symbol">_</a>
  <a id="1098" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="1100" href="Graded.Heap.Typed.Substitution.html#1100" class="Generalizable">H′</a> <a id="1103" class="Symbol">:</a> <a id="1105" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="1110" class="Symbol">_</a> <a id="1112" class="Symbol">_</a>
  <a id="1116" href="Graded.Heap.Typed.Substitution.html#1116" class="Generalizable">ρ</a> <a id="1118" class="Symbol">:</a> <a id="1120" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="1123" class="Symbol">_</a> <a id="1125" class="Symbol">_</a>
  <a id="1129" href="Graded.Heap.Typed.Substitution.html#1129" class="Generalizable">t</a> <a id="1131" href="Graded.Heap.Typed.Substitution.html#1131" class="Generalizable">u</a> <a id="1133" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">A</a> <a id="1135" href="Graded.Heap.Typed.Substitution.html#1135" class="Generalizable">B</a> <a id="1137" class="Symbol">:</a> <a id="1139" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1144" class="Symbol">_</a>
  <a id="1148" href="Graded.Heap.Typed.Substitution.html#1148" class="Generalizable">y</a> <a id="1150" class="Symbol">:</a> <a id="1152" href="Graded.Heap.Untyped.html#1648" class="Function">Ptr</a> <a id="1156" class="Symbol">_</a>
  <a id="1160" href="Graded.Heap.Typed.Substitution.html#1160" class="Generalizable">c</a> <a id="1162" class="Symbol">:</a> <a id="1164" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="1170" class="Symbol">_</a> <a id="1172" class="Symbol">_</a>
  <a id="1176" href="Graded.Heap.Typed.Substitution.html#1176" class="Generalizable">p</a> <a id="1178" class="Symbol">:</a> <a id="1180" href="Graded.Heap.Typed.Substitution.html#399" class="Bound">M</a>
  <a id="1184" href="Graded.Heap.Typed.Substitution.html#1184" class="Generalizable">e</a> <a id="1186" class="Symbol">:</a> <a id="1188" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="1193" class="Symbol">_</a>
  <a id="1197" href="Graded.Heap.Typed.Substitution.html#1197" class="Generalizable">S</a> <a id="1199" class="Symbol">:</a> <a id="1201" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="1207" class="Symbol">_</a>
  <a id="1211" href="Graded.Heap.Typed.Substitution.html#1211" class="Generalizable">σ</a> <a id="1213" class="Symbol">:</a> <a id="1215" href="Definition.Untyped.html#11546" class="Function">Subst</a> <a id="1221" class="Symbol">_</a> <a id="1223" class="Symbol">_</a>

<a id="1226" class="Keyword">opaque</a> <a id="1233" class="Keyword">mutual</a>

  <a id="1243" class="Comment">-- A well-formed heap is a well-formed substitution</a>

  <a id="⊢ʰ→⊢ˢʷ"></a><a id="1298" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1305" class="Symbol">:</a> <a id="1307" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="1309" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="1312" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="1314" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="1316" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="1318" class="Symbol">→</a> <a id="1320" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="1322" href="Definition.Typed.Substitution.Primitive.Primitive.html#3155" class="Function Operator">⊢ˢʷ</a> <a id="1326" href="Graded.Heap.Untyped.html#9063" class="Function">toSubstₕ</a> <a id="1335" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="1337" href="Definition.Typed.Substitution.Primitive.Primitive.html#3155" class="Function Operator">∷</a> <a id="1339" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a>
  <a id="1343" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1350" href="Graded.Heap.Typed.html#1233" class="InductiveConstructor">ε</a> <a id="1352" class="Symbol">=</a> <a id="1354" href="Definition.Typed.Substitution.Primitive.Primitive.html#3447" class="Function">⊢ˢʷ∷ε⇔</a> <a id="1361" class="Symbol">.</a><a id="1362" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="1368" href="Definition.Typed.html#1198" class="InductiveConstructor">ε</a>
  <a id="1372" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1379" class="Symbol">(</a><a id="1380" href="Graded.Heap.Typed.Substitution.html#1380" class="Bound">⊢H</a> <a id="1383" href="Graded.Heap.Typed.html#1250" class="InductiveConstructor Operator">∙</a> <a id="1385" href="Graded.Heap.Typed.Substitution.html#1385" class="Bound">⊢t</a><a id="1387" class="Symbol">)</a> <a id="1389" class="Symbol">=</a>
    <a id="1395" href="Definition.Typed.Substitution.Primitive.Primitive.html#3819" class="Function">→⊢ˢʷ∷∙</a> <a id="1402" class="Symbol">(</a><a id="1403" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1410" href="Graded.Heap.Typed.Substitution.html#1380" class="Bound">⊢H</a><a id="1412" class="Symbol">)</a> <a id="1414" href="Graded.Heap.Typed.Substitution.html#1385" class="Bound">⊢t</a>
  <a id="1419" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1426" class="Symbol">(</a><a id="1427" href="Graded.Heap.Typed.html#1331" class="InductiveConstructor Operator">_∙●_</a> <a id="1432" class="Symbol">{</a><a id="1433" href="Graded.Heap.Typed.Substitution.html#1433" class="Bound">Δ</a><a id="1434" class="Symbol">}</a> <a id="1436" class="Symbol">{</a><a id="1437" href="Graded.Heap.Typed.Substitution.html#1437" class="Bound">H</a><a id="1438" class="Symbol">}</a> <a id="1440" class="Symbol">{</a><a id="1441" href="Graded.Heap.Typed.Substitution.html#1441" class="Bound">A</a><a id="1442" class="Symbol">}</a> <a id="1444" href="Graded.Heap.Typed.Substitution.html#1444" class="Bound">⊢H</a> <a id="1447" href="Graded.Heap.Typed.Substitution.html#1447" class="Bound">⊢A</a><a id="1449" class="Symbol">)</a> <a id="1451" class="Symbol">=</a>
    <a id="1457" class="Keyword">let</a> <a id="1461" href="Graded.Heap.Typed.Substitution.html#1461" class="Bound">⊢σ</a> <a id="1464" class="Symbol">=</a> <a id="1466" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1473" href="Graded.Heap.Typed.Substitution.html#1444" class="Bound">⊢H</a>
        <a id="1484" href="Graded.Heap.Typed.Substitution.html#1484" class="Bound">⊢σA</a> <a id="1488" class="Symbol">=</a> <a id="1490" href="Definition.Typed.Substitution.Primitive.Primitive.html#53661" class="Function">subst-⊢</a> <a id="1498" href="Graded.Heap.Typed.Substitution.html#1447" class="Bound">⊢A</a> <a id="1501" href="Graded.Heap.Typed.Substitution.html#1461" class="Bound">⊢σ</a>
    <a id="1508" class="Keyword">in</a>
    <a id="1515" href="Definition.Typed.Substitution.Primitive.Primitive.html#3819" class="Function">→⊢ˢʷ∷∙</a> <a id="1522" class="Symbol">(</a><a id="1523" href="Definition.Typed.Substitution.Primitive.Primitive.html#7174" class="Function">⊢ˢʷ∷-wk1Subst</a> <a id="1537" href="Graded.Heap.Typed.Substitution.html#1484" class="Bound">⊢σA</a> <a id="1541" href="Graded.Heap.Typed.Substitution.html#1461" class="Bound">⊢σ</a><a id="1543" class="Symbol">)</a> <a id="1545" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="1551" href="Definition.Typed.html#2177" class="InductiveConstructor">var</a> <a id="1555" class="Symbol">(</a><a id="1556" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="1558" href="Graded.Heap.Typed.Substitution.html#1484" class="Bound">⊢σA</a><a id="1561" class="Symbol">)</a>
      <a id="1569" class="Symbol">(</a><a id="1570" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">PE.subst</a> <a id="1579" class="Symbol">(</a><a id="1580" href="Graded.Heap.Untyped.html#1683" class="InductiveConstructor">y0</a> <a id="1583" href="Definition.Typed.html#969" class="Datatype Operator">∷_∈</a> <a id="1587" href="Graded.Heap.Typed.Substitution.html#1433" class="Bound">Δ</a> <a id="1589" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="1591" href="Graded.Heap.Typed.Substitution.html#1441" class="Bound">A</a> <a id="1593" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="1595" href="Graded.Heap.Typed.Substitution.html#1437" class="Bound">H</a> <a id="1597" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a><a id="1599" class="Symbol">)</a> <a id="1601" class="Symbol">(</a><a id="1602" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="1609" class="Symbol">(</a><a id="1610" href="Definition.Untyped.Properties.html#23098" class="Function">wk1Subst-wk1</a> <a id="1623" href="Graded.Heap.Typed.Substitution.html#1441" class="Bound">A</a><a id="1624" class="Symbol">))</a> <a id="1627" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="1631" class="Symbol">)</a>

  <a id="1636" class="Comment">-- Well-formed contexts from well-formed heaps</a>

  <a id="wfHeap"></a><a id="1686" href="Graded.Heap.Typed.Substitution.html#1686" class="Function">wfHeap</a> <a id="1693" class="Symbol">:</a> <a id="1695" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="1697" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="1700" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="1702" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="1704" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="1706" class="Symbol">→</a> <a id="1708" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="1710" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a>
  <a id="1714" href="Graded.Heap.Typed.Substitution.html#1686" class="Function">wfHeap</a> <a id="1721" class="Symbol">{</a><a id="1722" class="Argument">Δ</a> <a id="1724" class="Symbol">=</a> <a id="1726" href="Definition.Untyped.NotParametrised.html#926" class="InductiveConstructor">ε</a><a id="1727" class="Symbol">}</a> <a id="1729" href="Graded.Heap.Typed.html#1233" class="InductiveConstructor">ε</a> <a id="1731" class="Symbol">=</a> <a id="1733" href="Definition.Typed.html#1198" class="InductiveConstructor">ε</a>
  <a id="1737" href="Graded.Heap.Typed.Substitution.html#1686" class="CatchallClause Function">wfHeap</a><a id="1743" class="CatchallClause"> </a><a id="1744" class="CatchallClause Symbol">(</a><a id="1745" href="Graded.Heap.Typed.Substitution.html#1745" class="CatchallClause Bound">⊢H</a><a id="1747" class="CatchallClause"> </a><a id="1748" href="Graded.Heap.Typed.html#1250" class="CatchallClause InductiveConstructor Operator">∙</a><a id="1749" class="CatchallClause"> </a><a id="1750" href="Graded.Heap.Typed.Substitution.html#1750" class="CatchallClause Bound">⊢t</a><a id="1752" class="CatchallClause Symbol">)</a> <a id="1754" class="Symbol">=</a> <a id="1756" href="Graded.Heap.Typed.Substitution.html#1686" class="Function">wfHeap</a> <a id="1763" href="Graded.Heap.Typed.Substitution.html#1745" class="Bound">⊢H</a>
  <a id="1768" href="Graded.Heap.Typed.Substitution.html#1686" class="Function">wfHeap</a> <a id="1775" class="Symbol">(</a><a id="1776" href="Graded.Heap.Typed.Substitution.html#1776" class="Bound">⊢H</a> <a id="1779" href="Graded.Heap.Typed.html#1331" class="InductiveConstructor Operator">∙●</a> <a id="1782" href="Graded.Heap.Typed.Substitution.html#1782" class="Bound">⊢A</a><a id="1784" class="Symbol">)</a> <a id="1786" class="Symbol">=</a>
    <a id="1792" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="1794" href="Definition.Typed.Substitution.Primitive.Primitive.html#53661" class="Function">subst-⊢</a> <a id="1802" href="Graded.Heap.Typed.Substitution.html#1782" class="Bound">⊢A</a> <a id="1805" class="Symbol">(</a><a id="1806" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1813" href="Graded.Heap.Typed.Substitution.html#1776" class="Bound">⊢H</a><a id="1815" class="Symbol">)</a>

<a id="1818" class="Keyword">opaque</a>

  <a id="1828" class="Comment">-- A well-formed type applied to a well-formed heap (as a substitution)</a>
  <a id="1902" class="Comment">-- is well-formed</a>

  <a id="substHeap"></a><a id="1923" href="Graded.Heap.Typed.Substitution.html#1923" class="Function">substHeap</a> <a id="1933" class="Symbol">:</a> <a id="1935" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="1937" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="1940" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="1942" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="1944" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="1946" class="Symbol">→</a> <a id="1948" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="1950" href="Definition.Typed.html#1262" class="Datatype Operator">⊢</a> <a id="1952" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">A</a> <a id="1954" class="Symbol">→</a> <a id="1956" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="1958" href="Definition.Typed.html#1262" class="Datatype Operator">⊢</a> <a id="1960" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">A</a> <a id="1962" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="1964" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="1966" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a>
  <a id="1971" href="Graded.Heap.Typed.Substitution.html#1923" class="Function">substHeap</a> <a id="1981" href="Graded.Heap.Typed.Substitution.html#1981" class="Bound">⊢H</a> <a id="1984" href="Graded.Heap.Typed.Substitution.html#1984" class="Bound">⊢A</a> <a id="1987" class="Symbol">=</a>
    <a id="1993" href="Definition.Typed.Substitution.Primitive.Primitive.html#53661" class="Function">subst-⊢</a> <a id="2001" href="Graded.Heap.Typed.Substitution.html#1984" class="Bound">⊢A</a> <a id="2004" class="Symbol">(</a><a id="2005" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2012" href="Graded.Heap.Typed.Substitution.html#1981" class="Bound">⊢H</a><a id="2014" class="Symbol">)</a>

<a id="2017" class="Keyword">opaque</a>

  <a id="2027" class="Comment">-- A well-formed term applied to a well-formed heap (as a substitution)</a>
  <a id="2101" class="Comment">-- is well-formed</a>

  <a id="substHeapTerm"></a><a id="2122" href="Graded.Heap.Typed.Substitution.html#2122" class="Function">substHeapTerm</a> <a id="2136" class="Symbol">:</a> <a id="2138" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="2140" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="2143" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2145" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="2147" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="2149" class="Symbol">→</a> <a id="2151" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="2153" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2155" href="Graded.Heap.Typed.Substitution.html#1129" class="Generalizable">t</a> <a id="2157" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2159" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">A</a> <a id="2161" class="Symbol">→</a> <a id="2163" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="2165" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="2167" href="Graded.Heap.Typed.Substitution.html#1129" class="Generalizable">t</a> <a id="2169" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="2171" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2173" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a> <a id="2176" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="2178" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">A</a> <a id="2180" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="2182" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2184" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a>
  <a id="2189" href="Graded.Heap.Typed.Substitution.html#2122" class="Function">substHeapTerm</a> <a id="2203" href="Graded.Heap.Typed.Substitution.html#2203" class="Bound">⊢H</a> <a id="2206" href="Graded.Heap.Typed.Substitution.html#2206" class="Bound">⊢t</a> <a id="2209" class="Symbol">=</a>
    <a id="2215" href="Definition.Typed.Substitution.Primitive.Primitive.html#54020" class="Function">subst-⊢∷</a> <a id="2224" href="Graded.Heap.Typed.Substitution.html#2206" class="Bound">⊢t</a> <a id="2227" class="Symbol">(</a><a id="2228" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2235" href="Graded.Heap.Typed.Substitution.html#2203" class="Bound">⊢H</a><a id="2237" class="Symbol">)</a>

<a id="2240" class="Keyword">opaque</a>

  <a id="2250" class="Comment">-- A well-formed type equality applied to a well-formed heap</a>
  <a id="2313" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEq"></a><a id="2354" href="Graded.Heap.Typed.Substitution.html#2354" class="Function">substHeapEq</a> <a id="2366" class="Symbol">:</a> <a id="2368" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="2370" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="2373" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2375" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="2377" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="2379" class="Symbol">→</a> <a id="2381" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="2383" href="Definition.Typed.html#4647" class="Datatype Operator">⊢</a> <a id="2385" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">A</a> <a id="2387" href="Definition.Typed.html#4647" class="Datatype Operator">≡</a> <a id="2389" href="Graded.Heap.Typed.Substitution.html#1135" class="Generalizable">B</a> <a id="2391" class="Symbol">→</a> <a id="2393" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="2395" href="Definition.Typed.html#4647" class="Datatype Operator">⊢</a> <a id="2397" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">A</a> <a id="2399" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="2401" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2403" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a> <a id="2406" href="Definition.Typed.html#4647" class="Datatype Operator">≡</a> <a id="2408" href="Graded.Heap.Typed.Substitution.html#1135" class="Generalizable">B</a> <a id="2410" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="2412" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2414" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a>
  <a id="2419" href="Graded.Heap.Typed.Substitution.html#2354" class="Function">substHeapEq</a> <a id="2431" href="Graded.Heap.Typed.Substitution.html#2431" class="Bound">⊢H</a> <a id="2434" href="Graded.Heap.Typed.Substitution.html#2434" class="Bound">⊢A≡B</a> <a id="2439" class="Symbol">=</a>
    <a id="2445" href="Definition.Typed.Substitution.Primitive.Primitive.html#53818" class="Function">subst-⊢≡</a> <a id="2454" href="Graded.Heap.Typed.Substitution.html#2434" class="Bound">⊢A≡B</a> <a id="2459" class="Symbol">(</a><a id="2460" href="Definition.Typed.Substitution.Primitive.Primitive.html#6148" class="Function">refl-⊢ˢʷ≡∷</a> <a id="2471" class="Symbol">(</a><a id="2472" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2479" href="Graded.Heap.Typed.Substitution.html#2431" class="Bound">⊢H</a><a id="2481" class="Symbol">))</a>

<a id="2485" class="Keyword">opaque</a>

  <a id="2495" class="Comment">-- A well-formed term equality  applied to a well-formed heap</a>
  <a id="2559" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEqTerm"></a><a id="2600" href="Graded.Heap.Typed.Substitution.html#2600" class="Function">substHeapEqTerm</a> <a id="2616" class="Symbol">:</a> <a id="2618" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="2620" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="2623" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2625" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="2627" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="2629" class="Symbol">→</a> <a id="2631" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="2633" href="Definition.Typed.html#5241" class="Datatype Operator">⊢</a> <a id="2635" href="Graded.Heap.Typed.Substitution.html#1129" class="Generalizable">t</a> <a id="2637" href="Definition.Typed.html#5241" class="Datatype Operator">≡</a> <a id="2639" href="Graded.Heap.Typed.Substitution.html#1131" class="Generalizable">u</a> <a id="2641" href="Definition.Typed.html#5241" class="Datatype Operator">∷</a> <a id="2643" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">A</a>
                  <a id="2663" class="Symbol">→</a> <a id="2665" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="2667" href="Definition.Typed.html#5241" class="Datatype Operator">⊢</a> <a id="2669" href="Graded.Heap.Typed.Substitution.html#1129" class="Generalizable">t</a> <a id="2671" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="2673" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2675" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a> <a id="2678" href="Definition.Typed.html#5241" class="Datatype Operator">≡</a> <a id="2680" href="Graded.Heap.Typed.Substitution.html#1131" class="Generalizable">u</a> <a id="2682" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="2684" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2686" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a> <a id="2689" href="Definition.Typed.html#5241" class="Datatype Operator">∷</a> <a id="2691" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">A</a> <a id="2693" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="2695" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2697" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a>
  <a id="2702" href="Graded.Heap.Typed.Substitution.html#2600" class="Function">substHeapEqTerm</a> <a id="2718" href="Graded.Heap.Typed.Substitution.html#2718" class="Bound">⊢H</a> <a id="2721" href="Graded.Heap.Typed.Substitution.html#2721" class="Bound">⊢t≡u</a> <a id="2726" class="Symbol">=</a>
    <a id="2732" href="Definition.Typed.Substitution.Primitive.Primitive.html#54196" class="Function">subst-⊢≡∷</a> <a id="2742" href="Graded.Heap.Typed.Substitution.html#2721" class="Bound">⊢t≡u</a> <a id="2747" class="Symbol">(</a><a id="2748" href="Definition.Typed.Substitution.Primitive.Primitive.html#6148" class="Function">refl-⊢ˢʷ≡∷</a> <a id="2759" class="Symbol">(</a><a id="2760" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2767" href="Graded.Heap.Typed.Substitution.html#2718" class="Bound">⊢H</a><a id="2769" class="Symbol">))</a>

<a id="2773" class="Keyword">opaque</a>

  <a id="2783" class="Comment">-- Applying a well-formed heap as a substitution to a reduction</a>

  <a id="substHeapRedTerm"></a><a id="2850" href="Graded.Heap.Typed.Substitution.html#2850" class="Function">substHeapRedTerm</a> <a id="2867" class="Symbol">:</a> <a id="2869" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="2871" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">⊢ʰ</a> <a id="2874" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2876" href="Graded.Heap.Typed.html#1159" class="Datatype Operator">∷</a> <a id="2878" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="2880" class="Symbol">→</a> <a id="2882" href="Graded.Heap.Typed.Substitution.html#1079" class="Generalizable">Γ</a> <a id="2884" href="Definition.Typed.html#12828" class="Datatype Operator">⊢</a> <a id="2886" href="Graded.Heap.Typed.Substitution.html#1129" class="Generalizable">t</a> <a id="2888" href="Definition.Typed.html#12828" class="Datatype Operator">⇒</a> <a id="2890" href="Graded.Heap.Typed.Substitution.html#1131" class="Generalizable">u</a> <a id="2892" href="Definition.Typed.html#12828" class="Datatype Operator">∷</a> <a id="2894" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">A</a>
                   <a id="2915" class="Symbol">→</a> <a id="2917" href="Graded.Heap.Typed.Substitution.html#1081" class="Generalizable">Δ</a> <a id="2919" href="Definition.Typed.html#12828" class="Datatype Operator">⊢</a> <a id="2921" href="Graded.Heap.Typed.Substitution.html#1129" class="Generalizable">t</a> <a id="2923" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="2925" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2927" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a> <a id="2930" href="Definition.Typed.html#12828" class="Datatype Operator">⇒</a> <a id="2932" href="Graded.Heap.Typed.Substitution.html#1131" class="Generalizable">u</a> <a id="2934" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="2936" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2938" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a> <a id="2941" href="Definition.Typed.html#12828" class="Datatype Operator">∷</a> <a id="2943" href="Graded.Heap.Typed.Substitution.html#1133" class="Generalizable">A</a> <a id="2945" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="2947" href="Graded.Heap.Typed.Substitution.html#1098" class="Generalizable">H</a> <a id="2949" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a>
  <a id="2954" href="Graded.Heap.Typed.Substitution.html#2850" class="Function">substHeapRedTerm</a> <a id="2971" href="Graded.Heap.Typed.Substitution.html#2971" class="Bound">⊢H</a> <a id="2974" href="Graded.Heap.Typed.Substitution.html#2974" class="Bound">d</a> <a id="2976" class="Symbol">=</a>
    <a id="2982" href="Definition.Typed.Substitution.html#1074" class="Function">subst-⊢⇒∷</a> <a id="2992" href="Graded.Heap.Typed.Substitution.html#2974" class="Bound">d</a> <a id="2994" class="Symbol">(</a><a id="2995" href="Graded.Heap.Typed.Substitution.html#1298" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="3002" href="Graded.Heap.Typed.Substitution.html#2971" class="Bound">⊢H</a><a id="3004" class="Symbol">)</a>
</pre></body></html>