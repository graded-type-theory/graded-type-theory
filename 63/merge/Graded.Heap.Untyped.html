<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Heap.Untyped</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- A resource aware heap semantics. Some basic definitions.</a>
<a id="134" class="Comment">------------------------------------------------------------------------</a>

<a id="208" class="Keyword">open</a> <a id="213" class="Keyword">import</a> <a id="220" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="236" class="Keyword">open</a> <a id="241" class="Keyword">import</a> <a id="248" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="274" class="Keyword">open</a> <a id="279" class="Keyword">import</a> <a id="286" href="Definition.Typed.Variant.html" class="Module">Definition.Typed.Variant</a>
<a id="311" class="Keyword">open</a> <a id="316" class="Keyword">import</a> <a id="323" href="Graded.Usage.Restrictions.Natrec.html" class="Module">Graded.Usage.Restrictions.Natrec</a>

<a id="357" class="Keyword">module</a> <a id="364" href="Graded.Heap.Untyped.html" class="Module">Graded.Heap.Untyped</a>
  <a id="386" class="Symbol">{</a><a id="387" href="Graded.Heap.Untyped.html#387" class="Bound">a</a><a id="388" class="Symbol">}</a> <a id="390" class="Symbol">{</a><a id="391" href="Graded.Heap.Untyped.html#391" class="Bound">M</a> <a id="393" class="Symbol">:</a> <a id="395" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="399" href="Graded.Heap.Untyped.html#387" class="Bound">a</a><a id="400" class="Symbol">}</a>
  <a id="404" class="Symbol">{</a><a id="405" href="Graded.Heap.Untyped.html#405" class="Bound">𝕄</a> <a id="407" class="Symbol">:</a> <a id="409" href="Graded.Modality.html#9432" class="Record">Modality</a> <a id="418" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="419" class="Symbol">}</a>
  <a id="423" class="Symbol">(</a><a id="424" href="Graded.Heap.Untyped.html#424" class="Bound">type-variant</a> <a id="437" class="Symbol">:</a> <a id="439" href="Definition.Typed.Variant.html#432" class="Record">Type-variant</a><a id="451" class="Symbol">)</a>
  <a id="455" class="Symbol">(</a><a id="456" href="Graded.Heap.Untyped.html#456" class="Bound">UR</a> <a id="459" class="Symbol">:</a> <a id="461" href="Graded.Usage.Restrictions.html#812" class="Record">Usage-restrictions</a> <a id="480" href="Graded.Heap.Untyped.html#405" class="Bound">𝕄</a><a id="481" class="Symbol">)</a>
  <a id="485" class="Symbol">(</a><a id="486" class="Keyword">open</a> <a id="491" href="Graded.Usage.Restrictions.html#812" class="Module">Usage-restrictions</a> <a id="510" href="Graded.Heap.Untyped.html#456" class="Bound">UR</a><a id="512" class="Symbol">)</a>
  <a id="516" class="Comment">-- If the usage rules use an nr function it must be factoring</a>
  <a id="580" class="Symbol">(</a><a id="581" href="Graded.Heap.Untyped.html#581" class="Bound">factoring-nr</a> <a id="594" class="Symbol">:</a>
    <a id="600" class="Symbol">⦃</a> <a id="602" href="Graded.Heap.Untyped.html#602" class="Bound">has-nr</a> <a id="609" class="Symbol">:</a> <a id="611" href="Graded.Usage.Restrictions.html#3514" class="Function">Nr-available</a> <a id="624" class="Symbol">⦄</a> <a id="626" class="Symbol">→</a>
    <a id="632" href="Graded.Modality.html#7108" class="Record">Is-factoring-nr</a> <a id="648" href="Graded.Heap.Untyped.html#391" class="Bound">M</a> <a id="650" class="Symbol">(</a><a id="651" href="Graded.Usage.Restrictions.Natrec.html#2401" class="Function">Natrec-mode-Has-nr</a> <a id="670" href="Graded.Heap.Untyped.html#405" class="Bound">𝕄</a> <a id="672" href="Graded.Heap.Untyped.html#602" class="Bound">has-nr</a><a id="678" class="Symbol">))</a>
  <a id="683" class="Keyword">where</a>

<a id="690" class="Keyword">open</a> <a id="695" href="Graded.Modality.html#9432" class="Module">Modality</a> <a id="704" href="Graded.Heap.Untyped.html#405" class="Bound">𝕄</a>
<a id="706" class="Keyword">open</a> <a id="711" href="Definition.Typed.Variant.html#432" class="Module">Type-variant</a> <a id="724" href="Graded.Heap.Untyped.html#424" class="Bound">type-variant</a>

<a id="738" class="Keyword">open</a> <a id="743" class="Keyword">import</a> <a id="750" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="760" class="Keyword">open</a> <a id="765" class="Keyword">import</a> <a id="772" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="787" class="Keyword">open</a> <a id="792" class="Keyword">import</a> <a id="799" href="Tools.Nat.html" class="Module">Tools.Nat</a> <a id="809" class="Keyword">hiding</a> <a id="816" class="Symbol">(</a><a id="817" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a><a id="820" class="Symbol">)</a>
<a id="822" class="Keyword">open</a> <a id="827" class="Keyword">import</a> <a id="834" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="848" class="Keyword">open</a> <a id="853" class="Keyword">import</a> <a id="860" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="888" class="Keyword">open</a> <a id="893" class="Keyword">import</a> <a id="900" href="Tools.Relation.html" class="Module">Tools.Relation</a>

<a id="916" class="Keyword">open</a> <a id="921" class="Keyword">import</a> <a id="928" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="947" href="Graded.Heap.Untyped.html#391" class="Bound">M</a> <a id="949" class="Keyword">hiding</a> <a id="956" class="Symbol">(</a><a id="957" href="Definition.Untyped.html#12129" class="Function">head</a><a id="961" class="Symbol">)</a>
<a id="963" class="Keyword">open</a> <a id="968" class="Keyword">import</a> <a id="975" href="Graded.Modality.Nr-instances.html" class="Module">Graded.Modality.Nr-instances</a>
<a id="1004" class="Keyword">open</a> <a id="1009" class="Keyword">import</a> <a id="1016" href="Graded.Mode.html" class="Module">Graded.Mode</a>
<a id="1028" class="Keyword">open</a> <a id="1033" class="Keyword">import</a> <a id="1040" href="Graded.Modality.Properties.Subtraction.html" class="Module">Graded.Modality.Properties.Subtraction</a> <a id="1079" href="Graded.Modality.html#9573" class="Function">semiring-with-meet</a>
<a id="1098" class="Keyword">open</a> <a id="1103" class="Keyword">import</a> <a id="1110" href="Graded.Usage.Erased-matches.html" class="Module">Graded.Usage.Erased-matches</a>

<a id="1139" class="Keyword">private</a> <a id="1147" class="Keyword">variable</a>
  <a id="1158" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a> <a id="1160" href="Graded.Heap.Untyped.html#1160" class="Generalizable">n′</a> <a id="1163" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="1165" href="Graded.Heap.Untyped.html#1165" class="Generalizable">m′</a> <a id="1168" href="Graded.Heap.Untyped.html#1168" class="Generalizable">m″</a> <a id="1171" href="Graded.Heap.Untyped.html#1171" class="Generalizable">n″</a> <a id="1174" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="1176" class="Symbol">:</a> <a id="1178" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="1184" href="Graded.Heap.Untyped.html#1184" class="Generalizable">Γ</a> <a id="1186" class="Symbol">:</a> <a id="1188" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="1192" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1197" class="Symbol">_</a>
  <a id="1201" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="1203" href="Graded.Heap.Untyped.html#1203" class="Generalizable">t′</a> <a id="1206" href="Graded.Heap.Untyped.html#1206" class="Generalizable">t₁</a> <a id="1209" href="Graded.Heap.Untyped.html#1209" class="Generalizable">t₂</a> <a id="1212" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a> <a id="1214" href="Graded.Heap.Untyped.html#1214" class="Generalizable">v</a> <a id="1216" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="1218" href="Graded.Heap.Untyped.html#1218" class="Generalizable">B</a> <a id="1220" class="Symbol">:</a> <a id="1222" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1227" class="Symbol">_</a>
  <a id="1231" href="Graded.Heap.Untyped.html#1231" class="Generalizable">x</a> <a id="1233" class="Symbol">:</a> <a id="1235" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a> <a id="1239" class="Symbol">_</a>
  <a id="1243" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="1245" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="1247" href="Graded.Heap.Untyped.html#1247" class="Generalizable">r</a> <a id="1249" href="Graded.Heap.Untyped.html#1249" class="Generalizable">q′</a> <a id="1252" href="Graded.Heap.Untyped.html#1252" class="Generalizable">q″</a> <a id="1255" class="Symbol">:</a> <a id="1257" href="Graded.Heap.Untyped.html#391" class="Bound">M</a>
  <a id="1261" href="Graded.Heap.Untyped.html#1261" class="Generalizable">s</a> <a id="1263" class="Symbol">:</a> <a id="1265" href="Definition.Untyped.NotParametrised.html#1964" class="Datatype">Strength</a>
  <a id="1276" href="Graded.Heap.Untyped.html#1276" class="Generalizable">b</a> <a id="1278" class="Symbol">:</a> <a id="1280" href="Definition.Untyped.NotParametrised.html#2027" class="Datatype">BinderMode</a>
  <a id="1293" href="Graded.Heap.Untyped.html#1293" class="Generalizable">l</a> <a id="1295" class="Symbol">:</a> <a id="1297" href="Definition.Untyped.NotParametrised.html#4244" class="Function">Universe-level</a>
  <a id="1314" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="1316" href="Graded.Heap.Untyped.html#1316" class="Generalizable">ρ′</a> <a id="1319" class="Symbol">:</a> <a id="1321" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="1324" class="Symbol">_</a> <a id="1326" class="Symbol">_</a>

<a id="1329" class="Keyword">opaque</a> <a id="1336" class="Keyword">instance</a>
  <a id="factoring-nr′"></a><a id="1347" href="Graded.Heap.Untyped.html#1347" class="Function">factoring-nr′</a> <a id="1361" class="Symbol">:</a>
    <a id="1367" class="Symbol">⦃</a> <a id="1369" href="Graded.Heap.Untyped.html#1369" class="Bound">has-nr</a> <a id="1376" class="Symbol">:</a> <a id="1378" href="Graded.Usage.Restrictions.html#3514" class="Function">Nr-available</a> <a id="1391" class="Symbol">⦄</a> <a id="1393" class="Symbol">→</a>
    <a id="1399" href="Graded.Modality.html#7108" class="Record">Is-factoring-nr</a> <a id="1415" class="Symbol">_</a> <a id="1417" class="Symbol">(</a><a id="1418" href="Graded.Usage.Restrictions.Natrec.html#2401" class="Function">Natrec-mode-Has-nr</a> <a id="1437" href="Graded.Heap.Untyped.html#405" class="Bound">𝕄</a> <a id="1439" href="Graded.Heap.Untyped.html#1369" class="Bound">has-nr</a><a id="1445" class="Symbol">)</a>
  <a id="1449" href="Graded.Heap.Untyped.html#1347" class="Function">factoring-nr′</a> <a id="1463" class="Symbol">⦃</a> <a id="1465" href="Graded.Heap.Untyped.html#1465" class="Bound">has-nr</a> <a id="1472" class="Symbol">⦄</a> <a id="1474" class="Symbol">=</a> <a id="1476" href="Graded.Heap.Untyped.html#581" class="Bound">factoring-nr</a> <a id="1489" class="Symbol">⦃</a> <a id="1491" href="Graded.Heap.Untyped.html#1465" class="Bound">has-nr</a> <a id="1498" class="Symbol">⦄</a>

<a id="1501" class="Comment">------------------------------------------------------------------------</a>
<a id="1574" class="Comment">-- Pointers, closures and environments</a>

<a id="1614" class="Comment">-- Pointers as de Bruijn indices</a>

<a id="Ptr"></a><a id="1648" href="Graded.Heap.Untyped.html#1648" class="Function">Ptr</a> <a id="1652" class="Symbol">:</a> <a id="1654" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a> <a id="1658" class="Symbol">→</a> <a id="1660" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1664" href="Graded.Heap.Untyped.html#1648" class="Function">Ptr</a> <a id="1668" class="Symbol">=</a> <a id="1670" href="Data.Fin.Base.html#1159" class="Datatype">Fin</a>

<a id="1675" class="Keyword">pattern</a> <a id="y0"></a><a id="1683" href="Graded.Heap.Untyped.html#1683" class="InductiveConstructor">y0</a> <a id="1686" class="Symbol">=</a> <a id="1688" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a>

<a id="1692" class="Comment">-- Heap entries, containing a term and a weakening, translating variable</a>
<a id="1765" class="Comment">-- indices to pointer indices.</a>
<a id="1796" class="Comment">-- Indexed by the size of the heap and the number of free variables of</a>
<a id="1867" class="Comment">-- the term</a>

<a id="Entry"></a><a id="1880" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="1886" class="Symbol">:</a> <a id="1888" class="Symbol">(</a><a id="1889" href="Graded.Heap.Untyped.html#1889" class="Bound">m</a> <a id="1891" href="Graded.Heap.Untyped.html#1891" class="Bound">n</a> <a id="1893" class="Symbol">:</a> <a id="1895" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="1898" class="Symbol">)</a> <a id="1900" class="Symbol">→</a> <a id="1902" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1906" href="Graded.Heap.Untyped.html#387" class="Bound">a</a>
<a id="1908" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="1914" href="Graded.Heap.Untyped.html#1914" class="Bound">m</a> <a id="1916" href="Graded.Heap.Untyped.html#1916" class="Bound">n</a> <a id="1918" class="Symbol">=</a> <a id="1920" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1925" href="Graded.Heap.Untyped.html#1916" class="Bound">n</a> <a id="1927" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1929" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="1932" href="Graded.Heap.Untyped.html#1914" class="Bound">m</a> <a id="1934" href="Graded.Heap.Untyped.html#1916" class="Bound">n</a>

<a id="1937" class="Comment">-- Entires with a grade</a>

<a id="Entryₘ"></a><a id="1962" href="Graded.Heap.Untyped.html#1962" class="Function">Entryₘ</a> <a id="1969" class="Symbol">:</a> <a id="1971" class="Symbol">(</a><a id="1972" href="Graded.Heap.Untyped.html#1972" class="Bound">m</a> <a id="1974" href="Graded.Heap.Untyped.html#1974" class="Bound">n</a> <a id="1976" class="Symbol">:</a> <a id="1978" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="1981" class="Symbol">)</a> <a id="1983" class="Symbol">→</a> <a id="1985" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1989" href="Graded.Heap.Untyped.html#387" class="Bound">a</a>
<a id="1991" href="Graded.Heap.Untyped.html#1962" class="Function">Entryₘ</a> <a id="1998" href="Graded.Heap.Untyped.html#1998" class="Bound">m</a> <a id="2000" href="Graded.Heap.Untyped.html#2000" class="Bound">n</a> <a id="2002" class="Symbol">=</a> <a id="2004" href="Graded.Heap.Untyped.html#391" class="Bound">M</a> <a id="2006" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2008" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="2014" href="Graded.Heap.Untyped.html#1998" class="Bound">m</a> <a id="2016" href="Graded.Heap.Untyped.html#2000" class="Bound">n</a>

<a id="2019" class="Comment">-- Weakening of entries</a>

<a id="wkᵉⁿ"></a><a id="2044" href="Graded.Heap.Untyped.html#2044" class="Function">wkᵉⁿ</a> <a id="2049" class="Symbol">:</a> <a id="2051" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="2054" href="Graded.Heap.Untyped.html#1165" class="Generalizable">m′</a> <a id="2057" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="2059" class="Symbol">→</a> <a id="2061" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="2067" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="2069" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a> <a id="2071" class="Symbol">→</a> <a id="2073" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="2079" href="Graded.Heap.Untyped.html#1165" class="Generalizable">m′</a> <a id="2082" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a>
<a id="2084" href="Graded.Heap.Untyped.html#2044" class="Function">wkᵉⁿ</a> <a id="2089" href="Graded.Heap.Untyped.html#2089" class="Bound">ρ</a> <a id="2091" class="Symbol">(</a><a id="2092" href="Graded.Heap.Untyped.html#2092" class="Bound">t</a> <a id="2094" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2096" href="Graded.Heap.Untyped.html#2096" class="Bound">E</a><a id="2097" class="Symbol">)</a> <a id="2099" class="Symbol">=</a> <a id="2101" href="Graded.Heap.Untyped.html#2092" class="Bound">t</a> <a id="2103" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2105" href="Graded.Heap.Untyped.html#2089" class="Bound">ρ</a> <a id="2107" href="Definition.Untyped.NotParametrised.html#3317" class="Function Operator">•</a> <a id="2109" href="Graded.Heap.Untyped.html#2096" class="Bound">E</a>

<a id="wk1ᵉⁿ"></a><a id="2112" href="Graded.Heap.Untyped.html#2112" class="Function">wk1ᵉⁿ</a> <a id="2118" class="Symbol">:</a> <a id="2120" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="2126" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="2128" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a> <a id="2130" class="Symbol">→</a> <a id="2132" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="2138" class="Symbol">(</a><a id="2139" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="2142" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="2143" class="Symbol">)</a> <a id="2145" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a>
<a id="2147" href="Graded.Heap.Untyped.html#2112" class="Function">wk1ᵉⁿ</a> <a id="2153" class="Symbol">=</a> <a id="2155" href="Graded.Heap.Untyped.html#2044" class="Function">wkᵉⁿ</a> <a id="2160" class="Symbol">(</a><a id="2161" href="Definition.Untyped.NotParametrised.html#3041" class="InductiveConstructor">step</a> <a id="2166" href="Definition.Untyped.NotParametrised.html#2977" class="InductiveConstructor">id</a><a id="2168" class="Symbol">)</a>

<a id="2171" class="Comment">------------------------------------------------------------------------</a>
<a id="2244" class="Comment">-- Eliminators and Evaluation stacks</a>

<a id="2282" class="Comment">-- Eliminators, indexed by the size of the heap.</a>
<a id="2331" class="Comment">-- The successor contructor is also treated as en eliminator when</a>
<a id="2397" class="Comment">-- evaluating under it.</a>

<a id="2422" class="Keyword">data</a> <a id="Elim"></a><a id="2427" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="2432" class="Symbol">(</a><a id="2433" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a> <a id="2435" class="Symbol">:</a> <a id="2437" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="2440" class="Symbol">)</a> <a id="2442" class="Symbol">:</a> <a id="2444" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="2448" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="2450" class="Keyword">where</a>
  <a id="Elim.∘ₑ"></a><a id="2458" href="Graded.Heap.Untyped.html#2458" class="InductiveConstructor">∘ₑ</a>        <a id="2468" class="Symbol">:</a> <a id="2470" class="Symbol">(</a><a id="2471" href="Graded.Heap.Untyped.html#2471" class="Bound">p</a> <a id="2473" class="Symbol">:</a> <a id="2475" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="2476" class="Symbol">)</a> <a id="2478" class="Symbol">(</a><a id="2479" href="Graded.Heap.Untyped.html#2479" class="Bound">u</a> <a id="2481" class="Symbol">:</a> <a id="2483" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2488" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2489" class="Symbol">)</a> <a id="2491" class="Symbol">(</a><a id="2492" href="Graded.Heap.Untyped.html#2492" class="Bound">ρ</a> <a id="2494" class="Symbol">:</a> <a id="2496" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="2499" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a> <a id="2501" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2502" class="Symbol">)</a> <a id="2504" class="Symbol">→</a> <a id="2506" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="2511" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a>
  <a id="Elim.fstₑ"></a><a id="2515" href="Graded.Heap.Untyped.html#2515" class="InductiveConstructor">fstₑ</a>      <a id="2525" class="Symbol">:</a> <a id="2527" href="Graded.Heap.Untyped.html#391" class="Bound">M</a> <a id="2529" class="Symbol">→</a> <a id="2531" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="2536" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a>
  <a id="Elim.sndₑ"></a><a id="2540" href="Graded.Heap.Untyped.html#2540" class="InductiveConstructor">sndₑ</a>      <a id="2550" class="Symbol">:</a> <a id="2552" href="Graded.Heap.Untyped.html#391" class="Bound">M</a> <a id="2554" class="Symbol">→</a> <a id="2556" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="2561" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a>
  <a id="Elim.prodrecₑ"></a><a id="2565" href="Graded.Heap.Untyped.html#2565" class="InductiveConstructor">prodrecₑ</a>  <a id="2575" class="Symbol">:</a> <a id="2577" class="Symbol">(</a><a id="2578" href="Graded.Heap.Untyped.html#2578" class="Bound">r</a> <a id="2580" href="Graded.Heap.Untyped.html#2580" class="Bound">p</a> <a id="2582" href="Graded.Heap.Untyped.html#2582" class="Bound">q</a> <a id="2584" class="Symbol">:</a> <a id="2586" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="2587" class="Symbol">)</a> <a id="2589" class="Symbol">(</a><a id="2590" href="Graded.Heap.Untyped.html#2590" class="Bound">A</a> <a id="2592" class="Symbol">:</a> <a id="2594" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2599" class="Symbol">(</a><a id="2600" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="2603" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2604" class="Symbol">))</a> <a id="2607" class="Symbol">(</a><a id="2608" href="Graded.Heap.Untyped.html#2608" class="Bound">u</a> <a id="2610" class="Symbol">:</a> <a id="2612" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2617" class="Symbol">(</a><a id="2618" href="Tools.Nat.html#2191" class="InductiveConstructor">2+</a> <a id="2621" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2622" class="Symbol">))</a>
              <a id="2639" class="Symbol">(</a><a id="2640" href="Graded.Heap.Untyped.html#2640" class="Bound">ρ</a> <a id="2642" class="Symbol">:</a> <a id="2644" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="2647" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a> <a id="2649" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2650" class="Symbol">)</a> <a id="2652" class="Symbol">→</a> <a id="2654" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="2659" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a>
  <a id="Elim.natrecₑ"></a><a id="2663" href="Graded.Heap.Untyped.html#2663" class="InductiveConstructor">natrecₑ</a>   <a id="2673" class="Symbol">:</a> <a id="2675" class="Symbol">(</a><a id="2676" href="Graded.Heap.Untyped.html#2676" class="Bound">p</a> <a id="2678" href="Graded.Heap.Untyped.html#2678" class="Bound">q</a> <a id="2680" href="Graded.Heap.Untyped.html#2680" class="Bound">r</a> <a id="2682" href="Graded.Heap.Untyped.html#2682" class="Bound">q′</a> <a id="2685" class="Symbol">:</a> <a id="2687" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="2688" class="Symbol">)</a> <a id="2690" class="Symbol">(</a><a id="2691" href="Graded.Heap.Untyped.html#2691" class="Bound">A</a> <a id="2693" class="Symbol">:</a> <a id="2695" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2700" class="Symbol">(</a><a id="2701" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="2704" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2705" class="Symbol">))</a> <a id="2708" class="Symbol">(</a><a id="2709" href="Graded.Heap.Untyped.html#2709" class="Bound">z</a> <a id="2711" class="Symbol">:</a> <a id="2713" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2718" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2719" class="Symbol">)</a>
              <a id="2735" class="Symbol">(</a><a id="2736" href="Graded.Heap.Untyped.html#2736" class="Bound">s</a> <a id="2738" class="Symbol">:</a> <a id="2740" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2745" class="Symbol">(</a><a id="2746" href="Tools.Nat.html#2191" class="InductiveConstructor">2+</a> <a id="2749" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2750" class="Symbol">))</a> <a id="2753" class="Symbol">(</a><a id="2754" href="Graded.Heap.Untyped.html#2754" class="Bound">ρ</a> <a id="2756" class="Symbol">:</a> <a id="2758" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="2761" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a> <a id="2763" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2764" class="Symbol">)</a> <a id="2766" class="Symbol">→</a> <a id="2768" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="2773" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a>
  <a id="Elim.unitrecₑ"></a><a id="2777" href="Graded.Heap.Untyped.html#2777" class="InductiveConstructor">unitrecₑ</a>  <a id="2787" class="Symbol">:</a> <a id="2789" class="Symbol">(</a><a id="2790" href="Graded.Heap.Untyped.html#2790" class="Bound">l</a> <a id="2792" class="Symbol">:</a> <a id="2794" href="Definition.Untyped.NotParametrised.html#4244" class="Function">Universe-level</a><a id="2808" class="Symbol">)</a> <a id="2810" class="Symbol">(</a><a id="2811" href="Graded.Heap.Untyped.html#2811" class="Bound">p</a> <a id="2813" href="Graded.Heap.Untyped.html#2813" class="Bound">q</a> <a id="2815" class="Symbol">:</a> <a id="2817" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="2818" class="Symbol">)</a> <a id="2820" class="Symbol">(</a><a id="2821" href="Graded.Heap.Untyped.html#2821" class="Bound">A</a> <a id="2823" class="Symbol">:</a> <a id="2825" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2830" class="Symbol">(</a><a id="2831" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="2834" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2835" class="Symbol">))</a>
              <a id="2852" class="Symbol">(</a><a id="2853" href="Graded.Heap.Untyped.html#2853" class="Bound">u</a> <a id="2855" class="Symbol">:</a> <a id="2857" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2862" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2863" class="Symbol">)</a> <a id="2865" class="Symbol">(</a><a id="2866" href="Graded.Heap.Untyped.html#2866" class="Bound">ρ</a> <a id="2868" class="Symbol">:</a> <a id="2870" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="2873" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a> <a id="2875" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2876" class="Symbol">)</a> <a id="2878" class="Symbol">→</a> <a id="2880" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="2885" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a>
  <a id="Elim.emptyrecₑ"></a><a id="2889" href="Graded.Heap.Untyped.html#2889" class="InductiveConstructor">emptyrecₑ</a> <a id="2899" class="Symbol">:</a> <a id="2901" class="Symbol">(</a><a id="2902" href="Graded.Heap.Untyped.html#2902" class="Bound">p</a> <a id="2904" class="Symbol">:</a> <a id="2906" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="2907" class="Symbol">)</a> <a id="2909" class="Symbol">(</a><a id="2910" href="Graded.Heap.Untyped.html#2910" class="Bound">A</a> <a id="2912" class="Symbol">:</a> <a id="2914" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2919" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2920" class="Symbol">)</a> <a id="2922" class="Symbol">(</a><a id="2923" href="Graded.Heap.Untyped.html#2923" class="Bound">ρ</a> <a id="2925" class="Symbol">:</a> <a id="2927" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="2930" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a> <a id="2932" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2933" class="Symbol">)</a> <a id="2935" class="Symbol">→</a> <a id="2937" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="2942" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a>
  <a id="Elim.Jₑ"></a><a id="2946" href="Graded.Heap.Untyped.html#2946" class="InductiveConstructor">Jₑ</a>        <a id="2956" class="Symbol">:</a> <a id="2958" class="Symbol">(</a><a id="2959" href="Graded.Heap.Untyped.html#2959" class="Bound">p</a> <a id="2961" href="Graded.Heap.Untyped.html#2961" class="Bound">q</a> <a id="2963" class="Symbol">:</a> <a id="2965" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="2966" class="Symbol">)</a> <a id="2968" class="Symbol">(</a><a id="2969" href="Graded.Heap.Untyped.html#2969" class="Bound">A</a> <a id="2971" href="Graded.Heap.Untyped.html#2971" class="Bound">t</a> <a id="2973" class="Symbol">:</a> <a id="2975" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2980" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2981" class="Symbol">)</a> <a id="2983" class="Symbol">(</a><a id="2984" href="Graded.Heap.Untyped.html#2984" class="Bound">B</a> <a id="2986" class="Symbol">:</a> <a id="2988" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2993" class="Symbol">(</a><a id="2994" href="Tools.Nat.html#2191" class="InductiveConstructor">2+</a> <a id="2997" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="2998" class="Symbol">))</a>
              <a id="3015" class="Symbol">(</a><a id="3016" href="Graded.Heap.Untyped.html#3016" class="Bound">u</a> <a id="3018" href="Graded.Heap.Untyped.html#3018" class="Bound">v</a> <a id="3020" class="Symbol">:</a> <a id="3022" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3027" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="3028" class="Symbol">)</a> <a id="3030" class="Symbol">(</a><a id="3031" href="Graded.Heap.Untyped.html#3031" class="Bound">ρ</a> <a id="3033" class="Symbol">:</a> <a id="3035" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="3038" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a> <a id="3040" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="3041" class="Symbol">)</a> <a id="3043" class="Symbol">→</a> <a id="3045" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="3050" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a>
  <a id="Elim.Kₑ"></a><a id="3054" href="Graded.Heap.Untyped.html#3054" class="InductiveConstructor">Kₑ</a>        <a id="3064" class="Symbol">:</a> <a id="3066" class="Symbol">(</a><a id="3067" href="Graded.Heap.Untyped.html#3067" class="Bound">p</a> <a id="3069" class="Symbol">:</a> <a id="3071" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="3072" class="Symbol">)</a> <a id="3074" class="Symbol">(</a><a id="3075" href="Graded.Heap.Untyped.html#3075" class="Bound">A</a> <a id="3077" href="Graded.Heap.Untyped.html#3077" class="Bound">t</a> <a id="3079" class="Symbol">:</a> <a id="3081" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3086" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="3087" class="Symbol">)</a> <a id="3089" class="Symbol">(</a><a id="3090" href="Graded.Heap.Untyped.html#3090" class="Bound">B</a> <a id="3092" class="Symbol">:</a> <a id="3094" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3099" class="Symbol">(</a><a id="3100" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="3103" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="3104" class="Symbol">))</a>
              <a id="3121" class="Symbol">(</a><a id="3122" href="Graded.Heap.Untyped.html#3122" class="Bound">u</a> <a id="3124" class="Symbol">:</a> <a id="3126" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3131" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="3132" class="Symbol">)</a> <a id="3134" class="Symbol">(</a><a id="3135" href="Graded.Heap.Untyped.html#3135" class="Bound">ρ</a> <a id="3137" class="Symbol">:</a> <a id="3139" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="3142" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a> <a id="3144" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="3145" class="Symbol">)</a> <a id="3147" class="Symbol">→</a> <a id="3149" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="3154" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a>
  <a id="Elim.[]-congₑ"></a><a id="3158" href="Graded.Heap.Untyped.html#3158" class="InductiveConstructor">[]-congₑ</a>  <a id="3168" class="Symbol">:</a> <a id="3170" class="Symbol">(</a><a id="3171" href="Graded.Heap.Untyped.html#3171" class="Bound">s</a> <a id="3173" class="Symbol">:</a> <a id="3175" href="Definition.Untyped.NotParametrised.html#1964" class="Datatype">Strength</a><a id="3183" class="Symbol">)</a> <a id="3185" class="Symbol">(</a><a id="3186" href="Graded.Heap.Untyped.html#3186" class="Bound">A</a> <a id="3188" href="Graded.Heap.Untyped.html#3188" class="Bound">t</a> <a id="3190" href="Graded.Heap.Untyped.html#3190" class="Bound">u</a> <a id="3192" class="Symbol">:</a> <a id="3194" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="3199" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="3200" class="Symbol">)</a> <a id="3202" class="Symbol">(</a><a id="3203" href="Graded.Heap.Untyped.html#3203" class="Bound">ρ</a> <a id="3205" class="Symbol">:</a> <a id="3207" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="3210" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a> <a id="3212" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="3213" class="Symbol">)</a> <a id="3215" class="Symbol">→</a> <a id="3217" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="3222" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a>
  <a id="Elim.sucₑ"></a><a id="3226" href="Graded.Heap.Untyped.html#3226" class="InductiveConstructor">sucₑ</a>      <a id="3236" class="Symbol">:</a> <a id="3238" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="3243" href="Graded.Heap.Untyped.html#2433" class="Bound">m</a>

<a id="3246" class="Keyword">private</a> <a id="3254" class="Keyword">variable</a>
  <a id="3265" href="Graded.Heap.Untyped.html#3265" class="Generalizable">e</a> <a id="3267" href="Graded.Heap.Untyped.html#3267" class="Generalizable">e′</a> <a id="3270" class="Symbol">:</a> <a id="3272" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="3277" class="Symbol">_</a>

<a id="3280" class="Comment">-- A predicate on grades indicating whether the grades on</a>
<a id="3338" class="Comment">-- natrecₑ are &quot;compatible&quot; for the chosen natrec-mode.</a>

<a id="3395" class="Keyword">data</a> <a id="Ok-natrec-multiplicity"></a><a id="3400" href="Graded.Heap.Untyped.html#3400" class="Datatype">Ok-natrec-multiplicity</a> <a id="3423" class="Symbol">(</a><a id="3424" href="Graded.Heap.Untyped.html#3424" class="Bound">q</a> <a id="3426" href="Graded.Heap.Untyped.html#3426" class="Bound">p</a> <a id="3428" href="Graded.Heap.Untyped.html#3428" class="Bound">r</a> <a id="3430" class="Symbol">:</a> <a id="3432" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="3433" class="Symbol">)</a> <a id="3435" class="Symbol">:</a> <a id="3437" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3441" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="3443" class="Keyword">where</a>
  <a id="Ok-natrec-multiplicity.has-nr"></a><a id="3451" href="Graded.Heap.Untyped.html#3451" class="InductiveConstructor">has-nr</a> <a id="3458" class="Symbol">:</a>
    <a id="3464" class="Symbol">⦃</a> <a id="3466" href="Graded.Heap.Untyped.html#3466" class="Bound">has-nr</a> <a id="3473" class="Symbol">:</a> <a id="3475" href="Graded.Usage.Restrictions.html#3514" class="Function">Nr-available</a> <a id="3488" class="Symbol">⦄</a> <a id="3490" class="Symbol">→</a>
    <a id="3496" href="Graded.Heap.Untyped.html#3424" class="Bound">q</a> <a id="3498" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3500" href="Graded.Modality.html#7275" class="Field">nr₂</a> <a id="3504" href="Graded.Heap.Untyped.html#3426" class="Bound">p</a> <a id="3506" href="Graded.Heap.Untyped.html#3428" class="Bound">r</a> <a id="3508" class="Symbol">→</a> <a id="3510" href="Graded.Heap.Untyped.html#3400" class="Datatype">Ok-natrec-multiplicity</a> <a id="3533" href="Graded.Heap.Untyped.html#3424" class="Bound">q</a> <a id="3535" href="Graded.Heap.Untyped.html#3426" class="Bound">p</a> <a id="3537" href="Graded.Heap.Untyped.html#3428" class="Bound">r</a>
  <a id="Ok-natrec-multiplicity.no-nr"></a><a id="3541" href="Graded.Heap.Untyped.html#3541" class="InductiveConstructor">no-nr</a> <a id="3547" class="Symbol">:</a>
    <a id="3553" class="Symbol">⦃</a> <a id="3555" href="Graded.Heap.Untyped.html#3555" class="Bound">no-nr</a> <a id="3561" class="Symbol">:</a> <a id="3563" href="Graded.Usage.Restrictions.html#3665" class="Function">Nr-not-available-GLB</a> <a id="3584" class="Symbol">⦄</a> <a id="3586" class="Symbol">→</a>
    <a id="3592" href="Graded.Modality.html#2421" class="Function">Greatest-lower-bound</a> <a id="3613" href="Graded.Heap.Untyped.html#3424" class="Bound">q</a> <a id="3615" class="Symbol">(</a><a id="3616" href="Graded.Modality.html#2630" class="Function">nrᵢ</a> <a id="3620" href="Graded.Heap.Untyped.html#3428" class="Bound">r</a> <a id="3622" href="Graded.Modality.html#1014" class="Function">𝟙</a> <a id="3624" href="Graded.Heap.Untyped.html#3426" class="Bound">p</a><a id="3625" class="Symbol">)</a> <a id="3627" class="Symbol">→</a>
    <a id="3633" href="Graded.Heap.Untyped.html#3400" class="Datatype">Ok-natrec-multiplicity</a> <a id="3656" href="Graded.Heap.Untyped.html#3424" class="Bound">q</a> <a id="3658" href="Graded.Heap.Untyped.html#3426" class="Bound">p</a> <a id="3660" href="Graded.Heap.Untyped.html#3428" class="Bound">r</a>

<a id="3663" class="Comment">-- Weakening of eliminators</a>

<a id="wkᵉ"></a><a id="3692" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="3696" class="Symbol">:</a> <a id="3698" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="3701" href="Graded.Heap.Untyped.html#1165" class="Generalizable">m′</a> <a id="3704" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="3706" class="Symbol">→</a> <a id="3708" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="3713" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="3715" class="Symbol">→</a> <a id="3717" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="3722" href="Graded.Heap.Untyped.html#1165" class="Generalizable">m′</a>
<a id="3725" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="3729" href="Graded.Heap.Untyped.html#3729" class="Bound">ρ</a> <a id="3731" class="Symbol">(</a><a id="3732" href="Graded.Heap.Untyped.html#2458" class="InductiveConstructor">∘ₑ</a> <a id="3735" href="Graded.Heap.Untyped.html#3735" class="Bound">p</a> <a id="3737" href="Graded.Heap.Untyped.html#3737" class="Bound">u</a> <a id="3739" href="Graded.Heap.Untyped.html#3739" class="Bound">ρ′</a><a id="3741" class="Symbol">)</a> <a id="3743" class="Symbol">=</a> <a id="3745" href="Graded.Heap.Untyped.html#2458" class="InductiveConstructor">∘ₑ</a> <a id="3748" href="Graded.Heap.Untyped.html#3735" class="Bound">p</a> <a id="3750" href="Graded.Heap.Untyped.html#3737" class="Bound">u</a> <a id="3752" class="Symbol">(</a><a id="3753" href="Graded.Heap.Untyped.html#3729" class="Bound">ρ</a> <a id="3755" href="Definition.Untyped.NotParametrised.html#3317" class="Function Operator">•</a> <a id="3757" href="Graded.Heap.Untyped.html#3739" class="Bound">ρ′</a><a id="3759" class="Symbol">)</a>
<a id="3761" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="3765" href="Graded.Heap.Untyped.html#3765" class="Bound">ρ</a> <a id="3767" class="Symbol">(</a><a id="3768" href="Graded.Heap.Untyped.html#2515" class="InductiveConstructor">fstₑ</a> <a id="3773" href="Graded.Heap.Untyped.html#3773" class="Bound">p</a><a id="3774" class="Symbol">)</a> <a id="3776" class="Symbol">=</a> <a id="3778" href="Graded.Heap.Untyped.html#2515" class="InductiveConstructor">fstₑ</a> <a id="3783" href="Graded.Heap.Untyped.html#3773" class="Bound">p</a>
<a id="3785" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="3789" href="Graded.Heap.Untyped.html#3789" class="Bound">ρ</a> <a id="3791" class="Symbol">(</a><a id="3792" href="Graded.Heap.Untyped.html#2540" class="InductiveConstructor">sndₑ</a> <a id="3797" href="Graded.Heap.Untyped.html#3797" class="Bound">p</a><a id="3798" class="Symbol">)</a> <a id="3800" class="Symbol">=</a> <a id="3802" href="Graded.Heap.Untyped.html#2540" class="InductiveConstructor">sndₑ</a> <a id="3807" href="Graded.Heap.Untyped.html#3797" class="Bound">p</a>
<a id="3809" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="3813" href="Graded.Heap.Untyped.html#3813" class="Bound">ρ</a> <a id="3815" class="Symbol">(</a><a id="3816" href="Graded.Heap.Untyped.html#2663" class="InductiveConstructor">natrecₑ</a> <a id="3824" href="Graded.Heap.Untyped.html#3824" class="Bound">p</a> <a id="3826" href="Graded.Heap.Untyped.html#3826" class="Bound">q</a> <a id="3828" href="Graded.Heap.Untyped.html#3828" class="Bound">r</a> <a id="3830" href="Graded.Heap.Untyped.html#3830" class="Bound">x</a> <a id="3832" href="Graded.Heap.Untyped.html#3832" class="Bound">A</a> <a id="3834" href="Graded.Heap.Untyped.html#3834" class="Bound">z</a> <a id="3836" href="Graded.Heap.Untyped.html#3836" class="Bound">s</a> <a id="3838" href="Graded.Heap.Untyped.html#3838" class="Bound">ρ′</a><a id="3840" class="Symbol">)</a> <a id="3842" class="Symbol">=</a> <a id="3844" href="Graded.Heap.Untyped.html#2663" class="InductiveConstructor">natrecₑ</a> <a id="3852" href="Graded.Heap.Untyped.html#3824" class="Bound">p</a> <a id="3854" href="Graded.Heap.Untyped.html#3826" class="Bound">q</a> <a id="3856" href="Graded.Heap.Untyped.html#3828" class="Bound">r</a> <a id="3858" href="Graded.Heap.Untyped.html#3830" class="Bound">x</a> <a id="3860" href="Graded.Heap.Untyped.html#3832" class="Bound">A</a> <a id="3862" href="Graded.Heap.Untyped.html#3834" class="Bound">z</a> <a id="3864" href="Graded.Heap.Untyped.html#3836" class="Bound">s</a> <a id="3866" class="Symbol">(</a><a id="3867" href="Graded.Heap.Untyped.html#3813" class="Bound">ρ</a> <a id="3869" href="Definition.Untyped.NotParametrised.html#3317" class="Function Operator">•</a> <a id="3871" href="Graded.Heap.Untyped.html#3838" class="Bound">ρ′</a><a id="3873" class="Symbol">)</a>
<a id="3875" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="3879" href="Graded.Heap.Untyped.html#3879" class="Bound">ρ</a> <a id="3881" class="Symbol">(</a><a id="3882" href="Graded.Heap.Untyped.html#2565" class="InductiveConstructor">prodrecₑ</a> <a id="3891" href="Graded.Heap.Untyped.html#3891" class="Bound">r</a> <a id="3893" href="Graded.Heap.Untyped.html#3893" class="Bound">p</a> <a id="3895" href="Graded.Heap.Untyped.html#3895" class="Bound">q</a> <a id="3897" href="Graded.Heap.Untyped.html#3897" class="Bound">A</a> <a id="3899" href="Graded.Heap.Untyped.html#3899" class="Bound">u</a> <a id="3901" href="Graded.Heap.Untyped.html#3901" class="Bound">ρ′</a><a id="3903" class="Symbol">)</a> <a id="3905" class="Symbol">=</a> <a id="3907" href="Graded.Heap.Untyped.html#2565" class="InductiveConstructor">prodrecₑ</a> <a id="3916" href="Graded.Heap.Untyped.html#3891" class="Bound">r</a> <a id="3918" href="Graded.Heap.Untyped.html#3893" class="Bound">p</a> <a id="3920" href="Graded.Heap.Untyped.html#3895" class="Bound">q</a> <a id="3922" href="Graded.Heap.Untyped.html#3897" class="Bound">A</a> <a id="3924" href="Graded.Heap.Untyped.html#3899" class="Bound">u</a> <a id="3926" class="Symbol">(</a><a id="3927" href="Graded.Heap.Untyped.html#3879" class="Bound">ρ</a> <a id="3929" href="Definition.Untyped.NotParametrised.html#3317" class="Function Operator">•</a> <a id="3931" href="Graded.Heap.Untyped.html#3901" class="Bound">ρ′</a><a id="3933" class="Symbol">)</a>
<a id="3935" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="3939" href="Graded.Heap.Untyped.html#3939" class="Bound">ρ</a> <a id="3941" class="Symbol">(</a><a id="3942" href="Graded.Heap.Untyped.html#2777" class="InductiveConstructor">unitrecₑ</a> <a id="3951" href="Graded.Heap.Untyped.html#3951" class="Bound">l</a> <a id="3953" href="Graded.Heap.Untyped.html#3953" class="Bound">p</a> <a id="3955" href="Graded.Heap.Untyped.html#3955" class="Bound">q</a> <a id="3957" href="Graded.Heap.Untyped.html#3957" class="Bound">A</a> <a id="3959" href="Graded.Heap.Untyped.html#3959" class="Bound">u</a> <a id="3961" href="Graded.Heap.Untyped.html#3961" class="Bound">ρ′</a><a id="3963" class="Symbol">)</a> <a id="3965" class="Symbol">=</a> <a id="3967" href="Graded.Heap.Untyped.html#2777" class="InductiveConstructor">unitrecₑ</a> <a id="3976" href="Graded.Heap.Untyped.html#3951" class="Bound">l</a> <a id="3978" href="Graded.Heap.Untyped.html#3953" class="Bound">p</a> <a id="3980" href="Graded.Heap.Untyped.html#3955" class="Bound">q</a> <a id="3982" href="Graded.Heap.Untyped.html#3957" class="Bound">A</a> <a id="3984" href="Graded.Heap.Untyped.html#3959" class="Bound">u</a> <a id="3986" class="Symbol">(</a><a id="3987" href="Graded.Heap.Untyped.html#3939" class="Bound">ρ</a> <a id="3989" href="Definition.Untyped.NotParametrised.html#3317" class="Function Operator">•</a> <a id="3991" href="Graded.Heap.Untyped.html#3961" class="Bound">ρ′</a><a id="3993" class="Symbol">)</a>
<a id="3995" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="3999" href="Graded.Heap.Untyped.html#3999" class="Bound">ρ</a> <a id="4001" class="Symbol">(</a><a id="4002" href="Graded.Heap.Untyped.html#2889" class="InductiveConstructor">emptyrecₑ</a> <a id="4012" href="Graded.Heap.Untyped.html#4012" class="Bound">p</a> <a id="4014" href="Graded.Heap.Untyped.html#4014" class="Bound">A</a> <a id="4016" href="Graded.Heap.Untyped.html#4016" class="Bound">ρ′</a><a id="4018" class="Symbol">)</a> <a id="4020" class="Symbol">=</a> <a id="4022" href="Graded.Heap.Untyped.html#2889" class="InductiveConstructor">emptyrecₑ</a> <a id="4032" href="Graded.Heap.Untyped.html#4012" class="Bound">p</a> <a id="4034" href="Graded.Heap.Untyped.html#4014" class="Bound">A</a> <a id="4036" class="Symbol">(</a><a id="4037" href="Graded.Heap.Untyped.html#3999" class="Bound">ρ</a> <a id="4039" href="Definition.Untyped.NotParametrised.html#3317" class="Function Operator">•</a> <a id="4041" href="Graded.Heap.Untyped.html#4016" class="Bound">ρ′</a><a id="4043" class="Symbol">)</a>
<a id="4045" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="4049" href="Graded.Heap.Untyped.html#4049" class="Bound">ρ</a> <a id="4051" class="Symbol">(</a><a id="4052" href="Graded.Heap.Untyped.html#2946" class="InductiveConstructor">Jₑ</a> <a id="4055" href="Graded.Heap.Untyped.html#4055" class="Bound">p</a> <a id="4057" href="Graded.Heap.Untyped.html#4057" class="Bound">q</a> <a id="4059" href="Graded.Heap.Untyped.html#4059" class="Bound">A</a> <a id="4061" href="Graded.Heap.Untyped.html#4061" class="Bound">t</a> <a id="4063" href="Graded.Heap.Untyped.html#4063" class="Bound">B</a> <a id="4065" href="Graded.Heap.Untyped.html#4065" class="Bound">u</a> <a id="4067" href="Graded.Heap.Untyped.html#4067" class="Bound">v</a> <a id="4069" href="Graded.Heap.Untyped.html#4069" class="Bound">ρ′</a><a id="4071" class="Symbol">)</a> <a id="4073" class="Symbol">=</a> <a id="4075" href="Graded.Heap.Untyped.html#2946" class="InductiveConstructor">Jₑ</a> <a id="4078" href="Graded.Heap.Untyped.html#4055" class="Bound">p</a> <a id="4080" href="Graded.Heap.Untyped.html#4057" class="Bound">q</a> <a id="4082" href="Graded.Heap.Untyped.html#4059" class="Bound">A</a> <a id="4084" href="Graded.Heap.Untyped.html#4061" class="Bound">t</a> <a id="4086" href="Graded.Heap.Untyped.html#4063" class="Bound">B</a> <a id="4088" href="Graded.Heap.Untyped.html#4065" class="Bound">u</a> <a id="4090" href="Graded.Heap.Untyped.html#4067" class="Bound">v</a> <a id="4092" class="Symbol">(</a><a id="4093" href="Graded.Heap.Untyped.html#4049" class="Bound">ρ</a> <a id="4095" href="Definition.Untyped.NotParametrised.html#3317" class="Function Operator">•</a> <a id="4097" href="Graded.Heap.Untyped.html#4069" class="Bound">ρ′</a><a id="4099" class="Symbol">)</a>
<a id="4101" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="4105" href="Graded.Heap.Untyped.html#4105" class="Bound">ρ</a> <a id="4107" class="Symbol">(</a><a id="4108" href="Graded.Heap.Untyped.html#3054" class="InductiveConstructor">Kₑ</a> <a id="4111" href="Graded.Heap.Untyped.html#4111" class="Bound">p</a> <a id="4113" href="Graded.Heap.Untyped.html#4113" class="Bound">A</a> <a id="4115" href="Graded.Heap.Untyped.html#4115" class="Bound">t</a> <a id="4117" href="Graded.Heap.Untyped.html#4117" class="Bound">B</a> <a id="4119" href="Graded.Heap.Untyped.html#4119" class="Bound">u</a> <a id="4121" href="Graded.Heap.Untyped.html#4121" class="Bound">ρ′</a><a id="4123" class="Symbol">)</a> <a id="4125" class="Symbol">=</a> <a id="4127" href="Graded.Heap.Untyped.html#3054" class="InductiveConstructor">Kₑ</a> <a id="4130" href="Graded.Heap.Untyped.html#4111" class="Bound">p</a> <a id="4132" href="Graded.Heap.Untyped.html#4113" class="Bound">A</a> <a id="4134" href="Graded.Heap.Untyped.html#4115" class="Bound">t</a> <a id="4136" href="Graded.Heap.Untyped.html#4117" class="Bound">B</a> <a id="4138" href="Graded.Heap.Untyped.html#4119" class="Bound">u</a> <a id="4140" class="Symbol">(</a><a id="4141" href="Graded.Heap.Untyped.html#4105" class="Bound">ρ</a> <a id="4143" href="Definition.Untyped.NotParametrised.html#3317" class="Function Operator">•</a> <a id="4145" href="Graded.Heap.Untyped.html#4121" class="Bound">ρ′</a><a id="4147" class="Symbol">)</a>
<a id="4149" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="4153" href="Graded.Heap.Untyped.html#4153" class="Bound">ρ</a> <a id="4155" class="Symbol">(</a><a id="4156" href="Graded.Heap.Untyped.html#3158" class="InductiveConstructor">[]-congₑ</a> <a id="4165" href="Graded.Heap.Untyped.html#4165" class="Bound">s</a> <a id="4167" href="Graded.Heap.Untyped.html#4167" class="Bound">A</a> <a id="4169" href="Graded.Heap.Untyped.html#4169" class="Bound">t</a> <a id="4171" href="Graded.Heap.Untyped.html#4171" class="Bound">u</a> <a id="4173" href="Graded.Heap.Untyped.html#4173" class="Bound">ρ′</a><a id="4175" class="Symbol">)</a> <a id="4177" class="Symbol">=</a> <a id="4179" href="Graded.Heap.Untyped.html#3158" class="InductiveConstructor">[]-congₑ</a> <a id="4188" href="Graded.Heap.Untyped.html#4165" class="Bound">s</a> <a id="4190" href="Graded.Heap.Untyped.html#4167" class="Bound">A</a> <a id="4192" href="Graded.Heap.Untyped.html#4169" class="Bound">t</a> <a id="4194" href="Graded.Heap.Untyped.html#4171" class="Bound">u</a> <a id="4196" class="Symbol">(</a><a id="4197" href="Graded.Heap.Untyped.html#4153" class="Bound">ρ</a> <a id="4199" href="Definition.Untyped.NotParametrised.html#3317" class="Function Operator">•</a> <a id="4201" href="Graded.Heap.Untyped.html#4173" class="Bound">ρ′</a><a id="4203" class="Symbol">)</a>
<a id="4205" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="4209" href="Graded.Heap.Untyped.html#4209" class="Bound">ρ</a> <a id="4211" href="Graded.Heap.Untyped.html#3226" class="InductiveConstructor">sucₑ</a> <a id="4216" class="Symbol">=</a> <a id="4218" href="Graded.Heap.Untyped.html#3226" class="InductiveConstructor">sucₑ</a>

<a id="wk1ᵉ"></a><a id="4224" href="Graded.Heap.Untyped.html#4224" class="Function">wk1ᵉ</a> <a id="4229" class="Symbol">:</a> <a id="4231" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="4236" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="4238" class="Symbol">→</a> <a id="4240" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="4245" class="Symbol">(</a><a id="4246" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="4249" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="4250" class="Symbol">)</a>
<a id="4252" href="Graded.Heap.Untyped.html#4224" class="Function">wk1ᵉ</a> <a id="4257" class="Symbol">=</a> <a id="4259" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="4263" class="Symbol">(</a><a id="4264" href="Definition.Untyped.NotParametrised.html#3041" class="InductiveConstructor">step</a> <a id="4269" href="Definition.Untyped.NotParametrised.html#2977" class="InductiveConstructor">id</a><a id="4271" class="Symbol">)</a>

<a id="wk2ᵉ"></a><a id="4274" href="Graded.Heap.Untyped.html#4274" class="Function">wk2ᵉ</a> <a id="4279" class="Symbol">:</a> <a id="4281" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="4286" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="4288" class="Symbol">→</a> <a id="4290" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="4295" class="Symbol">(</a><a id="4296" href="Tools.Nat.html#2191" class="InductiveConstructor">2+</a> <a id="4299" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="4300" class="Symbol">)</a>
<a id="4302" href="Graded.Heap.Untyped.html#4274" class="Function">wk2ᵉ</a> <a id="4307" class="Symbol">=</a> <a id="4309" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="4313" class="Symbol">(</a><a id="4314" href="Definition.Untyped.NotParametrised.html#3041" class="InductiveConstructor">step</a> <a id="4319" class="Symbol">(</a><a id="4320" href="Definition.Untyped.NotParametrised.html#3041" class="InductiveConstructor">step</a> <a id="4325" href="Definition.Untyped.NotParametrised.html#2977" class="InductiveConstructor">id</a><a id="4327" class="Symbol">))</a>

<a id="4331" class="Comment">-- The multiplicity of the Jₑ eliminator, depending on which</a>
<a id="4392" class="Comment">-- erased matches are used.</a>

<a id="∣∣ᵉ-J"></a><a id="4421" href="Graded.Heap.Untyped.html#4421" class="Function">∣∣ᵉ-J</a> <a id="4427" class="Symbol">:</a> <a id="4429" href="Graded.Usage.Erased-matches.html#821" class="Datatype">Erased-matches</a> <a id="4444" class="Symbol">→</a> <a id="4446" class="Symbol">(</a><a id="4447" href="Graded.Heap.Untyped.html#4447" class="Bound">p</a> <a id="4449" href="Graded.Heap.Untyped.html#4449" class="Bound">q</a> <a id="4451" class="Symbol">:</a> <a id="4453" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="4454" class="Symbol">)</a> <a id="4456" class="Symbol">→</a> <a id="4458" href="Graded.Heap.Untyped.html#391" class="Bound">M</a>
<a id="4460" href="Graded.Heap.Untyped.html#4421" class="Function">∣∣ᵉ-J</a> <a id="4466" href="Graded.Usage.Erased-matches.html#850" class="InductiveConstructor">none</a> <a id="4471" class="Symbol">_</a> <a id="4473" class="Symbol">_</a> <a id="4475" class="Symbol">=</a> <a id="4477" href="Graded.Modality.html#1016" class="Function">ω</a>
<a id="4479" href="Graded.Heap.Untyped.html#4421" class="Function">∣∣ᵉ-J</a> <a id="4485" href="Graded.Usage.Erased-matches.html#935" class="InductiveConstructor">all</a>  <a id="4490" class="Symbol">_</a> <a id="4492" class="Symbol">_</a> <a id="4494" class="Symbol">=</a> <a id="4496" href="Graded.Modality.html#1012" class="Function">𝟘</a>
<a id="4498" href="Graded.Heap.Untyped.html#4421" class="Function">∣∣ᵉ-J</a> <a id="4504" href="Graded.Usage.Erased-matches.html#964" class="InductiveConstructor">some</a> <a id="4509" href="Graded.Heap.Untyped.html#4509" class="Bound">p</a> <a id="4511" href="Graded.Heap.Untyped.html#4511" class="Bound">q</a> <a id="4513" class="Symbol">=</a>
  <a id="4517" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="4522" href="Graded.Modality.html#1881" class="Function">is-𝟘?</a> <a id="4528" href="Graded.Heap.Untyped.html#4509" class="Bound">p</a> <a id="4530" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="4533" class="Symbol">λ</a> <a id="4535" class="Keyword">where</a>
    <a id="4545" class="Symbol">(</a><a id="4546" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="4549" class="Symbol">_)</a> <a id="4552" class="Symbol">→</a> <a id="4554" href="Graded.Modality.html#1016" class="Function">ω</a>
    <a id="4560" class="Symbol">(</a><a id="4561" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="4565" class="Symbol">_)</a> <a id="4568" class="Symbol">→</a> <a id="4570" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="4575" href="Graded.Modality.html#1881" class="Function">is-𝟘?</a> <a id="4581" href="Graded.Heap.Untyped.html#4511" class="Bound">q</a> <a id="4583" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="4586" class="Symbol">λ</a> <a id="4588" class="Keyword">where</a>
      <a id="4600" class="Symbol">(</a><a id="4601" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="4604" class="Symbol">_)</a> <a id="4607" class="Symbol">→</a> <a id="4609" href="Graded.Modality.html#1016" class="Function">ω</a>
      <a id="4617" class="Symbol">(</a><a id="4618" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="4622" class="Symbol">_)</a> <a id="4625" class="Symbol">→</a> <a id="4627" href="Graded.Modality.html#1012" class="Function">𝟘</a>

<a id="4630" class="Comment">-- The multiplicity of the Kₑ eliminator, depending on which</a>
<a id="4691" class="Comment">-- erased matches are used.</a>

<a id="∣∣ᵉ-K"></a><a id="4720" href="Graded.Heap.Untyped.html#4720" class="Function">∣∣ᵉ-K</a> <a id="4726" class="Symbol">:</a> <a id="4728" href="Graded.Usage.Erased-matches.html#821" class="Datatype">Erased-matches</a> <a id="4743" class="Symbol">→</a> <a id="4745" class="Symbol">(</a><a id="4746" href="Graded.Heap.Untyped.html#4746" class="Bound">p</a> <a id="4748" class="Symbol">:</a> <a id="4750" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="4751" class="Symbol">)</a> <a id="4753" class="Symbol">→</a> <a id="4755" href="Graded.Heap.Untyped.html#391" class="Bound">M</a>
<a id="4757" href="Graded.Heap.Untyped.html#4720" class="Function">∣∣ᵉ-K</a> <a id="4763" href="Graded.Usage.Erased-matches.html#850" class="InductiveConstructor">none</a> <a id="4768" class="Symbol">_</a> <a id="4770" class="Symbol">=</a> <a id="4772" href="Graded.Modality.html#1016" class="Function">ω</a>
<a id="4774" href="Graded.Heap.Untyped.html#4720" class="Function">∣∣ᵉ-K</a> <a id="4780" href="Graded.Usage.Erased-matches.html#935" class="InductiveConstructor">all</a>  <a id="4785" class="Symbol">_</a> <a id="4787" class="Symbol">=</a> <a id="4789" href="Graded.Modality.html#1012" class="Function">𝟘</a>
<a id="4791" href="Graded.Heap.Untyped.html#4720" class="Function">∣∣ᵉ-K</a> <a id="4797" href="Graded.Usage.Erased-matches.html#964" class="InductiveConstructor">some</a> <a id="4802" href="Graded.Heap.Untyped.html#4802" class="Bound">p</a> <a id="4804" class="Symbol">=</a>
  <a id="4808" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="4813" href="Graded.Modality.html#1881" class="Function">is-𝟘?</a> <a id="4819" href="Graded.Heap.Untyped.html#4802" class="Bound">p</a> <a id="4821" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="4824" class="Symbol">λ</a> <a id="4826" class="Keyword">where</a>
    <a id="4836" class="Symbol">(</a><a id="4837" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="4840" class="Symbol">_)</a> <a id="4843" class="Symbol">→</a> <a id="4845" href="Graded.Modality.html#1016" class="Function">ω</a>
    <a id="4851" class="Symbol">(</a><a id="4852" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="4856" class="Symbol">_)</a> <a id="4859" class="Symbol">→</a> <a id="4861" href="Graded.Modality.html#1012" class="Function">𝟘</a>

<a id="4864" class="Comment">-- Multiplicity of an eliminator, representing how many copies need to</a>
<a id="4935" class="Comment">-- be evaluated.</a>

<a id="∣_∣ᵉ"></a><a id="4953" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣_∣ᵉ</a> <a id="4958" class="Symbol">:</a> <a id="4960" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="4965" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="4967" class="Symbol">→</a> <a id="4969" href="Graded.Heap.Untyped.html#391" class="Bound">M</a>
<a id="4971" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="4973" href="Graded.Heap.Untyped.html#2458" class="InductiveConstructor">∘ₑ</a> <a id="4976" class="Symbol">_</a> <a id="4978" class="Symbol">_</a> <a id="4980" class="Symbol">_</a> <a id="4982" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a> <a id="4985" class="Symbol">=</a> <a id="4987" href="Graded.Modality.html#1014" class="Function">𝟙</a>
<a id="4989" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="4991" href="Graded.Heap.Untyped.html#2515" class="InductiveConstructor">fstₑ</a> <a id="4996" class="Symbol">_</a> <a id="4998" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a> <a id="5001" class="Symbol">=</a> <a id="5003" href="Graded.Modality.html#1014" class="Function">𝟙</a>
<a id="5005" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="5007" href="Graded.Heap.Untyped.html#2540" class="InductiveConstructor">sndₑ</a> <a id="5012" class="Symbol">_</a> <a id="5014" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a> <a id="5017" class="Symbol">=</a> <a id="5019" href="Graded.Modality.html#1014" class="Function">𝟙</a>
<a id="5021" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="5023" href="Graded.Heap.Untyped.html#2565" class="InductiveConstructor">prodrecₑ</a> <a id="5032" href="Graded.Heap.Untyped.html#5032" class="Bound">r</a> <a id="5034" class="Symbol">_</a> <a id="5036" class="Symbol">_</a> <a id="5038" class="Symbol">_</a> <a id="5040" class="Symbol">_</a> <a id="5042" class="Symbol">_</a> <a id="5044" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a> <a id="5047" class="Symbol">=</a> <a id="5049" href="Graded.Heap.Untyped.html#5032" class="Bound">r</a>
<a id="5051" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="5053" href="Graded.Heap.Untyped.html#2663" class="InductiveConstructor">natrecₑ</a> <a id="5061" class="Symbol">_</a> <a id="5063" class="Symbol">_</a> <a id="5065" class="Symbol">_</a> <a id="5067" href="Graded.Heap.Untyped.html#5067" class="Bound">q′</a> <a id="5070" class="Symbol">_</a> <a id="5072" class="Symbol">_</a> <a id="5074" class="Symbol">_</a> <a id="5076" class="Symbol">_</a> <a id="5078" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a> <a id="5081" class="Symbol">=</a> <a id="5083" href="Graded.Heap.Untyped.html#5067" class="Bound">q′</a>
<a id="5086" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="5088" href="Graded.Heap.Untyped.html#2777" class="InductiveConstructor">unitrecₑ</a> <a id="5097" class="Symbol">_</a> <a id="5099" href="Graded.Heap.Untyped.html#5099" class="Bound">p</a> <a id="5101" class="Symbol">_</a> <a id="5103" class="Symbol">_</a> <a id="5105" class="Symbol">_</a> <a id="5107" class="Symbol">_</a> <a id="5109" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a> <a id="5112" class="Symbol">=</a> <a id="5114" href="Graded.Heap.Untyped.html#5099" class="Bound">p</a>
<a id="5116" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="5118" href="Graded.Heap.Untyped.html#2889" class="InductiveConstructor">emptyrecₑ</a> <a id="5128" href="Graded.Heap.Untyped.html#5128" class="Bound">p</a> <a id="5130" class="Symbol">_</a> <a id="5132" class="Symbol">_</a> <a id="5134" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a> <a id="5137" class="Symbol">=</a> <a id="5139" href="Graded.Heap.Untyped.html#5128" class="Bound">p</a>
<a id="5141" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="5143" href="Graded.Heap.Untyped.html#2946" class="InductiveConstructor">Jₑ</a> <a id="5146" href="Graded.Heap.Untyped.html#5146" class="Bound">p</a> <a id="5148" href="Graded.Heap.Untyped.html#5148" class="Bound">q</a> <a id="5150" class="Symbol">_</a> <a id="5152" class="Symbol">_</a> <a id="5154" class="Symbol">_</a> <a id="5156" class="Symbol">_</a> <a id="5158" class="Symbol">_</a> <a id="5160" class="Symbol">_</a> <a id="5162" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a> <a id="5165" class="Symbol">=</a> <a id="5167" href="Graded.Heap.Untyped.html#4421" class="Function">∣∣ᵉ-J</a> <a id="5173" class="Symbol">(</a><a id="5174" href="Graded.Usage.Restrictions.html#2646" class="Field">erased-matches-for-J</a> <a id="5195" href="Graded.Mode.html#1117" class="InductiveConstructor">𝟙ᵐ</a><a id="5197" class="Symbol">)</a> <a id="5199" href="Graded.Heap.Untyped.html#5146" class="Bound">p</a> <a id="5201" href="Graded.Heap.Untyped.html#5148" class="Bound">q</a>
<a id="5203" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="5205" href="Graded.Heap.Untyped.html#3054" class="InductiveConstructor">Kₑ</a> <a id="5208" href="Graded.Heap.Untyped.html#5208" class="Bound">p</a> <a id="5210" class="Symbol">_</a> <a id="5212" class="Symbol">_</a> <a id="5214" class="Symbol">_</a> <a id="5216" class="Symbol">_</a> <a id="5218" class="Symbol">_</a> <a id="5220" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a> <a id="5223" class="Symbol">=</a> <a id="5225" href="Graded.Heap.Untyped.html#4720" class="Function">∣∣ᵉ-K</a> <a id="5231" class="Symbol">(</a><a id="5232" href="Graded.Usage.Restrictions.html#3071" class="Field">erased-matches-for-K</a> <a id="5253" href="Graded.Mode.html#1117" class="InductiveConstructor">𝟙ᵐ</a><a id="5255" class="Symbol">)</a> <a id="5257" href="Graded.Heap.Untyped.html#5208" class="Bound">p</a>
<a id="5259" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="5261" href="Graded.Heap.Untyped.html#3158" class="InductiveConstructor">[]-congₑ</a> <a id="5270" class="Symbol">_</a> <a id="5272" class="Symbol">_</a> <a id="5274" class="Symbol">_</a> <a id="5276" class="Symbol">_</a> <a id="5278" class="Symbol">_</a> <a id="5280" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a> <a id="5283" class="Symbol">=</a> <a id="5285" href="Graded.Modality.html#1012" class="Function">𝟘</a>
<a id="5287" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="5289" href="Graded.Heap.Untyped.html#3226" class="InductiveConstructor">sucₑ</a> <a id="5294" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a> <a id="5297" class="Symbol">=</a> <a id="5299" href="Graded.Modality.html#1014" class="Function">𝟙</a>

<a id="5302" class="Comment">-- An equality relation for eliminators.</a>
<a id="5343" class="Comment">-- Eliminators are equal if they are (syntactically) the same up to</a>
<a id="5411" class="Comment">-- the multiplicity of natrec, i.e. if they are representations of the</a>
<a id="5482" class="Comment">-- same syntactic term.</a>

<a id="5507" class="Keyword">infix</a> <a id="5513" class="Number">5</a> <a id="5515" href="Graded.Heap.Untyped.html#5526" class="Datatype Operator">_~ᵉ_</a>

<a id="5521" class="Keyword">data</a> <a id="_~ᵉ_"></a><a id="5526" href="Graded.Heap.Untyped.html#5526" class="Datatype Operator">_~ᵉ_</a> <a id="5531" class="Symbol">{</a><a id="5532" href="Graded.Heap.Untyped.html#5532" class="Bound">m</a><a id="5533" class="Symbol">}</a> <a id="5535" class="Symbol">:</a> <a id="5537" class="Symbol">(</a><a id="5538" href="Graded.Heap.Untyped.html#5538" class="Bound">e</a> <a id="5540" href="Graded.Heap.Untyped.html#5540" class="Bound">e′</a> <a id="5543" class="Symbol">:</a> <a id="5545" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="5550" href="Graded.Heap.Untyped.html#5532" class="Bound">m</a><a id="5551" class="Symbol">)</a> <a id="5553" class="Symbol">→</a> <a id="5555" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="5559" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="5561" class="Keyword">where</a>
  <a id="_~ᵉ_.~ᵉ-refl"></a><a id="5569" href="Graded.Heap.Untyped.html#5569" class="InductiveConstructor">~ᵉ-refl</a> <a id="5577" class="Symbol">:</a> <a id="5579" href="Graded.Heap.Untyped.html#3265" class="Generalizable">e</a> <a id="5581" href="Graded.Heap.Untyped.html#5526" class="Datatype Operator">~ᵉ</a> <a id="5584" href="Graded.Heap.Untyped.html#3265" class="Generalizable">e</a>
  <a id="_~ᵉ_.~ᵉ-natrec"></a><a id="5588" href="Graded.Heap.Untyped.html#5588" class="InductiveConstructor">~ᵉ-natrec</a> <a id="5598" class="Symbol">:</a> <a id="5600" href="Graded.Heap.Untyped.html#2663" class="InductiveConstructor">natrecₑ</a> <a id="5608" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="5610" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="5612" href="Graded.Heap.Untyped.html#1247" class="Generalizable">r</a> <a id="5614" href="Graded.Heap.Untyped.html#1249" class="Generalizable">q′</a> <a id="5617" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="5619" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="5621" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a> <a id="5623" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="5625" href="Graded.Heap.Untyped.html#5526" class="Datatype Operator">~ᵉ</a> <a id="5628" href="Graded.Heap.Untyped.html#2663" class="InductiveConstructor">natrecₑ</a> <a id="5636" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="5638" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="5640" href="Graded.Heap.Untyped.html#1247" class="Generalizable">r</a> <a id="5642" href="Graded.Heap.Untyped.html#1252" class="Generalizable">q″</a> <a id="5645" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="5647" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="5649" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a> <a id="5651" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a>

<a id="5654" class="Comment">-- Evaluation stacks, indexed by the size of the heap</a>

<a id="5709" class="Keyword">data</a> <a id="Stack"></a><a id="5714" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="5720" class="Symbol">(</a><a id="5721" href="Graded.Heap.Untyped.html#5721" class="Bound">m</a> <a id="5723" class="Symbol">:</a> <a id="5725" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="5728" class="Symbol">)</a> <a id="5730" class="Symbol">:</a> <a id="5732" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="5736" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="5738" class="Keyword">where</a>
  <a id="Stack.ε"></a><a id="5746" href="Graded.Heap.Untyped.html#5746" class="InductiveConstructor">ε</a> <a id="5748" class="Symbol">:</a> <a id="5750" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="5756" href="Graded.Heap.Untyped.html#5721" class="Bound">m</a>
  <a id="Stack._∙_"></a><a id="5760" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">_∙_</a> <a id="5764" class="Symbol">:</a> <a id="5766" class="Symbol">(</a><a id="5767" href="Graded.Heap.Untyped.html#5767" class="Bound">e</a> <a id="5769" class="Symbol">:</a> <a id="5771" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="5776" href="Graded.Heap.Untyped.html#5721" class="Bound">m</a><a id="5777" class="Symbol">)</a> <a id="5779" class="Symbol">→</a> <a id="5781" class="Symbol">(</a><a id="5782" href="Graded.Heap.Untyped.html#5782" class="Bound">S</a> <a id="5784" class="Symbol">:</a> <a id="5786" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="5792" href="Graded.Heap.Untyped.html#5721" class="Bound">m</a><a id="5793" class="Symbol">)</a> <a id="5795" class="Symbol">→</a> <a id="5797" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="5803" href="Graded.Heap.Untyped.html#5721" class="Bound">m</a>

<a id="5806" class="Comment">-- Multiplicity of a stack, representing how many copies are currently</a>
<a id="5877" class="Comment">-- being evaluated.</a>

<a id="∣_∣"></a><a id="5898" href="Graded.Heap.Untyped.html#5898" class="Function Operator">∣_∣</a> <a id="5902" class="Symbol">:</a> <a id="5904" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="5910" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="5912" class="Symbol">→</a> <a id="5914" href="Graded.Heap.Untyped.html#391" class="Bound">M</a>
<a id="5916" href="Graded.Heap.Untyped.html#5898" class="Function Operator">∣</a> <a id="5918" href="Graded.Heap.Untyped.html#5746" class="InductiveConstructor">ε</a> <a id="5920" href="Graded.Heap.Untyped.html#5898" class="Function Operator">∣</a> <a id="5922" class="Symbol">=</a> <a id="5924" href="Graded.Modality.html#1014" class="Function">𝟙</a>
<a id="5926" href="Graded.Heap.Untyped.html#5898" class="Function Operator">∣</a> <a id="5928" href="Graded.Heap.Untyped.html#5928" class="Bound">e</a> <a id="5930" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="5932" href="Graded.Heap.Untyped.html#5932" class="Bound">S</a> <a id="5934" href="Graded.Heap.Untyped.html#5898" class="Function Operator">∣</a> <a id="5936" class="Symbol">=</a> <a id="5938" href="Graded.Heap.Untyped.html#5898" class="Function Operator">∣</a> <a id="5940" href="Graded.Heap.Untyped.html#5932" class="Bound">S</a> <a id="5942" href="Graded.Heap.Untyped.html#5898" class="Function Operator">∣</a> <a id="5944" href="Graded.Modality.html#992" class="Function Operator">·</a> <a id="5946" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣</a> <a id="5948" href="Graded.Heap.Untyped.html#5928" class="Bound">e</a> <a id="5950" href="Graded.Heap.Untyped.html#4953" class="Function Operator">∣ᵉ</a>

<a id="5954" class="Keyword">private</a> <a id="5962" class="Keyword">variable</a>
  <a id="5973" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a> <a id="5975" href="Graded.Heap.Untyped.html#5975" class="Generalizable">S′</a> <a id="5978" class="Symbol">:</a> <a id="5980" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="5986" class="Symbol">_</a>

<a id="5989" class="Comment">-- Weakening of stacks</a>

<a id="wkˢ"></a><a id="6013" href="Graded.Heap.Untyped.html#6013" class="Function">wkˢ</a> <a id="6017" class="Symbol">:</a> <a id="6019" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="6022" href="Graded.Heap.Untyped.html#1165" class="Generalizable">m′</a> <a id="6025" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="6027" class="Symbol">→</a> <a id="6029" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="6035" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="6037" class="Symbol">→</a> <a id="6039" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="6045" href="Graded.Heap.Untyped.html#1165" class="Generalizable">m′</a>
<a id="6048" href="Graded.Heap.Untyped.html#6013" class="Function">wkˢ</a> <a id="6052" href="Graded.Heap.Untyped.html#6052" class="Bound">ρ</a> <a id="6054" href="Graded.Heap.Untyped.html#5746" class="InductiveConstructor">ε</a> <a id="6056" class="Symbol">=</a> <a id="6058" href="Graded.Heap.Untyped.html#5746" class="InductiveConstructor">ε</a>
<a id="6060" href="Graded.Heap.Untyped.html#6013" class="Function">wkˢ</a> <a id="6064" href="Graded.Heap.Untyped.html#6064" class="Bound">ρ</a> <a id="6066" class="Symbol">(</a><a id="6067" href="Graded.Heap.Untyped.html#6067" class="Bound">e</a> <a id="6069" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="6071" href="Graded.Heap.Untyped.html#6071" class="Bound">S</a><a id="6072" class="Symbol">)</a> <a id="6074" class="Symbol">=</a> <a id="6076" href="Graded.Heap.Untyped.html#3692" class="Function">wkᵉ</a> <a id="6080" href="Graded.Heap.Untyped.html#6064" class="Bound">ρ</a> <a id="6082" href="Graded.Heap.Untyped.html#6067" class="Bound">e</a> <a id="6084" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="6086" href="Graded.Heap.Untyped.html#6013" class="Function">wkˢ</a> <a id="6090" href="Graded.Heap.Untyped.html#6064" class="Bound">ρ</a> <a id="6092" href="Graded.Heap.Untyped.html#6071" class="Bound">S</a>

<a id="wk1ˢ"></a><a id="6095" href="Graded.Heap.Untyped.html#6095" class="Function">wk1ˢ</a> <a id="6100" class="Symbol">:</a> <a id="6102" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="6108" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="6110" class="Symbol">→</a> <a id="6112" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="6118" class="Symbol">(</a><a id="6119" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="6122" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="6123" class="Symbol">)</a>
<a id="6125" href="Graded.Heap.Untyped.html#6095" class="Function">wk1ˢ</a> <a id="6130" class="Symbol">=</a> <a id="6132" href="Graded.Heap.Untyped.html#6013" class="Function">wkˢ</a> <a id="6136" class="Symbol">(</a><a id="6137" href="Definition.Untyped.NotParametrised.html#3041" class="InductiveConstructor">step</a> <a id="6142" href="Definition.Untyped.NotParametrised.html#2977" class="InductiveConstructor">id</a><a id="6144" class="Symbol">)</a>

<a id="wk2ˢ"></a><a id="6147" href="Graded.Heap.Untyped.html#6147" class="Function">wk2ˢ</a> <a id="6152" class="Symbol">:</a> <a id="6154" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="6160" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="6162" class="Symbol">→</a> <a id="6164" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="6170" class="Symbol">(</a><a id="6171" href="Tools.Nat.html#2191" class="InductiveConstructor">2+</a> <a id="6174" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="6175" class="Symbol">)</a>
<a id="6177" href="Graded.Heap.Untyped.html#6147" class="Function">wk2ˢ</a> <a id="6182" class="Symbol">=</a> <a id="6184" href="Graded.Heap.Untyped.html#6013" class="Function">wkˢ</a> <a id="6188" class="Symbol">(</a><a id="6189" href="Definition.Untyped.NotParametrised.html#3041" class="InductiveConstructor">step</a> <a id="6194" class="Symbol">(</a><a id="6195" href="Definition.Untyped.NotParametrised.html#3041" class="InductiveConstructor">step</a> <a id="6200" href="Definition.Untyped.NotParametrised.html#2977" class="InductiveConstructor">id</a><a id="6202" class="Symbol">))</a>

<a id="6206" class="Comment">-- Concatenation of stacks</a>

<a id="_++_"></a><a id="6234" href="Graded.Heap.Untyped.html#6234" class="Function Operator">_++_</a> <a id="6239" class="Symbol">:</a> <a id="6241" class="Symbol">(</a><a id="6242" href="Graded.Heap.Untyped.html#6242" class="Bound">S</a> <a id="6244" href="Graded.Heap.Untyped.html#6244" class="Bound">S′</a> <a id="6247" class="Symbol">:</a> <a id="6249" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="6255" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="6256" class="Symbol">)</a> <a id="6258" class="Symbol">→</a> <a id="6260" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="6266" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a>
<a id="6268" href="Graded.Heap.Untyped.html#5746" class="InductiveConstructor">ε</a> <a id="6270" href="Graded.Heap.Untyped.html#6234" class="Function Operator">++</a> <a id="6273" href="Graded.Heap.Untyped.html#6273" class="Bound">S′</a> <a id="6276" class="Symbol">=</a> <a id="6278" href="Graded.Heap.Untyped.html#6273" class="Bound">S′</a>
<a id="6281" class="Symbol">(</a><a id="6282" href="Graded.Heap.Untyped.html#6282" class="Bound">e</a> <a id="6284" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="6286" href="Graded.Heap.Untyped.html#6286" class="Bound">S</a><a id="6287" class="Symbol">)</a> <a id="6289" href="Graded.Heap.Untyped.html#6234" class="Function Operator">++</a> <a id="6292" href="Graded.Heap.Untyped.html#6292" class="Bound">S′</a> <a id="6295" class="Symbol">=</a> <a id="6297" href="Graded.Heap.Untyped.html#6282" class="Bound">e</a> <a id="6299" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="6301" class="Symbol">(</a><a id="6302" href="Graded.Heap.Untyped.html#6286" class="Bound">S</a> <a id="6304" href="Graded.Heap.Untyped.html#6234" class="Function Operator">++</a> <a id="6307" href="Graded.Heap.Untyped.html#6292" class="Bound">S′</a><a id="6309" class="Symbol">)</a>

<a id="6312" class="Comment">-- A stack consisting only of successor eliminators</a>

<a id="sucₛ"></a><a id="6365" href="Graded.Heap.Untyped.html#6365" class="Function">sucₛ</a> <a id="6370" class="Symbol">:</a> <a id="6372" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a> <a id="6376" class="Symbol">→</a> <a id="6378" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="6384" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a>
<a id="6386" href="Graded.Heap.Untyped.html#6365" class="Function">sucₛ</a> <a id="6391" class="Number">0</a> <a id="6393" class="Symbol">=</a> <a id="6395" href="Graded.Heap.Untyped.html#5746" class="InductiveConstructor">ε</a>
<a id="6397" href="Graded.Heap.Untyped.html#6365" class="Function">sucₛ</a> <a id="6402" class="Symbol">(</a><a id="6403" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="6406" href="Graded.Heap.Untyped.html#6406" class="Bound">n</a><a id="6407" class="Symbol">)</a> <a id="6409" class="Symbol">=</a> <a id="6411" href="Graded.Heap.Untyped.html#3226" class="InductiveConstructor">sucₑ</a> <a id="6416" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="6418" href="Graded.Heap.Untyped.html#6365" class="Function">sucₛ</a> <a id="6423" href="Graded.Heap.Untyped.html#6406" class="Bound">n</a>

<a id="6426" class="Comment">-- A utility predicate: stacks containing erased emptyrec</a>

<a id="6485" class="Keyword">data</a> <a id="emptyrec₀∈_"></a><a id="6490" href="Graded.Heap.Untyped.html#6490" class="Datatype Operator">emptyrec₀∈_</a> <a id="6502" class="Symbol">:</a> <a id="6504" class="Symbol">(</a><a id="6505" href="Graded.Heap.Untyped.html#6505" class="Bound">S</a> <a id="6507" class="Symbol">:</a> <a id="6509" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="6515" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="6516" class="Symbol">)</a> <a id="6518" class="Symbol">→</a> <a id="6520" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="6524" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="6526" class="Keyword">where</a>
  <a id="emptyrec₀∈_.here"></a><a id="6534" href="Graded.Heap.Untyped.html#6534" class="InductiveConstructor">here</a> <a id="6539" class="Symbol">:</a> <a id="6541" href="Graded.Heap.Untyped.html#6490" class="Datatype Operator">emptyrec₀∈</a> <a id="6552" class="Symbol">(</a><a id="6553" href="Graded.Heap.Untyped.html#2889" class="InductiveConstructor">emptyrecₑ</a> <a id="6563" href="Graded.Modality.html#1012" class="Function">𝟘</a> <a id="6565" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="6567" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="6569" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="6571" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="6572" class="Symbol">)</a>
  <a id="emptyrec₀∈_.there"></a><a id="6576" href="Graded.Heap.Untyped.html#6576" class="InductiveConstructor">there</a> <a id="6582" class="Symbol">:</a> <a id="6584" href="Graded.Heap.Untyped.html#6490" class="Datatype Operator">emptyrec₀∈</a> <a id="6595" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a> <a id="6597" class="Symbol">→</a> <a id="6599" href="Graded.Heap.Untyped.html#6490" class="Datatype Operator">emptyrec₀∈</a> <a id="6610" class="Symbol">(</a><a id="6611" href="Graded.Heap.Untyped.html#3265" class="Generalizable">e</a> <a id="6613" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="6615" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="6616" class="Symbol">)</a>

<a id="6619" class="Comment">-- An equality relation for stacks.</a>
<a id="6655" class="Comment">-- Stacks are equal if all eliminators are pairwise equal up to the</a>
<a id="6723" class="Comment">-- multiplicity of natrec i.e. if they are representations of the same</a>
<a id="6794" class="Comment">-- syntactic term.</a>

<a id="6814" class="Keyword">infix</a> <a id="6820" class="Number">5</a> <a id="6822" href="Graded.Heap.Untyped.html#6833" class="Datatype Operator">_~ˢ_</a>

<a id="6828" class="Keyword">data</a> <a id="_~ˢ_"></a><a id="6833" href="Graded.Heap.Untyped.html#6833" class="Datatype Operator">_~ˢ_</a> <a id="6838" class="Symbol">{</a><a id="6839" href="Graded.Heap.Untyped.html#6839" class="Bound">m</a><a id="6840" class="Symbol">}</a> <a id="6842" class="Symbol">:</a> <a id="6844" class="Symbol">(</a><a id="6845" href="Graded.Heap.Untyped.html#6845" class="Bound">S</a> <a id="6847" href="Graded.Heap.Untyped.html#6847" class="Bound">S′</a> <a id="6850" class="Symbol">:</a> <a id="6852" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="6858" href="Graded.Heap.Untyped.html#6839" class="Bound">m</a><a id="6859" class="Symbol">)</a> <a id="6861" class="Symbol">→</a> <a id="6863" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="6867" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="6869" class="Keyword">where</a>
  <a id="_~ˢ_.ε"></a><a id="6877" href="Graded.Heap.Untyped.html#6877" class="InductiveConstructor">ε</a> <a id="6879" class="Symbol">:</a> <a id="6881" href="Graded.Heap.Untyped.html#5746" class="InductiveConstructor">ε</a> <a id="6883" href="Graded.Heap.Untyped.html#6833" class="Datatype Operator">~ˢ</a> <a id="6886" href="Graded.Heap.Untyped.html#5746" class="InductiveConstructor">ε</a>
  <a id="_~ˢ_._∙_"></a><a id="6890" href="Graded.Heap.Untyped.html#6890" class="InductiveConstructor Operator">_∙_</a> <a id="6894" class="Symbol">:</a> <a id="6896" href="Graded.Heap.Untyped.html#3265" class="Generalizable">e</a> <a id="6898" href="Graded.Heap.Untyped.html#5526" class="Datatype Operator">~ᵉ</a> <a id="6901" href="Graded.Heap.Untyped.html#3267" class="Generalizable">e′</a> <a id="6904" class="Symbol">→</a> <a id="6906" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a> <a id="6908" href="Graded.Heap.Untyped.html#6833" class="Datatype Operator">~ˢ</a> <a id="6911" href="Graded.Heap.Untyped.html#5975" class="Generalizable">S′</a> <a id="6914" class="Symbol">→</a> <a id="6916" href="Graded.Heap.Untyped.html#3265" class="Generalizable">e</a> <a id="6918" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="6920" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a> <a id="6922" href="Graded.Heap.Untyped.html#6833" class="Datatype Operator">~ˢ</a> <a id="6925" href="Graded.Heap.Untyped.html#3267" class="Generalizable">e′</a> <a id="6928" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="6930" href="Graded.Heap.Untyped.html#5975" class="Generalizable">S′</a>

<a id="6934" class="Comment">------------------------------------------------------------------------</a>
<a id="7007" class="Comment">-- Heaps</a>

<a id="7017" class="Keyword">infixl</a> <a id="7024" class="Number">24</a> <a id="7027" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">_∙_</a>
<a id="7031" class="Keyword">infixl</a> <a id="7038" class="Number">24</a> <a id="7041" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">_∙●</a>

<a id="7046" class="Comment">-- Heaps are lists of entries or &quot;dummy&quot; entries, representing something</a>
<a id="7119" class="Comment">-- erased.</a>
<a id="7130" class="Comment">-- Indexed by the number of dummy entries and total entries.</a>

<a id="7192" class="Keyword">data</a> <a id="Heap"></a><a id="7197" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="7202" class="Symbol">:</a> <a id="7204" class="Symbol">(</a><a id="7205" href="Graded.Heap.Untyped.html#7205" class="Bound">k</a> <a id="7207" href="Graded.Heap.Untyped.html#7207" class="Bound">m</a> <a id="7209" class="Symbol">:</a> <a id="7211" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="7214" class="Symbol">)</a> <a id="7216" class="Symbol">→</a> <a id="7218" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="7222" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="7224" class="Keyword">where</a>
  <a id="Heap.ε"></a><a id="7232" href="Graded.Heap.Untyped.html#7232" class="InductiveConstructor">ε</a>   <a id="7236" class="Symbol">:</a> <a id="7238" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="7243" class="Number">0</a> <a id="7245" class="Number">0</a>
  <a id="Heap._∙_"></a><a id="7249" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">_∙_</a> <a id="7253" class="Symbol">:</a> <a id="7255" class="Symbol">(</a><a id="7256" href="Graded.Heap.Untyped.html#7256" class="Bound">H</a> <a id="7258" class="Symbol">:</a> <a id="7260" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="7265" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="7267" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="7268" class="Symbol">)</a> <a id="7270" class="Symbol">→</a> <a id="7272" class="Symbol">(</a><a id="7273" href="Graded.Heap.Untyped.html#7273" class="Bound">c</a> <a id="7275" class="Symbol">:</a> <a id="7277" href="Graded.Heap.Untyped.html#1962" class="Function">Entryₘ</a> <a id="7284" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="7286" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="7287" class="Symbol">)</a> <a id="7289" class="Symbol">→</a> <a id="7291" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="7296" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="7298" class="Symbol">(</a><a id="7299" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="7302" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="7303" class="Symbol">)</a>
  <a id="Heap._∙●"></a><a id="7307" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">_∙●</a> <a id="7311" class="Symbol">:</a> <a id="7313" class="Symbol">(</a><a id="7314" href="Graded.Heap.Untyped.html#7314" class="Bound">H</a> <a id="7316" class="Symbol">:</a> <a id="7318" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="7323" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="7325" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="7326" class="Symbol">)</a> <a id="7328" class="Symbol">→</a> <a id="7330" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="7335" class="Symbol">(</a><a id="7336" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="7339" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a><a id="7340" class="Symbol">)</a> <a id="7342" class="Symbol">(</a><a id="7343" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="7346" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="7347" class="Symbol">)</a>

<a id="7350" class="Comment">-- A heap where all entries are erased</a>

<a id="erasedHeap"></a><a id="7390" href="Graded.Heap.Untyped.html#7390" class="Function">erasedHeap</a> <a id="7401" class="Symbol">:</a> <a id="7403" class="Symbol">(</a><a id="7404" href="Graded.Heap.Untyped.html#7404" class="Bound">k</a> <a id="7406" class="Symbol">:</a> <a id="7408" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="7411" class="Symbol">)</a> <a id="7413" class="Symbol">→</a> <a id="7415" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="7420" href="Graded.Heap.Untyped.html#7404" class="Bound">k</a> <a id="7422" href="Graded.Heap.Untyped.html#7404" class="Bound">k</a>
<a id="7424" href="Graded.Heap.Untyped.html#7390" class="Function">erasedHeap</a> <a id="7435" class="Number">0</a> <a id="7437" class="Symbol">=</a> <a id="7439" href="Graded.Heap.Untyped.html#7232" class="InductiveConstructor">ε</a>
<a id="7441" href="Graded.Heap.Untyped.html#7390" class="Function">erasedHeap</a> <a id="7452" class="Symbol">(</a><a id="7453" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="7456" href="Graded.Heap.Untyped.html#7456" class="Bound">k</a><a id="7457" class="Symbol">)</a> <a id="7459" class="Symbol">=</a> <a id="7461" href="Graded.Heap.Untyped.html#7390" class="Function">erasedHeap</a> <a id="7472" href="Graded.Heap.Untyped.html#7456" class="Bound">k</a> <a id="7474" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">∙●</a>

<a id="7478" class="Keyword">private</a> <a id="7486" class="Keyword">variable</a>
  <a id="7497" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="7499" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a> <a id="7502" class="Symbol">:</a> <a id="7504" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="7509" class="Symbol">_</a> <a id="7511" class="Symbol">_</a>
  <a id="7515" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a> <a id="7517" class="Symbol">:</a> <a id="7519" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="7525" class="Symbol">_</a> <a id="7527" class="Symbol">_</a>
  <a id="7531" href="Graded.Heap.Untyped.html#7531" class="Generalizable">c′</a> <a id="7534" class="Symbol">:</a> <a id="7536" href="Graded.Heap.Untyped.html#1962" class="Function">Entryₘ</a> <a id="7543" class="Symbol">_</a> <a id="7545" class="Symbol">_</a>
  <a id="7549" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="7551" class="Symbol">:</a> <a id="7553" href="Graded.Heap.Untyped.html#1648" class="Function">Ptr</a> <a id="7557" class="Symbol">_</a>

<a id="7560" class="Keyword">infix</a> <a id="7566" class="Number">20</a> <a id="7569" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">_⊢_↦[_]_⨾_</a>

<a id="7581" class="Comment">-- Heap lookup (with grade update)</a>
<a id="7616" class="Comment">-- Note that lookup fails when trying to look up more copies than are</a>
<a id="7686" class="Comment">-- available. For instance, looking up any non-zero number when there</a>
<a id="7756" class="Comment">-- are zero copies available.</a>

<a id="7787" class="Keyword">data</a> <a id="_⊢_↦[_]_⨾_"></a><a id="7792" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">_⊢_↦[_]_⨾_</a> <a id="7803" class="Symbol">:</a> <a id="7805" class="Symbol">(</a><a id="7806" href="Graded.Heap.Untyped.html#7806" class="Bound">H</a> <a id="7808" class="Symbol">:</a> <a id="7810" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="7815" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="7817" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="7818" class="Symbol">)</a> <a id="7820" class="Symbol">(</a><a id="7821" href="Graded.Heap.Untyped.html#7821" class="Bound">y</a> <a id="7823" class="Symbol">:</a> <a id="7825" href="Graded.Heap.Untyped.html#1648" class="Function">Ptr</a> <a id="7829" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="7830" class="Symbol">)</a> <a id="7832" class="Symbol">(</a><a id="7833" href="Graded.Heap.Untyped.html#7833" class="Bound">q</a> <a id="7835" class="Symbol">:</a> <a id="7837" href="Graded.Heap.Untyped.html#391" class="Bound">M</a><a id="7838" class="Symbol">)</a>
                  <a id="7858" class="Symbol">(</a><a id="7859" href="Graded.Heap.Untyped.html#7859" class="Bound">c</a> <a id="7861" class="Symbol">:</a> <a id="7863" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="7869" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="7871" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="7872" class="Symbol">)</a> <a id="7874" class="Symbol">(</a><a id="7875" href="Graded.Heap.Untyped.html#7875" class="Bound">H′</a> <a id="7878" class="Symbol">:</a> <a id="7880" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="7885" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="7887" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="7888" class="Symbol">)</a> <a id="7890" class="Symbol">→</a> <a id="7892" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="7896" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="7898" class="Keyword">where</a>
  <a id="_⊢_↦[_]_⨾_.here"></a><a id="7906" href="Graded.Heap.Untyped.html#7906" class="InductiveConstructor">here</a> <a id="7911" class="Symbol">:</a> <a id="7913" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="7915" href="Graded.Modality.Properties.Subtraction.html#1760" class="Function Operator">-</a> <a id="7917" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="7919" href="Graded.Modality.Properties.Subtraction.html#1760" class="Function Operator">≡</a> <a id="7921" href="Graded.Heap.Untyped.html#1247" class="Generalizable">r</a>
       <a id="7930" class="Symbol">→</a> <a id="7932" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="7934" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="7936" class="Symbol">(</a><a id="7937" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="7939" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7941" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a><a id="7942" class="Symbol">)</a> <a id="7944" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">⊢</a> <a id="7946" href="Graded.Heap.Untyped.html#1683" class="InductiveConstructor">y0</a> <a id="7949" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">↦[</a> <a id="7952" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="7954" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">]</a> <a id="7956" href="Graded.Heap.Untyped.html#2112" class="Function">wk1ᵉⁿ</a> <a id="7962" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a> <a id="7964" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">⨾</a> <a id="7966" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="7968" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="7970" class="Symbol">(</a><a id="7971" href="Graded.Heap.Untyped.html#1247" class="Generalizable">r</a> <a id="7973" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7975" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a><a id="7976" class="Symbol">)</a>
  <a id="_⊢_↦[_]_⨾_.there"></a><a id="7980" href="Graded.Heap.Untyped.html#7980" class="InductiveConstructor">there</a> <a id="7986" class="Symbol">:</a> <a id="7988" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="7990" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">⊢</a> <a id="7992" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="7994" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">↦[</a> <a id="7997" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="7999" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">]</a> <a id="8001" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a> <a id="8003" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">⨾</a> <a id="8005" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a>
        <a id="8016" class="Symbol">→</a> <a id="8018" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8020" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="8022" href="Graded.Heap.Untyped.html#7531" class="Generalizable">c′</a> <a id="8025" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">⊢</a> <a id="8027" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="8029" href="Data.Fin.Base.html#1202" class="InductiveConstructor Operator">+1</a> <a id="8032" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">↦[</a> <a id="8035" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="8037" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">]</a> <a id="8039" href="Graded.Heap.Untyped.html#2112" class="Function">wk1ᵉⁿ</a> <a id="8045" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a> <a id="8047" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">⨾</a> <a id="8049" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a> <a id="8052" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="8054" href="Graded.Heap.Untyped.html#7531" class="Generalizable">c′</a>
  <a id="_⊢_↦[_]_⨾_.there●"></a><a id="8059" href="Graded.Heap.Untyped.html#8059" class="InductiveConstructor">there●</a> <a id="8066" class="Symbol">:</a> <a id="8068" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8070" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">⊢</a> <a id="8072" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="8074" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">↦[</a> <a id="8077" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="8079" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">]</a> <a id="8081" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a> <a id="8083" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">⨾</a> <a id="8085" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a>
         <a id="8097" class="Symbol">→</a> <a id="8099" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8101" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">∙●</a> <a id="8104" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">⊢</a> <a id="8106" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="8108" href="Data.Fin.Base.html#1202" class="InductiveConstructor Operator">+1</a> <a id="8111" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">↦[</a> <a id="8114" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="8116" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">]</a> <a id="8118" href="Graded.Heap.Untyped.html#2112" class="Function">wk1ᵉⁿ</a> <a id="8124" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a> <a id="8126" href="Graded.Heap.Untyped.html#7792" class="Datatype Operator">⨾</a> <a id="8128" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a> <a id="8131" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">∙●</a>

<a id="8135" class="Keyword">infix</a> <a id="8141" class="Number">20</a> <a id="8144" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">_⊢_↦_</a>

<a id="8151" class="Comment">-- Heap lookup (without grade update)</a>

<a id="8190" class="Keyword">data</a> <a id="_⊢_↦_"></a><a id="8195" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">_⊢_↦_</a> <a id="8201" class="Symbol">:</a> <a id="8203" class="Symbol">(</a><a id="8204" href="Graded.Heap.Untyped.html#8204" class="Bound">H</a> <a id="8206" class="Symbol">:</a> <a id="8208" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="8213" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="8215" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="8216" class="Symbol">)</a> <a id="8218" class="Symbol">(</a><a id="8219" href="Graded.Heap.Untyped.html#8219" class="Bound">y</a> <a id="8221" class="Symbol">:</a> <a id="8223" href="Graded.Heap.Untyped.html#1648" class="Function">Ptr</a> <a id="8227" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="8228" class="Symbol">)</a> <a id="8230" class="Symbol">(</a><a id="8231" href="Graded.Heap.Untyped.html#8231" class="Bound">c</a> <a id="8233" class="Symbol">:</a> <a id="8235" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="8241" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="8243" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="8244" class="Symbol">)</a> <a id="8246" class="Symbol">→</a> <a id="8248" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="8252" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="8254" class="Keyword">where</a>
  <a id="_⊢_↦_.here"></a><a id="8262" href="Graded.Heap.Untyped.html#8262" class="InductiveConstructor">here</a> <a id="8267" class="Symbol">:</a> <a id="8269" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8271" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="8273" class="Symbol">(</a><a id="8274" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="8276" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8278" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a><a id="8279" class="Symbol">)</a> <a id="8281" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">⊢</a> <a id="8283" href="Graded.Heap.Untyped.html#1683" class="InductiveConstructor">y0</a> <a id="8286" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">↦</a> <a id="8288" href="Graded.Heap.Untyped.html#2112" class="Function">wk1ᵉⁿ</a> <a id="8294" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a>
  <a id="_⊢_↦_.there"></a><a id="8298" href="Graded.Heap.Untyped.html#8298" class="InductiveConstructor">there</a> <a id="8304" class="Symbol">:</a> <a id="8306" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8308" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">⊢</a> <a id="8310" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="8312" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">↦</a> <a id="8314" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a>
        <a id="8324" class="Symbol">→</a> <a id="8326" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8328" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="8330" href="Graded.Heap.Untyped.html#7531" class="Generalizable">c′</a> <a id="8333" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">⊢</a> <a id="8335" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="8337" href="Data.Fin.Base.html#1202" class="InductiveConstructor Operator">+1</a> <a id="8340" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">↦</a> <a id="8342" href="Graded.Heap.Untyped.html#2112" class="Function">wk1ᵉⁿ</a> <a id="8348" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a>
  <a id="_⊢_↦_.there●"></a><a id="8352" href="Graded.Heap.Untyped.html#8352" class="InductiveConstructor">there●</a> <a id="8359" class="Symbol">:</a> <a id="8361" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8363" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">⊢</a> <a id="8365" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="8367" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">↦</a> <a id="8369" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a>
         <a id="8380" class="Symbol">→</a> <a id="8382" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8384" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">∙●</a> <a id="8387" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">⊢</a> <a id="8389" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="8391" href="Data.Fin.Base.html#1202" class="InductiveConstructor Operator">+1</a> <a id="8394" href="Graded.Heap.Untyped.html#8195" class="Datatype Operator">↦</a> <a id="8396" href="Graded.Heap.Untyped.html#2112" class="Function">wk1ᵉⁿ</a> <a id="8402" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a>

<a id="8405" class="Keyword">infix</a> <a id="8411" class="Number">20</a> <a id="8414" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">_⊢_↦●</a>

<a id="8421" class="Comment">-- Heap lookup to a dummy entry</a>

<a id="8454" class="Keyword">data</a> <a id="_⊢_↦●"></a><a id="8459" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">_⊢_↦●</a> <a id="8465" class="Symbol">:</a> <a id="8467" class="Symbol">(</a><a id="8468" href="Graded.Heap.Untyped.html#8468" class="Bound">H</a> <a id="8470" class="Symbol">:</a> <a id="8472" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="8477" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="8479" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="8480" class="Symbol">)</a> <a id="8482" class="Symbol">(</a><a id="8483" href="Graded.Heap.Untyped.html#8483" class="Bound">y</a> <a id="8485" class="Symbol">:</a> <a id="8487" href="Graded.Heap.Untyped.html#1648" class="Function">Ptr</a> <a id="8491" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="8492" class="Symbol">)</a> <a id="8494" class="Symbol">→</a> <a id="8496" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="8500" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="8502" class="Keyword">where</a>
  <a id="_⊢_↦●.here"></a><a id="8510" href="Graded.Heap.Untyped.html#8510" class="InductiveConstructor">here</a> <a id="8515" class="Symbol">:</a> <a id="8517" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8519" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">∙●</a> <a id="8522" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">⊢</a> <a id="8524" href="Graded.Heap.Untyped.html#1683" class="InductiveConstructor">y0</a> <a id="8527" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">↦●</a>
  <a id="_⊢_↦●.there"></a><a id="8532" href="Graded.Heap.Untyped.html#8532" class="InductiveConstructor">there</a> <a id="8538" class="Symbol">:</a> <a id="8540" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8542" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">⊢</a> <a id="8544" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="8546" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">↦●</a> <a id="8549" class="Symbol">→</a> <a id="8551" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8553" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="8555" href="Graded.Heap.Untyped.html#7531" class="Generalizable">c′</a> <a id="8558" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">⊢</a> <a id="8560" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="8562" href="Data.Fin.Base.html#1202" class="InductiveConstructor Operator">+1</a> <a id="8565" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">↦●</a>
  <a id="_⊢_↦●.there●"></a><a id="8570" href="Graded.Heap.Untyped.html#8570" class="InductiveConstructor">there●</a> <a id="8577" class="Symbol">:</a> <a id="8579" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8581" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">⊢</a> <a id="8583" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="8585" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">↦●</a> <a id="8588" class="Symbol">→</a> <a id="8590" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8592" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">∙●</a> <a id="8595" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">⊢</a> <a id="8597" href="Graded.Heap.Untyped.html#7549" class="Generalizable">y</a> <a id="8599" href="Data.Fin.Base.html#1202" class="InductiveConstructor Operator">+1</a> <a id="8602" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">↦●</a>

<a id="8606" class="Keyword">infix</a> <a id="8612" class="Number">5</a> <a id="8614" href="Graded.Heap.Untyped.html#8660" class="Datatype Operator">_~ʰ_</a>

<a id="8620" class="Comment">-- Equality of heaps up to grades</a>

<a id="8655" class="Keyword">data</a> <a id="_~ʰ_"></a><a id="8660" href="Graded.Heap.Untyped.html#8660" class="Datatype Operator">_~ʰ_</a> <a id="8665" class="Symbol">:</a> <a id="8667" class="Symbol">(</a><a id="8668" href="Graded.Heap.Untyped.html#8668" class="Bound">H</a> <a id="8670" href="Graded.Heap.Untyped.html#8670" class="Bound">H′</a> <a id="8673" class="Symbol">:</a> <a id="8675" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="8680" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="8682" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="8683" class="Symbol">)</a> <a id="8685" class="Symbol">→</a> <a id="8687" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="8691" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="8693" class="Keyword">where</a>
  <a id="_~ʰ_.ε"></a><a id="8701" href="Graded.Heap.Untyped.html#8701" class="InductiveConstructor">ε</a> <a id="8703" class="Symbol">:</a> <a id="8705" href="Graded.Heap.Untyped.html#7232" class="InductiveConstructor">ε</a> <a id="8707" href="Graded.Heap.Untyped.html#8660" class="Datatype Operator">~ʰ</a> <a id="8710" href="Graded.Heap.Untyped.html#7232" class="InductiveConstructor">ε</a>
  <a id="_~ʰ_._∙_"></a><a id="8714" href="Graded.Heap.Untyped.html#8714" class="InductiveConstructor Operator">_∙_</a> <a id="8718" class="Symbol">:</a> <a id="8720" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8722" href="Graded.Heap.Untyped.html#8660" class="Datatype Operator">~ʰ</a> <a id="8725" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a> <a id="8728" class="Symbol">→</a> <a id="8730" class="Symbol">(</a><a id="8731" href="Graded.Heap.Untyped.html#8731" class="Bound">c</a> <a id="8733" class="Symbol">:</a> <a id="8735" href="Graded.Heap.Untyped.html#1880" class="Function">Entry</a> <a id="8741" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="8743" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="8744" class="Symbol">)</a> <a id="8746" class="Symbol">→</a> <a id="8748" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8750" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="8752" class="Symbol">(</a><a id="8753" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="8755" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8757" href="Graded.Heap.Untyped.html#8731" class="Bound">c</a><a id="8758" class="Symbol">)</a> <a id="8760" href="Graded.Heap.Untyped.html#8660" class="Datatype Operator">~ʰ</a> <a id="8763" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a> <a id="8766" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="8768" class="Symbol">(</a><a id="8769" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="8771" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8773" href="Graded.Heap.Untyped.html#8731" class="Bound">c</a><a id="8774" class="Symbol">)</a>
  <a id="_~ʰ_._∙●"></a><a id="8778" href="Graded.Heap.Untyped.html#8778" class="InductiveConstructor Operator">_∙●</a> <a id="8782" class="Symbol">:</a> <a id="8784" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8786" href="Graded.Heap.Untyped.html#8660" class="Datatype Operator">~ʰ</a> <a id="8789" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a> <a id="8792" class="Symbol">→</a> <a id="8794" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8796" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">∙●</a> <a id="8799" href="Graded.Heap.Untyped.html#8660" class="Datatype Operator">~ʰ</a> <a id="8802" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a> <a id="8805" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">∙●</a>

<a id="8809" class="Comment">-- Weakening of heaps</a>

<a id="8832" class="Keyword">data</a> <a id="_∷_⊇ʰ_"></a><a id="8837" href="Graded.Heap.Untyped.html#8837" class="Datatype Operator">_∷_⊇ʰ_</a> <a id="8844" class="Symbol">:</a> <a id="8846" class="Symbol">(</a><a id="8847" href="Graded.Heap.Untyped.html#8847" class="Bound">ρ</a> <a id="8849" class="Symbol">:</a> <a id="8851" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="8854" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="8856" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="8857" class="Symbol">)</a> <a id="8859" class="Symbol">(</a><a id="8860" href="Graded.Heap.Untyped.html#8860" class="Bound">H</a> <a id="8862" class="Symbol">:</a> <a id="8864" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="8869" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="8871" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="8872" class="Symbol">)</a> <a id="8874" class="Symbol">(</a><a id="8875" href="Graded.Heap.Untyped.html#8875" class="Bound">H′</a> <a id="8878" class="Symbol">:</a> <a id="8880" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="8885" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="8887" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="8888" class="Symbol">)</a> <a id="8890" class="Symbol">→</a> <a id="8892" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="8896" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="8898" class="Keyword">where</a>
  <a id="_∷_⊇ʰ_.id"></a><a id="8906" href="Graded.Heap.Untyped.html#8906" class="InductiveConstructor">id</a> <a id="8909" class="Symbol">:</a> <a id="8911" href="Definition.Untyped.NotParametrised.html#2977" class="InductiveConstructor">id</a> <a id="8914" href="Graded.Heap.Untyped.html#8837" class="Datatype Operator">∷</a> <a id="8916" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8918" href="Graded.Heap.Untyped.html#8837" class="Datatype Operator">⊇ʰ</a> <a id="8921" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a>
  <a id="_∷_⊇ʰ_.step"></a><a id="8925" href="Graded.Heap.Untyped.html#8925" class="InductiveConstructor">step</a> <a id="8930" class="Symbol">:</a> <a id="8932" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="8934" href="Graded.Heap.Untyped.html#8837" class="Datatype Operator">∷</a> <a id="8936" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8938" href="Graded.Heap.Untyped.html#8837" class="Datatype Operator">⊇ʰ</a> <a id="8941" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a> <a id="8944" class="Symbol">→</a> <a id="8946" href="Definition.Untyped.NotParametrised.html#3041" class="InductiveConstructor">step</a> <a id="8951" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="8953" href="Graded.Heap.Untyped.html#8837" class="Datatype Operator">∷</a> <a id="8955" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8957" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="8959" href="Graded.Heap.Untyped.html#7531" class="Generalizable">c′</a> <a id="8962" href="Graded.Heap.Untyped.html#8837" class="Datatype Operator">⊇ʰ</a> <a id="8965" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a>
  <a id="_∷_⊇ʰ_.lift"></a><a id="8970" href="Graded.Heap.Untyped.html#8970" class="InductiveConstructor">lift</a> <a id="8975" class="Symbol">:</a> <a id="8977" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="8979" href="Graded.Heap.Untyped.html#8837" class="Datatype Operator">∷</a> <a id="8981" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="8983" href="Graded.Heap.Untyped.html#8837" class="Datatype Operator">⊇ʰ</a> <a id="8986" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a> <a id="8989" class="Symbol">→</a> <a id="8991" href="Definition.Untyped.NotParametrised.html#3130" class="InductiveConstructor">lift</a> <a id="8996" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="8998" href="Graded.Heap.Untyped.html#8837" class="Datatype Operator">∷</a> <a id="9000" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="9002" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="9004" class="Symbol">(</a><a id="9005" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="9007" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9009" href="Graded.Heap.Untyped.html#2044" class="Function">wkᵉⁿ</a> <a id="9014" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="9016" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a><a id="9017" class="Symbol">)</a> <a id="9019" href="Graded.Heap.Untyped.html#8837" class="Datatype Operator">⊇ʰ</a> <a id="9022" href="Graded.Heap.Untyped.html#7499" class="Generalizable">H′</a> <a id="9025" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="9027" class="Symbol">(</a><a id="9028" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="9030" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9032" href="Graded.Heap.Untyped.html#7515" class="Generalizable">c</a><a id="9033" class="Symbol">)</a>

<a id="9036" class="Comment">-- Heaps as substitutions</a>

<a id="toSubstₕ"></a><a id="9063" href="Graded.Heap.Untyped.html#9063" class="Function">toSubstₕ</a> <a id="9072" class="Symbol">:</a> <a id="9074" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="9079" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="9081" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="9083" class="Symbol">→</a> <a id="9085" href="Definition.Untyped.html#11546" class="Function">Subst</a> <a id="9091" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="9093" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a>
<a id="9095" href="Graded.Heap.Untyped.html#9063" class="Function">toSubstₕ</a> <a id="9104" href="Graded.Heap.Untyped.html#7232" class="InductiveConstructor">ε</a> <a id="9106" class="Symbol">=</a> <a id="9108" href="Definition.Untyped.html#12613" class="Function">idSubst</a>
<a id="9116" href="Graded.Heap.Untyped.html#9063" class="Function">toSubstₕ</a> <a id="9125" class="Symbol">(</a><a id="9126" href="Graded.Heap.Untyped.html#9126" class="Bound">H</a> <a id="9128" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="9130" class="Symbol">(_</a> <a id="9133" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9135" href="Graded.Heap.Untyped.html#9135" class="Bound">t</a> <a id="9137" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9139" href="Graded.Heap.Untyped.html#9139" class="Bound">ρ</a><a id="9140" class="Symbol">))</a> <a id="9143" class="Symbol">=</a>
  <a id="9147" class="Keyword">let</a> <a id="9151" href="Graded.Heap.Untyped.html#9151" class="Bound">σ</a> <a id="9153" class="Symbol">=</a> <a id="9155" href="Graded.Heap.Untyped.html#9063" class="Function">toSubstₕ</a> <a id="9164" href="Graded.Heap.Untyped.html#9126" class="Bound">H</a>
  <a id="9168" class="Keyword">in</a>  <a id="9172" href="Definition.Untyped.html#15372" class="Function">consSubst</a> <a id="9182" href="Graded.Heap.Untyped.html#9151" class="Bound">σ</a> <a id="9184" class="Symbol">(</a><a id="9185" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="9188" href="Graded.Heap.Untyped.html#9139" class="Bound">ρ</a> <a id="9190" href="Graded.Heap.Untyped.html#9135" class="Bound">t</a> <a id="9192" href="Definition.Untyped.html#13697" class="Function Operator">[</a> <a id="9194" href="Graded.Heap.Untyped.html#9151" class="Bound">σ</a> <a id="9196" href="Definition.Untyped.html#13697" class="Function Operator">]</a><a id="9197" class="Symbol">)</a>
<a id="9199" href="Graded.Heap.Untyped.html#9063" class="Function">toSubstₕ</a> <a id="9208" class="Symbol">(</a><a id="9209" href="Graded.Heap.Untyped.html#9209" class="Bound">H</a> <a id="9211" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">∙●</a><a id="9213" class="Symbol">)</a> <a id="9215" class="Symbol">=</a> <a id="9217" href="Definition.Untyped.html#13005" class="Function">liftSubst</a> <a id="9227" class="Symbol">(</a><a id="9228" href="Graded.Heap.Untyped.html#9063" class="Function">toSubstₕ</a> <a id="9237" href="Graded.Heap.Untyped.html#9209" class="Bound">H</a><a id="9238" class="Symbol">)</a>

<a id="9241" class="Keyword">infix</a> <a id="9247" class="Number">25</a> <a id="9250" href="Graded.Heap.Untyped.html#9290" class="Function Operator">_[_]ₕ</a>
<a id="9256" class="Keyword">infix</a> <a id="9262" class="Number">25</a> <a id="9265" href="Graded.Heap.Untyped.html#9354" class="Function Operator">_[_]⇑ₕ</a>
<a id="9272" class="Keyword">infix</a> <a id="9278" class="Number">25</a> <a id="9281" href="Graded.Heap.Untyped.html#9442" class="Function Operator">_[_]⇑²ₕ</a>

<a id="_[_]ₕ"></a><a id="9290" href="Graded.Heap.Untyped.html#9290" class="Function Operator">_[_]ₕ</a> <a id="9296" class="Symbol">:</a> <a id="9298" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="9303" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="9305" class="Symbol">→</a> <a id="9307" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="9312" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="9314" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="9316" class="Symbol">→</a> <a id="9318" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="9323" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a>
<a id="9325" href="Graded.Heap.Untyped.html#9325" class="Bound">t</a> <a id="9327" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="9329" href="Graded.Heap.Untyped.html#9329" class="Bound">H</a> <a id="9331" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a> <a id="9334" class="Symbol">=</a> <a id="9336" href="Graded.Heap.Untyped.html#9325" class="Bound">t</a> <a id="9338" href="Definition.Untyped.html#13697" class="Function Operator">[</a> <a id="9340" href="Graded.Heap.Untyped.html#9063" class="Function">toSubstₕ</a> <a id="9349" href="Graded.Heap.Untyped.html#9329" class="Bound">H</a> <a id="9351" href="Definition.Untyped.html#13697" class="Function Operator">]</a>

<a id="_[_]⇑ₕ"></a><a id="9354" href="Graded.Heap.Untyped.html#9354" class="Function Operator">_[_]⇑ₕ</a> <a id="9361" class="Symbol">:</a> <a id="9363" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="9368" class="Symbol">(</a><a id="9369" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="9372" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="9373" class="Symbol">)</a> <a id="9375" class="Symbol">→</a> <a id="9377" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="9382" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="9384" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="9386" class="Symbol">→</a> <a id="9388" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="9393" class="Symbol">(</a><a id="9394" href="Tools.Nat.html#2170" class="InductiveConstructor">1+</a> <a id="9397" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a><a id="9398" class="Symbol">)</a>
<a id="9400" href="Graded.Heap.Untyped.html#9400" class="Bound">t</a> <a id="9402" href="Graded.Heap.Untyped.html#9354" class="Function Operator">[</a> <a id="9404" href="Graded.Heap.Untyped.html#9404" class="Bound">H</a> <a id="9406" href="Graded.Heap.Untyped.html#9354" class="Function Operator">]⇑ₕ</a> <a id="9410" class="Symbol">=</a> <a id="9412" href="Graded.Heap.Untyped.html#9400" class="Bound">t</a> <a id="9414" href="Definition.Untyped.html#13697" class="Function Operator">[</a> <a id="9416" href="Definition.Untyped.html#13005" class="Function">liftSubst</a> <a id="9426" class="Symbol">(</a><a id="9427" href="Graded.Heap.Untyped.html#9063" class="Function">toSubstₕ</a> <a id="9436" href="Graded.Heap.Untyped.html#9404" class="Bound">H</a><a id="9437" class="Symbol">)</a> <a id="9439" href="Definition.Untyped.html#13697" class="Function Operator">]</a>

<a id="_[_]⇑²ₕ"></a><a id="9442" href="Graded.Heap.Untyped.html#9442" class="Function Operator">_[_]⇑²ₕ</a> <a id="9450" class="Symbol">:</a> <a id="9452" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="9457" class="Symbol">(</a><a id="9458" href="Tools.Nat.html#2191" class="InductiveConstructor">2+</a> <a id="9461" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="9462" class="Symbol">)</a> <a id="9464" class="Symbol">→</a> <a id="9466" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="9471" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="9473" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="9475" class="Symbol">→</a> <a id="9477" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="9482" class="Symbol">(</a><a id="9483" href="Tools.Nat.html#2191" class="InductiveConstructor">2+</a> <a id="9486" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a><a id="9487" class="Symbol">)</a>
<a id="9489" href="Graded.Heap.Untyped.html#9489" class="Bound">t</a> <a id="9491" href="Graded.Heap.Untyped.html#9442" class="Function Operator">[</a> <a id="9493" href="Graded.Heap.Untyped.html#9493" class="Bound">H</a> <a id="9495" href="Graded.Heap.Untyped.html#9442" class="Function Operator">]⇑²ₕ</a> <a id="9500" class="Symbol">=</a> <a id="9502" href="Graded.Heap.Untyped.html#9489" class="Bound">t</a> <a id="9504" href="Definition.Untyped.html#13697" class="Function Operator">[</a> <a id="9506" href="Definition.Untyped.html#13118" class="Function">liftSubstn</a> <a id="9517" class="Symbol">(</a><a id="9518" href="Graded.Heap.Untyped.html#9063" class="Function">toSubstₕ</a> <a id="9527" href="Graded.Heap.Untyped.html#9493" class="Bound">H</a><a id="9528" class="Symbol">)</a> <a id="9530" class="Number">2</a> <a id="9532" href="Definition.Untyped.html#13697" class="Function Operator">]</a>

<a id="9535" class="Comment">-- A weakening that acts as an &quot;inverse&quot; to a heap substitution</a>
<a id="9599" class="Comment">-- See Graded.Heap.Untyped.Properties.toWkₕ-toSubstₕ</a>

<a id="toWkₕ"></a><a id="9653" href="Graded.Heap.Untyped.html#9653" class="Function">toWkₕ</a> <a id="9659" class="Symbol">:</a> <a id="9661" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="9666" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="9668" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="9670" class="Symbol">→</a> <a id="9672" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="9675" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="9677" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a>
<a id="9679" href="Graded.Heap.Untyped.html#9653" class="Function">toWkₕ</a> <a id="9685" href="Graded.Heap.Untyped.html#7232" class="InductiveConstructor">ε</a> <a id="9687" class="Symbol">=</a> <a id="9689" href="Definition.Untyped.NotParametrised.html#2977" class="InductiveConstructor">id</a>
<a id="9692" href="Graded.Heap.Untyped.html#9653" class="Function">toWkₕ</a> <a id="9698" class="Symbol">(</a><a id="9699" href="Graded.Heap.Untyped.html#9699" class="Bound">H</a> <a id="9701" href="Graded.Heap.Untyped.html#7249" class="InductiveConstructor Operator">∙</a> <a id="9703" href="Graded.Heap.Untyped.html#9703" class="Bound">c</a><a id="9704" class="Symbol">)</a> <a id="9706" class="Symbol">=</a> <a id="9708" href="Definition.Untyped.NotParametrised.html#3041" class="InductiveConstructor">step</a> <a id="9713" class="Symbol">(</a><a id="9714" href="Graded.Heap.Untyped.html#9653" class="Function">toWkₕ</a> <a id="9720" href="Graded.Heap.Untyped.html#9699" class="Bound">H</a><a id="9721" class="Symbol">)</a>
<a id="9723" href="Graded.Heap.Untyped.html#9653" class="Function">toWkₕ</a> <a id="9729" class="Symbol">(</a><a id="9730" href="Graded.Heap.Untyped.html#9730" class="Bound">H</a> <a id="9732" href="Graded.Heap.Untyped.html#7307" class="InductiveConstructor Operator">∙●</a><a id="9734" class="Symbol">)</a> <a id="9736" class="Symbol">=</a> <a id="9738" href="Definition.Untyped.NotParametrised.html#3130" class="InductiveConstructor">lift</a> <a id="9743" class="Symbol">(</a><a id="9744" href="Graded.Heap.Untyped.html#9653" class="Function">toWkₕ</a> <a id="9750" href="Graded.Heap.Untyped.html#9730" class="Bound">H</a><a id="9751" class="Symbol">)</a>

<a id="9754" class="Comment">------------------------------------------------------------------------</a>
<a id="9827" class="Comment">-- Evaluation states</a>

<a id="9849" class="Comment">-- States consist of a heap, a head term, an environment/weakening</a>
<a id="9916" class="Comment">-- mapping variable indices to pointer indices and a stack.</a>
<a id="9976" class="Comment">-- Indexed by the number of dummy entries in the heap, the size</a>
<a id="10040" class="Comment">-- of the heap and the number of free variables in the head term.</a>

<a id="10107" class="Keyword">infix</a> <a id="10113" class="Number">2</a> <a id="10115" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">⟨_,_,_,_⟩</a>

<a id="10126" class="Keyword">record</a> <a id="State"></a><a id="10133" href="Graded.Heap.Untyped.html#10133" class="Record">State</a> <a id="10139" class="Symbol">(</a><a id="10140" href="Graded.Heap.Untyped.html#10140" class="Bound">k</a> <a id="10142" href="Graded.Heap.Untyped.html#10142" class="Bound">m</a> <a id="10144" href="Graded.Heap.Untyped.html#10144" class="Bound">n</a> <a id="10146" class="Symbol">:</a> <a id="10148" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="10151" class="Symbol">)</a> <a id="10153" class="Symbol">:</a> <a id="10155" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="10159" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="10161" class="Keyword">where</a>
  <a id="10169" class="Keyword">no-eta-equality</a>
  <a id="10187" class="Keyword">pattern</a>
  <a id="10197" class="Keyword">constructor</a> <a id="⟨_,_,_,_⟩"></a><a id="10209" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">⟨_,_,_,_⟩</a>
  <a id="10221" class="Keyword">field</a>
    <a id="State.heap"></a><a id="10231" href="Graded.Heap.Untyped.html#10231" class="Field">heap</a> <a id="10236" class="Symbol">:</a> <a id="10238" href="Graded.Heap.Untyped.html#7197" class="Datatype">Heap</a> <a id="10243" href="Graded.Heap.Untyped.html#10140" class="Bound">k</a> <a id="10245" href="Graded.Heap.Untyped.html#10142" class="Bound">m</a>
    <a id="State.head"></a><a id="10251" href="Graded.Heap.Untyped.html#10251" class="Field">head</a> <a id="10256" class="Symbol">:</a> <a id="10258" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="10263" href="Graded.Heap.Untyped.html#10144" class="Bound">n</a>
    <a id="State.env"></a><a id="10269" href="Graded.Heap.Untyped.html#10269" class="Field">env</a> <a id="10273" class="Symbol">:</a> <a id="10275" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="10278" href="Graded.Heap.Untyped.html#10142" class="Bound">m</a> <a id="10280" href="Graded.Heap.Untyped.html#10144" class="Bound">n</a>
    <a id="State.stack"></a><a id="10286" href="Graded.Heap.Untyped.html#10286" class="Field">stack</a> <a id="10292" class="Symbol">:</a> <a id="10294" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="10300" href="Graded.Heap.Untyped.html#10142" class="Bound">m</a>

<a id="10303" class="Comment">-- Converting eliminators back to terms</a>

<a id="10344" class="Keyword">infixr</a> <a id="10351" class="Number">29</a> <a id="10354" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅_⦆ᵉ_</a>

<a id="⦅_⦆ᵉ_"></a><a id="10361" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅_⦆ᵉ_</a> <a id="10367" class="Symbol">:</a> <a id="10369" href="Graded.Heap.Untyped.html#2427" class="Datatype">Elim</a> <a id="10374" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="10376" class="Symbol">→</a> <a id="10378" class="Symbol">(</a><a id="10379" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="10384" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="10386" class="Symbol">→</a> <a id="10388" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="10393" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="10394" class="Symbol">)</a>
<a id="10396" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="10398" href="Graded.Heap.Untyped.html#2458" class="InductiveConstructor">∘ₑ</a> <a id="10401" href="Graded.Heap.Untyped.html#10401" class="Bound">p</a> <a id="10403" href="Graded.Heap.Untyped.html#10403" class="Bound">u</a> <a id="10405" href="Graded.Heap.Untyped.html#10405" class="Bound">ρ</a> <a id="10407" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="10410" href="Graded.Heap.Untyped.html#10410" class="Bound">t</a> <a id="10412" class="Symbol">=</a> <a id="10414" href="Graded.Heap.Untyped.html#10410" class="Bound">t</a> <a id="10416" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">∘⟨</a> <a id="10419" href="Graded.Heap.Untyped.html#10401" class="Bound">p</a> <a id="10421" href="Definition.Untyped.html#1413" class="InductiveConstructor Operator">⟩</a> <a id="10423" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10426" href="Graded.Heap.Untyped.html#10405" class="Bound">ρ</a> <a id="10428" href="Graded.Heap.Untyped.html#10403" class="Bound">u</a>
<a id="10430" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="10432" href="Graded.Heap.Untyped.html#2515" class="InductiveConstructor">fstₑ</a> <a id="10437" href="Graded.Heap.Untyped.html#10437" class="Bound">p</a> <a id="10439" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="10442" href="Graded.Heap.Untyped.html#10442" class="Bound">t</a> <a id="10444" class="Symbol">=</a> <a id="10446" href="Definition.Untyped.html#1519" class="InductiveConstructor">fst</a> <a id="10450" href="Graded.Heap.Untyped.html#10437" class="Bound">p</a> <a id="10452" href="Graded.Heap.Untyped.html#10442" class="Bound">t</a>
<a id="10454" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="10456" href="Graded.Heap.Untyped.html#2540" class="InductiveConstructor">sndₑ</a> <a id="10461" href="Graded.Heap.Untyped.html#10461" class="Bound">p</a> <a id="10463" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="10466" href="Graded.Heap.Untyped.html#10466" class="Bound">t</a> <a id="10468" class="Symbol">=</a> <a id="10470" href="Definition.Untyped.html#1557" class="InductiveConstructor">snd</a> <a id="10474" href="Graded.Heap.Untyped.html#10461" class="Bound">p</a> <a id="10476" href="Graded.Heap.Untyped.html#10466" class="Bound">t</a>
<a id="10478" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="10480" href="Graded.Heap.Untyped.html#2565" class="InductiveConstructor">prodrecₑ</a> <a id="10489" href="Graded.Heap.Untyped.html#10489" class="Bound">r</a> <a id="10491" href="Graded.Heap.Untyped.html#10491" class="Bound">p</a> <a id="10493" href="Graded.Heap.Untyped.html#10493" class="Bound">q</a> <a id="10495" href="Graded.Heap.Untyped.html#10495" class="Bound">A</a> <a id="10497" href="Graded.Heap.Untyped.html#10497" class="Bound">u</a> <a id="10499" href="Graded.Heap.Untyped.html#10499" class="Bound">ρ</a> <a id="10501" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="10504" href="Graded.Heap.Untyped.html#10504" class="Bound">t</a> <a id="10506" class="Symbol">=</a>
  <a id="10510" href="Definition.Untyped.html#1595" class="InductiveConstructor">prodrec</a> <a id="10518" href="Graded.Heap.Untyped.html#10489" class="Bound">r</a> <a id="10520" href="Graded.Heap.Untyped.html#10491" class="Bound">p</a> <a id="10522" href="Graded.Heap.Untyped.html#10493" class="Bound">q</a> <a id="10524" class="Symbol">(</a><a id="10525" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10528" class="Symbol">(</a><a id="10529" href="Definition.Untyped.NotParametrised.html#3130" class="InductiveConstructor">lift</a> <a id="10534" href="Graded.Heap.Untyped.html#10499" class="Bound">ρ</a><a id="10535" class="Symbol">)</a> <a id="10537" href="Graded.Heap.Untyped.html#10495" class="Bound">A</a><a id="10538" class="Symbol">)</a> <a id="10540" href="Graded.Heap.Untyped.html#10504" class="Bound">t</a> <a id="10542" class="Symbol">(</a><a id="10543" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10546" class="Symbol">(</a><a id="10547" href="Definition.Untyped.NotParametrised.html#3547" class="Function">liftn</a> <a id="10553" href="Graded.Heap.Untyped.html#10499" class="Bound">ρ</a> <a id="10555" class="Number">2</a><a id="10556" class="Symbol">)</a> <a id="10558" href="Graded.Heap.Untyped.html#10497" class="Bound">u</a><a id="10559" class="Symbol">)</a>
<a id="10561" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="10563" href="Graded.Heap.Untyped.html#2663" class="InductiveConstructor">natrecₑ</a> <a id="10571" href="Graded.Heap.Untyped.html#10571" class="Bound">p</a> <a id="10573" href="Graded.Heap.Untyped.html#10573" class="Bound">q</a> <a id="10575" href="Graded.Heap.Untyped.html#10575" class="Bound">r</a> <a id="10577" class="Symbol">_</a> <a id="10579" href="Graded.Heap.Untyped.html#10579" class="Bound">A</a> <a id="10581" href="Graded.Heap.Untyped.html#10581" class="Bound">z</a> <a id="10583" href="Graded.Heap.Untyped.html#10583" class="Bound">s</a> <a id="10585" href="Graded.Heap.Untyped.html#10585" class="Bound">ρ</a> <a id="10587" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="10590" href="Graded.Heap.Untyped.html#10590" class="Bound">t</a> <a id="10592" class="Symbol">=</a>
  <a id="10596" href="Definition.Untyped.html#1748" class="InductiveConstructor">natrec</a> <a id="10603" href="Graded.Heap.Untyped.html#10571" class="Bound">p</a> <a id="10605" href="Graded.Heap.Untyped.html#10573" class="Bound">q</a> <a id="10607" href="Graded.Heap.Untyped.html#10575" class="Bound">r</a> <a id="10609" class="Symbol">(</a><a id="10610" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10613" class="Symbol">(</a><a id="10614" href="Definition.Untyped.NotParametrised.html#3130" class="InductiveConstructor">lift</a> <a id="10619" href="Graded.Heap.Untyped.html#10585" class="Bound">ρ</a><a id="10620" class="Symbol">)</a> <a id="10622" href="Graded.Heap.Untyped.html#10579" class="Bound">A</a><a id="10623" class="Symbol">)</a> <a id="10625" class="Symbol">(</a><a id="10626" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10629" href="Graded.Heap.Untyped.html#10585" class="Bound">ρ</a> <a id="10631" href="Graded.Heap.Untyped.html#10581" class="Bound">z</a><a id="10632" class="Symbol">)</a> <a id="10634" class="Symbol">(</a><a id="10635" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10638" class="Symbol">(</a><a id="10639" href="Definition.Untyped.NotParametrised.html#3547" class="Function">liftn</a> <a id="10645" href="Graded.Heap.Untyped.html#10585" class="Bound">ρ</a> <a id="10647" class="Number">2</a><a id="10648" class="Symbol">)</a> <a id="10650" href="Graded.Heap.Untyped.html#10583" class="Bound">s</a><a id="10651" class="Symbol">)</a> <a id="10653" href="Graded.Heap.Untyped.html#10590" class="Bound">t</a>
<a id="10655" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="10657" href="Graded.Heap.Untyped.html#2777" class="InductiveConstructor">unitrecₑ</a> <a id="10666" href="Graded.Heap.Untyped.html#10666" class="Bound">l</a> <a id="10668" href="Graded.Heap.Untyped.html#10668" class="Bound">p</a> <a id="10670" href="Graded.Heap.Untyped.html#10670" class="Bound">q</a> <a id="10672" href="Graded.Heap.Untyped.html#10672" class="Bound">A</a> <a id="10674" href="Graded.Heap.Untyped.html#10674" class="Bound">u</a> <a id="10676" href="Graded.Heap.Untyped.html#10676" class="Bound">ρ</a> <a id="10678" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="10681" href="Graded.Heap.Untyped.html#10681" class="Bound">t</a> <a id="10683" class="Symbol">=</a>
  <a id="10687" href="Definition.Untyped.html#1941" class="InductiveConstructor">unitrec</a> <a id="10695" href="Graded.Heap.Untyped.html#10666" class="Bound">l</a> <a id="10697" href="Graded.Heap.Untyped.html#10668" class="Bound">p</a> <a id="10699" href="Graded.Heap.Untyped.html#10670" class="Bound">q</a> <a id="10701" class="Symbol">(</a><a id="10702" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10705" class="Symbol">(</a><a id="10706" href="Definition.Untyped.NotParametrised.html#3130" class="InductiveConstructor">lift</a> <a id="10711" href="Graded.Heap.Untyped.html#10676" class="Bound">ρ</a><a id="10712" class="Symbol">)</a> <a id="10714" href="Graded.Heap.Untyped.html#10672" class="Bound">A</a><a id="10715" class="Symbol">)</a> <a id="10717" href="Graded.Heap.Untyped.html#10681" class="Bound">t</a> <a id="10719" class="Symbol">(</a><a id="10720" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10723" href="Graded.Heap.Untyped.html#10676" class="Bound">ρ</a> <a id="10725" href="Graded.Heap.Untyped.html#10674" class="Bound">u</a><a id="10726" class="Symbol">)</a>
<a id="10728" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="10730" href="Graded.Heap.Untyped.html#2889" class="InductiveConstructor">emptyrecₑ</a> <a id="10740" href="Graded.Heap.Untyped.html#10740" class="Bound">p</a> <a id="10742" href="Graded.Heap.Untyped.html#10742" class="Bound">A</a> <a id="10744" href="Graded.Heap.Untyped.html#10744" class="Bound">ρ</a> <a id="10746" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="10749" href="Graded.Heap.Untyped.html#10749" class="Bound">t</a> <a id="10751" class="Symbol">=</a>
  <a id="10755" href="Definition.Untyped.html#2051" class="InductiveConstructor">emptyrec</a> <a id="10764" href="Graded.Heap.Untyped.html#10740" class="Bound">p</a> <a id="10766" class="Symbol">(</a><a id="10767" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10770" href="Graded.Heap.Untyped.html#10744" class="Bound">ρ</a> <a id="10772" href="Graded.Heap.Untyped.html#10742" class="Bound">A</a><a id="10773" class="Symbol">)</a> <a id="10775" href="Graded.Heap.Untyped.html#10749" class="Bound">t</a>
<a id="10777" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="10779" href="Graded.Heap.Untyped.html#2946" class="InductiveConstructor">Jₑ</a> <a id="10782" href="Graded.Heap.Untyped.html#10782" class="Bound">p</a> <a id="10784" href="Graded.Heap.Untyped.html#10784" class="Bound">q</a> <a id="10786" href="Graded.Heap.Untyped.html#10786" class="Bound">A</a> <a id="10788" href="Graded.Heap.Untyped.html#10788" class="Bound">t</a> <a id="10790" href="Graded.Heap.Untyped.html#10790" class="Bound">B</a> <a id="10792" href="Graded.Heap.Untyped.html#10792" class="Bound">u</a> <a id="10794" href="Graded.Heap.Untyped.html#10794" class="Bound">v</a> <a id="10796" href="Graded.Heap.Untyped.html#10796" class="Bound">ρ</a> <a id="10798" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="10801" href="Graded.Heap.Untyped.html#10801" class="Bound">w</a> <a id="10803" class="Symbol">=</a>
  <a id="10807" href="Definition.Untyped.html#2144" class="InductiveConstructor">J</a> <a id="10809" href="Graded.Heap.Untyped.html#10782" class="Bound">p</a> <a id="10811" href="Graded.Heap.Untyped.html#10784" class="Bound">q</a> <a id="10813" class="Symbol">(</a><a id="10814" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10817" href="Graded.Heap.Untyped.html#10796" class="Bound">ρ</a> <a id="10819" href="Graded.Heap.Untyped.html#10786" class="Bound">A</a><a id="10820" class="Symbol">)</a> <a id="10822" class="Symbol">(</a><a id="10823" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10826" href="Graded.Heap.Untyped.html#10796" class="Bound">ρ</a> <a id="10828" href="Graded.Heap.Untyped.html#10788" class="Bound">t</a><a id="10829" class="Symbol">)</a> <a id="10831" class="Symbol">(</a><a id="10832" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10835" class="Symbol">(</a><a id="10836" href="Definition.Untyped.NotParametrised.html#3547" class="Function">liftn</a> <a id="10842" href="Graded.Heap.Untyped.html#10796" class="Bound">ρ</a> <a id="10844" class="Number">2</a><a id="10845" class="Symbol">)</a> <a id="10847" href="Graded.Heap.Untyped.html#10790" class="Bound">B</a><a id="10848" class="Symbol">)</a> <a id="10850" class="Symbol">(</a><a id="10851" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10854" href="Graded.Heap.Untyped.html#10796" class="Bound">ρ</a> <a id="10856" href="Graded.Heap.Untyped.html#10792" class="Bound">u</a><a id="10857" class="Symbol">)</a> <a id="10859" class="Symbol">(</a><a id="10860" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10863" href="Graded.Heap.Untyped.html#10796" class="Bound">ρ</a> <a id="10865" href="Graded.Heap.Untyped.html#10794" class="Bound">v</a><a id="10866" class="Symbol">)</a> <a id="10868" href="Graded.Heap.Untyped.html#10801" class="Bound">w</a>
<a id="10870" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="10872" href="Graded.Heap.Untyped.html#3054" class="InductiveConstructor">Kₑ</a> <a id="10875" href="Graded.Heap.Untyped.html#10875" class="Bound">p</a> <a id="10877" href="Graded.Heap.Untyped.html#10877" class="Bound">A</a> <a id="10879" href="Graded.Heap.Untyped.html#10879" class="Bound">t</a> <a id="10881" href="Graded.Heap.Untyped.html#10881" class="Bound">B</a> <a id="10883" href="Graded.Heap.Untyped.html#10883" class="Bound">u</a> <a id="10885" href="Graded.Heap.Untyped.html#10885" class="Bound">ρ</a> <a id="10887" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="10890" href="Graded.Heap.Untyped.html#10890" class="Bound">v</a> <a id="10892" class="Symbol">=</a>
  <a id="10896" href="Definition.Untyped.html#2225" class="InductiveConstructor">K</a> <a id="10898" href="Graded.Heap.Untyped.html#10875" class="Bound">p</a> <a id="10900" class="Symbol">(</a><a id="10901" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10904" href="Graded.Heap.Untyped.html#10885" class="Bound">ρ</a> <a id="10906" href="Graded.Heap.Untyped.html#10877" class="Bound">A</a><a id="10907" class="Symbol">)</a> <a id="10909" class="Symbol">(</a><a id="10910" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10913" href="Graded.Heap.Untyped.html#10885" class="Bound">ρ</a> <a id="10915" href="Graded.Heap.Untyped.html#10879" class="Bound">t</a><a id="10916" class="Symbol">)</a> <a id="10918" class="Symbol">(</a><a id="10919" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10922" class="Symbol">(</a><a id="10923" href="Definition.Untyped.NotParametrised.html#3130" class="InductiveConstructor">lift</a> <a id="10928" href="Graded.Heap.Untyped.html#10885" class="Bound">ρ</a><a id="10929" class="Symbol">)</a> <a id="10931" href="Graded.Heap.Untyped.html#10881" class="Bound">B</a><a id="10932" class="Symbol">)</a> <a id="10934" class="Symbol">(</a><a id="10935" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10938" href="Graded.Heap.Untyped.html#10885" class="Bound">ρ</a> <a id="10940" href="Graded.Heap.Untyped.html#10883" class="Bound">u</a><a id="10941" class="Symbol">)</a> <a id="10943" href="Graded.Heap.Untyped.html#10890" class="Bound">v</a>
<a id="10945" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="10947" href="Graded.Heap.Untyped.html#3158" class="InductiveConstructor">[]-congₑ</a> <a id="10956" href="Graded.Heap.Untyped.html#10956" class="Bound">s</a> <a id="10958" href="Graded.Heap.Untyped.html#10958" class="Bound">A</a> <a id="10960" href="Graded.Heap.Untyped.html#10960" class="Bound">t</a> <a id="10962" href="Graded.Heap.Untyped.html#10962" class="Bound">u</a> <a id="10964" href="Graded.Heap.Untyped.html#10964" class="Bound">ρ</a> <a id="10966" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="10969" href="Graded.Heap.Untyped.html#10969" class="Bound">v</a> <a id="10971" class="Symbol">=</a>
  <a id="10975" href="Definition.Untyped.html#2302" class="InductiveConstructor">[]-cong</a> <a id="10983" href="Graded.Heap.Untyped.html#10956" class="Bound">s</a> <a id="10985" class="Symbol">(</a><a id="10986" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10989" href="Graded.Heap.Untyped.html#10964" class="Bound">ρ</a> <a id="10991" href="Graded.Heap.Untyped.html#10958" class="Bound">A</a> <a id="10993" class="Symbol">)</a> <a id="10995" class="Symbol">(</a><a id="10996" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="10999" href="Graded.Heap.Untyped.html#10964" class="Bound">ρ</a> <a id="11001" href="Graded.Heap.Untyped.html#10960" class="Bound">t</a><a id="11002" class="Symbol">)</a> <a id="11004" class="Symbol">(</a><a id="11005" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="11008" href="Graded.Heap.Untyped.html#10964" class="Bound">ρ</a> <a id="11010" href="Graded.Heap.Untyped.html#10962" class="Bound">u</a><a id="11011" class="Symbol">)</a> <a id="11013" href="Graded.Heap.Untyped.html#10969" class="Bound">v</a>
<a id="11015" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="11017" href="Graded.Heap.Untyped.html#3226" class="InductiveConstructor">sucₑ</a> <a id="11022" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="11025" href="Graded.Heap.Untyped.html#11025" class="Bound">t</a> <a id="11027" class="Symbol">=</a> <a id="11029" href="Definition.Untyped.html#1718" class="InductiveConstructor">suc</a> <a id="11033" href="Graded.Heap.Untyped.html#11025" class="Bound">t</a>

<a id="11036" class="Comment">-- Converting stacks back to terms</a>

<a id="11072" class="Keyword">infixr</a> <a id="11079" class="Number">28</a> <a id="11082" href="Graded.Heap.Untyped.html#11089" class="Function Operator">⦅_⦆ˢ_</a>

<a id="⦅_⦆ˢ_"></a><a id="11089" href="Graded.Heap.Untyped.html#11089" class="Function Operator">⦅_⦆ˢ_</a> <a id="11095" class="Symbol">:</a> <a id="11097" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="11103" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="11105" class="Symbol">→</a> <a id="11107" class="Symbol">(</a><a id="11108" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="11113" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="11115" class="Symbol">→</a> <a id="11117" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="11122" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a><a id="11123" class="Symbol">)</a>
<a id="11125" href="Graded.Heap.Untyped.html#11089" class="Function Operator">⦅</a> <a id="11127" href="Graded.Heap.Untyped.html#5746" class="InductiveConstructor">ε</a> <a id="11129" href="Graded.Heap.Untyped.html#11089" class="Function Operator">⦆ˢ</a> <a id="11132" href="Graded.Heap.Untyped.html#11132" class="Bound">t</a> <a id="11134" class="Symbol">=</a> <a id="11136" href="Graded.Heap.Untyped.html#11132" class="Bound">t</a>
<a id="11138" href="Graded.Heap.Untyped.html#11089" class="Function Operator">⦅</a> <a id="11140" href="Graded.Heap.Untyped.html#11140" class="Bound">e</a> <a id="11142" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="11144" href="Graded.Heap.Untyped.html#11144" class="Bound">S</a> <a id="11146" href="Graded.Heap.Untyped.html#11089" class="Function Operator">⦆ˢ</a> <a id="11149" href="Graded.Heap.Untyped.html#11149" class="Bound">t</a> <a id="11151" class="Symbol">=</a> <a id="11153" href="Graded.Heap.Untyped.html#11089" class="Function Operator">⦅</a> <a id="11155" href="Graded.Heap.Untyped.html#11144" class="Bound">S</a> <a id="11157" href="Graded.Heap.Untyped.html#11089" class="Function Operator">⦆ˢ</a> <a id="11160" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦅</a> <a id="11162" href="Graded.Heap.Untyped.html#11140" class="Bound">e</a> <a id="11164" href="Graded.Heap.Untyped.html#10361" class="Function Operator">⦆ᵉ</a> <a id="11167" href="Graded.Heap.Untyped.html#11149" class="Bound">t</a>

<a id="11170" class="Comment">-- Converting states back to terms</a>

<a id="11206" class="Keyword">infix</a> <a id="11212" class="Number">28</a> <a id="11215" href="Graded.Heap.Untyped.html#11220" class="Function Operator">⦅_⦆</a>

<a id="⦅_⦆"></a><a id="11220" href="Graded.Heap.Untyped.html#11220" class="Function Operator">⦅_⦆</a> <a id="11224" class="Symbol">:</a> <a id="11226" class="Symbol">(</a><a id="11227" href="Graded.Heap.Untyped.html#11227" class="Bound">s</a> <a id="11229" class="Symbol">:</a> <a id="11231" href="Graded.Heap.Untyped.html#10133" class="Record">State</a> <a id="11237" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="11239" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="11241" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="11242" class="Symbol">)</a> <a id="11244" class="Symbol">→</a> <a id="11246" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="11251" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a>
<a id="11253" href="Graded.Heap.Untyped.html#11220" class="Function Operator">⦅</a> <a id="11255" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">⟨</a> <a id="11257" href="Graded.Heap.Untyped.html#11257" class="Bound">H</a> <a id="11259" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="11261" href="Graded.Heap.Untyped.html#11261" class="Bound">t</a> <a id="11263" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="11265" href="Graded.Heap.Untyped.html#11265" class="Bound">ρ</a> <a id="11267" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="11269" href="Graded.Heap.Untyped.html#11269" class="Bound">S</a> <a id="11271" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">⟩</a> <a id="11273" href="Graded.Heap.Untyped.html#11220" class="Function Operator">⦆</a> <a id="11275" class="Symbol">=</a> <a id="11277" href="Graded.Heap.Untyped.html#11089" class="Function Operator">⦅</a> <a id="11279" href="Graded.Heap.Untyped.html#11269" class="Bound">S</a> <a id="11281" href="Graded.Heap.Untyped.html#11089" class="Function Operator">⦆ˢ</a> <a id="11284" class="Symbol">(</a><a id="11285" href="Definition.Untyped.html#9240" class="Function">wk</a> <a id="11288" href="Graded.Heap.Untyped.html#11265" class="Bound">ρ</a> <a id="11290" href="Graded.Heap.Untyped.html#11261" class="Bound">t</a><a id="11291" class="Symbol">)</a> <a id="11293" href="Graded.Heap.Untyped.html#9290" class="Function Operator">[</a> <a id="11295" href="Graded.Heap.Untyped.html#11257" class="Bound">H</a> <a id="11297" href="Graded.Heap.Untyped.html#9290" class="Function Operator">]ₕ</a>

<a id="11301" class="Comment">-- The initial state consisting of a heap with only dummy bindings and</a>
<a id="11372" class="Comment">-- an empty stack.</a>

<a id="initial"></a><a id="11392" href="Graded.Heap.Untyped.html#11392" class="Function">initial</a> <a id="11400" class="Symbol">:</a> <a id="11402" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="11407" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="11409" class="Symbol">→</a> <a id="11411" href="Graded.Heap.Untyped.html#10133" class="Record">State</a> <a id="11417" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="11419" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="11421" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a>
<a id="11423" href="Graded.Heap.Untyped.html#11392" class="Function">initial</a> <a id="11431" class="Symbol">{</a><a id="11432" href="Graded.Heap.Untyped.html#11432" class="Bound">k</a><a id="11433" class="Symbol">}</a> <a id="11435" href="Graded.Heap.Untyped.html#11435" class="Bound">t</a> <a id="11437" class="Symbol">=</a> <a id="11439" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">⟨</a> <a id="11441" href="Graded.Heap.Untyped.html#7390" class="Function">erasedHeap</a> <a id="11452" href="Graded.Heap.Untyped.html#11432" class="Bound">k</a> <a id="11454" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="11456" href="Graded.Heap.Untyped.html#11435" class="Bound">t</a> <a id="11458" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="11460" href="Definition.Untyped.NotParametrised.html#2977" class="InductiveConstructor">id</a> <a id="11463" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="11465" href="Graded.Heap.Untyped.html#5746" class="InductiveConstructor">ε</a> <a id="11467" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">⟩</a>

<a id="11470" class="Comment">------------------------------------------------------------------------</a>
<a id="11543" class="Comment">-- Values and normal form head terms</a>

<a id="11581" class="Comment">-- Values are those terms that do not evaluate further</a>

<a id="11637" class="Keyword">data</a> <a id="Value"></a><a id="11642" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11648" class="Symbol">{</a><a id="11649" href="Graded.Heap.Untyped.html#11649" class="Bound">n</a> <a id="11651" class="Symbol">:</a> <a id="11653" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="11656" class="Symbol">}</a> <a id="11658" class="Symbol">:</a> <a id="11660" class="Symbol">(</a><a id="11661" href="Graded.Heap.Untyped.html#11661" class="Bound">t</a> <a id="11663" class="Symbol">:</a> <a id="11665" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="11670" href="Graded.Heap.Untyped.html#11649" class="Bound">n</a><a id="11671" class="Symbol">)</a> <a id="11673" class="Symbol">→</a> <a id="11675" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="11679" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="11681" class="Keyword">where</a>
  <a id="Value.lamᵥ"></a><a id="11689" href="Graded.Heap.Untyped.html#11689" class="InductiveConstructor">lamᵥ</a> <a id="11694" class="Symbol">:</a> <a id="11696" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11702" class="Symbol">(</a><a id="11703" href="Definition.Untyped.html#1370" class="InductiveConstructor">lam</a> <a id="11707" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="11709" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a><a id="11710" class="Symbol">)</a>
  <a id="Value.zeroᵥ"></a><a id="11714" href="Graded.Heap.Untyped.html#11714" class="InductiveConstructor">zeroᵥ</a> <a id="11720" class="Symbol">:</a> <a id="11722" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11728" href="Definition.Untyped.html#1702" class="InductiveConstructor">zero</a>
  <a id="Value.sucᵥ"></a><a id="11735" href="Graded.Heap.Untyped.html#11735" class="InductiveConstructor">sucᵥ</a> <a id="11740" class="Symbol">:</a> <a id="11742" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11748" class="Symbol">(</a><a id="11749" href="Definition.Untyped.html#1718" class="InductiveConstructor">suc</a> <a id="11753" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a><a id="11754" class="Symbol">)</a>
  <a id="Value.starᵥ"></a><a id="11758" href="Graded.Heap.Untyped.html#11758" class="InductiveConstructor">starᵥ</a> <a id="11764" class="Symbol">:</a> <a id="11766" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11772" class="Symbol">(</a><a id="11773" href="Definition.Untyped.html#1897" class="InductiveConstructor">star</a> <a id="11778" href="Graded.Heap.Untyped.html#1261" class="Generalizable">s</a> <a id="11780" href="Graded.Heap.Untyped.html#1293" class="Generalizable">l</a><a id="11781" class="Symbol">)</a>
  <a id="Value.prodᵥ"></a><a id="11785" href="Graded.Heap.Untyped.html#11785" class="InductiveConstructor">prodᵥ</a> <a id="11791" class="Symbol">:</a> <a id="11793" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11799" class="Symbol">(</a><a id="11800" href="Definition.Untyped.html#1467" class="InductiveConstructor">prod</a> <a id="11805" href="Graded.Heap.Untyped.html#1261" class="Generalizable">s</a> <a id="11807" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="11809" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a> <a id="11811" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a><a id="11812" class="Symbol">)</a>
  <a id="Value.rflᵥ"></a><a id="11816" href="Graded.Heap.Untyped.html#11816" class="InductiveConstructor">rflᵥ</a> <a id="11821" class="Symbol">:</a> <a id="11823" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11829" href="Definition.Untyped.html#2129" class="InductiveConstructor">rfl</a>
  <a id="Value.Uᵥ"></a><a id="11835" href="Graded.Heap.Untyped.html#11835" class="InductiveConstructor">Uᵥ</a> <a id="11838" class="Symbol">:</a> <a id="11840" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11846" class="Symbol">(</a><a id="11847" href="Definition.Untyped.html#1241" class="InductiveConstructor">U</a> <a id="11849" href="Graded.Heap.Untyped.html#1293" class="Generalizable">l</a><a id="11850" class="Symbol">)</a>
  <a id="Value.ΠΣᵥ"></a><a id="11854" href="Graded.Heap.Untyped.html#11854" class="InductiveConstructor">ΠΣᵥ</a> <a id="11858" class="Symbol">:</a> <a id="11860" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11866" class="Symbol">(</a><a id="11867" href="Definition.Untyped.html#1271" class="InductiveConstructor Operator">ΠΣ⟨</a> <a id="11871" href="Graded.Heap.Untyped.html#1276" class="Generalizable">b</a> <a id="11873" href="Definition.Untyped.html#1271" class="InductiveConstructor Operator">⟩</a> <a id="11875" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="11877" href="Definition.Untyped.html#1271" class="InductiveConstructor Operator">,</a> <a id="11879" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="11881" href="Definition.Untyped.html#1271" class="InductiveConstructor Operator">▷</a> <a id="11883" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="11885" href="Definition.Untyped.html#1271" class="InductiveConstructor Operator">▹</a> <a id="11887" href="Graded.Heap.Untyped.html#1218" class="Generalizable">B</a><a id="11888" class="Symbol">)</a>
  <a id="Value.ℕᵥ"></a><a id="11892" href="Graded.Heap.Untyped.html#11892" class="InductiveConstructor">ℕᵥ</a> <a id="11895" class="Symbol">:</a> <a id="11897" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11903" href="Definition.Untyped.html#1689" class="InductiveConstructor">ℕ</a>
  <a id="Value.Unitᵥ"></a><a id="11907" href="Graded.Heap.Untyped.html#11907" class="InductiveConstructor">Unitᵥ</a> <a id="11913" class="Symbol">:</a> <a id="11915" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11921" class="Symbol">(</a><a id="11922" href="Definition.Untyped.html#1853" class="InductiveConstructor">Unit</a> <a id="11927" href="Graded.Heap.Untyped.html#1261" class="Generalizable">s</a> <a id="11929" href="Graded.Heap.Untyped.html#1293" class="Generalizable">l</a><a id="11930" class="Symbol">)</a>
  <a id="Value.Emptyᵥ"></a><a id="11934" href="Graded.Heap.Untyped.html#11934" class="InductiveConstructor">Emptyᵥ</a> <a id="11941" class="Symbol">:</a> <a id="11943" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11949" href="Definition.Untyped.html#2034" class="InductiveConstructor">Empty</a>
  <a id="Value.Idᵥ"></a><a id="11957" href="Graded.Heap.Untyped.html#11957" class="InductiveConstructor">Idᵥ</a> <a id="11961" class="Symbol">:</a> <a id="11963" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="11969" class="Symbol">(</a><a id="11970" href="Definition.Untyped.html#2096" class="InductiveConstructor">Id</a> <a id="11973" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="11975" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="11977" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a><a id="11978" class="Symbol">)</a>
  <a id="Value.unitrec-ηᵥ"></a><a id="11982" href="Graded.Heap.Untyped.html#11982" class="InductiveConstructor">unitrec-ηᵥ</a> <a id="11993" class="Symbol">:</a> <a id="11995" href="Definition.Typed.Variant.html#795" class="Function">Unitʷ-η</a> <a id="12003" class="Symbol">→</a> <a id="12005" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="12011" class="Symbol">(</a><a id="12012" href="Definition.Untyped.html#1941" class="InductiveConstructor">unitrec</a> <a id="12020" href="Graded.Heap.Untyped.html#1293" class="Generalizable">l</a> <a id="12022" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="12024" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="12026" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="12028" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="12030" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a><a id="12031" class="Symbol">)</a>

<a id="12034" class="Comment">-- States in normal form are either values, or variables without</a>
<a id="12099" class="Comment">-- entries in the heap.</a>
<a id="12123" class="Comment">-- I.e. states which do not reduce with _⇒ₙ_</a>

<a id="12169" class="Keyword">data</a> <a id="Normal"></a><a id="12174" href="Graded.Heap.Untyped.html#12174" class="Datatype">Normal</a> <a id="12181" class="Symbol">:</a> <a id="12183" class="Symbol">(</a><a id="12184" href="Graded.Heap.Untyped.html#10133" class="Record">State</a> <a id="12190" href="Graded.Heap.Untyped.html#1174" class="Generalizable">k</a> <a id="12192" href="Graded.Heap.Untyped.html#1163" class="Generalizable">m</a> <a id="12194" href="Graded.Heap.Untyped.html#1158" class="Generalizable">n</a><a id="12195" class="Symbol">)</a> <a id="12197" class="Symbol">→</a> <a id="12199" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="12203" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="12205" class="Keyword">where</a>
  <a id="Normal.val"></a><a id="12213" href="Graded.Heap.Untyped.html#12213" class="InductiveConstructor">val</a> <a id="12217" class="Symbol">:</a> <a id="12219" href="Graded.Heap.Untyped.html#11642" class="Datatype">Value</a> <a id="12225" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="12227" class="Symbol">→</a> <a id="12229" href="Graded.Heap.Untyped.html#12174" class="Datatype">Normal</a> <a id="12236" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">⟨</a> <a id="12238" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="12240" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="12242" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="12244" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="12246" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="12248" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="12250" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a> <a id="12252" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">⟩</a>
  <a id="Normal.var"></a><a id="12256" href="Graded.Heap.Untyped.html#12256" class="InductiveConstructor">var</a> <a id="12260" class="Symbol">:</a> <a id="12262" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="12264" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">⊢</a> <a id="12266" href="Definition.Untyped.NotParametrised.html#3851" class="Function">wkVar</a> <a id="12272" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="12274" href="Graded.Heap.Untyped.html#1231" class="Generalizable">x</a> <a id="12276" href="Graded.Heap.Untyped.html#8459" class="Datatype Operator">↦●</a> <a id="12279" class="Symbol">→</a> <a id="12281" href="Graded.Heap.Untyped.html#12174" class="Datatype">Normal</a> <a id="12288" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">⟨</a> <a id="12290" href="Graded.Heap.Untyped.html#7497" class="Generalizable">H</a> <a id="12292" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="12294" href="Definition.Untyped.html#1212" class="InductiveConstructor">var</a> <a id="12298" href="Graded.Heap.Untyped.html#1231" class="Generalizable">x</a> <a id="12300" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="12302" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="12304" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">,</a> <a id="12306" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a> <a id="12308" href="Graded.Heap.Untyped.html#10209" class="InductiveConstructor Operator">⟩</a>

<a id="12311" class="Comment">------------------------------------------------------------------------</a>
<a id="12384" class="Comment">-- Matching terms and eliminators</a>

<a id="12419" class="Comment">-- &quot;Matching&quot; terms and stacks. A term and an eliminator are considered</a>
<a id="12491" class="Comment">-- to match if a state with the term in head position and the eliminator</a>
<a id="12564" class="Comment">-- on top of the stack would reduce using _⇒ᵥ_, see ⇒ᵥ→Matching and</a>
<a id="12632" class="Comment">-- Matching→⇒ᵥ in Graded.Heap.Reduction.Properties.</a>
<a id="12684" class="Comment">--</a>
<a id="12687" class="Comment">-- Note that when the weak unit type has eta-equality, unitrec is</a>
<a id="12753" class="Comment">-- considered a value and matches any stack.</a>

<a id="12799" class="Keyword">data</a> <a id="Matching"></a><a id="12804" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="12813" class="Symbol">{</a><a id="12814" href="Graded.Heap.Untyped.html#12814" class="Bound">m</a> <a id="12816" href="Graded.Heap.Untyped.html#12816" class="Bound">n</a><a id="12817" class="Symbol">}</a> <a id="12819" class="Symbol">:</a> <a id="12821" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="12826" href="Graded.Heap.Untyped.html#12816" class="Bound">n</a> <a id="12828" class="Symbol">→</a> <a id="12830" href="Graded.Heap.Untyped.html#5714" class="Datatype">Stack</a> <a id="12836" href="Graded.Heap.Untyped.html#12814" class="Bound">m</a> <a id="12838" class="Symbol">→</a> <a id="12840" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="12844" href="Graded.Heap.Untyped.html#387" class="Bound">a</a> <a id="12846" class="Keyword">where</a>
  <a id="Matching.∘ₑ"></a><a id="12854" href="Graded.Heap.Untyped.html#12854" class="InductiveConstructor">∘ₑ</a> <a id="12857" class="Symbol">:</a> <a id="12859" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="12868" class="Symbol">(</a><a id="12869" href="Definition.Untyped.html#1370" class="InductiveConstructor">lam</a> <a id="12873" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="12875" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a><a id="12876" class="Symbol">)</a> <a id="12878" class="Symbol">(</a><a id="12879" href="Graded.Heap.Untyped.html#2458" class="InductiveConstructor">∘ₑ</a> <a id="12882" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="12884" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a> <a id="12886" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="12888" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="12890" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="12891" class="Symbol">)</a>
  <a id="Matching.fstₑ"></a><a id="12895" href="Graded.Heap.Untyped.html#12895" class="InductiveConstructor">fstₑ</a> <a id="12900" class="Symbol">:</a> <a id="12902" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="12911" class="Symbol">(</a><a id="12912" href="Definition.Untyped.html#2741" class="InductiveConstructor">prodˢ</a> <a id="12918" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="12920" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="12922" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a><a id="12923" class="Symbol">)</a> <a id="12925" class="Symbol">(</a><a id="12926" href="Graded.Heap.Untyped.html#2515" class="InductiveConstructor">fstₑ</a> <a id="12931" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="12933" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="12935" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="12936" class="Symbol">)</a>
  <a id="Matching.sndₑ"></a><a id="12940" href="Graded.Heap.Untyped.html#12940" class="InductiveConstructor">sndₑ</a> <a id="12945" class="Symbol">:</a> <a id="12947" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="12956" class="Symbol">(</a><a id="12957" href="Definition.Untyped.html#2741" class="InductiveConstructor">prodˢ</a> <a id="12963" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="12965" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="12967" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a><a id="12968" class="Symbol">)</a> <a id="12970" class="Symbol">(</a><a id="12971" href="Graded.Heap.Untyped.html#2540" class="InductiveConstructor">sndₑ</a> <a id="12976" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="12978" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="12980" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="12981" class="Symbol">)</a>
  <a id="Matching.prodrecₑ"></a><a id="12985" href="Graded.Heap.Untyped.html#12985" class="InductiveConstructor">prodrecₑ</a> <a id="12994" class="Symbol">:</a> <a id="12996" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="13005" class="Symbol">(</a><a id="13006" href="Definition.Untyped.html#2776" class="InductiveConstructor">prodʷ</a> <a id="13012" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="13014" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="13016" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a><a id="13017" class="Symbol">)</a> <a id="13019" class="Symbol">(</a><a id="13020" href="Graded.Heap.Untyped.html#2565" class="InductiveConstructor">prodrecₑ</a> <a id="13029" href="Graded.Heap.Untyped.html#1247" class="Generalizable">r</a> <a id="13031" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="13033" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="13035" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="13037" href="Graded.Heap.Untyped.html#1214" class="Generalizable">v</a> <a id="13039" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="13041" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="13043" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="13044" class="Symbol">)</a>
  <a id="Matching.natrecₑ₀"></a><a id="13048" href="Graded.Heap.Untyped.html#13048" class="InductiveConstructor">natrecₑ₀</a> <a id="13057" class="Symbol">:</a> <a id="13059" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="13068" href="Definition.Untyped.html#1702" class="InductiveConstructor">zero</a> <a id="13073" class="Symbol">(</a><a id="13074" href="Graded.Heap.Untyped.html#2663" class="InductiveConstructor">natrecₑ</a> <a id="13082" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="13084" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="13086" href="Graded.Heap.Untyped.html#1247" class="Generalizable">r</a> <a id="13088" href="Graded.Heap.Untyped.html#1249" class="Generalizable">q′</a> <a id="13091" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="13093" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="13095" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a> <a id="13097" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="13099" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="13101" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="13102" class="Symbol">)</a>
  <a id="Matching.natrecₑ₊"></a><a id="13106" href="Graded.Heap.Untyped.html#13106" class="InductiveConstructor">natrecₑ₊</a> <a id="13115" class="Symbol">:</a> <a id="13117" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="13126" class="Symbol">(</a><a id="13127" href="Definition.Untyped.html#1718" class="InductiveConstructor">suc</a> <a id="13131" href="Graded.Heap.Untyped.html#1214" class="Generalizable">v</a><a id="13132" class="Symbol">)</a> <a id="13134" class="Symbol">(</a><a id="13135" href="Graded.Heap.Untyped.html#2663" class="InductiveConstructor">natrecₑ</a> <a id="13143" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="13145" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="13147" href="Graded.Heap.Untyped.html#1247" class="Generalizable">r</a> <a id="13149" href="Graded.Heap.Untyped.html#1249" class="Generalizable">q′</a> <a id="13152" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="13154" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="13156" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a> <a id="13158" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="13160" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="13162" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="13163" class="Symbol">)</a>
  <a id="Matching.unitrecₑ"></a><a id="13167" href="Graded.Heap.Untyped.html#13167" class="InductiveConstructor">unitrecₑ</a> <a id="13176" class="Symbol">:</a> <a id="13178" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="13187" class="Symbol">(</a><a id="13188" href="Definition.Untyped.html#2870" class="InductiveConstructor">starʷ</a> <a id="13194" href="Graded.Heap.Untyped.html#1293" class="Generalizable">l</a><a id="13195" class="Symbol">)</a> <a id="13197" class="Symbol">(</a><a id="13198" href="Graded.Heap.Untyped.html#2777" class="InductiveConstructor">unitrecₑ</a> <a id="13207" href="Graded.Heap.Untyped.html#1293" class="Generalizable">l</a> <a id="13209" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="13211" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="13213" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="13215" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a> <a id="13217" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="13219" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="13221" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="13222" class="Symbol">)</a>
  <a id="Matching.unitrec-η"></a><a id="13226" href="Graded.Heap.Untyped.html#13226" class="InductiveConstructor">unitrec-η</a> <a id="13236" class="Symbol">:</a> <a id="13238" href="Definition.Typed.Variant.html#795" class="Function">Unitʷ-η</a> <a id="13246" class="Symbol">→</a> <a id="13248" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="13257" class="Symbol">(</a><a id="13258" href="Definition.Untyped.html#1941" class="InductiveConstructor">unitrec</a> <a id="13266" href="Graded.Heap.Untyped.html#1293" class="Generalizable">l</a> <a id="13268" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="13270" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="13272" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="13274" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="13276" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a><a id="13277" class="Symbol">)</a> <a id="13279" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a>
  <a id="Matching.Jₑ"></a><a id="13283" href="Graded.Heap.Untyped.html#13283" class="InductiveConstructor">Jₑ</a> <a id="13286" class="Symbol">:</a> <a id="13288" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="13297" href="Definition.Untyped.html#2129" class="InductiveConstructor">rfl</a> <a id="13301" class="Symbol">(</a><a id="13302" href="Graded.Heap.Untyped.html#2946" class="InductiveConstructor">Jₑ</a> <a id="13305" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="13307" href="Graded.Heap.Untyped.html#1245" class="Generalizable">q</a> <a id="13309" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="13311" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="13313" href="Graded.Heap.Untyped.html#1218" class="Generalizable">B</a> <a id="13315" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a> <a id="13317" href="Graded.Heap.Untyped.html#1214" class="Generalizable">v</a> <a id="13319" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="13321" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="13323" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="13324" class="Symbol">)</a>
  <a id="Matching.Kₑ"></a><a id="13328" href="Graded.Heap.Untyped.html#13328" class="InductiveConstructor">Kₑ</a> <a id="13331" class="Symbol">:</a> <a id="13333" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="13342" href="Definition.Untyped.html#2129" class="InductiveConstructor">rfl</a> <a id="13346" class="Symbol">(</a><a id="13347" href="Graded.Heap.Untyped.html#3054" class="InductiveConstructor">Kₑ</a> <a id="13350" href="Graded.Heap.Untyped.html#1243" class="Generalizable">p</a> <a id="13352" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="13354" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="13356" href="Graded.Heap.Untyped.html#1218" class="Generalizable">B</a> <a id="13358" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a> <a id="13360" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="13362" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="13364" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="13365" class="Symbol">)</a>
  <a id="Matching.[]-congₑ"></a><a id="13369" href="Graded.Heap.Untyped.html#13369" class="InductiveConstructor">[]-congₑ</a> <a id="13378" class="Symbol">:</a> <a id="13380" href="Graded.Heap.Untyped.html#12804" class="Datatype">Matching</a> <a id="13389" href="Definition.Untyped.html#2129" class="InductiveConstructor">rfl</a> <a id="13393" class="Symbol">(</a><a id="13394" href="Graded.Heap.Untyped.html#3158" class="InductiveConstructor">[]-congₑ</a> <a id="13403" href="Graded.Heap.Untyped.html#1261" class="Generalizable">s</a> <a id="13405" href="Graded.Heap.Untyped.html#1216" class="Generalizable">A</a> <a id="13407" href="Graded.Heap.Untyped.html#1201" class="Generalizable">t</a> <a id="13409" href="Graded.Heap.Untyped.html#1212" class="Generalizable">u</a> <a id="13411" href="Graded.Heap.Untyped.html#1314" class="Generalizable">ρ</a> <a id="13413" href="Graded.Heap.Untyped.html#5760" class="InductiveConstructor Operator">∙</a> <a id="13415" href="Graded.Heap.Untyped.html#5973" class="Generalizable">S</a><a id="13416" class="Symbol">)</a>
</pre></body></html>