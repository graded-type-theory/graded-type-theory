<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Consequences.Soundness.Erased-matches</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Soundness of the extraction function in the presence of certain</a>
<a id="141" class="Comment">-- kinds of erased matches</a>
<a id="168" class="Comment">------------------------------------------------------------------------</a>

<a id="242" class="Keyword">import</a> <a id="249" href="Definition.Typed.html" class="Module">Definition.Typed</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>
<a id="308" class="Keyword">import</a> <a id="315" href="Definition.Untyped.html" class="Module">Definition.Untyped</a>
<a id="334" class="Keyword">open</a> <a id="339" class="Keyword">import</a> <a id="346" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a> <a id="368" class="Symbol">as</a> <a id="371" class="Module">T</a> <a id="373" class="Keyword">using</a> <a id="379" class="Symbol">(</a><a id="380" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="390" class="Symbol">)</a>
<a id="392" class="Keyword">open</a> <a id="397" class="Keyword">import</a> <a id="404" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="420" class="Keyword">import</a> <a id="427" href="Graded.Mode.html" class="Module">Graded.Mode</a>
<a id="439" class="Keyword">import</a> <a id="446" href="Graded.Restrictions.html" class="Module">Graded.Restrictions</a>
<a id="466" class="Keyword">open</a> <a id="471" class="Keyword">import</a> <a id="478" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="504" class="Keyword">open</a> <a id="509" class="Keyword">import</a> <a id="516" href="Tools.Nat.html" class="Module">Tools.Nat</a>

<a id="527" class="Keyword">module</a> <a id="534" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html" class="Module">Graded.Erasure.Consequences.Soundness.Erased-matches</a>
  <a id="589" class="Symbol">{</a><a id="590" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#590" class="Bound">a</a><a id="591" class="Symbol">}</a> <a id="593" class="Symbol">{</a><a id="594" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#594" class="Bound">M</a> <a id="596" class="Symbol">:</a> <a id="598" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="602" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#590" class="Bound">a</a><a id="603" class="Symbol">}</a>
  <a id="607" class="Symbol">(</a><a id="608" class="Keyword">open</a> <a id="613" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="632" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#594" class="Bound">M</a><a id="633" class="Symbol">)</a>
  <a id="637" class="Symbol">{</a><a id="638" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a> <a id="640" class="Symbol">:</a> <a id="642" href="Graded.Modality.html#9576" class="Record">Modality</a> <a id="651" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#594" class="Bound">M</a><a id="652" class="Symbol">}</a>
  <a id="656" class="Symbol">(</a><a id="657" class="Keyword">open</a> <a id="662" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="674" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a><a id="675" class="Symbol">)</a>
  <a id="679" class="Symbol">(</a><a id="680" class="Keyword">open</a> <a id="685" href="Graded.Restrictions.html" class="Module">Graded.Restrictions</a> <a id="705" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a><a id="706" class="Symbol">)</a>
  <a id="710" class="Symbol">(</a><a id="711" class="Keyword">open</a> <a id="716" href="Graded.Modality.html#9576" class="Module">Modality</a> <a id="725" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a><a id="726" class="Symbol">)</a>
  <a id="730" class="Symbol">(</a><a id="731" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#731" class="Bound">TR</a> <a id="734" class="Symbol">:</a> <a id="736" href="Definition.Typed.Restrictions.html#808" class="Record">Type-restrictions</a> <a id="754" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a><a id="755" class="Symbol">)</a>
  <a id="759" class="Symbol">(</a><a id="760" class="Keyword">open</a> <a id="765" href="Definition.Typed.Restrictions.html#808" class="Module">Type-restrictions</a> <a id="783" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#731" class="Bound">TR</a><a id="785" class="Symbol">)</a>
  <a id="789" class="Symbol">(</a><a id="790" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#790" class="Bound">UR</a> <a id="793" class="Symbol">:</a> <a id="795" href="Graded.Usage.Restrictions.html#812" class="Record">Usage-restrictions</a> <a id="814" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a><a id="815" class="Symbol">)</a>
  <a id="819" class="Symbol">(</a><a id="820" class="Keyword">open</a> <a id="825" href="Graded.Usage.Restrictions.html#812" class="Module">Usage-restrictions</a> <a id="844" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#790" class="Bound">UR</a><a id="846" class="Symbol">)</a>
  <a id="850" class="Symbol">{</a><a id="851" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#851" class="Bound">k</a> <a id="853" class="Symbol">:</a> <a id="855" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="858" class="Symbol">}</a>
  <a id="862" class="Comment">-- A context.</a>
  <a id="878" class="Symbol">(</a><a id="879" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#879" class="Bound">Δ</a> <a id="881" class="Symbol">:</a> <a id="883" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="887" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="892" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#851" class="Bound">k</a><a id="893" class="Symbol">)</a>
  <a id="897" class="Comment">-- If erased matches are allowed for emptyrec when the mode is 𝟙ᵐ,</a>
  <a id="966" class="Comment">-- then Δ is consistent with respect to a variant of the type system</a>
  <a id="1037" class="Comment">-- for which η-equality is allowed for weak unit types.</a>
  <a id="1095" class="Symbol">(</a><a id="1096" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1096" class="Bound">consistent</a> <a id="1107" class="Symbol">:</a>
     <a id="1114" class="Keyword">let</a> <a id="1118" class="Keyword">open</a> <a id="1123" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="1140" class="Symbol">(</a><a id="1141" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#731" class="Bound">TR</a> <a id="1144" href="Graded.Restrictions.html#5564" class="Function Operator">with-η-for-Unitʷ</a><a id="1160" class="Symbol">)</a> <a id="1162" class="Keyword">in</a>
     <a id="1170" href="Graded.Usage.Restrictions.html#1782" class="Field">Emptyrec-allowed</a> <a id="1187" href="Graded.Mode.html#1094" class="InductiveConstructor">𝟙ᵐ</a> <a id="1190" href="Graded.Modality.html#945" class="Function">𝟘</a> <a id="1192" class="Symbol">→</a>
     <a id="1199" href="Definition.Typed.html#19018" class="Function">Consistent</a> <a id="1210" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#879" class="Bound">Δ</a><a id="1211" class="Symbol">)</a>
  <a id="1215" class="Comment">-- Certain erased matches are not allowed.</a>
  <a id="1260" class="Symbol">(</a><a id="1261" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1261" class="Bound">only-some-erased-matches</a> <a id="1286" class="Symbol">:</a> <a id="1288" href="Graded.Restrictions.html#10892" class="Function">Only-some-erased-matches</a> <a id="1313" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#731" class="Bound">TR</a> <a id="1316" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#790" class="Bound">UR</a><a id="1318" class="Symbol">)</a>
  <a id="1322" class="Comment">-- Equality reflection is not allowed or Δ is empty.</a>
  <a id="1377" class="Symbol">⦃</a> <a id="1379" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1379" class="Bound">ok</a> <a id="1382" class="Symbol">:</a> <a id="1384" href="Definition.Typed.Restrictions.html#3196" class="Datatype">No-equality-reflection</a> <a id="1407" href="Definition.Untyped.NotParametrised.html#1265" class="Datatype Operator">or-empty</a> <a id="1416" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#879" class="Bound">Δ</a> <a id="1418" class="Symbol">⦄</a>
  <a id="1422" class="Comment">-- The variant of extraction that is used.</a>
  <a id="1467" class="Symbol">(</a><a id="1468" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1468" class="Bound">str</a> <a id="1472" class="Symbol">:</a> <a id="1474" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="1484" class="Symbol">)</a>
  <a id="1488" class="Comment">-- The modality&#39;s zero is well-behaved.</a>
  <a id="1530" class="Symbol">⦃</a> <a id="1532" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1532" class="Bound">𝟘-well-behaved</a> <a id="1547" class="Symbol">:</a> <a id="1549" href="Graded.Modality.html#4341" class="Record">Has-well-behaved-zero</a> <a id="1571" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#594" class="Bound">M</a> <a id="1573" href="Graded.Modality.html#9717" class="Field">semiring-with-meet</a> <a id="1592" class="Symbol">⦄</a>
  <a id="1596" class="Keyword">where</a>

<a id="1603" class="Keyword">import</a> <a id="1610" href="Definition.Typed.QuantityTranslation.html" class="Module">Definition.Typed.QuantityTranslation</a> <a id="1647" class="Symbol">as</a> <a id="1650" class="Module">QT</a>
<a id="1653" class="Keyword">open</a> <a id="1658" class="Keyword">import</a> <a id="1665" href="Definition.Untyped.QuantityTranslation.Identity.html" class="Module">Definition.Untyped.QuantityTranslation.Identity</a> <a id="1713" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#594" class="Bound">M</a>

<a id="1716" class="Keyword">open</a> <a id="1721" class="Keyword">import</a> <a id="1728" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1743" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a>
<a id="1745" class="Keyword">open</a> <a id="1750" class="Keyword">import</a> <a id="1757" href="Graded.Modality.Morphism.html" class="Module">Graded.Modality.Morphism</a>
<a id="1782" class="Keyword">open</a> <a id="1787" class="Keyword">import</a> <a id="1794" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="1807" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a> <a id="1809" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#790" class="Bound">UR</a>

<a id="1813" class="Keyword">import</a> <a id="1820" href="Graded.Erasure.Consequences.Soundness.html" class="Module">Graded.Erasure.Consequences.Soundness</a>
<a id="1858" class="Keyword">open</a> <a id="1863" class="Keyword">import</a> <a id="1870" href="Graded.Erasure.Extraction.html" class="Module">Graded.Erasure.Extraction</a> <a id="1896" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a>
<a id="1898" class="Keyword">import</a> <a id="1905" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a>

<a id="1928" class="Keyword">open</a> <a id="1933" class="Keyword">import</a> <a id="1940" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="1955" class="Keyword">open</a> <a id="1960" class="Keyword">import</a> <a id="1967" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="1981" class="Keyword">open</a> <a id="1986" class="Keyword">import</a> <a id="1993" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="2021" class="Symbol">as</a> <a id="2024" class="Module">PE</a>
<a id="2027" class="Keyword">open</a> <a id="2032" class="Keyword">import</a> <a id="2039" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="2050" class="Keyword">private</a> <a id="2058" class="Keyword">variable</a>
  <a id="2069" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2069" class="Generalizable">Γ</a>   <a id="2073" class="Symbol">:</a> <a id="2075" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="2079" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2084" class="Symbol">_</a>
  <a id="2088" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2088" class="Generalizable">A</a> <a id="2090" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2090" class="Generalizable">t</a> <a id="2092" class="Symbol">:</a> <a id="2094" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="2099" class="Symbol">_</a>
  <a id="2103" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2103" class="Generalizable">s</a>   <a id="2107" class="Symbol">:</a> <a id="2109" href="Definition.Untyped.NotParametrised.html#1964" class="Datatype">Strength</a>
  <a id="2120" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2120" class="Generalizable">l</a>   <a id="2124" class="Symbol">:</a> <a id="2126" href="Definition.Untyped.NotParametrised.html#4244" class="Function">Universe-level</a>

<a id="2142" class="Comment">-- A variant of the type restrictions for which η-equality is allowed</a>
<a id="2212" class="Comment">-- for weak unit types.</a>

<a id="TR-η"></a><a id="2237" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2237" class="Function">TR-η</a> <a id="2242" class="Symbol">:</a> <a id="2244" href="Definition.Typed.Restrictions.html#808" class="Record">Type-restrictions</a> <a id="2262" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a>
<a id="2264" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2237" class="Function">TR-η</a> <a id="2269" class="Symbol">=</a> <a id="2271" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#731" class="Bound">TR</a> <a id="2274" href="Graded.Restrictions.html#5564" class="Function Operator">with-η-for-Unitʷ</a>

<a id="2292" class="Comment">-- TR is used by default.</a>

<a id="2319" class="Keyword">open</a> <a id="2324" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="2341" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#731" class="Bound">TR</a>
<a id="2344" class="Keyword">open</a> <a id="2349" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a> <a id="2371" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#731" class="Bound">TR</a>

<a id="2375" class="Comment">-- The modules T-η and SR-η use TR-η.</a>

<a id="2414" class="Keyword">private</a>
  <a id="2424" class="Keyword">module</a> <a id="T-η"></a><a id="2431" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2431" class="Module">T-η</a>         <a id="2443" class="Symbol">=</a> <a id="2445" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="2462" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2237" class="Function">TR-η</a>
  <a id="2469" class="Keyword">module</a> <a id="SR-η"></a><a id="2476" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2476" class="Module">SR-η</a>        <a id="2488" class="Symbol">=</a> <a id="2490" href="Graded.Erasure.SucRed.html" class="Module">Graded.Erasure.SucRed</a> <a id="2512" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2237" class="Function">TR-η</a>
  <a id="2519" class="Keyword">module</a> <a id="Soundness-η"></a><a id="2526" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2526" class="Module">Soundness-η</a> <a id="2538" class="Symbol">=</a>
    <a id="2544" href="Graded.Erasure.Consequences.Soundness.html#5899" class="Module">Graded.Erasure.Consequences.Soundness.Soundness</a> <a id="2592" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2237" class="Function">TR-η</a> <a id="2597" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#790" class="Bound">UR</a>
      <a id="2606" class="Symbol">(</a><a id="2607" class="Keyword">record</a>
         <a id="2623" class="Symbol">{</a> <a id="2625" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1292" class="Field">consistent</a>                  <a id="2653" class="Symbol">=</a> <a id="2655" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1096" class="Bound">consistent</a>
         <a id="2675" class="Symbol">;</a> <a id="2677" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1413" class="Field">closed-or-no-erased-matches</a> <a id="2705" class="Symbol">=</a>
             <a id="2720" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2725" href="Function.Base.html#1974" class="Function Operator">$</a>
             <a id="2740" href="Graded.Restrictions.html#13387" class="Function">Only-some-erased-matches→No-erased-matches</a>
               <a id="2798" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2237" class="Function">TR-η</a> <a id="2803" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#790" class="Bound">UR</a> <a id="2806" class="Symbol">_</a> <a id="2808" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1261" class="Bound">only-some-erased-matches</a>
         <a id="2842" class="Symbol">;</a> <a id="2844" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1560" class="Field">inc</a> <a id="2848" class="Symbol">=</a>
             <a id="2863" href="Definition.Typed.Restrictions.html#3888" class="Function">Type-restrictions.No-equality-reflection-or-empty⇔</a> <a id="2914" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2237" class="Function">TR-η</a>
               <a id="2934" class="Symbol">.</a><a id="2935" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="2941" href="Function.Base.html#1974" class="Function Operator">$</a>
             <a id="2956" href="Definition.Typed.Restrictions.html#3888" class="Function">No-equality-reflection-or-empty⇔</a> <a id="2989" class="Symbol">.</a><a id="2990" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2996" href="Function.Base.html#1974" class="Function Operator">$</a>
             <a id="3011" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1379" class="Bound">ok</a>
         <a id="3023" class="Symbol">})</a>
      <a id="3032" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1468" class="Bound">str</a>

<a id="3037" class="Keyword">opaque</a>

  <a id="3047" class="Comment">-- The relation _⊢_∷_ is contained in T-η._⊢_∷_.</a>

  <a id="⊢∷→⊢∷-η"></a><a id="3099" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3099" class="Function">⊢∷→⊢∷-η</a> <a id="3107" class="Symbol">:</a> <a id="3109" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2069" class="Generalizable">Γ</a> <a id="3111" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3113" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2090" class="Generalizable">t</a> <a id="3115" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3117" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2088" class="Generalizable">A</a> <a id="3119" class="Symbol">→</a> <a id="3121" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2069" class="Generalizable">Γ</a> <a id="3123" href="Definition.Typed.html#1707" class="Datatype Operator">T-η.⊢</a> <a id="3129" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2090" class="Generalizable">t</a> <a id="3131" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3133" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2088" class="Generalizable">A</a>
  <a id="3137" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3099" class="Function">⊢∷→⊢∷-η</a> <a id="3145" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3145" class="Bound">⊢t</a> <a id="3148" class="Symbol">=</a>
    <a id="3154" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="3159" href="Graded.Modality.Morphism.html#5936" class="Field">Is-order-embedding.tr-morphism</a> <a id="3190" href="Graded.Modality.Morphism.html#19793" class="Function">Is-order-embedding-id</a> <a id="3212" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="3215" class="Symbol">λ</a>
      <a id="3223" class="Symbol">(</a><a id="3224" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3224" class="Bound">m</a> <a id="3226" class="Symbol">:</a> <a id="3228" href="Graded.Modality.Morphism.html#1347" class="Record">Is-morphism</a> <a id="3240" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a> <a id="3242" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#638" class="Bound">𝕄</a> <a id="3244" href="Function.Base.html#704" class="Function">idᶠ</a><a id="3247" class="Symbol">)</a> <a id="3249" class="Symbol">→</a>
    <a id="3255" href="Tools.PropositionalEquality.html#1556" class="Function">subst₃</a> <a id="3262" href="Definition.Typed.html#1707" class="Datatype Operator">T-η._⊢_∷_</a> <a id="3272" href="Definition.Untyped.QuantityTranslation.Identity.html#2823" class="Function">tr-Con-id</a> <a id="3282" href="Definition.Untyped.QuantityTranslation.Identity.html#2641" class="Function">tr-Term-id</a> <a id="3293" href="Definition.Untyped.QuantityTranslation.Identity.html#2641" class="Function">tr-Term-id</a> <a id="3304" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="3310" href="Definition.Typed.QuantityTranslation.html#3548" class="Function">QT.tr-⊢∷</a> <a id="3319" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#731" class="Bound">TR</a> <a id="3322" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2237" class="Function">TR-η</a> <a id="3327" href="Function.Base.html#704" class="Function">idᶠ</a> <a id="3331" href="Function.Base.html#704" class="Function">idᶠ</a> <a id="3335" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3224" class="Bound">m</a> <a id="3337" class="Symbol">(</a><a id="3338" href="Graded.Modality.Morphism.html#18309" class="Function">Is-morphism→Is-Σ-morphism</a> <a id="3364" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3224" class="Bound">m</a><a id="3365" class="Symbol">)</a>
      <a id="3373" class="Symbol">(</a><a id="3374" class="Keyword">record</a>
         <a id="3390" class="Symbol">{</a> <a id="3392" href="Graded.Modality.Morphism.Type-restrictions.html#1433" class="Field">Unit-preserved</a> <a id="3407" class="Symbol">=</a> <a id="3409" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3422" class="Symbol">;</a> <a id="3424" href="Graded.Modality.Morphism.Type-restrictions.html#1590" class="Field">ΠΣ-preserved</a>   <a id="3439" class="Symbol">=</a>
             <a id="3454" class="Symbol">λ</a> <a id="3456" class="Symbol">{</a><a id="3457" class="Argument">b</a> <a id="3459" class="Symbol">=</a> <a id="3461" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3461" class="Bound">b</a><a id="3462" class="Symbol">}</a> <a id="3464" class="Symbol">→</a>
               <a id="3481" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="3487" class="Symbol">(</a><a id="3488" href="Function.Base.html#1638" class="Function">flip</a> <a id="3493" class="Symbol">(</a><a id="3494" href="Definition.Typed.Restrictions.html#1190" class="Field">ΠΣ-allowed</a> <a id="3505" class="Symbol">_)</a> <a id="3508" class="Symbol">_)</a> <a id="3511" href="Function.Base.html#1974" class="Function Operator">$</a>
               <a id="3528" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="3535" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3537" href="Definition.Untyped.QuantityTranslation.Identity.html#838" class="Function">tr-BinderMode-id</a> <a id="3554" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3461" class="Bound">b</a>
         <a id="3565" class="Symbol">;</a> <a id="3567" href="Graded.Modality.Morphism.Type-restrictions.html#1750" class="Field">K-preserved</a>                   <a id="3597" class="Symbol">=</a> <a id="3599" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3612" class="Symbol">;</a> <a id="3614" href="Graded.Modality.Morphism.Type-restrictions.html#1870" class="Field">[]-cong-preserved</a>             <a id="3644" class="Symbol">=</a> <a id="3646" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3659" class="Symbol">;</a> <a id="3661" href="Graded.Modality.Morphism.Type-restrictions.html#2027" class="Field">Equality-reflection-preserved</a> <a id="3691" class="Symbol">=</a> <a id="3693" href="Function.Base.html#704" class="Function">idᶠ</a>
         <a id="3706" class="Symbol">})</a>
      <a id="3715" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3145" class="Bound">⊢t</a>

<a id="3719" class="Keyword">opaque</a>

  <a id="3729" class="Comment">-- Soundness of erasure for natural numbers.</a>
  <a id="3776" class="Comment">--</a>
  <a id="3781" class="Comment">-- Note that SR-η._⊢_⇒ˢ*_∷ℕ is used in the statement of this</a>
  <a id="3844" class="Comment">-- theorem. This reduction relation uses the rule unitrec-β-η rather</a>
  <a id="3915" class="Comment">-- than unitrec-subst and unitrec-β.</a>

  <a id="soundness-ℕ"></a><a id="3955" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3955" class="Function">soundness-ℕ</a> <a id="3967" class="Symbol">:</a>
    <a id="3973" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#879" class="Bound">Δ</a> <a id="3975" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="3977" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2090" class="Generalizable">t</a> <a id="3979" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="3981" href="Definition.Untyped.html#1932" class="InductiveConstructor">ℕ</a> <a id="3983" class="Symbol">→</a> <a id="3985" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="3988" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="3991" class="InductiveConstructor">𝟙ᵐ</a> <a id="3994" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="3996" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2090" class="Generalizable">t</a> <a id="3998" class="Symbol">→</a>
    <a id="4004" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="4006" class="Symbol">λ</a> <a id="4008" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4008" class="Bound">n</a> <a id="4010" class="Symbol">→</a> <a id="4012" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#879" class="Bound">Δ</a> <a id="4014" href="Graded.Erasure.SucRed.html#1475" class="Datatype Operator">SR-η.⊢</a> <a id="4021" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2090" class="Generalizable">t</a> <a id="4023" href="Graded.Erasure.SucRed.html#1475" class="Datatype Operator">⇒ˢ*</a> <a id="4027" href="Definition.Untyped.html#3643" class="Function">sucᵏ</a> <a id="4032" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4008" class="Bound">n</a> <a id="4034" href="Graded.Erasure.SucRed.html#1475" class="Datatype Operator">∷ℕ</a> <a id="4037" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4039" href="Graded.Erasure.Extraction.html#2119" class="Function">erase</a> <a id="4045" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1468" class="Bound">str</a> <a id="4049" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2090" class="Generalizable">t</a> <a id="4051" href="Graded.Erasure.SucRed.html#7467" class="Function Operator">⇒ˢ⟨</a> <a id="4055" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1468" class="Bound">str</a> <a id="4059" href="Graded.Erasure.SucRed.html#7467" class="Function Operator">⟩*</a> <a id="4062" href="Graded.Erasure.Target.html#6901" class="Function">T.sucᵏ</a> <a id="4069" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4008" class="Bound">n</a>
  <a id="4073" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3955" class="Function">soundness-ℕ</a> <a id="4085" class="Symbol">=</a> <a id="4087" href="Graded.Erasure.Consequences.Soundness.html#6851" class="Function">Soundness-η.soundness-ℕ</a> <a id="4111" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="4114" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3099" class="Function">⊢∷→⊢∷-η</a>

<a id="4123" class="Keyword">opaque</a>

  <a id="4133" class="Comment">-- Soundness of erasure for unit types.</a>
  <a id="4175" class="Comment">--</a>
  <a id="4180" class="Comment">-- Note that T-η._⊢_⇒*_∷_ is used in the statement of this theorem.</a>
  <a id="4250" class="Comment">-- This reduction relation uses the rule unitrec-β-η rather than</a>
  <a id="4317" class="Comment">-- unitrec-subst and unitrec-β.</a>

  <a id="soundness-Unit"></a><a id="4352" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4352" class="Function">soundness-Unit</a> <a id="4367" class="Symbol">:</a>
    <a id="4373" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#879" class="Bound">Δ</a> <a id="4375" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="4377" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2090" class="Generalizable">t</a> <a id="4379" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="4381" href="Definition.Untyped.html#1333" class="InductiveConstructor">Unit</a> <a id="4386" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2103" class="Generalizable">s</a> <a id="4388" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2120" class="Generalizable">l</a> <a id="4390" class="Symbol">→</a> <a id="4392" href="Graded.Context.html#2571" class="Function">𝟘ᶜ</a> <a id="4395" href="Graded.Usage.html#8567" class="Datatype Operator">▸[</a> <a id="4398" class="InductiveConstructor">𝟙ᵐ</a> <a id="4401" href="Graded.Usage.html#8567" class="Datatype Operator">]</a> <a id="4403" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2090" class="Generalizable">t</a> <a id="4405" class="Symbol">→</a>
    <a id="4411" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#879" class="Bound">Δ</a> <a id="4413" href="Definition.Typed.html#18342" class="Datatype Operator">T-η.⊢</a> <a id="4419" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2090" class="Generalizable">t</a> <a id="4421" href="Definition.Typed.html#18342" class="Datatype Operator">⇒*</a> <a id="4424" href="Definition.Untyped.html#1377" class="InductiveConstructor">star</a> <a id="4429" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2103" class="Generalizable">s</a> <a id="4431" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2120" class="Generalizable">l</a> <a id="4433" href="Definition.Typed.html#18342" class="Datatype Operator">∷</a> <a id="4435" href="Definition.Untyped.html#1333" class="InductiveConstructor">Unit</a> <a id="4440" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2103" class="Generalizable">s</a> <a id="4442" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2120" class="Generalizable">l</a> <a id="4444" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4446" href="Graded.Erasure.Extraction.html#2119" class="Function">erase</a> <a id="4452" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#1468" class="Bound">str</a> <a id="4456" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#2090" class="Generalizable">t</a> <a id="4458" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="4463" class="InductiveConstructor">T.star</a>
  <a id="4472" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#4352" class="Function">soundness-Unit</a> <a id="4487" class="Symbol">=</a> <a id="4489" href="Graded.Erasure.Consequences.Soundness.html#7855" class="Function">Soundness-η.soundness-Unit</a> <a id="4516" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="4519" href="Graded.Erasure.Consequences.Soundness.Erased-matches.html#3099" class="Function">⊢∷→⊢∷-η</a>
</pre></body></html>