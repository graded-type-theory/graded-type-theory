<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Heap.Typed.Substitution</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Properties of well-formed heaps as substitutions</a>
<a id="126" class="Comment">------------------------------------------------------------------------</a>

<a id="200" class="Keyword">open</a> <a id="205" class="Keyword">import</a> <a id="212" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="228" class="Keyword">open</a> <a id="233" class="Keyword">import</a> <a id="240" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="309" class="Keyword">module</a> <a id="316" href="Graded.Heap.Typed.Substitution.html" class="Module">Graded.Heap.Typed.Substitution</a>
  <a id="349" class="Symbol">{</a><a id="350" href="Graded.Heap.Typed.Substitution.html#350" class="Bound">a</a><a id="351" class="Symbol">}</a> <a id="353" class="Symbol">{</a><a id="354" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a> <a id="356" class="Symbol">:</a> <a id="358" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="362" href="Graded.Heap.Typed.Substitution.html#350" class="Bound">a</a><a id="363" class="Symbol">}</a> <a id="365" class="Symbol">{</a><a id="366" href="Graded.Heap.Typed.Substitution.html#366" class="Bound">𝕄</a> <a id="368" class="Symbol">:</a> <a id="370" href="Graded.Modality.html#8202" class="Record">Modality</a> <a id="379" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a><a id="380" class="Symbol">}</a>
  <a id="384" class="Symbol">(</a><a id="385" href="Graded.Heap.Typed.Substitution.html#385" class="Bound">UR</a> <a id="388" class="Symbol">:</a> <a id="390" href="Graded.Usage.Restrictions.html#750" class="Record">Usage-restrictions</a> <a id="409" href="Graded.Heap.Typed.Substitution.html#366" class="Bound">𝕄</a><a id="410" class="Symbol">)</a>
  <a id="414" class="Symbol">(</a><a id="415" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a> <a id="418" class="Symbol">:</a> <a id="420" href="Definition.Typed.Restrictions.html#831" class="Record">Type-restrictions</a> <a id="438" href="Graded.Heap.Typed.Substitution.html#366" class="Bound">𝕄</a><a id="439" class="Symbol">)</a>
  <a id="443" class="Keyword">where</a>

<a id="450" class="Keyword">open</a> <a id="455" href="Definition.Typed.Restrictions.html#831" class="Module">Type-restrictions</a> <a id="473" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>

<a id="477" class="Keyword">open</a> <a id="482" class="Keyword">import</a> <a id="489" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="508" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a>
<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Definition.Untyped.Properties.html" class="Module">Definition.Untyped.Properties</a> <a id="552" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a>
<a id="554" class="Keyword">open</a> <a id="559" class="Keyword">import</a> <a id="566" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="583" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>
<a id="586" class="Keyword">open</a> <a id="591" class="Keyword">import</a> <a id="598" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="626" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>
<a id="629" class="Keyword">open</a> <a id="634" class="Keyword">import</a> <a id="641" href="Definition.Typed.Substitution.html" class="Module">Definition.Typed.Substitution</a> <a id="671" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>

<a id="675" class="Keyword">open</a> <a id="680" class="Keyword">import</a> <a id="687" href="Graded.Heap.Typed.html" class="Module">Graded.Heap.Typed</a> <a id="705" href="Graded.Heap.Typed.Substitution.html#385" class="Bound">UR</a> <a id="708" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>
<a id="711" class="Keyword">open</a> <a id="716" class="Keyword">import</a> <a id="723" href="Graded.Heap.Untyped.html" class="Module">Graded.Heap.Untyped</a> <a id="743" href="Definition.Typed.Restrictions.html#955" class="Field">type-variant</a> <a id="756" href="Graded.Heap.Typed.Substitution.html#385" class="Bound">UR</a>

<a id="760" class="Keyword">open</a> <a id="765" class="Keyword">import</a> <a id="772" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="787" class="Keyword">open</a> <a id="792" class="Keyword">import</a> <a id="799" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="813" class="Keyword">import</a> <a id="820" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="848" class="Symbol">as</a> <a id="851" class="Module">PE</a>

<a id="855" class="Keyword">private</a> <a id="863" class="Keyword">variable</a>
  <a id="874" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="876" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="878" class="Symbol">:</a> <a id="880" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="884" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="889" class="Symbol">_</a>
  <a id="893" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="895" href="Graded.Heap.Typed.Substitution.html#895" class="Generalizable">H′</a> <a id="898" class="Symbol">:</a> <a id="900" href="Graded.Heap.Untyped.html#5903" class="Datatype">Heap</a> <a id="905" class="Symbol">_</a> <a id="907" class="Symbol">_</a>
  <a id="911" href="Graded.Heap.Typed.Substitution.html#911" class="Generalizable">ρ</a> <a id="913" class="Symbol">:</a> <a id="915" href="Definition.Untyped.NotParametrised.html#2948" class="Datatype">Wk</a> <a id="918" class="Symbol">_</a> <a id="920" class="Symbol">_</a>
  <a id="924" href="Graded.Heap.Typed.Substitution.html#924" class="Generalizable">t</a> <a id="926" href="Graded.Heap.Typed.Substitution.html#926" class="Generalizable">u</a> <a id="928" href="Graded.Heap.Typed.Substitution.html#928" class="Generalizable">A</a> <a id="930" href="Graded.Heap.Typed.Substitution.html#930" class="Generalizable">B</a> <a id="932" class="Symbol">:</a> <a id="934" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="939" class="Symbol">_</a>
  <a id="943" href="Graded.Heap.Typed.Substitution.html#943" class="Generalizable">y</a> <a id="945" class="Symbol">:</a> <a id="947" href="Graded.Heap.Untyped.html#1264" class="Function">Ptr</a> <a id="951" class="Symbol">_</a>
  <a id="955" href="Graded.Heap.Typed.Substitution.html#955" class="Generalizable">c</a> <a id="957" class="Symbol">:</a> <a id="959" href="Graded.Heap.Untyped.html#1496" class="Function">Entry</a> <a id="965" class="Symbol">_</a> <a id="967" class="Symbol">_</a>
  <a id="971" href="Graded.Heap.Typed.Substitution.html#971" class="Generalizable">p</a> <a id="973" class="Symbol">:</a> <a id="975" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a>
  <a id="979" href="Graded.Heap.Typed.Substitution.html#979" class="Generalizable">e</a> <a id="981" class="Symbol">:</a> <a id="983" href="Graded.Heap.Untyped.html#2043" class="Datatype">Elim</a> <a id="988" class="Symbol">_</a>
  <a id="992" href="Graded.Heap.Typed.Substitution.html#992" class="Generalizable">S</a> <a id="994" class="Symbol">:</a> <a id="996" href="Graded.Heap.Untyped.html#4634" class="Datatype">Stack</a> <a id="1002" class="Symbol">_</a>
  <a id="1006" href="Graded.Heap.Typed.Substitution.html#1006" class="Generalizable">σ</a> <a id="1008" class="Symbol">:</a> <a id="1010" href="Definition.Untyped.html#11546" class="Function">Subst</a> <a id="1016" class="Symbol">_</a> <a id="1018" class="Symbol">_</a>

<a id="1021" class="Keyword">opaque</a> <a id="1028" class="Keyword">mutual</a>

  <a id="1038" class="Comment">-- A well-formed heap is a well-formed substitution</a>

  <a id="⊢ʰ→⊢ˢʷ"></a><a id="1093" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1100" class="Symbol">:</a> <a id="1102" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="1104" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="1107" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="1109" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="1111" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="1113" class="Symbol">→</a> <a id="1115" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="1117" href="Definition.Typed.Substitution.Primitive.Primitive.html#3155" class="Function Operator">⊢ˢʷ</a> <a id="1121" href="Graded.Heap.Untyped.html#7769" class="Function">toSubstₕ</a> <a id="1130" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="1132" href="Definition.Typed.Substitution.Primitive.Primitive.html#3155" class="Function Operator">∷</a> <a id="1134" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a>
  <a id="1138" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1145" href="Graded.Heap.Typed.html#1041" class="InductiveConstructor">ε</a> <a id="1147" class="Symbol">=</a> <a id="1149" href="Definition.Typed.Substitution.Primitive.Primitive.html#3447" class="Function">⊢ˢʷ∷ε⇔</a> <a id="1156" class="Symbol">.</a><a id="1157" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="1163" href="Definition.Typed.html#1198" class="InductiveConstructor">ε</a>
  <a id="1167" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1174" class="Symbol">(</a><a id="1175" href="Graded.Heap.Typed.Substitution.html#1175" class="Bound">⊢H</a> <a id="1178" href="Graded.Heap.Typed.html#1058" class="InductiveConstructor Operator">∙</a> <a id="1180" href="Graded.Heap.Typed.Substitution.html#1180" class="Bound">⊢t</a><a id="1182" class="Symbol">)</a> <a id="1184" class="Symbol">=</a>
    <a id="1190" href="Definition.Typed.Substitution.Primitive.Primitive.html#3819" class="Function">→⊢ˢʷ∷∙</a> <a id="1197" class="Symbol">(</a><a id="1198" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1205" href="Graded.Heap.Typed.Substitution.html#1175" class="Bound">⊢H</a><a id="1207" class="Symbol">)</a> <a id="1209" href="Graded.Heap.Typed.Substitution.html#1180" class="Bound">⊢t</a>
  <a id="1214" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1221" class="Symbol">(</a><a id="1222" href="Graded.Heap.Typed.html#1139" class="InductiveConstructor Operator">_∙●_</a> <a id="1227" class="Symbol">{</a><a id="1228" href="Graded.Heap.Typed.Substitution.html#1228" class="Bound">Δ</a><a id="1229" class="Symbol">}</a> <a id="1231" class="Symbol">{</a><a id="1232" href="Graded.Heap.Typed.Substitution.html#1232" class="Bound">H</a><a id="1233" class="Symbol">}</a> <a id="1235" class="Symbol">{</a><a id="1236" href="Graded.Heap.Typed.Substitution.html#1236" class="Bound">A</a><a id="1237" class="Symbol">}</a> <a id="1239" href="Graded.Heap.Typed.Substitution.html#1239" class="Bound">⊢H</a> <a id="1242" href="Graded.Heap.Typed.Substitution.html#1242" class="Bound">⊢A</a><a id="1244" class="Symbol">)</a> <a id="1246" class="Symbol">=</a>
    <a id="1252" class="Keyword">let</a> <a id="1256" href="Graded.Heap.Typed.Substitution.html#1256" class="Bound">⊢σ</a> <a id="1259" class="Symbol">=</a> <a id="1261" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1268" href="Graded.Heap.Typed.Substitution.html#1239" class="Bound">⊢H</a>
        <a id="1279" href="Graded.Heap.Typed.Substitution.html#1279" class="Bound">⊢σA</a> <a id="1283" class="Symbol">=</a> <a id="1285" href="Definition.Typed.Substitution.Primitive.Primitive.html#53661" class="Function">subst-⊢</a> <a id="1293" href="Graded.Heap.Typed.Substitution.html#1242" class="Bound">⊢A</a> <a id="1296" href="Graded.Heap.Typed.Substitution.html#1256" class="Bound">⊢σ</a>
    <a id="1303" class="Keyword">in</a>
    <a id="1310" href="Definition.Typed.Substitution.Primitive.Primitive.html#3819" class="Function">→⊢ˢʷ∷∙</a> <a id="1317" class="Symbol">(</a><a id="1318" href="Definition.Typed.Substitution.Primitive.Primitive.html#7174" class="Function">⊢ˢʷ∷-wk1Subst</a> <a id="1332" href="Graded.Heap.Typed.Substitution.html#1279" class="Bound">⊢σA</a> <a id="1336" href="Graded.Heap.Typed.Substitution.html#1256" class="Bound">⊢σ</a><a id="1338" class="Symbol">)</a> <a id="1340" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="1346" href="Definition.Typed.html#2177" class="InductiveConstructor">var</a> <a id="1350" class="Symbol">(</a><a id="1351" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="1353" href="Graded.Heap.Typed.Substitution.html#1279" class="Bound">⊢σA</a><a id="1356" class="Symbol">)</a>
      <a id="1364" class="Symbol">(</a><a id="1365" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">PE.subst</a> <a id="1374" class="Symbol">(</a><a id="1375" href="Graded.Heap.Untyped.html#1299" class="InductiveConstructor">y0</a> <a id="1378" href="Definition.Typed.html#969" class="Datatype Operator">∷_∈</a> <a id="1382" href="Graded.Heap.Typed.Substitution.html#1228" class="Bound">Δ</a> <a id="1384" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="1386" href="Graded.Heap.Typed.Substitution.html#1236" class="Bound">A</a> <a id="1388" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1390" href="Graded.Heap.Typed.Substitution.html#1232" class="Bound">H</a> <a id="1392" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a><a id="1394" class="Symbol">)</a> <a id="1396" class="Symbol">(</a><a id="1397" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="1404" class="Symbol">(</a><a id="1405" href="Definition.Untyped.Properties.html#23098" class="Function">wk1Subst-wk1</a> <a id="1418" href="Graded.Heap.Typed.Substitution.html#1236" class="Bound">A</a><a id="1419" class="Symbol">))</a> <a id="1422" href="Definition.Typed.html#1035" class="InductiveConstructor">here</a><a id="1426" class="Symbol">)</a>

  <a id="1431" class="Comment">-- Well-formed contexts from well-formed heaps</a>

  <a id="wfHeap"></a><a id="1481" href="Graded.Heap.Typed.Substitution.html#1481" class="Function">wfHeap</a> <a id="1488" class="Symbol">:</a> <a id="1490" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="1492" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="1495" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="1497" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="1499" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="1501" class="Symbol">→</a> <a id="1503" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="1505" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a>
  <a id="1509" href="Graded.Heap.Typed.Substitution.html#1481" class="Function">wfHeap</a> <a id="1516" class="Symbol">{</a><a id="1517" class="Argument">Δ</a> <a id="1519" class="Symbol">=</a> <a id="1521" href="Definition.Untyped.NotParametrised.html#926" class="InductiveConstructor">ε</a><a id="1522" class="Symbol">}</a> <a id="1524" href="Graded.Heap.Typed.html#1041" class="InductiveConstructor">ε</a> <a id="1526" class="Symbol">=</a> <a id="1528" href="Definition.Typed.html#1198" class="InductiveConstructor">ε</a>
  <a id="1532" href="Graded.Heap.Typed.Substitution.html#1481" class="CatchallClause Function">wfHeap</a><a id="1538" class="CatchallClause"> </a><a id="1539" class="CatchallClause Symbol">(</a><a id="1540" href="Graded.Heap.Typed.Substitution.html#1540" class="CatchallClause Bound">⊢H</a><a id="1542" class="CatchallClause"> </a><a id="1543" href="Graded.Heap.Typed.html#1058" class="CatchallClause InductiveConstructor Operator">∙</a><a id="1544" class="CatchallClause"> </a><a id="1545" href="Graded.Heap.Typed.Substitution.html#1545" class="CatchallClause Bound">⊢t</a><a id="1547" class="CatchallClause Symbol">)</a> <a id="1549" class="Symbol">=</a> <a id="1551" href="Graded.Heap.Typed.Substitution.html#1481" class="Function">wfHeap</a> <a id="1558" href="Graded.Heap.Typed.Substitution.html#1540" class="Bound">⊢H</a>
  <a id="1563" href="Graded.Heap.Typed.Substitution.html#1481" class="Function">wfHeap</a> <a id="1570" class="Symbol">(</a><a id="1571" href="Graded.Heap.Typed.Substitution.html#1571" class="Bound">⊢H</a> <a id="1574" href="Graded.Heap.Typed.html#1139" class="InductiveConstructor Operator">∙●</a> <a id="1577" href="Graded.Heap.Typed.Substitution.html#1577" class="Bound">⊢A</a><a id="1579" class="Symbol">)</a> <a id="1581" class="Symbol">=</a>
    <a id="1587" href="Definition.Typed.html#1211" class="InductiveConstructor Operator">∙</a> <a id="1589" href="Definition.Typed.Substitution.Primitive.Primitive.html#53661" class="Function">subst-⊢</a> <a id="1597" href="Graded.Heap.Typed.Substitution.html#1577" class="Bound">⊢A</a> <a id="1600" class="Symbol">(</a><a id="1601" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1608" href="Graded.Heap.Typed.Substitution.html#1571" class="Bound">⊢H</a><a id="1610" class="Symbol">)</a>

<a id="1613" class="Keyword">opaque</a>

  <a id="1623" class="Comment">-- A well-formed type applied to a well-formed heap (as a substitution)</a>
  <a id="1697" class="Comment">-- is well-formed</a>

  <a id="substHeap"></a><a id="1718" href="Graded.Heap.Typed.Substitution.html#1718" class="Function">substHeap</a> <a id="1728" class="Symbol">:</a> <a id="1730" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="1732" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="1735" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="1737" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="1739" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="1741" class="Symbol">→</a> <a id="1743" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="1745" href="Definition.Typed.html#1262" class="Datatype Operator">⊢</a> <a id="1747" href="Graded.Heap.Typed.Substitution.html#928" class="Generalizable">A</a> <a id="1749" class="Symbol">→</a> <a id="1751" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="1753" href="Definition.Typed.html#1262" class="Datatype Operator">⊢</a> <a id="1755" href="Graded.Heap.Typed.Substitution.html#928" class="Generalizable">A</a> <a id="1757" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1759" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="1761" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="1766" href="Graded.Heap.Typed.Substitution.html#1718" class="Function">substHeap</a> <a id="1776" href="Graded.Heap.Typed.Substitution.html#1776" class="Bound">⊢H</a> <a id="1779" href="Graded.Heap.Typed.Substitution.html#1779" class="Bound">⊢A</a> <a id="1782" class="Symbol">=</a>
    <a id="1788" href="Definition.Typed.Substitution.Primitive.Primitive.html#53661" class="Function">subst-⊢</a> <a id="1796" href="Graded.Heap.Typed.Substitution.html#1779" class="Bound">⊢A</a> <a id="1799" class="Symbol">(</a><a id="1800" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="1807" href="Graded.Heap.Typed.Substitution.html#1776" class="Bound">⊢H</a><a id="1809" class="Symbol">)</a>

<a id="1812" class="Keyword">opaque</a>

  <a id="1822" class="Comment">-- A well-formed term applied to a well-formed heap (as a substitution)</a>
  <a id="1896" class="Comment">-- is well-formed</a>

  <a id="substHeapTerm"></a><a id="1917" href="Graded.Heap.Typed.Substitution.html#1917" class="Function">substHeapTerm</a> <a id="1931" class="Symbol">:</a> <a id="1933" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="1935" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="1938" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="1940" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="1942" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="1944" class="Symbol">→</a> <a id="1946" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="1948" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="1950" href="Graded.Heap.Typed.Substitution.html#924" class="Generalizable">t</a> <a id="1952" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="1954" href="Graded.Heap.Typed.Substitution.html#928" class="Generalizable">A</a> <a id="1956" class="Symbol">→</a> <a id="1958" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="1960" href="Definition.Typed.html#1707" class="Datatype Operator">⊢</a> <a id="1962" href="Graded.Heap.Typed.Substitution.html#924" class="Generalizable">t</a> <a id="1964" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1966" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="1968" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="1971" href="Definition.Typed.html#1707" class="Datatype Operator">∷</a> <a id="1973" href="Graded.Heap.Typed.Substitution.html#928" class="Generalizable">A</a> <a id="1975" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1977" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="1979" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="1984" href="Graded.Heap.Typed.Substitution.html#1917" class="Function">substHeapTerm</a> <a id="1998" href="Graded.Heap.Typed.Substitution.html#1998" class="Bound">⊢H</a> <a id="2001" href="Graded.Heap.Typed.Substitution.html#2001" class="Bound">⊢t</a> <a id="2004" class="Symbol">=</a>
    <a id="2010" href="Definition.Typed.Substitution.Primitive.Primitive.html#54020" class="Function">subst-⊢∷</a> <a id="2019" href="Graded.Heap.Typed.Substitution.html#2001" class="Bound">⊢t</a> <a id="2022" class="Symbol">(</a><a id="2023" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2030" href="Graded.Heap.Typed.Substitution.html#1998" class="Bound">⊢H</a><a id="2032" class="Symbol">)</a>

<a id="2035" class="Keyword">opaque</a>

  <a id="2045" class="Comment">-- A well-formed type equality applied to a well-formed heap</a>
  <a id="2108" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEq"></a><a id="2149" href="Graded.Heap.Typed.Substitution.html#2149" class="Function">substHeapEq</a> <a id="2161" class="Symbol">:</a> <a id="2163" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="2165" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="2168" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="2170" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="2172" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="2174" class="Symbol">→</a> <a id="2176" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="2178" href="Definition.Typed.html#4647" class="Datatype Operator">⊢</a> <a id="2180" href="Graded.Heap.Typed.Substitution.html#928" class="Generalizable">A</a> <a id="2182" href="Definition.Typed.html#4647" class="Datatype Operator">≡</a> <a id="2184" href="Graded.Heap.Typed.Substitution.html#930" class="Generalizable">B</a> <a id="2186" class="Symbol">→</a> <a id="2188" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="2190" href="Definition.Typed.html#4647" class="Datatype Operator">⊢</a> <a id="2192" href="Graded.Heap.Typed.Substitution.html#928" class="Generalizable">A</a> <a id="2194" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2196" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="2198" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2201" href="Definition.Typed.html#4647" class="Datatype Operator">≡</a> <a id="2203" href="Graded.Heap.Typed.Substitution.html#930" class="Generalizable">B</a> <a id="2205" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2207" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="2209" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="2214" href="Graded.Heap.Typed.Substitution.html#2149" class="Function">substHeapEq</a> <a id="2226" href="Graded.Heap.Typed.Substitution.html#2226" class="Bound">⊢H</a> <a id="2229" href="Graded.Heap.Typed.Substitution.html#2229" class="Bound">⊢A≡B</a> <a id="2234" class="Symbol">=</a>
    <a id="2240" href="Definition.Typed.Substitution.Primitive.Primitive.html#53818" class="Function">subst-⊢≡</a> <a id="2249" href="Graded.Heap.Typed.Substitution.html#2229" class="Bound">⊢A≡B</a> <a id="2254" class="Symbol">(</a><a id="2255" href="Definition.Typed.Substitution.Primitive.Primitive.html#6148" class="Function">refl-⊢ˢʷ≡∷</a> <a id="2266" class="Symbol">(</a><a id="2267" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2274" href="Graded.Heap.Typed.Substitution.html#2226" class="Bound">⊢H</a><a id="2276" class="Symbol">))</a>

<a id="2280" class="Keyword">opaque</a>

  <a id="2290" class="Comment">-- A well-formed term equality  applied to a well-formed heap</a>
  <a id="2354" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEqTerm"></a><a id="2395" href="Graded.Heap.Typed.Substitution.html#2395" class="Function">substHeapEqTerm</a> <a id="2411" class="Symbol">:</a> <a id="2413" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="2415" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="2418" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="2420" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="2422" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="2424" class="Symbol">→</a> <a id="2426" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="2428" href="Definition.Typed.html#5241" class="Datatype Operator">⊢</a> <a id="2430" href="Graded.Heap.Typed.Substitution.html#924" class="Generalizable">t</a> <a id="2432" href="Definition.Typed.html#5241" class="Datatype Operator">≡</a> <a id="2434" href="Graded.Heap.Typed.Substitution.html#926" class="Generalizable">u</a> <a id="2436" href="Definition.Typed.html#5241" class="Datatype Operator">∷</a> <a id="2438" href="Graded.Heap.Typed.Substitution.html#928" class="Generalizable">A</a>
                  <a id="2458" class="Symbol">→</a> <a id="2460" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="2462" href="Definition.Typed.html#5241" class="Datatype Operator">⊢</a> <a id="2464" href="Graded.Heap.Typed.Substitution.html#924" class="Generalizable">t</a> <a id="2466" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2468" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="2470" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2473" href="Definition.Typed.html#5241" class="Datatype Operator">≡</a> <a id="2475" href="Graded.Heap.Typed.Substitution.html#926" class="Generalizable">u</a> <a id="2477" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2479" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="2481" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2484" href="Definition.Typed.html#5241" class="Datatype Operator">∷</a> <a id="2486" href="Graded.Heap.Typed.Substitution.html#928" class="Generalizable">A</a> <a id="2488" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2490" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="2492" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="2497" href="Graded.Heap.Typed.Substitution.html#2395" class="Function">substHeapEqTerm</a> <a id="2513" href="Graded.Heap.Typed.Substitution.html#2513" class="Bound">⊢H</a> <a id="2516" href="Graded.Heap.Typed.Substitution.html#2516" class="Bound">⊢t≡u</a> <a id="2521" class="Symbol">=</a>
    <a id="2527" href="Definition.Typed.Substitution.Primitive.Primitive.html#54196" class="Function">subst-⊢≡∷</a> <a id="2537" href="Graded.Heap.Typed.Substitution.html#2516" class="Bound">⊢t≡u</a> <a id="2542" class="Symbol">(</a><a id="2543" href="Definition.Typed.Substitution.Primitive.Primitive.html#6148" class="Function">refl-⊢ˢʷ≡∷</a> <a id="2554" class="Symbol">(</a><a id="2555" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2562" href="Graded.Heap.Typed.Substitution.html#2513" class="Bound">⊢H</a><a id="2564" class="Symbol">))</a>

<a id="2568" class="Keyword">opaque</a>

  <a id="2578" class="Comment">-- Applying a well-formed heap as a substitution to a reduction</a>

  <a id="substHeapRedTerm"></a><a id="2645" href="Graded.Heap.Typed.Substitution.html#2645" class="Function">substHeapRedTerm</a> <a id="2662" class="Symbol">:</a> <a id="2664" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="2666" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="2669" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="2671" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="2673" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="2675" class="Symbol">→</a> <a id="2677" href="Graded.Heap.Typed.Substitution.html#874" class="Generalizable">Γ</a> <a id="2679" href="Definition.Typed.html#12828" class="Datatype Operator">⊢</a> <a id="2681" href="Graded.Heap.Typed.Substitution.html#924" class="Generalizable">t</a> <a id="2683" href="Definition.Typed.html#12828" class="Datatype Operator">⇒</a> <a id="2685" href="Graded.Heap.Typed.Substitution.html#926" class="Generalizable">u</a> <a id="2687" href="Definition.Typed.html#12828" class="Datatype Operator">∷</a> <a id="2689" href="Graded.Heap.Typed.Substitution.html#928" class="Generalizable">A</a>
                   <a id="2710" class="Symbol">→</a> <a id="2712" href="Graded.Heap.Typed.Substitution.html#876" class="Generalizable">Δ</a> <a id="2714" href="Definition.Typed.html#12828" class="Datatype Operator">⊢</a> <a id="2716" href="Graded.Heap.Typed.Substitution.html#924" class="Generalizable">t</a> <a id="2718" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2720" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="2722" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2725" href="Definition.Typed.html#12828" class="Datatype Operator">⇒</a> <a id="2727" href="Graded.Heap.Typed.Substitution.html#926" class="Generalizable">u</a> <a id="2729" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2731" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="2733" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2736" href="Definition.Typed.html#12828" class="Datatype Operator">∷</a> <a id="2738" href="Graded.Heap.Typed.Substitution.html#928" class="Generalizable">A</a> <a id="2740" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2742" href="Graded.Heap.Typed.Substitution.html#893" class="Generalizable">H</a> <a id="2744" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="2749" href="Graded.Heap.Typed.Substitution.html#2645" class="Function">substHeapRedTerm</a> <a id="2766" href="Graded.Heap.Typed.Substitution.html#2766" class="Bound">⊢H</a> <a id="2769" href="Graded.Heap.Typed.Substitution.html#2769" class="Bound">d</a> <a id="2771" class="Symbol">=</a>
    <a id="2777" href="Definition.Typed.Substitution.html#1074" class="Function">subst-⊢⇒∷</a> <a id="2787" href="Graded.Heap.Typed.Substitution.html#2769" class="Bound">d</a> <a id="2789" class="Symbol">(</a><a id="2790" href="Graded.Heap.Typed.Substitution.html#1093" class="Function">⊢ʰ→⊢ˢʷ</a> <a id="2797" href="Graded.Heap.Typed.Substitution.html#2766" class="Bound">⊢H</a><a id="2799" class="Symbol">)</a>
</pre></body></html>