<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.LogicalRelation.Fundamental.Assumptions</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Assumptions used to state some theorems in</a>
<a id="120" class="Comment">-- Graded.Erasure.LogicalRelation.Fundamental elsewhere for consequences</a>
<a id="193" class="Comment">-- of the fundamental lemma.</a>
<a id="222" class="Comment">------------------------------------------------------------------------</a>

<a id="296" class="Keyword">open</a> <a id="301" class="Keyword">import</a> <a id="308" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="324" class="Keyword">open</a> <a id="329" class="Keyword">import</a> <a id="336" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="362" class="Keyword">open</a> <a id="367" class="Keyword">import</a> <a id="374" href="Definition.Typed.EqualityRelation.html" class="Module">Definition.Typed.EqualityRelation</a>
<a id="408" class="Keyword">open</a> <a id="413" class="Keyword">import</a> <a id="420" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="451" class="Keyword">module</a> <a id="458" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html" class="Module">Graded.Erasure.LogicalRelation.Fundamental.Assumptions</a>
  <a id="515" class="Symbol">{</a><a id="516" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#516" class="Bound">a</a><a id="517" class="Symbol">}</a> <a id="519" class="Symbol">{</a><a id="520" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#520" class="Bound">M</a> <a id="522" class="Symbol">:</a> <a id="524" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="528" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#516" class="Bound">a</a><a id="529" class="Symbol">}</a>
  <a id="533" class="Symbol">{</a><a id="534" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#534" class="Bound">𝕄</a> <a id="536" class="Symbol">:</a> <a id="538" href="Graded.Modality.html#8202" class="Record">Modality</a> <a id="547" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#520" class="Bound">M</a><a id="548" class="Symbol">}</a>
  <a id="552" class="Symbol">(</a><a id="553" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#553" class="Bound">TR</a> <a id="556" class="Symbol">:</a> <a id="558" href="Definition.Typed.Restrictions.html#831" class="Record">Type-restrictions</a> <a id="576" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#534" class="Bound">𝕄</a><a id="577" class="Symbol">)</a>
  <a id="581" class="Symbol">(</a><a id="582" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#582" class="Bound">UR</a> <a id="585" class="Symbol">:</a> <a id="587" href="Graded.Usage.Restrictions.html#750" class="Record">Usage-restrictions</a> <a id="606" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#534" class="Bound">𝕄</a><a id="607" class="Symbol">)</a>
  <a id="611" class="Symbol">⦃</a> <a id="613" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#613" class="Bound">eqrel</a> <a id="619" class="Symbol">:</a> <a id="621" href="Definition.Typed.EqualityRelation.html#11487" class="Record">EqRelSet</a> <a id="630" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#553" class="Bound">TR</a> <a id="633" class="Symbol">⦄</a>
  <a id="637" class="Keyword">where</a>

<a id="644" class="Keyword">open</a> <a id="649" href="Definition.Typed.EqualityRelation.html#11487" class="Module">EqRelSet</a> <a id="658" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#613" class="Bound">eqrel</a>
<a id="664" class="Keyword">open</a> <a id="669" href="Graded.Modality.html#8202" class="Module">Modality</a> <a id="678" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#534" class="Bound">𝕄</a>
<a id="680" class="Keyword">open</a> <a id="685" href="Graded.Usage.Restrictions.html#750" class="Module">Usage-restrictions</a> <a id="704" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#582" class="Bound">UR</a>

<a id="708" class="Keyword">open</a> <a id="713" class="Keyword">import</a> <a id="720" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="739" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#520" class="Bound">M</a>
<a id="741" class="Keyword">open</a> <a id="746" class="Keyword">import</a> <a id="753" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="770" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#553" class="Bound">TR</a>
<a id="773" class="Keyword">open</a> <a id="778" class="Keyword">import</a> <a id="785" href="Definition.Typed.Consequences.Consistency.html" class="Module">Definition.Typed.Consequences.Consistency</a> <a id="827" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#553" class="Bound">TR</a>
<a id="830" class="Keyword">open</a> <a id="835" class="Keyword">import</a> <a id="842" href="Definition.Typed.Substitution.html" class="Module">Definition.Typed.Substitution</a> <a id="872" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#553" class="Bound">TR</a>

<a id="876" class="Keyword">open</a> <a id="881" class="Keyword">import</a> <a id="888" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="900" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#534" class="Bound">𝕄</a>
<a id="902" class="Keyword">open</a> <a id="907" class="Keyword">import</a> <a id="914" href="Graded.Restrictions.html" class="Module">Graded.Restrictions</a> <a id="934" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#534" class="Bound">𝕄</a>

<a id="937" class="Keyword">open</a> <a id="942" class="Keyword">import</a> <a id="949" href="Tools.Nat.html" class="Module">Tools.Nat</a>
<a id="959" class="Keyword">open</a> <a id="964" class="Keyword">import</a> <a id="971" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="999" class="Keyword">open</a> <a id="1004" class="Keyword">import</a> <a id="1011" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="1022" class="Keyword">private</a> <a id="1030" class="Keyword">variable</a>
  <a id="1041" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1041" class="Generalizable">k</a> <a id="1043" class="Symbol">:</a> <a id="1045" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>

<a id="1050" class="Comment">-- A cut-down variant of Fundamental-assumptions (which is defined</a>
<a id="1117" class="Comment">-- below).</a>

<a id="1129" class="Keyword">record</a> <a id="Fundamental-assumptions⁻"></a><a id="1136" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1136" class="Record">Fundamental-assumptions⁻</a> <a id="1161" class="Symbol">(</a><a id="1162" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1162" class="Bound">Δ</a> <a id="1164" class="Symbol">:</a> <a id="1166" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="1170" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1175" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1041" class="Generalizable">k</a><a id="1176" class="Symbol">)</a> <a id="1178" class="Symbol">:</a> <a id="1180" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1184" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#516" class="Bound">a</a> <a id="1186" class="Keyword">where</a>
  <a id="1194" class="Keyword">no-eta-equality</a>
  <a id="1212" class="Keyword">field</a>
    <a id="1222" class="Comment">-- If erased matches are allowed for emptyrec when the mode is 𝟙ᵐ,</a>
    <a id="1293" class="Comment">-- then the context is consistent.</a>
    <a id="Fundamental-assumptions⁻.consistent"></a><a id="1332" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1332" class="Field">consistent</a> <a id="1343" class="Symbol">:</a> <a id="1345" href="Graded.Usage.Restrictions.html#1638" class="Function">Emptyrec-allowed</a> <a id="1362" href="Graded.Mode.html#1117" class="InductiveConstructor">𝟙ᵐ</a> <a id="1365" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="1367" class="Symbol">→</a> <a id="1369" href="Definition.Typed.html#18998" class="Function">Consistent</a> <a id="1380" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1162" class="Bound">Δ</a>
    <a id="1386" class="Comment">-- Erased matches are not allowed unless the context is empty.</a>
    <a id="Fundamental-assumptions⁻.closed-or-no-erased-matches"></a><a id="1453" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1453" class="Field">closed-or-no-erased-matches</a> <a id="1481" class="Symbol">:</a> <a id="1483" href="Graded.Restrictions.html#11647" class="Function">No-erased-matches</a> <a id="1501" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#553" class="Bound">TR</a> <a id="1504" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#582" class="Bound">UR</a> <a id="1507" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1509" href="Definition.Untyped.NotParametrised.html#1141" class="Datatype">Empty-con</a> <a id="1519" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1162" class="Bound">Δ</a>
    <a id="1525" class="Keyword">instance</a>
      <a id="1540" class="Comment">-- Neutrals-included holds or the context is empty.</a>
      <a id="1598" class="Symbol">⦃</a> <a id="Fundamental-assumptions⁻.inc"></a><a id="1600" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1600" class="Field">inc</a> <a id="1604" class="Symbol">⦄</a> <a id="1606" class="Symbol">:</a> <a id="1608" href="Definition.Typed.EqualityRelation.html#11909" class="Field">Neutrals-included</a> <a id="1626" href="Definition.Untyped.NotParametrised.html#1265" class="Datatype Operator">or-empty</a> <a id="1635" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1162" class="Bound">Δ</a>

<a id="1638" class="Comment">-- The fundamental lemma is proved under the assumption that a given</a>
<a id="1707" class="Comment">-- context Δ satisfies the following assumptions.</a>

<a id="1758" class="Keyword">record</a> <a id="Fundamental-assumptions"></a><a id="1765" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1765" class="Record">Fundamental-assumptions</a> <a id="1789" class="Symbol">(</a><a id="1790" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1790" class="Bound">Δ</a> <a id="1792" class="Symbol">:</a> <a id="1794" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="1798" href="Definition.Untyped.html#1181" class="Datatype">Term</a> <a id="1803" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1041" class="Generalizable">k</a><a id="1804" class="Symbol">)</a> <a id="1806" class="Symbol">:</a> <a id="1808" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1812" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#516" class="Bound">a</a> <a id="1814" class="Keyword">where</a>
  <a id="1822" class="Keyword">no-eta-equality</a>
  <a id="1840" class="Keyword">field</a>
    <a id="1850" class="Comment">-- The context is well-formed.</a>
    <a id="Fundamental-assumptions.well-formed"></a><a id="1885" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1885" class="Field">well-formed</a> <a id="1897" class="Symbol">:</a> <a id="1899" href="Definition.Typed.html#1164" class="Datatype Operator">⊢</a> <a id="1901" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1790" class="Bound">Δ</a>
    <a id="1907" class="Comment">-- Other assumptions.</a>
    <a id="Fundamental-assumptions.other-assumptions"></a><a id="1933" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1933" class="Field">other-assumptions</a> <a id="1951" class="Symbol">:</a> <a id="1953" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1136" class="Record">Fundamental-assumptions⁻</a> <a id="1978" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1790" class="Bound">Δ</a>

  <a id="1983" class="Keyword">open</a> <a id="1988" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1136" class="Module">Fundamental-assumptions⁻</a> <a id="2013" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1933" class="Field">other-assumptions</a> <a id="2031" class="Keyword">public</a>

<a id="2039" class="Comment">-- Fundamental-assumptions⁻ holds unconditionally for empty contexts.</a>

<a id="fundamental-assumptions⁻₀"></a><a id="2110" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#2110" class="Function">fundamental-assumptions⁻₀</a> <a id="2136" class="Symbol">:</a> <a id="2138" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1136" class="Record">Fundamental-assumptions⁻</a> <a id="2163" class="InductiveConstructor">ε</a>
<a id="2165" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#2110" class="Function">fundamental-assumptions⁻₀</a> <a id="2191" class="Symbol">=</a> <a id="2193" class="Keyword">record</a>
  <a id="2202" class="Symbol">{</a> <a id="2204" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1332" class="Field">consistent</a>                  <a id="2232" class="Symbol">=</a> <a id="2234" class="Symbol">λ</a> <a id="2236" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#2236" class="Bound">_</a> <a id="2238" class="Symbol">→</a>
                                    <a id="2276" href="Definition.Typed.Consequences.Consistency.html#1165" class="Function">inhabited-consistent</a>
                                      <a id="2335" class="Symbol">(</a><a id="2336" href="Definition.Typed.Substitution.Primitive.Primitive.html#7983" class="Function">⊢ˢʷ∷-idSubst</a> <a id="2349" href="Definition.Typed.html#1198" class="InductiveConstructor">ε</a><a id="2350" class="Symbol">)</a>
  <a id="2354" class="Symbol">;</a> <a id="2356" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1453" class="Field">closed-or-no-erased-matches</a> <a id="2384" class="Symbol">=</a> <a id="2386" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2391" href="Definition.Untyped.NotParametrised.html#1195" class="InductiveConstructor">ε</a>
  <a id="2395" class="Symbol">;</a> <a id="2397" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1600" class="Field">inc</a>                         <a id="2425" class="Symbol">=</a> <a id="2427" href="Definition.Untyped.NotParametrised.html#1380" class="InductiveConstructor">ε</a>
  <a id="2431" class="Symbol">}</a>

<a id="2434" class="Comment">-- Fundamental-assumptions holds unconditionally for empty contexts.</a>

<a id="fundamental-assumptions₀"></a><a id="2504" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#2504" class="Function">fundamental-assumptions₀</a> <a id="2529" class="Symbol">:</a> <a id="2531" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1765" class="Record">Fundamental-assumptions</a> <a id="2555" class="InductiveConstructor">ε</a>
<a id="2557" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#2504" class="Function">fundamental-assumptions₀</a> <a id="2582" class="Symbol">=</a> <a id="2584" class="Keyword">record</a>
  <a id="2593" class="Symbol">{</a> <a id="2595" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1885" class="Field">well-formed</a>       <a id="2613" class="Symbol">=</a> <a id="2615" href="Definition.Typed.html#1198" class="InductiveConstructor">ε</a>
  <a id="2619" class="Symbol">;</a> <a id="2621" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#1933" class="Field">other-assumptions</a> <a id="2639" class="Symbol">=</a> <a id="2641" href="Graded.Erasure.LogicalRelation.Fundamental.Assumptions.html#2110" class="Function">fundamental-assumptions⁻₀</a>
  <a id="2669" class="Symbol">}</a>
</pre></body></html>