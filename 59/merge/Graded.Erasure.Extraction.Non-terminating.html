<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Erasure.Extraction.Non-terminating</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- If the extraction function uses strict applications and removes</a>
<a id="141" class="Comment">-- erasable arguments entirely, then it may be the case that</a>
<a id="202" class="Comment">-- well-typed and well-resourced terms extract to terms that do not</a>
<a id="270" class="Comment">-- terminate</a>
<a id="283" class="Comment">------------------------------------------------------------------------</a>

<a id="357" class="Comment">-- In &quot;A New Extraction for Coq&quot; Letouzey points out that uses of the</a>
<a id="427" class="Comment">-- eliminator for the empty type False can lead to problems similar to</a>
<a id="498" class="Comment">-- the one presented below if all logical arguments are removed</a>
<a id="562" class="Comment">-- entirely, given that the eliminator is replaced with code that</a>
<a id="628" class="Comment">-- throws an exception. However, the example discussed below does not</a>
<a id="698" class="Comment">-- rely on how emptyrec is extracted, but is more similar to one in</a>
<a id="766" class="Comment">-- Mishra-Linger&#39;s PhD thesis (see Figure 5.1).</a>
<a id="814" class="Comment">--</a>
<a id="817" class="Comment">-- The example looks roughly like this:</a>
<a id="857" class="Comment">--</a>
<a id="860" class="Comment">--   (λ^ω _. zero)</a>
<a id="879" class="Comment">--     (λ⁰ (bot : ⊥).</a>
<a id="901" class="Comment">--        (λ^ω+ω x. cast bot x x) (cast bot (λ^ω+ω x. cast bot x x)))</a>
<a id="971" class="Comment">--</a>
<a id="974" class="Comment">-- If erased arguments are removed entirely, then we end up with a</a>
<a id="1041" class="Comment">-- term like the following one:</a>
<a id="1073" class="Comment">--</a>
<a id="1076" class="Comment">--   (λ _. zero) ((λ x. x x) (λ x. x x))</a>
<a id="1117" class="Comment">--</a>
<a id="1120" class="Comment">-- If strict applications are used, then this program does not</a>
<a id="1183" class="Comment">-- terminate.</a>

<a id="1198" class="Keyword">open</a> <a id="1203" class="Keyword">import</a> <a id="1210" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="1226" class="Keyword">open</a> <a id="1231" class="Keyword">import</a> <a id="1238" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="1264" class="Keyword">open</a> <a id="1269" class="Keyword">import</a> <a id="1276" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="1307" class="Keyword">module</a> <a id="1314" href="Graded.Erasure.Extraction.Non-terminating.html" class="Module">Graded.Erasure.Extraction.Non-terminating</a>
  <a id="1358" class="Symbol">{</a><a id="1359" href="Graded.Erasure.Extraction.Non-terminating.html#1359" class="Bound">a</a><a id="1360" class="Symbol">}</a> <a id="1362" class="Symbol">{</a><a id="1363" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="1365" class="Symbol">:</a> <a id="1367" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1371" href="Graded.Erasure.Extraction.Non-terminating.html#1359" class="Bound">a</a><a id="1372" class="Symbol">}</a>
  <a id="1376" class="Symbol">{</a><a id="1377" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="1379" class="Symbol">:</a> <a id="1381" href="Graded.Modality.html#8202" class="Record">Modality</a> <a id="1390" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a><a id="1391" class="Symbol">}</a>
  <a id="1395" class="Symbol">(</a><a id="1396" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a> <a id="1399" class="Symbol">:</a> <a id="1401" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="1419" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a><a id="1420" class="Symbol">)</a>
  <a id="1424" class="Symbol">(</a><a id="1425" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a> <a id="1428" class="Symbol">:</a> <a id="1430" href="Graded.Usage.Restrictions.html#750" class="Record">Usage-restrictions</a> <a id="1449" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a><a id="1450" class="Symbol">)</a>
  <a id="1454" class="Keyword">where</a>

<a id="1461" class="Keyword">open</a> <a id="1466" href="Graded.Modality.html#8202" class="Module">Modality</a> <a id="1475" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1477" class="Keyword">open</a> <a id="1482" href="Definition.Typed.Restrictions.html#752" class="Module">Type-restrictions</a> <a id="1500" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1503" class="Keyword">open</a> <a id="1508" href="Graded.Usage.Restrictions.html#750" class="Module">Usage-restrictions</a> <a id="1527" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>

<a id="1531" class="Keyword">open</a> <a id="1536" class="Keyword">import</a> <a id="1543" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="1560" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1563" class="Keyword">open</a> <a id="1568" class="Keyword">import</a> <a id="1575" href="Definition.Typed.Consequences.DerivedRules.html" class="Module">Definition.Typed.Consequences.DerivedRules</a> <a id="1618" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1621" class="Keyword">open</a> <a id="1626" class="Keyword">import</a> <a id="1633" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="1661" href="Graded.Erasure.Extraction.Non-terminating.html#1396" class="Bound">TR</a>
<a id="1664" class="Keyword">open</a> <a id="1669" class="Keyword">import</a> <a id="1676" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="1695" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a>
<a id="1697" class="Keyword">open</a> <a id="1702" class="Keyword">import</a> <a id="1709" href="Definition.Untyped.Identity.html" class="Module">Definition.Untyped.Identity</a> <a id="1737" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>

<a id="1740" class="Keyword">open</a> <a id="1745" class="Keyword">import</a> <a id="1752" href="Graded.Context.html" class="Module">Graded.Context</a> <a id="1767" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1769" class="Keyword">open</a> <a id="1774" class="Keyword">import</a> <a id="1781" href="Graded.Context.Properties.html" class="Module">Graded.Context.Properties</a> <a id="1807" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1809" class="Keyword">open</a> <a id="1814" class="Keyword">import</a> <a id="1821" href="Graded.Derived.Identity.html" class="Module">Graded.Derived.Identity</a> <a id="1845" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>
<a id="1848" class="Keyword">open</a> <a id="1853" class="Keyword">import</a> <a id="1860" href="Graded.Erasure.Extraction.html" class="Module">Graded.Erasure.Extraction</a> <a id="1886" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1888" class="Keyword">open</a> <a id="1893" class="Keyword">import</a> <a id="1900" href="Graded.Erasure.Extraction.Properties.html" class="Module">Graded.Erasure.Extraction.Properties</a> <a id="1937" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="1939" class="Keyword">open</a> <a id="1944" class="Keyword">import</a> <a id="1951" href="Graded.Erasure.Target.html" class="Module">Graded.Erasure.Target</a> <a id="1973" class="Symbol">as</a> <a id="1976" class="Module">T</a> <a id="1978" class="Keyword">using</a> <a id="1984" class="Symbol">(</a><a id="1985" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a><a id="1995" class="Symbol">;</a> <a id="1997" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a><a id="2003" class="Symbol">)</a>
<a id="2005" class="Keyword">open</a> <a id="2010" class="Keyword">import</a> <a id="2017" href="Graded.Erasure.Target.Non-terminating.html" class="Module">Graded.Erasure.Target.Non-terminating</a>
<a id="2055" class="Keyword">open</a> <a id="2060" class="Keyword">import</a> <a id="2067" href="Graded.Erasure.Target.Properties.html" class="Module">Graded.Erasure.Target.Properties</a>
<a id="2100" class="Keyword">open</a> <a id="2105" class="Keyword">import</a> <a id="2112" href="Graded.Modality.Properties.html" class="Module">Graded.Modality.Properties</a> <a id="2139" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="2141" class="Keyword">open</a> <a id="2146" class="Keyword">import</a> <a id="2153" href="Graded.Mode.html" class="Module">Graded.Mode</a> <a id="2165" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a>
<a id="2167" class="Keyword">open</a> <a id="2172" class="Keyword">import</a> <a id="2179" href="Graded.Usage.html" class="Module">Graded.Usage</a> <a id="2192" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="2194" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>
<a id="2197" class="Keyword">open</a> <a id="2202" class="Keyword">import</a> <a id="2209" href="Graded.Usage.Properties.html" class="Module">Graded.Usage.Properties</a> <a id="2233" href="Graded.Erasure.Extraction.Non-terminating.html#1377" class="Bound">𝕄</a> <a id="2235" href="Graded.Erasure.Extraction.Non-terminating.html#1425" class="Bound">UR</a>

<a id="2239" class="Keyword">open</a> <a id="2244" class="Keyword">import</a> <a id="2251" href="Tools.Bool.html" class="Module">Tools.Bool</a> <a id="2262" class="Keyword">using</a> <a id="2268" class="Symbol">(</a><a id="2269" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="2273" class="Symbol">;</a> <a id="2275" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="2279" class="Symbol">)</a>
<a id="2281" class="Keyword">open</a> <a id="2286" class="Keyword">import</a> <a id="2293" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="2305" class="Keyword">open</a> <a id="2310" class="Keyword">import</a> <a id="2317" href="Tools.Fin.html" class="Module">Tools.Fin</a>
<a id="2327" class="Keyword">open</a> <a id="2332" class="Keyword">import</a> <a id="2339" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="2354" class="Keyword">open</a> <a id="2359" class="Keyword">import</a> <a id="2366" href="Tools.Nat.html" class="Module">Tools.Nat</a> <a id="2376" class="Keyword">using</a> <a id="2382" class="Symbol">(</a><a id="2383" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a><a id="2386" class="Symbol">;</a> <a id="2388" href="Tools.Nat.html#2085" class="InductiveConstructor">1+</a><a id="2390" class="Symbol">)</a>
<a id="2392" class="Keyword">open</a> <a id="2397" class="Keyword">import</a> <a id="2404" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="2418" class="Keyword">open</a> <a id="2423" class="Keyword">import</a> <a id="2430" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="2458" class="Symbol">as</a> <a id="2461" class="Module">PE</a> <a id="2464" class="Keyword">using</a> <a id="2470" class="Symbol">(</a><a id="2471" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="2474" class="Symbol">;</a> <a id="2476" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">_≢_</a><a id="2479" class="Symbol">)</a>
<a id="2481" class="Keyword">import</a> <a id="2488" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>
<a id="2526" class="Keyword">open</a> <a id="2531" class="Keyword">import</a> <a id="2538" href="Tools.Relation.html" class="Module">Tools.Relation</a>
<a id="2553" class="Keyword">open</a> <a id="2558" class="Keyword">import</a> <a id="2565" href="Tools.Sum.html" class="Module">Tools.Sum</a>

<a id="2576" class="Keyword">private</a> <a id="2584" class="Keyword">variable</a>
  <a id="2595" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a>           <a id="2607" class="Symbol">:</a> <a id="2609" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
  <a id="2616" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>           <a id="2628" class="Symbol">:</a> <a id="2630" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="2636" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a>           <a id="2648" class="Symbol">:</a> <a id="2650" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="2654" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="2659" class="Symbol">_</a>
  <a id="2663" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="2665" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="2667" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="2669" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a>     <a id="2675" class="Symbol">:</a> <a id="2677" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="2682" class="Symbol">_</a>
  <a id="2686" href="Graded.Erasure.Extraction.Non-terminating.html#2686" class="Generalizable">γ₁</a> <a id="2689" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">γ₂</a> <a id="2692" href="Graded.Erasure.Extraction.Non-terminating.html#2692" class="Generalizable">γ₃</a> <a id="2695" href="Graded.Erasure.Extraction.Non-terminating.html#2695" class="Generalizable">γ₄</a> <a id="2698" class="Symbol">:</a> <a id="2700" href="Graded.Context.html#692" class="Datatype">Conₘ</a> <a id="2705" class="Symbol">_</a>
  <a id="2709" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="2711" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a>         <a id="2721" class="Symbol">:</a> <a id="2723" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a>
  <a id="2727" href="Graded.Erasure.Extraction.Non-terminating.html#2727" class="Generalizable">v</a>           <a id="2739" class="Symbol">:</a> <a id="2741" href="Graded.Erasure.Target.html#1227" class="Datatype">T.Term</a> <a id="2748" class="Symbol">_</a>
  <a id="2752" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a>           <a id="2764" class="Symbol">:</a> <a id="2766" href="Graded.Erasure.Target.html#647" class="Datatype">Strictness</a>

<a id="2778" class="Comment">-- Some lemmas used below.</a>

<a id="2806" class="Keyword">private</a> <a id="2814" class="Keyword">module</a> <a id="Lemmas"></a><a id="2821" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="2828" class="Symbol">(</a><a id="2829" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="2832" class="Symbol">:</a> <a id="2834" href="Definition.Typed.html#1182" class="Datatype Operator">⊢</a> <a id="2836" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a><a id="2837" class="Symbol">)</a> <a id="2839" class="Keyword">where</a> <a id="2845" class="Keyword">opaque</a>

  <a id="Lemmas.Empty⊢ℕ∷U"></a><a id="2855" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="2865" class="Symbol">:</a> <a id="2867" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="2869" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2871" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="2877" href="Definition.Typed.html#1725" class="Datatype Operator">⊢</a> <a id="2879" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="2881" href="Definition.Typed.html#1725" class="Datatype Operator">∷</a> <a id="2883" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="2885" class="Number">0</a>
  <a id="2889" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="2899" class="Symbol">=</a> <a id="2901" href="Definition.Typed.html#1985" class="InductiveConstructor">ℕⱼ</a> <a id="2904" class="Symbol">(</a><a id="2905" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="2908" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">∙[</a> <a id="2911" href="Definition.Typed.html#1380" class="InductiveConstructor">Emptyⱼ</a> <a id="2918" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">]</a><a id="2919" class="Symbol">)</a>

  <a id="Lemmas.Empty⊢ℕ"></a><a id="2924" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a> <a id="2932" class="Symbol">:</a> <a id="2934" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="2936" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2938" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="2944" href="Definition.Typed.html#1280" class="Datatype Operator">⊢</a> <a id="2946" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a>
  <a id="2950" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a> <a id="2958" class="Symbol">=</a> <a id="2960" href="Definition.Typed.html#1645" class="InductiveConstructor">univ</a> <a id="2965" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a>

  <a id="Lemmas.Empty∙ℕ⊢ℕ∷U"></a><a id="2978" href="Graded.Erasure.Extraction.Non-terminating.html#2978" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="2990" class="Symbol">:</a> <a id="2992" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="2994" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="2996" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="3002" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3004" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3006" href="Definition.Typed.html#1725" class="Datatype Operator">⊢</a> <a id="3008" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3010" href="Definition.Typed.html#1725" class="Datatype Operator">∷</a> <a id="3012" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="3014" class="Number">0</a>
  <a id="3018" href="Graded.Erasure.Extraction.Non-terminating.html#2978" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="3030" class="Symbol">=</a> <a id="3032" href="Definition.Typed.html#1985" class="InductiveConstructor">ℕⱼ</a> <a id="3035" class="Symbol">(</a><a id="3036" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="3039" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">∙[</a> <a id="3042" href="Definition.Typed.html#1380" class="InductiveConstructor">Emptyⱼ</a> <a id="3049" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">]</a> <a id="3051" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">∙[</a> <a id="3054" href="Definition.Typed.html#1355" class="InductiveConstructor">ℕⱼ</a> <a id="3057" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">]</a><a id="3058" class="Symbol">)</a>

  <a id="Lemmas.Empty∙ℕ∙ℕ⊢ℕ∷U"></a><a id="3063" href="Graded.Erasure.Extraction.Non-terminating.html#3063" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="3077" class="Symbol">:</a> <a id="3079" href="Graded.Erasure.Extraction.Non-terminating.html#2836" class="Bound">Γ</a> <a id="3081" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3083" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="3089" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3091" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3093" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="3095" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3097" href="Definition.Typed.html#1725" class="Datatype Operator">⊢</a> <a id="3099" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3101" href="Definition.Typed.html#1725" class="Datatype Operator">∷</a> <a id="3103" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="3105" class="Number">0</a>
  <a id="3109" href="Graded.Erasure.Extraction.Non-terminating.html#3063" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="3123" class="Symbol">=</a> <a id="3125" href="Definition.Typed.html#1985" class="InductiveConstructor">ℕⱼ</a> <a id="3128" class="Symbol">(</a><a id="3129" href="Graded.Erasure.Extraction.Non-terminating.html#2829" class="Bound">⊢Γ</a> <a id="3132" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">∙[</a> <a id="3135" href="Definition.Typed.html#1380" class="InductiveConstructor">Emptyⱼ</a> <a id="3142" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">]</a> <a id="3144" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">∙[</a> <a id="3147" href="Definition.Typed.html#1355" class="InductiveConstructor">ℕⱼ</a> <a id="3150" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">]</a> <a id="3152" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">∙[</a> <a id="3155" href="Definition.Typed.html#1355" class="InductiveConstructor">ℕⱼ</a> <a id="3158" href="Definition.Typed.Properties.Well-formed.html#15197" class="Function Operator">]</a><a id="3159" class="Symbol">)</a>

<a id="3162" class="Keyword">opaque</a>

  <a id="3172" class="Comment">-- Another lemma used below.</a>

  <a id="▸Πℕℕ"></a><a id="3204" href="Graded.Erasure.Extraction.Non-terminating.html#3204" class="Function">▸Πℕℕ</a> <a id="3209" class="Symbol">:</a> <a id="3211" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="3213" href="Graded.Modality.html#1365" class="Function Operator">≤</a> <a id="3215" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="3217" class="Symbol">→</a> <a id="3219" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3222" class="Symbol">{</a><a id="3223" class="Argument">n</a> <a id="3225" class="Symbol">=</a> <a id="3227" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="3228" class="Symbol">}</a> <a id="3230" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="3233" class="InductiveConstructor">𝟙ᵐ</a> <a id="3236" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="3238" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="3240" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="3242" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="3244" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="3246" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="3248" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="3250" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="3252" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a>
  <a id="3256" href="Graded.Erasure.Extraction.Non-terminating.html#3204" class="Function">▸Πℕℕ</a> <a id="3261" class="Symbol">{</a><a id="3262" href="Graded.Erasure.Extraction.Non-terminating.html#3262" class="Bound">q</a><a id="3263" class="Symbol">}</a> <a id="3265" href="Graded.Erasure.Extraction.Non-terminating.html#3265" class="Bound">q≤𝟘</a> <a id="3269" class="Symbol">=</a> <a id="3271" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a>
    <a id="3279" class="Symbol">(</a><a id="3280" href="Graded.Usage.html#8369" class="InductiveConstructor">ΠΣₘ</a> <a id="3284" href="Graded.Usage.html#8279" class="InductiveConstructor">ℕₘ</a> <a id="3287" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3289" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a> <a id="3293" href="Graded.Usage.html#8279" class="InductiveConstructor">ℕₘ</a> <a id="3296" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3298" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
        <a id="3312" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3315" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="3317" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="3319" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="3321" href="Graded.Erasure.Extraction.Non-terminating.html#3262" class="Bound">q</a>  <a id="3324" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="3327" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="3335" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="3337" href="Graded.Modality.html#3173" class="Function">·-identityˡ</a> <a id="3349" class="Symbol">_</a> <a id="3351" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
        <a id="3361" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3364" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="3366" href="Graded.Erasure.Extraction.Non-terminating.html#3262" class="Bound">q</a>      <a id="3373" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="3376" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="3384" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="3386" href="Graded.Erasure.Extraction.Non-terminating.html#3265" class="Bound">q≤𝟘</a> <a id="3390" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
        <a id="3400" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>          <a id="3412" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="3413" class="Symbol">)</a>
    <a id="3419" class="Symbol">(</a><a id="3420" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="3433" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>        <a id="3443" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="3447" href="Graded.Context.Properties.Addition.html#926" class="Function">+ᶜ-identityʳ</a> <a id="3460" class="Symbol">_</a> <a id="3462" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="3471" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="3474" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="3477" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="3481" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="3482" class="Symbol">)</a>
    <a id="3488" class="Keyword">where</a>
    <a id="3498" class="Keyword">open</a> <a id="3503" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="3517" class="Comment">------------------------------------------------------------------------</a>
<a id="3590" class="Comment">-- The term former cast</a>

<a id="3615" class="Keyword">opaque</a>

  <a id="3625" class="Comment">-- A cast lemma.</a>

  <a id="cast"></a><a id="3645" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="3650" class="Symbol">:</a> <a id="3652" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="3657" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3659" class="Symbol">→</a> <a id="3661" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="3666" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3668" class="Symbol">→</a> <a id="3670" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="3675" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3677" class="Symbol">→</a> <a id="3679" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="3684" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a> <a id="3686" class="Symbol">→</a> <a id="3688" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="3693" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>
  <a id="3697" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="3702" href="Graded.Erasure.Extraction.Non-terminating.html#3702" class="Bound">t</a> <a id="3704" href="Graded.Erasure.Extraction.Non-terminating.html#3704" class="Bound">A</a> <a id="3706" href="Graded.Erasure.Extraction.Non-terminating.html#3706" class="Bound">B</a> <a id="3708" href="Graded.Erasure.Extraction.Non-terminating.html#3708" class="Bound">u</a> <a id="3710" class="Symbol">=</a>
    <a id="3716" href="Definition.Untyped.Identity.html#876" class="Function">subst</a> <a id="3722" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="3724" class="Symbol">(</a><a id="3725" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="3727" class="Number">0</a><a id="3728" class="Symbol">)</a> <a id="3730" class="Symbol">(</a><a id="3731" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="3735" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="3737" class="Symbol">)</a> <a id="3739" href="Graded.Erasure.Extraction.Non-terminating.html#3704" class="Bound">A</a> <a id="3741" href="Graded.Erasure.Extraction.Non-terminating.html#3706" class="Bound">B</a> <a id="3743" class="Symbol">(</a><a id="3744" href="Definition.Untyped.html#2030" class="InductiveConstructor">emptyrec</a> <a id="3753" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="3755" class="Symbol">(</a><a id="3756" href="Definition.Untyped.html#2075" class="InductiveConstructor">Id</a> <a id="3759" class="Symbol">(</a><a id="3760" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="3762" class="Number">0</a><a id="3763" class="Symbol">)</a> <a id="3765" href="Graded.Erasure.Extraction.Non-terminating.html#3704" class="Bound">A</a> <a id="3767" href="Graded.Erasure.Extraction.Non-terminating.html#3706" class="Bound">B</a><a id="3768" class="Symbol">)</a> <a id="3770" href="Graded.Erasure.Extraction.Non-terminating.html#3702" class="Bound">t</a><a id="3771" class="Symbol">)</a> <a id="3773" href="Graded.Erasure.Extraction.Non-terminating.html#3708" class="Bound">u</a>

<a id="3776" class="Keyword">opaque</a>
  <a id="3785" class="Keyword">unfolding</a> <a id="3795" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="3800" href="Definition.Untyped.Identity.html#876" class="Function">subst</a>

  <a id="3809" class="Comment">-- An extraction lemma for cast.</a>

  <a id="erase-cast"></a><a id="3845" href="Graded.Erasure.Extraction.Non-terminating.html#3845" class="Function">erase-cast</a> <a id="3856" class="Symbol">:</a> <a id="3858" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="3865" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a> <a id="3867" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="3869" class="Symbol">(</a><a id="3870" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="3875" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="3877" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="3879" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="3881" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a><a id="3882" class="Symbol">)</a> <a id="3884" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3886" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="3893" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a> <a id="3895" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="3897" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a>
  <a id="3901" href="Graded.Erasure.Extraction.Non-terminating.html#3845" class="Function">erase-cast</a> <a id="3912" class="Symbol">=</a> <a id="3914" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">PE.refl</a>

<a id="3923" class="Keyword">opaque</a>
  <a id="3932" class="Keyword">unfolding</a> <a id="3942" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a>

  <a id="3950" class="Comment">-- A typing rule for cast.</a>

  <a id="⊢cast"></a><a id="3980" href="Graded.Erasure.Extraction.Non-terminating.html#3980" class="Function">⊢cast</a> <a id="3986" class="Symbol">:</a>
    <a id="3992" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="3994" href="Definition.Typed.html#1725" class="Datatype Operator">⊢</a> <a id="3996" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="3998" href="Definition.Typed.html#1725" class="Datatype Operator">∷</a> <a id="4000" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="4006" class="Symbol">→</a>
    <a id="4012" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4014" href="Definition.Typed.html#1725" class="Datatype Operator">⊢</a> <a id="4016" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4018" href="Definition.Typed.html#1725" class="Datatype Operator">∷</a> <a id="4020" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="4022" class="Number">0</a> <a id="4024" class="Symbol">→</a>
    <a id="4030" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4032" href="Definition.Typed.html#1725" class="Datatype Operator">⊢</a> <a id="4034" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4036" href="Definition.Typed.html#1725" class="Datatype Operator">∷</a> <a id="4038" href="Definition.Untyped.html#1220" class="InductiveConstructor">U</a> <a id="4040" class="Number">0</a> <a id="4042" class="Symbol">→</a>
    <a id="4048" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4050" href="Definition.Typed.html#1725" class="Datatype Operator">⊢</a> <a id="4052" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a> <a id="4054" href="Definition.Typed.html#1725" class="Datatype Operator">∷</a> <a id="4056" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4058" class="Symbol">→</a>
    <a id="4064" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="4066" href="Definition.Typed.html#1725" class="Datatype Operator">⊢</a> <a id="4068" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="4073" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="4075" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4077" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4079" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a> <a id="4081" href="Definition.Typed.html#1725" class="Datatype Operator">∷</a> <a id="4083" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a>
  <a id="4087" href="Graded.Erasure.Extraction.Non-terminating.html#3980" class="Function">⊢cast</a> <a id="4093" href="Graded.Erasure.Extraction.Non-terminating.html#4093" class="Bound">⊢t</a> <a id="4096" href="Graded.Erasure.Extraction.Non-terminating.html#4096" class="Bound">⊢A</a> <a id="4099" href="Graded.Erasure.Extraction.Non-terminating.html#4099" class="Bound">⊢B</a> <a id="4102" class="Symbol">=</a>
    <a id="4108" href="Definition.Typed.Consequences.DerivedRules.Identity.html#9724" class="Function">⊢subst</a> <a id="4115" class="Symbol">(</a><a id="4116" href="Definition.Typed.html#1645" class="InductiveConstructor">univ</a> <a id="4121" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4123" href="Definition.Typed.Properties.Admissible.Primitive.html#663" class="Function">var₀</a> <a id="4128" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4130" href="Definition.Typed.html#1328" class="InductiveConstructor">Uⱼ</a> <a id="4133" class="Symbol">(</a><a id="4134" href="Definition.Typed.Properties.Well-formed.html#10659" class="Function">wfTerm</a> <a id="4141" href="Graded.Erasure.Extraction.Non-terminating.html#4093" class="Bound">⊢t</a><a id="4143" class="Symbol">))</a> <a id="4146" class="Symbol">(</a><a id="4147" href="Definition.Typed.html#3481" class="InductiveConstructor">emptyrecⱼ</a> <a id="4157" class="Symbol">(</a><a id="4158" href="Definition.Typed.Properties.Admissible.html#877" class="Function">Idⱼ′</a> <a id="4163" href="Graded.Erasure.Extraction.Non-terminating.html#4096" class="Bound">⊢A</a> <a id="4166" href="Graded.Erasure.Extraction.Non-terminating.html#4099" class="Bound">⊢B</a><a id="4168" class="Symbol">)</a> <a id="4170" href="Graded.Erasure.Extraction.Non-terminating.html#4093" class="Bound">⊢t</a><a id="4172" class="Symbol">)</a>

<a id="4175" class="Keyword">opaque</a>
  <a id="4184" class="Keyword">unfolding</a> <a id="4194" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a>

  <a id="4202" class="Comment">-- A usage rule for cast.</a>

  <a id="▸cast"></a><a id="4231" href="Graded.Erasure.Extraction.Non-terminating.html#4231" class="Function">▸cast</a> <a id="4237" class="Symbol">:</a>
    <a id="4243" href="Graded.Usage.Restrictions.html#1638" class="Field">Emptyrec-allowed</a> <a id="4260" class="InductiveConstructor">𝟙ᵐ</a> <a id="4263" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="4265" class="Symbol">→</a>
    <a id="4271" href="Graded.Erasure.Extraction.Non-terminating.html#2686" class="Generalizable">γ₁</a> <a id="4274" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="4277" href="Graded.Mode.html#3339" class="Function">𝟘ᵐ?</a> <a id="4281" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="4283" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="4285" class="Symbol">→</a>
    <a id="4291" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">γ₂</a> <a id="4294" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="4297" class="InductiveConstructor">𝟙ᵐ</a> <a id="4300" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="4302" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4304" class="Symbol">→</a>
    <a id="4310" href="Graded.Erasure.Extraction.Non-terminating.html#2692" class="Generalizable">γ₃</a> <a id="4313" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="4316" class="InductiveConstructor">𝟙ᵐ</a> <a id="4319" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="4321" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4323" class="Symbol">→</a>
    <a id="4329" href="Graded.Erasure.Extraction.Non-terminating.html#2695" class="Generalizable">γ₄</a> <a id="4332" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="4335" class="InductiveConstructor">𝟙ᵐ</a> <a id="4338" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="4340" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a> <a id="4342" class="Symbol">→</a>
    <a id="4348" href="Graded.Modality.html#930" class="Function">ω</a> <a id="4350" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="4353" class="Symbol">(</a><a id="4354" href="Graded.Erasure.Extraction.Non-terminating.html#2689" class="Generalizable">γ₂</a> <a id="4357" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4360" href="Graded.Erasure.Extraction.Non-terminating.html#2692" class="Generalizable">γ₃</a> <a id="4363" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4366" href="Graded.Erasure.Extraction.Non-terminating.html#2695" class="Generalizable">γ₄</a><a id="4368" class="Symbol">)</a> <a id="4370" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="4373" class="InductiveConstructor">𝟙ᵐ</a> <a id="4376" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="4378" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="4383" href="Graded.Erasure.Extraction.Non-terminating.html#2667" class="Generalizable">t</a> <a id="4385" href="Graded.Erasure.Extraction.Non-terminating.html#2663" class="Generalizable">A</a> <a id="4387" href="Graded.Erasure.Extraction.Non-terminating.html#2665" class="Generalizable">B</a> <a id="4389" href="Graded.Erasure.Extraction.Non-terminating.html#2669" class="Generalizable">u</a>
  <a id="4393" href="Graded.Erasure.Extraction.Non-terminating.html#4231" class="Function">▸cast</a> <a id="4399" class="Symbol">{</a><a id="4400" href="Graded.Erasure.Extraction.Non-terminating.html#4400" class="Bound">γ₁</a><a id="4402" class="Symbol">}</a> <a id="4404" class="Symbol">{</a><a id="4405" href="Graded.Erasure.Extraction.Non-terminating.html#4405" class="Bound">γ₂</a><a id="4407" class="Symbol">}</a> <a id="4409" class="Symbol">{</a><a id="4410" href="Graded.Erasure.Extraction.Non-terminating.html#4410" class="Bound">γ₃</a><a id="4412" class="Symbol">}</a> <a id="4414" class="Symbol">{</a><a id="4415" href="Graded.Erasure.Extraction.Non-terminating.html#4415" class="Bound">γ₄</a><a id="4417" class="Symbol">}</a> <a id="4419" href="Graded.Erasure.Extraction.Non-terminating.html#4419" class="Bound">ok</a> <a id="4422" href="Graded.Erasure.Extraction.Non-terminating.html#4422" class="Bound">▸t</a> <a id="4425" href="Graded.Erasure.Extraction.Non-terminating.html#4425" class="Bound">▸A</a> <a id="4428" href="Graded.Erasure.Extraction.Non-terminating.html#4428" class="Bound">▸B</a> <a id="4431" href="Graded.Erasure.Extraction.Non-terminating.html#4431" class="Bound">▸u</a> <a id="4434" class="Symbol">=</a>
    <a id="4440" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a> <a id="4444" class="Symbol">(</a><a id="4445" href="Graded.Derived.Identity.html#1298" class="Function">▸subst</a> <a id="4452" href="Graded.Usage.html#8251" class="InductiveConstructor">Uₘ</a>
           <a id="4466" class="Symbol">(</a><a id="4467" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a> <a id="4471" href="Graded.Usage.html#8487" class="InductiveConstructor">var</a> <a id="4475" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4477" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
              <a id="4497" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4500" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="4502" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="4504" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="4506" href="Graded.Modality.html#928" class="Function">𝟙</a>   <a id="4510" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="4513" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="4521" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="4523" href="Graded.Modality.html#3215" class="Function">·-identityʳ</a> <a id="4535" class="Symbol">_</a> <a id="4537" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
              <a id="4553" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4556" href="Graded.Context.html#1107" class="Function Operator">,</a> <a id="4558" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="4561" href="Graded.Context.html#1107" class="Function Operator">≔</a> <a id="4563" href="Graded.Modality.html#928" class="Function">𝟙</a>  <a id="4566" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="4567" class="Symbol">)</a>
           <a id="4580" href="Graded.Erasure.Extraction.Non-terminating.html#4425" class="Bound">▸A</a> <a id="4583" href="Graded.Erasure.Extraction.Non-terminating.html#4428" class="Bound">▸B</a>
           <a id="4597" class="Symbol">(</a><a id="4598" href="Graded.Usage.html#11590" class="InductiveConstructor">emptyrecₘ</a> <a id="4608" class="Symbol">(</a><a id="4609" href="Graded.Usage.Properties.html#2553" class="Function">▸-cong</a> <a id="4616" class="Symbol">(</a><a id="4617" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="4624" href="Graded.Mode.html#19132" class="Function">⌞𝟘⌟≡𝟘ᵐ?</a><a id="4631" class="Symbol">)</a> <a id="4633" href="Graded.Erasure.Extraction.Non-terminating.html#4422" class="Bound">▸t</a><a id="4635" class="Symbol">)</a>
              <a id="4651" class="Symbol">(</a><a id="4652" href="Graded.Usage.Properties.html#49288" class="Function">Idₘ-generalised</a> <a id="4668" href="Graded.Usage.html#8251" class="InductiveConstructor">Uₘ</a> <a id="4671" class="Symbol">(</a><a id="4672" href="Graded.Usage.Properties.html#3635" class="Function">▸-𝟘ᵐ?</a> <a id="4678" href="Graded.Erasure.Extraction.Non-terminating.html#4425" class="Bound">▸A</a> <a id="4681" class="Symbol">.</a><a id="4682" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4687" class="Symbol">)</a> <a id="4689" class="Symbol">(</a><a id="4690" href="Graded.Usage.Properties.html#3635" class="Function">▸-𝟘ᵐ?</a> <a id="4696" href="Graded.Erasure.Extraction.Non-terminating.html#4428" class="Bound">▸B</a> <a id="4699" class="Symbol">.</a><a id="4700" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="4705" class="Symbol">)</a>
                 <a id="4724" class="Symbol">(λ</a> <a id="4727" href="Graded.Erasure.Extraction.Non-terminating.html#4727" class="Bound">_</a> <a id="4729" class="Symbol">→</a> <a id="4731" href="Graded.Context.Properties.Meet.html#2443" class="Function">∧ᶜ-decreasingˡ</a> <a id="4746" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="4749" class="Symbol">_)</a>
                 <a id="4769" class="Symbol">(λ</a> <a id="4772" href="Graded.Erasure.Extraction.Non-terminating.html#4772" class="Bound">_</a> <a id="4774" class="Symbol">→</a> <a id="4776" href="Graded.Context.Properties.Meet.html#2657" class="Function">∧ᶜ-decreasingʳ</a> <a id="4791" class="Symbol">_</a> <a id="4793" class="Symbol">_))</a>
              <a id="4811" href="Graded.Erasure.Extraction.Non-terminating.html#4419" class="Bound">ok</a><a id="4813" class="Symbol">)</a>
           <a id="4826" href="Graded.Erasure.Extraction.Non-terminating.html#4431" class="Bound">▸u</a><a id="4828" class="Symbol">)</a>
    <a id="4834" class="Symbol">(</a><a id="4835" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="4848" href="Graded.Modality.html#930" class="Function">ω</a> <a id="4850" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="4853" class="Symbol">(</a><a id="4854" href="Graded.Erasure.Extraction.Non-terminating.html#4405" class="Bound">γ₂</a> <a id="4857" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4860" href="Graded.Erasure.Extraction.Non-terminating.html#4410" class="Bound">γ₃</a> <a id="4863" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="4866" href="Graded.Erasure.Extraction.Non-terminating.html#4415" class="Bound">γ₄</a><a id="4868" class="Symbol">)</a>                   <a id="4888" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="4892" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="4901" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="4954" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="4963" class="Symbol">(</a><a id="4964" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="4977" class="Symbol">_)</a> <a id="4980" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5033" href="Graded.Context.Properties.Addition.html#2641" class="Function">+ᶜ-congˡ</a> <a id="5042" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5095" href="Graded.Context.Properties.Addition.html#2641" class="Function">+ᶜ-congˡ</a> <a id="5104" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5157" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="5166" class="Symbol">(</a><a id="5167" href="Graded.Context.Properties.Addition.html#2746" class="Function">+ᶜ-congʳ</a> <a id="5176" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5178" href="Graded.Context.Properties.Multiplication.html#898" class="Function">·ᶜ-zeroˡ</a> <a id="5187" class="Symbol">_)</a> <a id="5190" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                   <a id="5243" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="5256" class="Symbol">_</a> <a id="5258" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="5267" href="Graded.Modality.html#930" class="Function">ω</a> <a id="5269" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="5272" class="Symbol">(</a><a id="5273" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="5276" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5279" href="Graded.Erasure.Extraction.Non-terminating.html#4405" class="Bound">γ₂</a> <a id="5282" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5285" href="Graded.Erasure.Extraction.Non-terminating.html#4410" class="Bound">γ₃</a> <a id="5288" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5291" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="5293" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="5296" href="Graded.Erasure.Extraction.Non-terminating.html#4400" class="Bound">γ₁</a> <a id="5299" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="5302" href="Graded.Erasure.Extraction.Non-terminating.html#4415" class="Bound">γ₄</a><a id="5304" class="Symbol">)</a>  <a id="5307" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="5308" class="Symbol">)</a>
    <a id="5314" class="Keyword">where</a>
    <a id="5324" class="Keyword">open</a> <a id="5329" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="5343" class="Comment">------------------------------------------------------------------------</a>
<a id="5416" class="Comment">-- The term former λx∙xx</a>

<a id="5442" class="Keyword">opaque</a>

  <a id="5452" class="Comment">-- A term that is roughly &quot;λ x. x x&quot;.</a>

  <a id="λx∙xx"></a><a id="5493" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="5499" class="Symbol">:</a> <a id="5501" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="5503" class="Symbol">→</a> <a id="5505" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="5510" class="Symbol">(</a><a id="5511" href="Tools.Nat.html#2085" class="InductiveConstructor">1+</a> <a id="5514" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="5515" class="Symbol">)</a>
  <a id="5519" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="5525" href="Graded.Erasure.Extraction.Non-terminating.html#5525" class="Bound">p</a> <a id="5527" class="Symbol">=</a>
    <a id="5533" href="Definition.Untyped.html#1349" class="InductiveConstructor">lam</a> <a id="5537" class="Symbol">(</a><a id="5538" href="Graded.Modality.html#930" class="Function">ω</a> <a id="5540" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="5542" href="Graded.Modality.html#930" class="Function">ω</a><a id="5543" class="Symbol">)</a> <a id="5545" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="5551" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="5556" class="Symbol">(</a><a id="5557" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="5561" href="Tools.Fin.html#439" class="Function">x1</a><a id="5563" class="Symbol">)</a> <a id="5565" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="5567" class="Symbol">(</a><a id="5568" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="5570" href="Graded.Modality.html#930" class="Function">ω</a> <a id="5572" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="5574" href="Graded.Erasure.Extraction.Non-terminating.html#5525" class="Bound">p</a> <a id="5576" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="5578" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="5580" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="5582" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="5583" class="Symbol">)</a> <a id="5585" class="Symbol">(</a><a id="5586" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="5590" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="5592" class="Symbol">)</a> <a id="5594" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="5597" href="Graded.Modality.html#930" class="Function">ω</a> <a id="5599" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a> <a id="5601" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="5605" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a>

<a id="5609" class="Keyword">opaque</a>
  <a id="5618" class="Keyword">unfolding</a> <a id="5628" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a>

  <a id="5637" class="Comment">-- An extraction lemma for λx∙xx.</a>

  <a id="erase-λx∙xx"></a><a id="5674" href="Graded.Erasure.Extraction.Non-terminating.html#5674" class="Function">erase-λx∙xx</a> <a id="5686" class="Symbol">:</a>
    <a id="5692" class="Symbol">⦃</a> <a id="5694" href="Graded.Erasure.Extraction.Non-terminating.html#5694" class="Bound">𝟘-well-behaved</a> <a id="5709" class="Symbol">:</a> <a id="5711" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="5733" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="5735" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="5754" class="Symbol">⦄</a> <a id="5756" class="Symbol">→</a>
    <a id="5762" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5769" href="Graded.Erasure.Extraction.Non-terminating.html#2595" class="Generalizable">b</a> <a id="5771" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="5773" class="Symbol">(</a><a id="5774" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="5780" class="Symbol">{</a><a id="5781" class="Argument">n</a> <a id="5783" class="Symbol">=</a> <a id="5785" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="5786" class="Symbol">}</a> <a id="5788" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="5789" class="Symbol">)</a> <a id="5791" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="5797" class="InductiveConstructor">T.lam</a> <a id="5803" class="Symbol">(</a><a id="5804" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="5810" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="5813" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="5818" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="5820" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="5822" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="5828" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="5830" class="Symbol">)</a>
  <a id="5834" href="Graded.Erasure.Extraction.Non-terminating.html#5674" class="Function">erase-λx∙xx</a> <a id="5846" class="Symbol">{</a><a id="5847" href="Graded.Erasure.Extraction.Non-terminating.html#5847" class="Bound">b</a><a id="5848" class="Symbol">}</a> <a id="5850" class="Symbol">{</a><a id="5851" href="Graded.Erasure.Extraction.Non-terminating.html#5851" class="Bound">s</a><a id="5852" class="Symbol">}</a> <a id="5854" class="Symbol">{</a><a id="5855" href="Graded.Erasure.Extraction.Non-terminating.html#5855" class="Bound">p</a><a id="5856" class="Symbol">}</a> <a id="5858" class="Symbol">=</a>
    <a id="5864" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5871" href="Graded.Erasure.Extraction.Non-terminating.html#5847" class="Bound">b</a> <a id="5873" href="Graded.Erasure.Extraction.Non-terminating.html#5851" class="Bound">s</a> <a id="5875" class="Symbol">(</a><a id="5876" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="5882" href="Graded.Erasure.Extraction.Non-terminating.html#5855" class="Bound">p</a><a id="5883" class="Symbol">)</a>                                          <a id="5926" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="5929" href="Graded.Erasure.Extraction.Properties.html#4481" class="Function">lam-≢𝟘</a> <a id="5936" href="Graded.Erasure.Extraction.Non-terminating.html#5847" class="Bound">b</a> <a id="5938" class="Symbol">(</a><a id="5939" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="5943" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5946" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5952" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5955" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1135" class="Function">+-positive</a><a id="5965" class="Symbol">)</a> <a id="5967" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="5974" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a>
      <a id="5986" class="Symbol">(</a><a id="5987" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="5994" href="Graded.Erasure.Extraction.Non-terminating.html#5847" class="Bound">b</a> <a id="5996" href="Graded.Erasure.Extraction.Non-terminating.html#5851" class="Bound">s</a> <a id="5998" href="Function.Base.html#1974" class="Function Operator">$</a>
       <a id="6007" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="6012" class="Symbol">(</a><a id="6013" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="6017" href="Tools.Fin.html#439" class="Function">x1</a><a id="6019" class="Symbol">)</a> <a id="6021" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="6023" class="Symbol">(</a><a id="6024" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="6026" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6028" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="6030" href="Graded.Erasure.Extraction.Non-terminating.html#5855" class="Bound">p</a> <a id="6032" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="6034" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="6036" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="6038" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="6039" class="Symbol">)</a> <a id="6041" class="Symbol">(</a><a id="6042" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="6046" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6048" class="Symbol">)</a> <a id="6050" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="6053" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6055" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a> <a id="6057" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="6061" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6063" class="Symbol">)</a>  <a id="6066" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="6069" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="6077" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6083" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6085" href="Graded.Erasure.Extraction.Properties.html#4159" class="Function">∘-≢𝟘</a> <a id="6090" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="6094" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="6101" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a>
      <a id="6113" class="Symbol">(</a><a id="6114" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="6121" href="Graded.Erasure.Extraction.Non-terminating.html#5847" class="Bound">b</a> <a id="6123" href="Graded.Erasure.Extraction.Non-terminating.html#5851" class="Bound">s</a>
         <a id="6134" class="Symbol">(</a><a id="6135" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="6140" class="Symbol">(</a><a id="6141" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="6145" href="Tools.Fin.html#439" class="Function">x1</a><a id="6147" class="Symbol">)</a> <a id="6149" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="6151" class="Symbol">(</a><a id="6152" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="6154" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6156" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="6158" href="Graded.Erasure.Extraction.Non-terminating.html#5855" class="Bound">p</a> <a id="6160" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="6162" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="6164" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="6166" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="6167" class="Symbol">)</a> <a id="6169" class="Symbol">(</a><a id="6170" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="6174" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6176" class="Symbol">))</a>
         <a id="6188" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6193" href="Graded.Erasure.Extraction.Non-terminating.html#5851" class="Bound">s</a> <a id="6195" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6197" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6203" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6205" class="Symbol">)</a>                                       <a id="6245" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="6248" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="6256" class="Symbol">(λ</a> <a id="6259" href="Graded.Erasure.Extraction.Non-terminating.html#6259" class="Bound">t</a> <a id="6261" class="Symbol">→</a> <a id="6263" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6269" class="Symbol">(</a><a id="6270" href="Graded.Erasure.Extraction.Non-terminating.html#6259" class="Bound">t</a> <a id="6272" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6277" class="Symbol">_</a> <a id="6279" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6281" class="Symbol">_))</a> <a id="6285" href="Graded.Erasure.Extraction.Non-terminating.html#3845" class="Function">erase-cast</a> <a id="6296" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="6303" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="6309" class="Symbol">(</a><a id="6310" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6316" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a> <a id="6319" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="6324" href="Graded.Erasure.Extraction.Non-terminating.html#5851" class="Bound">s</a> <a id="6326" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="6328" href="Graded.Erasure.Target.html#1252" class="InductiveConstructor">T.var</a> <a id="6334" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="6336" class="Symbol">)</a>                            <a id="6365" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="6371" class="Keyword">where</a>
    <a id="6381" class="Keyword">open</a> <a id="6386" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="6425" class="Keyword">opaque</a>
  <a id="6434" class="Keyword">unfolding</a> <a id="6444" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a>

  <a id="6453" class="Comment">-- A typing rule for λx∙xx.</a>

  <a id="⊢λx∙xx"></a><a id="6484" href="Graded.Erasure.Extraction.Non-terminating.html#6484" class="Function">⊢λx∙xx</a> <a id="6491" class="Symbol">:</a>
    <a id="6497" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="6507" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6509" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6511" class="Symbol">→</a>
    <a id="6517" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="6527" class="Symbol">(</a><a id="6528" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6530" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="6532" href="Graded.Modality.html#930" class="Function">ω</a><a id="6533" class="Symbol">)</a> <a id="6535" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6537" class="Symbol">→</a>
    <a id="6543" href="Definition.Typed.html#1182" class="Datatype Operator">⊢</a> <a id="6545" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="6547" class="Symbol">→</a>
    <a id="6553" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="6555" class="InductiveConstructor Operator">∙</a> <a id="6557" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="6563" href="Definition.Typed.html#1725" class="Datatype Operator">⊢</a> <a id="6565" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="6571" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6573" href="Definition.Typed.html#1725" class="Datatype Operator">∷</a> <a id="6575" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="6577" class="Symbol">(</a><a id="6578" href="Graded.Modality.html#930" class="Function">ω</a> <a id="6580" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="6582" href="Graded.Modality.html#930" class="Function">ω</a><a id="6583" class="Symbol">)</a> <a id="6585" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="6587" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6589" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="6591" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="6593" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="6595" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a>
  <a id="6599" href="Graded.Erasure.Extraction.Non-terminating.html#6484" class="Function">⊢λx∙xx</a> <a id="6606" href="Graded.Erasure.Extraction.Non-terminating.html#6606" class="Bound">ω-ok</a> <a id="6611" href="Graded.Erasure.Extraction.Non-terminating.html#6611" class="Bound">ω+ω-ok</a> <a id="6618" href="Graded.Erasure.Extraction.Non-terminating.html#6618" class="Bound">⊢Γ</a> <a id="6621" class="Symbol">=</a>
    <a id="6627" href="Definition.Typed.Properties.Admissible.html#987" class="Function">lamⱼ′</a> <a id="6633" href="Graded.Erasure.Extraction.Non-terminating.html#6611" class="Bound">ω+ω-ok</a> <a id="6640" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="6646" href="Graded.Erasure.Extraction.Non-terminating.html#3980" class="Function">⊢cast</a> <a id="6652" class="Symbol">(</a><a id="6653" href="Definition.Typed.Properties.Admissible.Primitive.html#776" class="Function">var₁</a> <a id="6658" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a><a id="6665" class="Symbol">)</a> <a id="6667" href="Graded.Erasure.Extraction.Non-terminating.html#2978" class="Function">Empty∙ℕ⊢ℕ∷U</a>
      <a id="6685" class="Symbol">(</a><a id="6686" href="Definition.Typed.html#1825" class="InductiveConstructor">ΠΣⱼ</a> <a id="6690" href="Graded.Erasure.Extraction.Non-terminating.html#2978" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="6702" href="Graded.Erasure.Extraction.Non-terminating.html#3063" class="Function">Empty∙ℕ∙ℕ⊢ℕ∷U</a> <a id="6716" href="Graded.Erasure.Extraction.Non-terminating.html#6606" class="Bound">ω-ok</a><a id="6720" class="Symbol">)</a> <a id="6722" class="Symbol">(</a><a id="6723" href="Definition.Typed.Properties.Admissible.Primitive.html#663" class="Function">var₀</a> <a id="6728" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a><a id="6735" class="Symbol">)</a> <a id="6737" href="Definition.Typed.html#2408" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="6744" href="Definition.Typed.Properties.Admissible.Primitive.html#663" class="Function">var₀</a> <a id="6749" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a>
    <a id="6761" class="Keyword">where</a>
    <a id="6771" class="Keyword">open</a> <a id="6776" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="6783" href="Graded.Erasure.Extraction.Non-terminating.html#6618" class="Bound">⊢Γ</a>

<a id="6787" class="Keyword">opaque</a>
  <a id="6796" class="Keyword">unfolding</a> <a id="6806" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a>

  <a id="6815" class="Comment">-- A usage rule for λx∙xx.</a>

  <a id="▸λx∙xx"></a><a id="6845" href="Graded.Erasure.Extraction.Non-terminating.html#6845" class="Function">▸λx∙xx</a> <a id="6852" class="Symbol">:</a>
    <a id="6858" href="Graded.Usage.Restrictions.html#1638" class="Field">Emptyrec-allowed</a> <a id="6875" class="InductiveConstructor">𝟙ᵐ</a> <a id="6878" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="6880" class="Symbol">→</a>
    <a id="6886" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="6888" href="Graded.Modality.html#1365" class="Function Operator">≤</a> <a id="6890" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="6892" class="Symbol">→</a>
    <a id="6898" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="6901" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="6904" class="InductiveConstructor">𝟙ᵐ</a> <a id="6907" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="6909" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="6915" class="Symbol">{</a><a id="6916" class="Argument">n</a> <a id="6918" class="Symbol">=</a> <a id="6920" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="6921" class="Symbol">}</a> <a id="6923" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a>
  <a id="6927" href="Graded.Erasure.Extraction.Non-terminating.html#6845" class="Function">▸λx∙xx</a> <a id="6934" class="Symbol">{</a><a id="6935" href="Graded.Erasure.Extraction.Non-terminating.html#6935" class="Bound">p</a><a id="6936" class="Symbol">}</a> <a id="6938" href="Graded.Erasure.Extraction.Non-terminating.html#6938" class="Bound">ok</a> <a id="6941" href="Graded.Erasure.Extraction.Non-terminating.html#6941" class="Bound">p≤𝟘</a> <a id="6945" class="Symbol">=</a>
    <a id="6951" href="Graded.Usage.html#8532" class="InductiveConstructor">lamₘ</a> <a id="6956" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6958" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a> <a id="6962" class="Symbol">(</a><a id="6963" href="Graded.Erasure.Extraction.Non-terminating.html#4231" class="Function">▸cast</a> <a id="6969" href="Graded.Erasure.Extraction.Non-terminating.html#6938" class="Bound">ok</a> <a id="6972" href="Graded.Usage.html#8487" class="InductiveConstructor">var</a> <a id="6976" href="Graded.Usage.html#8279" class="InductiveConstructor">ℕₘ</a> <a id="6979" class="Symbol">(</a><a id="6980" href="Graded.Erasure.Extraction.Non-terminating.html#3204" class="Function">▸Πℕℕ</a> <a id="6985" href="Graded.Erasure.Extraction.Non-terminating.html#6941" class="Bound">p≤𝟘</a><a id="6988" class="Symbol">)</a> <a id="6990" href="Graded.Usage.html#8487" class="InductiveConstructor">var</a> <a id="6994" href="Graded.Usage.html#8601" class="InductiveConstructor Operator">∘ₘ</a> <a id="6997" href="Graded.Usage.html#8487" class="InductiveConstructor">var</a><a id="7000" class="Symbol">)</a> <a id="7002" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="7004" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
      <a id="7016" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7019" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7021" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="7023" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="7025" class="Symbol">(</a><a id="7026" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7028" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="7030" href="Graded.Modality.html#930" class="Function">ω</a><a id="7031" class="Symbol">)</a>                                      <a id="7070" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="7073" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="7081" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="7083" href="Graded.Modality.html#3173" class="Function">·-identityˡ</a> <a id="7095" class="Symbol">_</a> <a id="7097" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
      <a id="7105" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7108" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7110" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7112" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="7114" href="Graded.Modality.html#930" class="Function">ω</a>                                            <a id="7159" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="7163" class="Symbol">(</a><a id="7164" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="7173" class="Symbol">(</a><a id="7174" href="Graded.Context.Properties.Addition.html#2458" class="Function">+ᶜ-cong</a> <a id="7182" class="Symbol">(</a><a id="7183" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="7192" class="Symbol">_)</a> <a id="7195" class="Symbol">(</a><a id="7196" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="7205" class="Symbol">_))</a> <a id="7209" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                 <a id="7276" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="7289" class="Symbol">_)</a> <a id="7292" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a>
                                                                <a id="7358" href="Algebra.Structures.html#13194" class="Function">+-cong</a> <a id="7365" class="Symbol">(</a><a id="7366" href="Graded.Modality.html#3215" class="Function">·-identityʳ</a> <a id="7378" class="Symbol">_)</a> <a id="7381" href="Graded.Mode.html#20914" class="Function">·⌜⌞⌟⌝</a> <a id="7387" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
      <a id="7395" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7397" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7400" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7403" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7406" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7408" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7411" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7414" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7416" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7418" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="7420" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="7422" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="7424" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7426" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="7428" href="Graded.Mode.html#4878" class="Function Operator">⌜</a> <a id="7430" href="Graded.Mode.html#5213" class="Function Operator">⌞</a> <a id="7432" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7434" href="Graded.Mode.html#5213" class="Function Operator">⌟</a> <a id="7436" href="Graded.Mode.html#4878" class="Function Operator">⌝</a>            <a id="7449" href="Relation.Binary.Reasoning.Syntax.html#11079" class="Function">≡⟨⟩</a>
      <a id="7459" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7461" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7464" class="Symbol">(</a><a id="7465" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7468" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7470" href="Graded.Modality.html#928" class="Function">𝟙</a><a id="7471" class="Symbol">)</a> <a id="7473" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7476" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7478" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7481" class="Symbol">(</a><a id="7482" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7485" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7487" href="Graded.Mode.html#4878" class="Function Operator">⌜</a> <a id="7489" href="Graded.Mode.html#5213" class="Function Operator">⌞</a> <a id="7491" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7493" href="Graded.Mode.html#5213" class="Function Operator">⌟</a> <a id="7495" href="Graded.Mode.html#4878" class="Function Operator">⌝</a><a id="7496" class="Symbol">)</a>                <a id="7513" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="7517" href="Graded.Context.Properties.Addition.html#2746" class="Function">+ᶜ-congʳ</a> <a id="7526" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7592" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="7601" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7667" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="7676" class="Symbol">(</a><a id="7677" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="7690" class="Symbol">_)</a> <a id="7693" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="7759" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="7772" class="Symbol">_</a> <a id="7774" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
      <a id="7782" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7784" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7787" class="Symbol">(</a><a id="7788" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7791" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7794" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7797" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7800" class="Symbol">(</a><a id="7801" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7804" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7806" href="Graded.Modality.html#928" class="Function">𝟙</a><a id="7807" class="Symbol">))</a> <a id="7810" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="7813" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7815" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="7818" class="Symbol">(</a><a id="7819" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="7822" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="7824" href="Graded.Mode.html#4878" class="Function Operator">⌜</a> <a id="7826" href="Graded.Mode.html#5213" class="Function Operator">⌞</a> <a id="7828" href="Graded.Modality.html#930" class="Function">ω</a> <a id="7830" href="Graded.Mode.html#5213" class="Function Operator">⌟</a> <a id="7832" href="Graded.Mode.html#4878" class="Function Operator">⌝</a><a id="7833" class="Symbol">)</a>  <a id="7836" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="7842" class="Keyword">where</a>
    <a id="7852" class="Keyword">open</a> <a id="7857" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>

<a id="7871" class="Comment">------------------------------------------------------------------------</a>
<a id="7944" class="Comment">-- The term former extracts-to-loop</a>

<a id="7981" class="Keyword">opaque</a>

  <a id="7991" class="Comment">-- A term for which the extraction is loop s (for some s) if</a>
  <a id="8054" class="Comment">-- erasable arguments are removed entirely.</a>

  <a id="extracts-to-loop"></a><a id="8101" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a> <a id="8118" class="Symbol">:</a> <a id="8120" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="8122" class="Symbol">→</a> <a id="8124" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="8129" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>
  <a id="8133" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a> <a id="8150" href="Graded.Erasure.Extraction.Non-terminating.html#8150" class="Bound">p</a> <a id="8152" class="Symbol">=</a>
    <a id="8158" href="Definition.Untyped.html#1349" class="InductiveConstructor">lam</a> <a id="8162" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="8164" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="8170" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="8176" href="Graded.Erasure.Extraction.Non-terminating.html#8150" class="Bound">p</a> <a id="8178" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="8181" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8183" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="8185" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8187" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a> <a id="8189" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="8194" class="Symbol">(</a><a id="8195" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="8199" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8201" class="Symbol">)</a> <a id="8203" class="Symbol">(</a><a id="8204" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="8206" class="Symbol">(</a><a id="8207" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8209" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="8211" href="Graded.Modality.html#930" class="Function">ω</a><a id="8212" class="Symbol">)</a> <a id="8214" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="8216" href="Graded.Erasure.Extraction.Non-terminating.html#8150" class="Bound">p</a> <a id="8218" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="8220" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8222" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="8224" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="8225" class="Symbol">)</a> <a id="8227" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8229" class="Symbol">(</a><a id="8230" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="8236" href="Graded.Erasure.Extraction.Non-terminating.html#8150" class="Bound">p</a><a id="8237" class="Symbol">)</a>

<a id="8240" class="Keyword">opaque</a>
  <a id="8249" class="Keyword">unfolding</a> <a id="8259" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a> <a id="8276" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a>

  <a id="8284" class="Comment">-- An extraction lemma for extracts-to-loop.</a>

  <a id="erase-extracts-to-loop"></a><a id="8332" href="Graded.Erasure.Extraction.Non-terminating.html#8332" class="Function">erase-extracts-to-loop</a> <a id="8355" class="Symbol">:</a>
    <a id="8361" class="Symbol">⦃</a> <a id="8363" href="Graded.Erasure.Extraction.Non-terminating.html#8363" class="Bound">𝟘-well-behaved</a> <a id="8378" class="Symbol">:</a> <a id="8380" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="8402" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="8404" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="8423" class="Symbol">⦄</a> <a id="8425" class="Symbol">→</a>
    <a id="8431" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8438" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8443" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="8445" class="Symbol">(</a><a id="8446" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a> <a id="8463" class="Symbol">{</a><a id="8464" class="Argument">n</a> <a id="8466" class="Symbol">=</a> <a id="8468" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="8469" class="Symbol">}</a> <a id="8471" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="8472" class="Symbol">)</a> <a id="8474" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8476" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="8481" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a>
  <a id="8485" href="Graded.Erasure.Extraction.Non-terminating.html#8332" class="Function">erase-extracts-to-loop</a> <a id="8508" class="Symbol">{</a><a id="8509" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a><a id="8510" class="Symbol">}</a> <a id="8512" class="Symbol">{</a><a id="8513" href="Graded.Erasure.Extraction.Non-terminating.html#8513" class="Bound">p</a><a id="8514" class="Symbol">}</a> <a id="8516" class="Symbol">=</a>
    <a id="8522" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8529" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8534" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a> <a id="8536" class="Symbol">(</a><a id="8537" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a> <a id="8554" href="Graded.Erasure.Extraction.Non-terminating.html#8513" class="Bound">p</a><a id="8555" class="Symbol">)</a>                       <a id="8579" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="8582" href="Graded.Erasure.Extraction.Properties.html#4878" class="Function">lam-𝟘-remove</a> <a id="8595" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="8602" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8609" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8614" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a>
      <a id="8622" class="Symbol">(</a><a id="8623" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="8629" href="Graded.Erasure.Extraction.Non-terminating.html#8513" class="Bound">p</a> <a id="8631" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="8634" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8636" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="8638" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8640" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a>
       <a id="8649" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="8654" class="Symbol">(</a><a id="8655" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="8659" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8661" class="Symbol">)</a> <a id="8663" class="Symbol">(</a><a id="8664" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="8666" class="Symbol">(</a><a id="8667" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8669" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="8671" href="Graded.Modality.html#930" class="Function">ω</a><a id="8672" class="Symbol">)</a> <a id="8674" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="8676" href="Graded.Erasure.Extraction.Non-terminating.html#8513" class="Bound">p</a> <a id="8678" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="8680" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8682" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="8684" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="8685" class="Symbol">)</a> <a id="8687" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8689" class="Symbol">(</a><a id="8690" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="8696" href="Graded.Erasure.Extraction.Non-terminating.html#8513" class="Bound">p</a><a id="8697" class="Symbol">))</a>
      <a id="8706" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="8710" href="Graded.Erasure.Extraction.html#854" class="Function">loop?</a> <a id="8716" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a> <a id="8718" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="8761" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="8764" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="8772" href="Graded.Erasure.Target.html#4865" class="Function Operator">T._[</a> <a id="8777" class="Symbol">_</a> <a id="8779" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a> <a id="8781" href="Function.Base.html#1974" class="Function Operator">$</a>
                                                                <a id="8847" href="Graded.Erasure.Extraction.Properties.html#4159" class="Function">∘-≢𝟘</a> <a id="8852" class="Symbol">(</a><a id="8853" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="8857" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="8860" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="8866" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="8869" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1135" class="Function">+-positive</a><a id="8879" class="Symbol">)</a> <a id="8881" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="8887" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8894" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8899" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a> <a id="8901" class="Symbol">(</a><a id="8902" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="8908" href="Graded.Erasure.Extraction.Non-terminating.html#8513" class="Bound">p</a><a id="8909" class="Symbol">)</a> <a id="8911" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="8916" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a> <a id="8918" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
      <a id="8926" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="8933" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="8938" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a>
        <a id="8948" class="Symbol">(</a><a id="8949" href="Graded.Erasure.Extraction.Non-terminating.html#3645" class="Function">cast</a> <a id="8954" class="Symbol">(</a><a id="8955" href="Definition.Untyped.html#1191" class="InductiveConstructor">var</a> <a id="8959" href="Data.Fin.Base.html#1181" class="InductiveConstructor">x0</a><a id="8961" class="Symbol">)</a> <a id="8963" class="Symbol">(</a><a id="8964" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="8966" class="Symbol">(</a><a id="8967" href="Graded.Modality.html#930" class="Function">ω</a> <a id="8969" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="8971" href="Graded.Modality.html#930" class="Function">ω</a><a id="8972" class="Symbol">)</a> <a id="8974" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="8976" href="Graded.Erasure.Extraction.Non-terminating.html#8513" class="Bound">p</a> <a id="8978" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="8980" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8982" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="8984" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a><a id="8985" class="Symbol">)</a> <a id="8987" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a> <a id="8989" class="Symbol">(</a><a id="8990" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="8996" href="Graded.Erasure.Extraction.Non-terminating.html#8513" class="Bound">p</a><a id="8997" class="Symbol">))</a>
      <a id="9006" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="9010" href="Graded.Erasure.Extraction.html#854" class="Function">loop?</a> <a id="9016" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a> <a id="9018" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="9061" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="9064" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a>
                                                                  <a id="9138" class="Symbol">(λ</a> <a id="9141" href="Graded.Erasure.Extraction.Non-terminating.html#9141" class="Bound">t</a> <a id="9143" class="Symbol">→</a> <a id="9145" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9152" class="Symbol">_</a> <a id="9154" class="Symbol">_</a> <a id="9156" class="Symbol">(</a><a id="9157" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="9163" class="Symbol">_)</a> <a id="9166" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9171" class="Symbol">_</a> <a id="9173" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="9175" href="Graded.Erasure.Extraction.Non-terminating.html#9141" class="Bound">t</a> <a id="9177" href="Graded.Erasure.Target.html#4865" class="Function Operator">T.[</a> <a id="9181" class="Symbol">_</a> <a id="9183" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a><a id="9184" class="Symbol">)</a>
                                                                  <a id="9252" href="Graded.Erasure.Extraction.Non-terminating.html#3845" class="Function">erase-cast</a> <a id="9263" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="9269" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9276" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9281" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a> <a id="9283" class="Symbol">(</a><a id="9284" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="9290" href="Graded.Erasure.Extraction.Non-terminating.html#8513" class="Bound">p</a><a id="9291" class="Symbol">)</a> <a id="9293" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9298" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a> <a id="9300" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
      <a id="9308" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="9315" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="9320" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a> <a id="9322" class="Symbol">(</a><a id="9323" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="9329" href="Graded.Erasure.Extraction.Non-terminating.html#8513" class="Bound">p</a><a id="9330" class="Symbol">)</a>
      <a id="9338" href="Graded.Erasure.Target.html#5782" class="Function Operator">T.[</a> <a id="9342" href="Graded.Erasure.Extraction.html#854" class="Function">loop?</a> <a id="9348" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a> <a id="9350" href="Graded.Erasure.Target.html#5782" class="Function Operator">]₀</a>                                         <a id="9393" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="9396" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="9404" class="Symbol">(λ</a> <a id="9407" href="Graded.Erasure.Extraction.Non-terminating.html#9407" class="Bound">t</a> <a id="9409" class="Symbol">→</a> <a id="9411" href="Graded.Erasure.Extraction.Non-terminating.html#9407" class="Bound">t</a> <a id="9413" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="9418" class="Symbol">_</a> <a id="9420" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="9422" href="Graded.Erasure.Extraction.Non-terminating.html#9407" class="Bound">t</a> <a id="9424" href="Graded.Erasure.Target.html#4865" class="Function Operator">T.[</a> <a id="9428" class="Symbol">_</a> <a id="9430" href="Graded.Erasure.Target.html#4865" class="Function Operator">]</a><a id="9431" class="Symbol">)</a>
                                                                <a id="9497" href="Graded.Erasure.Extraction.Non-terminating.html#5674" class="Function">erase-λx∙xx</a> <a id="9509" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="9515" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="9520" href="Graded.Erasure.Extraction.Non-terminating.html#8509" class="Bound">s</a>                                                   <a id="9572" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="9578" class="Keyword">where</a>
    <a id="9588" class="Keyword">open</a> <a id="9593" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="9632" class="Keyword">opaque</a>
  <a id="9641" class="Keyword">unfolding</a> <a id="9651" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a>

  <a id="9671" class="Comment">-- A typing rule for extracts-to-loop.</a>

  <a id="⊢extracts-to-loop"></a><a id="9713" href="Graded.Erasure.Extraction.Non-terminating.html#9713" class="Function">⊢extracts-to-loop</a> <a id="9731" class="Symbol">:</a>
    <a id="9737" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="9747" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="9749" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="9751" class="Symbol">→</a>
    <a id="9757" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="9767" href="Graded.Modality.html#930" class="Function">ω</a> <a id="9769" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="9771" class="Symbol">→</a>
    <a id="9777" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="9787" class="Symbol">(</a><a id="9788" href="Graded.Modality.html#930" class="Function">ω</a> <a id="9790" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="9792" href="Graded.Modality.html#930" class="Function">ω</a><a id="9793" class="Symbol">)</a> <a id="9795" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="9797" class="Symbol">→</a>
    <a id="9803" href="Definition.Typed.html#1182" class="Datatype Operator">⊢</a> <a id="9805" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="9807" class="Symbol">→</a>
    <a id="9813" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="9815" href="Definition.Typed.html#1725" class="Datatype Operator">⊢</a> <a id="9817" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a> <a id="9834" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="9836" href="Definition.Typed.html#1725" class="Datatype Operator">∷</a> <a id="9838" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">Π</a> <a id="9840" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="9842" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">,</a> <a id="9844" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="9846" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▷</a> <a id="9848" href="Definition.Untyped.html#2013" class="InductiveConstructor">Empty</a> <a id="9854" href="Definition.Untyped.html#2419" class="InductiveConstructor Operator">▹</a> <a id="9856" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a>
  <a id="9860" href="Graded.Erasure.Extraction.Non-terminating.html#9713" class="Function">⊢extracts-to-loop</a> <a id="9878" href="Graded.Erasure.Extraction.Non-terminating.html#9878" class="Bound">𝟘-ok</a> <a id="9883" href="Graded.Erasure.Extraction.Non-terminating.html#9883" class="Bound">ω-ok</a> <a id="9888" href="Graded.Erasure.Extraction.Non-terminating.html#9888" class="Bound">ω+ω-ok</a> <a id="9895" href="Graded.Erasure.Extraction.Non-terminating.html#9895" class="Bound">⊢Γ</a> <a id="9898" class="Symbol">=</a>
    <a id="9904" href="Definition.Typed.Properties.Admissible.html#987" class="Function">lamⱼ′</a> <a id="9910" href="Graded.Erasure.Extraction.Non-terminating.html#9878" class="Bound">𝟘-ok</a> <a id="9915" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="9921" href="Graded.Erasure.Extraction.Non-terminating.html#6484" class="Function">⊢λx∙xx</a> <a id="9928" href="Graded.Erasure.Extraction.Non-terminating.html#9883" class="Bound">ω-ok</a> <a id="9933" href="Graded.Erasure.Extraction.Non-terminating.html#9888" class="Bound">ω+ω-ok</a> <a id="9940" href="Graded.Erasure.Extraction.Non-terminating.html#9895" class="Bound">⊢Γ</a> <a id="9943" href="Definition.Typed.html#2408" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="9950" href="Graded.Erasure.Extraction.Non-terminating.html#3980" class="Function">⊢cast</a> <a id="9956" class="Symbol">(</a><a id="9957" href="Definition.Typed.Properties.Admissible.Primitive.html#663" class="Function">var₀</a> <a id="9962" class="Symbol">(</a><a id="9963" href="Definition.Typed.html#1380" class="InductiveConstructor">Emptyⱼ</a> <a id="9970" href="Graded.Erasure.Extraction.Non-terminating.html#9895" class="Bound">⊢Γ</a><a id="9972" class="Symbol">))</a> <a id="9975" class="Symbol">(</a><a id="9976" href="Definition.Typed.html#1825" class="InductiveConstructor">ΠΣⱼ</a> <a id="9980" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="9990" href="Graded.Erasure.Extraction.Non-terminating.html#2978" class="Function">Empty∙ℕ⊢ℕ∷U</a> <a id="10002" href="Graded.Erasure.Extraction.Non-terminating.html#9888" class="Bound">ω+ω-ok</a><a id="10008" class="Symbol">)</a>
      <a id="10016" href="Graded.Erasure.Extraction.Non-terminating.html#2855" class="Function">Empty⊢ℕ∷U</a> <a id="10026" class="Symbol">(</a><a id="10027" href="Graded.Erasure.Extraction.Non-terminating.html#6484" class="Function">⊢λx∙xx</a> <a id="10034" href="Graded.Erasure.Extraction.Non-terminating.html#9883" class="Bound">ω-ok</a> <a id="10039" href="Graded.Erasure.Extraction.Non-terminating.html#9888" class="Bound">ω+ω-ok</a> <a id="10046" href="Graded.Erasure.Extraction.Non-terminating.html#9895" class="Bound">⊢Γ</a><a id="10048" class="Symbol">)</a>
    <a id="10054" class="Keyword">where</a>
    <a id="10064" class="Keyword">open</a> <a id="10069" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="10076" href="Graded.Erasure.Extraction.Non-terminating.html#9895" class="Bound">⊢Γ</a>

<a id="10080" class="Keyword">opaque</a>
  <a id="10089" class="Keyword">unfolding</a> <a id="10099" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a>

  <a id="10119" class="Comment">-- A usage rule for extracts-to-loop.</a>

  <a id="▸extracts-to-loop"></a><a id="10160" href="Graded.Erasure.Extraction.Non-terminating.html#10160" class="Function">▸extracts-to-loop</a> <a id="10178" class="Symbol">:</a>
    <a id="10184" class="Symbol">⦃</a> <a id="10186" href="Graded.Erasure.Extraction.Non-terminating.html#10186" class="Bound">𝟘-well-behaved</a> <a id="10201" class="Symbol">:</a> <a id="10203" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="10225" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="10227" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="10246" class="Symbol">⦄</a> <a id="10248" class="Symbol">→</a>
    <a id="10254" href="Graded.Usage.Restrictions.html#1638" class="Field">Emptyrec-allowed</a> <a id="10271" class="InductiveConstructor">𝟙ᵐ</a> <a id="10274" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="10276" class="Symbol">→</a>
    <a id="10282" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="10284" href="Graded.Modality.html#1365" class="Function Operator">≤</a> <a id="10286" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="10288" class="Symbol">→</a>
    <a id="10294" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10297" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="10300" class="InductiveConstructor">𝟙ᵐ</a> <a id="10303" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="10305" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a> <a id="10322" class="Symbol">{</a><a id="10323" class="Argument">n</a> <a id="10325" class="Symbol">=</a> <a id="10327" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="10328" class="Symbol">}</a> <a id="10330" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a>
  <a id="10334" href="Graded.Erasure.Extraction.Non-terminating.html#10160" class="Function">▸extracts-to-loop</a> <a id="10352" class="Symbol">{</a><a id="10353" href="Graded.Erasure.Extraction.Non-terminating.html#10353" class="Bound">p</a><a id="10354" class="Symbol">}</a> <a id="10356" class="Symbol">{</a><a id="10357" href="Graded.Erasure.Extraction.Non-terminating.html#10357" class="Bound">n</a><a id="10358" class="Symbol">}</a> <a id="10360" href="Graded.Erasure.Extraction.Non-terminating.html#10360" class="Bound">ok</a> <a id="10363" href="Graded.Erasure.Extraction.Non-terminating.html#10363" class="Bound">p≤𝟘</a> <a id="10367" class="Symbol">=</a> <a id="10369" href="Graded.Usage.html#8532" class="InductiveConstructor">lamₘ</a> <a id="10374" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10376" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a>
    <a id="10384" class="Symbol">(</a><a id="10385" href="Graded.Erasure.Extraction.Non-terminating.html#11024" class="Function">▸λx∙xx′</a> <a id="10393" href="Graded.Usage.html#8601" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="10401" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a>
       <a id="10412" class="Symbol">(</a><a id="10413" href="Graded.Usage.Properties.html#2553" class="Function">▸-cong</a> <a id="10420" class="Symbol">(</a><a id="10421" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="10428" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10430" href="Graded.Mode.html#19762" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="10439" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="10441" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="10445" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="10448" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="10454" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="10457" href="Graded.Modality.Properties.Has-well-behaved-zero.html#1135" class="Function">+-positive</a><a id="10467" class="Symbol">)</a> <a id="10469" href="Function.Base.html#1974" class="Function Operator">$</a>
        <a id="10479" href="Graded.Erasure.Extraction.Non-terminating.html#4231" class="Function">▸cast</a> <a id="10485" href="Graded.Erasure.Extraction.Non-terminating.html#10360" class="Bound">ok</a> <a id="10488" href="Graded.Usage.html#8487" class="InductiveConstructor">var</a> <a id="10492" class="Symbol">(</a><a id="10493" href="Graded.Erasure.Extraction.Non-terminating.html#3204" class="Function">▸Πℕℕ</a> <a id="10498" href="Graded.Erasure.Extraction.Non-terminating.html#10363" class="Bound">p≤𝟘</a><a id="10501" class="Symbol">)</a> <a id="10503" href="Graded.Usage.html#8279" class="InductiveConstructor">ℕₘ</a> <a id="10506" href="Graded.Erasure.Extraction.Non-terminating.html#11024" class="Function">▸λx∙xx′</a><a id="10513" class="Symbol">)</a>
     <a id="10520" class="Symbol">(</a><a id="10521" class="Keyword">let</a> <a id="10525" class="Keyword">open</a> <a id="10530" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a> <a id="10543" class="Keyword">in</a> <a id="10546" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
        <a id="10560" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>                     <a id="10583" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10587" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="10596" class="Symbol">_</a> <a id="10598" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
        <a id="10608" href="Graded.Modality.html#930" class="Function">ω</a> <a id="10610" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="10613" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>                <a id="10631" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10635" href="Graded.Context.Properties.Multiplication.html#2904" class="Function">·ᶜ-congˡ</a> <a id="10644" href="Function.Base.html#1974" class="Function Operator">$</a>
                                   <a id="10681" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="10690" class="Symbol">(</a><a id="10691" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="10704" class="Symbol">_)</a> <a id="10707" href="Function.Base.html#1974" class="Function Operator">$</a>
                                   <a id="10744" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="10757" class="Symbol">_</a> <a id="10759" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
        <a id="10769" href="Graded.Modality.html#930" class="Function">ω</a> <a id="10771" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="10774" class="Symbol">(</a><a id="10775" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10778" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="10781" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10784" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="10787" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a><a id="10789" class="Symbol">)</a>  <a id="10792" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="10793" class="Symbol">))</a>
    <a id="10800" class="Symbol">(</a><a id="10801" class="Keyword">let</a> <a id="10805" class="Keyword">open</a> <a id="10810" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a> <a id="10823" class="Keyword">in</a> <a id="10826" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="10839" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10842" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="10844" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="10846" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="10848" href="Graded.Modality.html#926" class="Function">𝟘</a>           <a id="10860" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="10863" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="10871" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="10873" href="Graded.Modality.html#3432" class="Function">·-zeroʳ</a> <a id="10881" class="Symbol">_</a> <a id="10883" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
       <a id="10892" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>                   <a id="10913" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10917" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="10926" class="Symbol">_</a> <a id="10928" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="10937" class="Symbol">(</a><a id="10938" href="Graded.Modality.html#930" class="Function">ω</a> <a id="10940" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="10942" href="Graded.Modality.html#930" class="Function">ω</a><a id="10943" class="Symbol">)</a> <a id="10945" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="10948" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>        <a id="10958" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="10962" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="10975" class="Symbol">_</a> <a id="10977" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="10986" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="10989" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="10992" class="Symbol">(</a><a id="10993" href="Graded.Modality.html#930" class="Function">ω</a> <a id="10995" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="10997" href="Graded.Modality.html#930" class="Function">ω</a><a id="10998" class="Symbol">)</a> <a id="11000" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="11003" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="11007" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="11008" class="Symbol">)</a>
    <a id="11014" class="Keyword">where</a>
    <a id="11024" href="Graded.Erasure.Extraction.Non-terminating.html#11024" class="Function">▸λx∙xx′</a> <a id="11032" class="Symbol">:</a> <a id="11034" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="11037" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="11040" href="Graded.Mode.html#1117" class="InductiveConstructor">𝟙ᵐ</a> <a id="11043" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="11045" href="Graded.Erasure.Extraction.Non-terminating.html#5493" class="Function">λx∙xx</a> <a id="11051" class="Symbol">{</a><a id="11052" class="Argument">n</a> <a id="11054" class="Symbol">=</a> <a id="11056" href="Graded.Erasure.Extraction.Non-terminating.html#10357" class="Bound">n</a><a id="11057" class="Symbol">}</a> <a id="11059" href="Graded.Erasure.Extraction.Non-terminating.html#10353" class="Bound">p</a>
    <a id="11065" href="Graded.Erasure.Extraction.Non-terminating.html#11024" class="Function">▸λx∙xx′</a> <a id="11073" class="Symbol">=</a> <a id="11075" href="Graded.Erasure.Extraction.Non-terminating.html#6845" class="Function">▸λx∙xx</a> <a id="11082" href="Graded.Erasure.Extraction.Non-terminating.html#10360" class="Bound">ok</a> <a id="11085" href="Graded.Erasure.Extraction.Non-terminating.html#10363" class="Bound">p≤𝟘</a>

<a id="11090" class="Comment">------------------------------------------------------------------------</a>
<a id="11163" class="Comment">-- The term former loops</a>

<a id="11189" class="Keyword">opaque</a>

  <a id="11199" class="Comment">-- A term for which the extraction does not terminate if erasable</a>
  <a id="11267" class="Comment">-- arguments are removed entirely and strict applications are used</a>
  <a id="11336" class="Comment">-- (if ω is non-zero).</a>

  <a id="loops"></a><a id="11362" href="Graded.Erasure.Extraction.Non-terminating.html#11362" class="Function">loops</a> <a id="11368" class="Symbol">:</a> <a id="11370" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="11372" class="Symbol">→</a> <a id="11374" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="11379" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a>
  <a id="11383" href="Graded.Erasure.Extraction.Non-terminating.html#11362" class="Function">loops</a> <a id="11389" href="Graded.Erasure.Extraction.Non-terminating.html#11389" class="Bound">p</a> <a id="11391" class="Symbol">=</a> <a id="11393" href="Definition.Untyped.html#1349" class="InductiveConstructor">lam</a> <a id="11397" href="Graded.Modality.html#930" class="Function">ω</a> <a id="11399" href="Definition.Untyped.html#1681" class="InductiveConstructor">zero</a> <a id="11404" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="11407" href="Graded.Modality.html#930" class="Function">ω</a> <a id="11409" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a> <a id="11411" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a> <a id="11428" href="Graded.Erasure.Extraction.Non-terminating.html#11389" class="Bound">p</a>

<a id="11431" class="Keyword">opaque</a>
  <a id="11440" class="Keyword">unfolding</a> <a id="11450" href="Graded.Erasure.Extraction.Non-terminating.html#11362" class="Function">loops</a>

  <a id="11459" class="Comment">-- An extraction lemma for loops.</a>

  <a id="erase-loops"></a><a id="11496" href="Graded.Erasure.Extraction.Non-terminating.html#11496" class="Function">erase-loops</a> <a id="11508" class="Symbol">:</a>
    <a id="11514" class="Symbol">⦃</a> <a id="11516" href="Graded.Erasure.Extraction.Non-terminating.html#11516" class="Bound">𝟘-well-behaved</a> <a id="11531" class="Symbol">:</a> <a id="11533" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="11555" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="11557" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="11576" class="Symbol">⦄</a> <a id="11578" class="Symbol">→</a>
    <a id="11584" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11591" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11596" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="11598" class="Symbol">(</a><a id="11599" href="Graded.Erasure.Extraction.Non-terminating.html#11362" class="Function">loops</a> <a id="11605" class="Symbol">{</a><a id="11606" class="Argument">n</a> <a id="11608" class="Symbol">=</a> <a id="11610" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="11611" class="Symbol">}</a> <a id="11613" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="11614" class="Symbol">)</a> <a id="11616" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a>
    <a id="11622" class="InductiveConstructor">T.lam</a> <a id="11628" class="InductiveConstructor">T.zero</a> <a id="11635" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11640" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="11642" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="11644" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="11649" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a>
  <a id="11653" href="Graded.Erasure.Extraction.Non-terminating.html#11496" class="Function">erase-loops</a> <a id="11665" class="Symbol">{</a><a id="11666" href="Graded.Erasure.Extraction.Non-terminating.html#11666" class="Bound">s</a><a id="11667" class="Symbol">}</a> <a id="11669" class="Symbol">{</a><a id="11670" href="Graded.Erasure.Extraction.Non-terminating.html#11670" class="Bound">p</a><a id="11671" class="Symbol">}</a> <a id="11673" class="Symbol">=</a>
    <a id="11679" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11686" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11691" href="Graded.Erasure.Extraction.Non-terminating.html#11666" class="Bound">s</a> <a id="11693" class="Symbol">(</a><a id="11694" href="Definition.Untyped.html#1349" class="InductiveConstructor">lam</a> <a id="11698" href="Graded.Modality.html#930" class="Function">ω</a> <a id="11700" href="Definition.Untyped.html#1681" class="InductiveConstructor">zero</a> <a id="11705" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">∘⟨</a> <a id="11708" href="Graded.Modality.html#930" class="Function">ω</a> <a id="11710" href="Definition.Untyped.html#1392" class="InductiveConstructor Operator">⟩</a> <a id="11712" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a> <a id="11729" href="Graded.Erasure.Extraction.Non-terminating.html#11670" class="Bound">p</a><a id="11730" class="Symbol">)</a>  <a id="11733" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="11736" href="Graded.Erasure.Extraction.Properties.html#4159" class="Function">∘-≢𝟘</a> <a id="11741" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a> <a id="11745" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>

    <a id="11752" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11759" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11764" href="Graded.Erasure.Extraction.Non-terminating.html#11666" class="Bound">s</a> <a id="11766" class="Symbol">(</a><a id="11767" href="Definition.Untyped.html#1349" class="InductiveConstructor">lam</a> <a id="11771" href="Graded.Modality.html#930" class="Function">ω</a> <a id="11773" href="Definition.Untyped.html#1681" class="InductiveConstructor">zero</a><a id="11777" class="Symbol">)</a> <a id="11779" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11784" href="Graded.Erasure.Extraction.Non-terminating.html#11666" class="Bound">s</a> <a id="11786" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a>
    <a id="11792" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="11799" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="11804" href="Graded.Erasure.Extraction.Non-terminating.html#11666" class="Bound">s</a> <a id="11806" class="Symbol">(</a><a id="11807" href="Graded.Erasure.Extraction.Non-terminating.html#8101" class="Function">extracts-to-loop</a> <a id="11824" href="Graded.Erasure.Extraction.Non-terminating.html#11670" class="Bound">p</a><a id="11825" class="Symbol">)</a>                    <a id="11846" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="11849" href="Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">PE.cong₂</a> <a id="11858" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T._∘⟨</a> <a id="11864" class="Symbol">_</a> <a id="11866" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩_</a> <a id="11869" class="Symbol">(</a><a id="11870" href="Graded.Erasure.Extraction.Properties.html#4481" class="Function">lam-≢𝟘</a> <a id="11877" class="Symbol">_</a> <a id="11879" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a><a id="11882" class="Symbol">)</a>
                                                             <a id="11945" href="Graded.Erasure.Extraction.Non-terminating.html#8332" class="Function">erase-extracts-to-loop</a> <a id="11968" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="11974" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="11980" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="11987" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="11992" href="Graded.Erasure.Extraction.Non-terminating.html#11666" class="Bound">s</a> <a id="11994" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="11996" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12001" href="Graded.Erasure.Extraction.Non-terminating.html#11666" class="Bound">s</a>                          <a id="12028" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="12034" class="Keyword">where</a>
    <a id="12044" class="Keyword">open</a> <a id="12049" href="Tools.Reasoning.PropositionalEquality.html" class="Module">Tools.Reasoning.PropositionalEquality</a>

<a id="12088" class="Keyword">opaque</a>

  <a id="12098" class="Comment">-- If ω is non-zero, erasable arguments are removed entirely, and</a>
  <a id="12166" class="Comment">-- strict applications are used, then the extraction of loops p does</a>
  <a id="12237" class="Comment">-- not reduce to a value.</a>

  <a id="loops-does-not-reduce-to-a-value"></a><a id="12266" href="Graded.Erasure.Extraction.Non-terminating.html#12266" class="Function">loops-does-not-reduce-to-a-value</a> <a id="12299" class="Symbol">:</a>
    <a id="12305" class="Symbol">⦃</a> <a id="12307" href="Graded.Erasure.Extraction.Non-terminating.html#12307" class="Bound">𝟘-well-behaved</a> <a id="12322" class="Symbol">:</a> <a id="12324" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="12346" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="12348" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="12367" class="Symbol">⦄</a> <a id="12369" class="Symbol">→</a>
    <a id="12375" href="Graded.Erasure.Target.html#6123" class="Datatype">T.Value</a> <a id="12383" href="Graded.Erasure.Extraction.Non-terminating.html#2727" class="Generalizable">v</a> <a id="12385" class="Symbol">→</a>
    <a id="12391" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="12393" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="12400" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="12405" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12412" class="Symbol">(</a><a id="12413" href="Graded.Erasure.Extraction.Non-terminating.html#11362" class="Function">loops</a> <a id="12419" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a><a id="12420" class="Symbol">)</a> <a id="12422" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12427" href="Graded.Erasure.Extraction.Non-terminating.html#2727" class="Generalizable">v</a>
  <a id="12431" href="Graded.Erasure.Extraction.Non-terminating.html#12266" class="Function">loops-does-not-reduce-to-a-value</a> <a id="12464" class="Symbol">{</a><a id="12465" href="Graded.Erasure.Extraction.Non-terminating.html#12465" class="Bound">v</a><a id="12466" class="Symbol">}</a> <a id="12468" class="Symbol">{</a><a id="12469" href="Graded.Erasure.Extraction.Non-terminating.html#12469" class="Bound">p</a><a id="12470" class="Symbol">}</a> <a id="12472" href="Graded.Erasure.Extraction.Non-terminating.html#12472" class="Bound">v-value</a> <a id="12480" class="Symbol">=</a>
    <a id="12486" href="Graded.Erasure.Extraction.html#2331" class="Function">erase′</a> <a id="12493" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="12498" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12505" class="Symbol">(</a><a id="12506" href="Graded.Erasure.Extraction.Non-terminating.html#11362" class="Function">loops</a> <a id="12512" href="Graded.Erasure.Extraction.Non-terminating.html#12469" class="Bound">p</a><a id="12513" class="Symbol">)</a> <a id="12515" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12520" href="Graded.Erasure.Extraction.Non-terminating.html#12465" class="Bound">v</a>            <a id="12533" href="Tools.Function.html#1018" class="Function">≡⟨</a> <a id="12536" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">PE.cong</a> <a id="12544" class="Symbol">(</a><a id="12545" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T._⇒*</a> <a id="12551" class="Symbol">_)</a> <a id="12554" href="Graded.Erasure.Extraction.Non-terminating.html#11496" class="Function">erase-loops</a> <a id="12566" href="Tools.Function.html#1018" class="Function">⟩→</a>
    <a id="12573" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="12579" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="12586" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="12591" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12598" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="12600" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12605" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12612" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12617" href="Graded.Erasure.Extraction.Non-terminating.html#12465" class="Bound">v</a>  <a id="12620" href="Tools.Function.html#904" class="Function">→⟨</a> <a id="12623" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12630" href="Tools.Function.html#904" class="Function">⟩</a>
    <a id="12636" href="Data.Empty.html#914" class="Function">⊥</a>                                              <a id="12683" href="Tools.Function.html#1132" class="Function Operator">□</a>
    <a id="12689" class="Keyword">where</a>
    <a id="12699" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12706" class="Symbol">:</a> <a id="12708" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="12710" href="Graded.Erasure.Target.html#1285" class="InductiveConstructor">T.lam</a> <a id="12716" href="Graded.Erasure.Target.html#1544" class="InductiveConstructor">T.zero</a> <a id="12723" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">T.∘⟨</a> <a id="12728" href="Graded.Erasure.Target.html#672" class="InductiveConstructor">strict</a> <a id="12735" href="Graded.Erasure.Target.html#1324" class="InductiveConstructor Operator">⟩</a> <a id="12737" href="Graded.Erasure.Target.Non-terminating.html#751" class="Function">loop</a> <a id="12742" href="Graded.Erasure.Extraction.Non-terminating.html#2752" class="Generalizable">s</a> <a id="12744" href="Graded.Erasure.Target.html#7857" class="Datatype Operator">T.⇒*</a> <a id="12749" href="Graded.Erasure.Extraction.Non-terminating.html#12465" class="Bound">v</a>
    <a id="12755" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12762" href="Graded.Erasure.Target.html#7893" class="InductiveConstructor">T.refl</a> <a id="12769" class="Symbol">=</a>
      <a id="12777" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="12782" href="Graded.Erasure.Extraction.Non-terminating.html#12472" class="Bound">v-value</a> <a id="12790" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="12793" class="Symbol">λ</a> <a id="12795" class="Symbol">()</a>
    <a id="12802" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12809" class="Symbol">(</a><a id="12810" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12818" class="Symbol">(</a><a id="12819" href="Graded.Erasure.Target.html#7049" class="InductiveConstructor">T.app-subst</a> <a id="12831" class="Symbol">())</a>     <a id="12839" class="Symbol">_)</a>
    <a id="12846" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12853" class="Symbol">(</a><a id="12854" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12862" class="Symbol">(</a><a id="12863" href="Graded.Erasure.Target.html#7197" class="InductiveConstructor">T.β-red</a> <a id="12871" href="Graded.Erasure.Extraction.Non-terminating.html#12871" class="Bound">loop-value</a><a id="12881" class="Symbol">)</a> <a id="12883" class="Symbol">_)</a> <a id="12886" class="Symbol">=</a>
      <a id="12894" href="Graded.Erasure.Target.Non-terminating.html#1375" class="Function">¬loop⇒*</a> <a id="12902" href="Graded.Erasure.Extraction.Non-terminating.html#12871" class="Bound">loop-value</a> <a id="12913" href="Graded.Erasure.Target.html#7893" class="InductiveConstructor">T.refl</a>
    <a id="12924" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="12931" class="Symbol">(</a><a id="12932" href="Graded.Erasure.Target.html#7909" class="InductiveConstructor">T.trans</a> <a id="12940" class="Symbol">(</a><a id="12941" href="Graded.Erasure.Target.html#7103" class="InductiveConstructor">T.app-subst-arg</a> <a id="12957" class="Symbol">_</a> <a id="12959" href="Graded.Erasure.Extraction.Non-terminating.html#12959" class="Bound">loop⇒</a><a id="12964" class="Symbol">)</a> <a id="12966" href="Graded.Erasure.Extraction.Non-terminating.html#12966" class="Bound">⇒*v</a><a id="12969" class="Symbol">)</a>
      <a id="12977" class="Keyword">rewrite</a> <a id="12985" href="Graded.Erasure.Target.Properties.Reduction.html#2101" class="Function">redDet</a> <a id="12992" class="Symbol">_</a> <a id="12994" href="Graded.Erasure.Extraction.Non-terminating.html#12959" class="Bound">loop⇒</a> <a id="13000" href="Graded.Erasure.Target.Non-terminating.html#941" class="Function">loop⇒loop</a> <a id="13010" class="Symbol">=</a>
      <a id="13018" href="Graded.Erasure.Extraction.Non-terminating.html#12699" class="Function">helper</a> <a id="13025" href="Graded.Erasure.Extraction.Non-terminating.html#12966" class="Bound">⇒*v</a>

<a id="13030" class="Keyword">opaque</a>
  <a id="13039" class="Keyword">unfolding</a> <a id="13049" href="Graded.Erasure.Extraction.Non-terminating.html#11362" class="Function">loops</a>

  <a id="13058" class="Comment">-- A typing rule for loops.</a>

  <a id="⊢loops"></a><a id="13089" href="Graded.Erasure.Extraction.Non-terminating.html#13089" class="Function">⊢loops</a> <a id="13096" class="Symbol">:</a>
    <a id="13102" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="13112" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="13114" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="13116" class="Symbol">→</a>
    <a id="13122" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="13132" href="Graded.Modality.html#930" class="Function">ω</a> <a id="13134" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="13136" class="Symbol">→</a>
    <a id="13142" href="Definition.Typed.Restrictions.html#1504" class="Function">Π-allowed</a> <a id="13152" class="Symbol">(</a><a id="13153" href="Graded.Modality.html#930" class="Function">ω</a> <a id="13155" href="Graded.Modality.html#902" class="Function Operator">+</a> <a id="13157" href="Graded.Modality.html#930" class="Function">ω</a><a id="13158" class="Symbol">)</a> <a id="13160" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="13162" class="Symbol">→</a>
    <a id="13168" href="Definition.Typed.html#1182" class="Datatype Operator">⊢</a> <a id="13170" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="13172" class="Symbol">→</a>
    <a id="13178" href="Graded.Erasure.Extraction.Non-terminating.html#2636" class="Generalizable">Γ</a> <a id="13180" href="Definition.Typed.html#1725" class="Datatype Operator">⊢</a> <a id="13182" href="Graded.Erasure.Extraction.Non-terminating.html#11362" class="Function">loops</a> <a id="13188" href="Graded.Erasure.Extraction.Non-terminating.html#2711" class="Generalizable">q</a> <a id="13190" href="Definition.Typed.html#1725" class="Datatype Operator">∷</a> <a id="13192" href="Definition.Untyped.html#1668" class="InductiveConstructor">ℕ</a>
  <a id="13196" href="Graded.Erasure.Extraction.Non-terminating.html#13089" class="Function">⊢loops</a> <a id="13203" href="Graded.Erasure.Extraction.Non-terminating.html#13203" class="Bound">𝟘-ok</a> <a id="13208" href="Graded.Erasure.Extraction.Non-terminating.html#13208" class="Bound">ω-ok</a> <a id="13213" href="Graded.Erasure.Extraction.Non-terminating.html#13213" class="Bound">ω+ω-ok</a> <a id="13220" href="Graded.Erasure.Extraction.Non-terminating.html#13220" class="Bound">⊢Γ</a> <a id="13223" class="Symbol">=</a>
    <a id="13229" href="Definition.Typed.Properties.Admissible.html#987" class="Function">lamⱼ′</a> <a id="13235" href="Graded.Erasure.Extraction.Non-terminating.html#13208" class="Bound">ω-ok</a> <a id="13240" class="Symbol">(</a><a id="13241" href="Definition.Typed.html#3136" class="InductiveConstructor">zeroⱼ</a> <a id="13247" class="Symbol">(</a><a id="13248" href="Definition.Typed.html#1229" class="InductiveConstructor Operator">∙</a> <a id="13250" href="Definition.Typed.html#1458" class="InductiveConstructor">ΠΣⱼ</a> <a id="13254" href="Graded.Erasure.Extraction.Non-terminating.html#2924" class="Function">Empty⊢ℕ</a> <a id="13262" href="Graded.Erasure.Extraction.Non-terminating.html#13203" class="Bound">𝟘-ok</a><a id="13266" class="Symbol">))</a> <a id="13269" href="Definition.Typed.html#2408" class="InductiveConstructor Operator">∘ⱼ</a>
    <a id="13276" href="Graded.Erasure.Extraction.Non-terminating.html#9713" class="Function">⊢extracts-to-loop</a> <a id="13294" href="Graded.Erasure.Extraction.Non-terminating.html#13203" class="Bound">𝟘-ok</a> <a id="13299" href="Graded.Erasure.Extraction.Non-terminating.html#13208" class="Bound">ω-ok</a> <a id="13304" href="Graded.Erasure.Extraction.Non-terminating.html#13213" class="Bound">ω+ω-ok</a> <a id="13311" href="Graded.Erasure.Extraction.Non-terminating.html#13220" class="Bound">⊢Γ</a>
    <a id="13318" class="Keyword">where</a>
    <a id="13328" class="Keyword">open</a> <a id="13333" href="Graded.Erasure.Extraction.Non-terminating.html#2821" class="Module">Lemmas</a> <a id="13340" href="Graded.Erasure.Extraction.Non-terminating.html#13220" class="Bound">⊢Γ</a>

<a id="13344" class="Keyword">opaque</a>
  <a id="13353" class="Keyword">unfolding</a> <a id="13363" href="Graded.Erasure.Extraction.Non-terminating.html#11362" class="Function">loops</a>

  <a id="13372" class="Comment">-- A usage rule for loops.</a>

  <a id="▸loops"></a><a id="13402" href="Graded.Erasure.Extraction.Non-terminating.html#13402" class="Function">▸loops</a> <a id="13409" class="Symbol">:</a>
    <a id="13415" class="Symbol">⦃</a> <a id="13417" href="Graded.Erasure.Extraction.Non-terminating.html#13417" class="Bound">𝟘-well-behaved</a> <a id="13432" class="Symbol">:</a> <a id="13434" href="Graded.Modality.html#3694" class="Record">Has-well-behaved-zero</a> <a id="13456" href="Graded.Erasure.Extraction.Non-terminating.html#1363" class="Bound">M</a> <a id="13458" href="Graded.Modality.html#8343" class="Function">semiring-with-meet</a> <a id="13477" class="Symbol">⦄</a> <a id="13479" class="Symbol">→</a>
    <a id="13485" href="Graded.Usage.Restrictions.html#1638" class="Field">Emptyrec-allowed</a> <a id="13502" class="InductiveConstructor">𝟙ᵐ</a> <a id="13505" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="13507" class="Symbol">→</a>
    <a id="13513" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a> <a id="13515" href="Graded.Modality.html#1365" class="Function Operator">≤</a> <a id="13517" href="Graded.Modality.html#926" class="Function">𝟘</a> <a id="13519" class="Symbol">→</a>
    <a id="13525" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13528" href="Graded.Usage.html#8187" class="Datatype Operator">▸[</a> <a id="13531" class="InductiveConstructor">𝟙ᵐ</a> <a id="13534" href="Graded.Usage.html#8187" class="Datatype Operator">]</a> <a id="13536" href="Graded.Erasure.Extraction.Non-terminating.html#11362" class="Function">loops</a> <a id="13542" class="Symbol">{</a><a id="13543" class="Argument">n</a> <a id="13545" class="Symbol">=</a> <a id="13547" href="Graded.Erasure.Extraction.Non-terminating.html#2616" class="Generalizable">n</a><a id="13548" class="Symbol">}</a> <a id="13550" href="Graded.Erasure.Extraction.Non-terminating.html#2709" class="Generalizable">p</a>
  <a id="13554" href="Graded.Erasure.Extraction.Non-terminating.html#13402" class="Function">▸loops</a> <a id="13561" href="Graded.Erasure.Extraction.Non-terminating.html#13561" class="Bound">ok</a> <a id="13564" href="Graded.Erasure.Extraction.Non-terminating.html#13564" class="Bound">p≤𝟘</a> <a id="13568" class="Symbol">=</a> <a id="13570" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a>
    <a id="13578" class="Symbol">(</a><a id="13579" href="Graded.Usage.html#8532" class="InductiveConstructor">lamₘ</a>
       <a id="13591" class="Symbol">(</a><a id="13592" href="Graded.Usage.html#14359" class="InductiveConstructor">sub</a> <a id="13596" href="Graded.Usage.html#9351" class="InductiveConstructor">zeroₘ</a> <a id="13602" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="13604" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
          <a id="13620" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13623" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="13625" href="Graded.Modality.html#928" class="Function">𝟙</a> <a id="13627" href="Graded.Modality.html#906" class="Function Operator">·</a> <a id="13629" href="Graded.Modality.html#930" class="Function">ω</a>  <a id="13632" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="13635" href="Graded.Context.Properties.Equivalence.html#572" class="Function">≈ᶜ-refl</a> <a id="13643" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="13645" href="Graded.Modality.html#3173" class="Function">·-identityˡ</a> <a id="13657" class="Symbol">_</a> <a id="13659" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
          <a id="13671" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13674" href="Graded.Context.html#734" class="InductiveConstructor Operator">∙</a> <a id="13676" href="Graded.Modality.html#930" class="Function">ω</a>      <a id="13683" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="13686" href="Graded.Context.Properties.PartialOrder.html#656" class="Function">≤ᶜ-refl</a> <a id="13694" href="Graded.Context.html#885" class="InductiveConstructor Operator">∙</a> <a id="13696" href="Graded.Modality.Properties.Addition.html#3754" class="Function">ω≤𝟘</a> <a id="13700" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
          <a id="13712" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>          <a id="13724" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="13725" class="Symbol">)</a> <a id="13727" href="Graded.Usage.html#8601" class="InductiveConstructor Operator">∘ₘ</a>
     <a id="13735" href="Graded.Usage.Properties.html#2553" class="Function">▸-cong</a> <a id="13742" class="Symbol">(</a><a id="13743" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="13750" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="13752" href="Graded.Mode.html#19762" class="Function">≢𝟘→⌞⌟≡𝟙ᵐ</a> <a id="13761" href="Graded.Modality.Properties.Has-well-behaved-zero.html#2332" class="Function">ω≢𝟘</a><a id="13764" class="Symbol">)</a>
       <a id="13773" class="Symbol">(</a><a id="13774" href="Graded.Erasure.Extraction.Non-terminating.html#10160" class="Function">▸extracts-to-loop</a> <a id="13792" href="Graded.Erasure.Extraction.Non-terminating.html#13561" class="Bound">ok</a> <a id="13795" href="Graded.Erasure.Extraction.Non-terminating.html#13564" class="Bound">p≤𝟘</a><a id="13798" class="Symbol">))</a>
    <a id="13805" class="Symbol">(</a><a id="13806" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
       <a id="13819" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>             <a id="13834" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="13838" href="Graded.Context.Properties.Equivalence.html#704" class="Function">≈ᶜ-trans</a> <a id="13847" class="Symbol">(</a><a id="13848" href="Graded.Context.Properties.Addition.html#738" class="Function">+ᶜ-identityˡ</a> <a id="13861" class="Symbol">_)</a> <a id="13864" class="Symbol">(</a><a id="13865" href="Graded.Context.Properties.Multiplication.html#1091" class="Function">·ᶜ-zeroʳ</a> <a id="13874" class="Symbol">_)</a> <a id="13877" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
       <a id="13886" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a> <a id="13889" href="Graded.Context.html#1501" class="Function Operator">+ᶜ</a> <a id="13892" href="Graded.Modality.html#930" class="Function">ω</a> <a id="13894" href="Graded.Context.html#1733" class="Function Operator">·ᶜ</a> <a id="13897" href="Graded.Context.html#2498" class="Function">𝟘ᶜ</a>  <a id="13901" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a><a id="13902" class="Symbol">)</a>
    <a id="13908" class="Keyword">where</a>
    <a id="13918" class="Keyword">open</a> <a id="13923" href="Graded.Context.Properties.PartialOrder.html#2065" class="Module">≤ᶜ-reasoning</a>
</pre></body></html>