<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Heap.Typed.Substitution</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Properties of well-formed heaps as substitutions</a>
<a id="126" class="Comment">------------------------------------------------------------------------</a>

<a id="200" class="Keyword">open</a> <a id="205" class="Keyword">import</a> <a id="212" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="228" class="Keyword">open</a> <a id="233" class="Keyword">import</a> <a id="240" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="309" class="Keyword">module</a> <a id="316" href="Graded.Heap.Typed.Substitution.html" class="Module">Graded.Heap.Typed.Substitution</a>
  <a id="349" class="Symbol">{</a><a id="350" href="Graded.Heap.Typed.Substitution.html#350" class="Bound">a</a><a id="351" class="Symbol">}</a> <a id="353" class="Symbol">{</a><a id="354" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a> <a id="356" class="Symbol">:</a> <a id="358" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="362" href="Graded.Heap.Typed.Substitution.html#350" class="Bound">a</a><a id="363" class="Symbol">}</a> <a id="365" class="Symbol">{</a><a id="366" href="Graded.Heap.Typed.Substitution.html#366" class="Bound">𝕄</a> <a id="368" class="Symbol">:</a> <a id="370" href="Graded.Modality.html#8202" class="Record">Modality</a> <a id="379" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a><a id="380" class="Symbol">}</a>
  <a id="384" class="Symbol">(</a><a id="385" href="Graded.Heap.Typed.Substitution.html#385" class="Bound">UR</a> <a id="388" class="Symbol">:</a> <a id="390" href="Graded.Usage.Restrictions.html#750" class="Record">Usage-restrictions</a> <a id="409" href="Graded.Heap.Typed.Substitution.html#366" class="Bound">𝕄</a><a id="410" class="Symbol">)</a>
  <a id="414" class="Symbol">(</a><a id="415" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a> <a id="418" class="Symbol">:</a> <a id="420" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="438" href="Graded.Heap.Typed.Substitution.html#366" class="Bound">𝕄</a><a id="439" class="Symbol">)</a>
  <a id="443" class="Keyword">where</a>

<a id="450" class="Keyword">open</a> <a id="455" href="Definition.Typed.Restrictions.html#752" class="Module">Type-restrictions</a> <a id="473" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>

<a id="477" class="Keyword">open</a> <a id="482" class="Keyword">import</a> <a id="489" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="508" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a>
<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Definition.Untyped.Properties.html" class="Module">Definition.Untyped.Properties</a> <a id="552" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a>
<a id="554" class="Keyword">open</a> <a id="559" class="Keyword">import</a> <a id="566" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="583" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>
<a id="586" class="Keyword">open</a> <a id="591" class="Keyword">import</a> <a id="598" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="626" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>
<a id="629" class="Keyword">open</a> <a id="634" class="Keyword">import</a> <a id="641" href="Definition.Typed.Substitution.html" class="Module">Definition.Typed.Substitution</a> <a id="671" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>

<a id="675" class="Keyword">open</a> <a id="680" class="Keyword">import</a> <a id="687" href="Graded.Heap.Typed.html" class="Module">Graded.Heap.Typed</a> <a id="705" href="Graded.Heap.Typed.Substitution.html#385" class="Bound">UR</a> <a id="708" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>
<a id="711" class="Keyword">open</a> <a id="716" class="Keyword">import</a> <a id="723" href="Graded.Heap.Untyped.html" class="Module">Graded.Heap.Untyped</a> <a id="743" href="Definition.Typed.Restrictions.html#876" class="Field">type-variant</a> <a id="756" href="Graded.Heap.Typed.Substitution.html#385" class="Bound">UR</a>

<a id="760" class="Keyword">import</a> <a id="767" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="795" class="Symbol">as</a> <a id="798" class="Module">PE</a>

<a id="802" class="Keyword">private</a> <a id="810" class="Keyword">variable</a>
  <a id="821" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="823" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="825" class="Symbol">:</a> <a id="827" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="831" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="836" class="Symbol">_</a>
  <a id="840" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="842" href="Graded.Heap.Typed.Substitution.html#842" class="Generalizable">H′</a> <a id="845" class="Symbol">:</a> <a id="847" href="Graded.Heap.Untyped.html#5903" class="Datatype">Heap</a> <a id="852" class="Symbol">_</a> <a id="854" class="Symbol">_</a>
  <a id="858" href="Graded.Heap.Typed.Substitution.html#858" class="Generalizable">ρ</a> <a id="860" class="Symbol">:</a> <a id="862" href="Definition.Untyped.NotParametrised.html#2601" class="Datatype">Wk</a> <a id="865" class="Symbol">_</a> <a id="867" class="Symbol">_</a>
  <a id="871" href="Graded.Heap.Typed.Substitution.html#871" class="Generalizable">t</a> <a id="873" href="Graded.Heap.Typed.Substitution.html#873" class="Generalizable">u</a> <a id="875" href="Graded.Heap.Typed.Substitution.html#875" class="Generalizable">A</a> <a id="877" href="Graded.Heap.Typed.Substitution.html#877" class="Generalizable">B</a> <a id="879" class="Symbol">:</a> <a id="881" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="886" class="Symbol">_</a>
  <a id="890" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">y</a> <a id="892" class="Symbol">:</a> <a id="894" href="Graded.Heap.Untyped.html#1264" class="Function">Ptr</a> <a id="898" class="Symbol">_</a>
  <a id="902" href="Graded.Heap.Typed.Substitution.html#902" class="Generalizable">c</a> <a id="904" class="Symbol">:</a> <a id="906" href="Graded.Heap.Untyped.html#1496" class="Function">Entry</a> <a id="912" class="Symbol">_</a> <a id="914" class="Symbol">_</a>
  <a id="918" href="Graded.Heap.Typed.Substitution.html#918" class="Generalizable">p</a> <a id="920" class="Symbol">:</a> <a id="922" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a>
  <a id="926" href="Graded.Heap.Typed.Substitution.html#926" class="Generalizable">e</a> <a id="928" class="Symbol">:</a> <a id="930" href="Graded.Heap.Untyped.html#2043" class="Datatype">Elim</a> <a id="935" class="Symbol">_</a>
  <a id="939" href="Graded.Heap.Typed.Substitution.html#939" class="Generalizable">S</a> <a id="941" class="Symbol">:</a> <a id="943" href="Graded.Heap.Untyped.html#4634" class="Datatype">Stack</a> <a id="949" class="Symbol">_</a>
  <a id="953" href="Graded.Heap.Typed.Substitution.html#953" class="Generalizable">σ</a> <a id="955" class="Symbol">:</a> <a id="957" href="Definition.Untyped.html#11525" class="Function">Subst</a> <a id="963" class="Symbol">_</a> <a id="965" class="Symbol">_</a>

<a id="968" class="Keyword">opaque</a> <a id="975" class="Keyword">mutual</a>

  <a id="985" class="Comment">-- A well-formed heap is a well-formed substitution</a>

  <a id="⊢ʰ→⊢ˢ"></a><a id="1040" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="1046" class="Symbol">:</a> <a id="1048" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="1050" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="1053" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="1055" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="1057" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="1059" class="Symbol">→</a> <a id="1061" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="1063" href="Definition.Typed.html#19111" class="Datatype Operator">⊢ˢ</a> <a id="1066" href="Graded.Heap.Untyped.html#7769" class="Function">toSubstₕ</a> <a id="1075" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="1077" href="Definition.Typed.html#19111" class="Datatype Operator">∷</a> <a id="1079" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a>
  <a id="1083" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="1089" href="Graded.Heap.Typed.html#1041" class="InductiveConstructor">ε</a> <a id="1091" class="Symbol">=</a> <a id="1093" href="Definition.Typed.html#19197" class="InductiveConstructor">id</a>
  <a id="1098" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="1104" class="Symbol">(</a><a id="1105" href="Graded.Heap.Typed.Substitution.html#1105" class="Bound">⊢H</a> <a id="1108" href="Graded.Heap.Typed.html#1058" class="InductiveConstructor Operator">∙</a> <a id="1110" href="Graded.Heap.Typed.Substitution.html#1110" class="Bound">⊢t</a><a id="1112" class="Symbol">)</a> <a id="1114" class="Symbol">=</a>
    <a id="1120" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="1126" href="Graded.Heap.Typed.Substitution.html#1105" class="Bound">⊢H</a> <a id="1129" href="Definition.Typed.html#19216" class="InductiveConstructor Operator">,</a> <a id="1131" href="Graded.Heap.Typed.Substitution.html#1110" class="Bound">⊢t</a>
  <a id="1136" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="1142" class="Symbol">(</a><a id="1143" href="Graded.Heap.Typed.html#1139" class="InductiveConstructor Operator">_∙●_</a> <a id="1148" class="Symbol">{</a><a id="1149" href="Graded.Heap.Typed.Substitution.html#1149" class="Bound">Δ</a><a id="1150" class="Symbol">}</a> <a id="1152" class="Symbol">{</a><a id="1153" href="Graded.Heap.Typed.Substitution.html#1153" class="Bound">H</a><a id="1154" class="Symbol">}</a> <a id="1156" class="Symbol">{</a><a id="1157" href="Graded.Heap.Typed.Substitution.html#1157" class="Bound">A</a><a id="1158" class="Symbol">}</a> <a id="1160" href="Graded.Heap.Typed.Substitution.html#1160" class="Bound">⊢H</a> <a id="1163" href="Graded.Heap.Typed.Substitution.html#1163" class="Bound">⊢A</a><a id="1165" class="Symbol">)</a> <a id="1167" class="Symbol">=</a>
    <a id="1173" class="Keyword">let</a> <a id="1177" href="Graded.Heap.Typed.Substitution.html#1177" class="Bound">⊢σ</a> <a id="1180" class="Symbol">=</a> <a id="1182" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="1188" href="Graded.Heap.Typed.Substitution.html#1160" class="Bound">⊢H</a>
        <a id="1199" href="Graded.Heap.Typed.Substitution.html#1199" class="Bound">⊢Δ</a> <a id="1202" class="Symbol">=</a> <a id="1204" href="Graded.Heap.Typed.Substitution.html#1419" class="Function">wfHeap</a> <a id="1211" href="Graded.Heap.Typed.Substitution.html#1160" class="Bound">⊢H</a>
        <a id="1222" href="Graded.Heap.Typed.Substitution.html#1222" class="Bound">⊢σA</a> <a id="1226" class="Symbol">=</a> <a id="1228" href="Definition.Typed.Substitution.html#1386" class="Function">substitution</a> <a id="1241" href="Graded.Heap.Typed.Substitution.html#1163" class="Bound">⊢A</a> <a id="1244" href="Graded.Heap.Typed.Substitution.html#1177" class="Bound">⊢σ</a> <a id="1247" href="Graded.Heap.Typed.Substitution.html#1199" class="Bound">⊢Δ</a>
    <a id="1254" class="Keyword">in</a>
    <a id="1261" href="Definition.Typed.Substitution.html#2528" class="Function">wk1Subst′</a> <a id="1271" href="Graded.Heap.Typed.Substitution.html#1222" class="Bound">⊢σA</a> <a id="1275" href="Graded.Heap.Typed.Substitution.html#1177" class="Bound">⊢σ</a> <a id="1278" href="Definition.Typed.html#19216" class="InductiveConstructor Operator">,</a>
    <a id="1284" href="Definition.Typed.html#2190" class="InductiveConstructor">var</a> <a id="1288" class="Symbol">(</a><a id="1289" href="Definition.Typed.html#1224" class="InductiveConstructor Operator">∙</a> <a id="1291" href="Graded.Heap.Typed.Substitution.html#1222" class="Bound">⊢σA</a><a id="1294" class="Symbol">)</a>
      <a id="1302" class="Symbol">(</a><a id="1303" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">PE.subst</a> <a id="1312" class="Symbol">(</a><a id="1313" href="Graded.Heap.Untyped.html#1299" class="InductiveConstructor">y0</a> <a id="1316" href="Definition.Typed.html#982" class="Datatype Operator">∷_∈</a> <a id="1320" href="Graded.Heap.Typed.Substitution.html#1149" class="Bound">Δ</a> <a id="1322" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="1324" href="Graded.Heap.Typed.Substitution.html#1157" class="Bound">A</a> <a id="1326" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1328" href="Graded.Heap.Typed.Substitution.html#1153" class="Bound">H</a> <a id="1330" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a><a id="1332" class="Symbol">)</a> <a id="1334" class="Symbol">(</a><a id="1335" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="1342" class="Symbol">(</a><a id="1343" href="Definition.Untyped.Properties.html#23115" class="Function">wk1Subst-wk1</a> <a id="1356" href="Graded.Heap.Typed.Substitution.html#1157" class="Bound">A</a><a id="1357" class="Symbol">))</a> <a id="1360" href="Definition.Typed.html#1048" class="InductiveConstructor">here</a><a id="1364" class="Symbol">)</a>

  <a id="1369" class="Comment">-- Well-formed contexts from well-formed heaps</a>

  <a id="wfHeap"></a><a id="1419" href="Graded.Heap.Typed.Substitution.html#1419" class="Function">wfHeap</a> <a id="1426" class="Symbol">:</a> <a id="1428" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="1430" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="1433" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="1435" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="1437" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="1439" class="Symbol">→</a> <a id="1441" href="Definition.Typed.html#1177" class="Datatype Operator">⊢</a> <a id="1443" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a>
  <a id="1447" href="Graded.Heap.Typed.Substitution.html#1419" class="Function">wfHeap</a> <a id="1454" class="Symbol">{</a><a id="1455" class="Argument">Δ</a> <a id="1457" class="Symbol">=</a> <a id="1459" href="Definition.Untyped.NotParametrised.html#926" class="InductiveConstructor">ε</a><a id="1460" class="Symbol">}</a> <a id="1462" href="Graded.Heap.Typed.html#1041" class="InductiveConstructor">ε</a> <a id="1464" class="Symbol">=</a> <a id="1466" href="Definition.Typed.html#1211" class="InductiveConstructor">ε</a>
  <a id="1470" href="Graded.Heap.Typed.Substitution.html#1419" class="CatchallClause Function">wfHeap</a><a id="1476" class="CatchallClause"> </a><a id="1477" class="CatchallClause Symbol">(</a><a id="1478" href="Graded.Heap.Typed.Substitution.html#1478" class="CatchallClause Bound">⊢H</a><a id="1480" class="CatchallClause"> </a><a id="1481" href="Graded.Heap.Typed.html#1058" class="CatchallClause InductiveConstructor Operator">∙</a><a id="1482" class="CatchallClause"> </a><a id="1483" href="Graded.Heap.Typed.Substitution.html#1483" class="CatchallClause Bound">⊢t</a><a id="1485" class="CatchallClause Symbol">)</a> <a id="1487" class="Symbol">=</a> <a id="1489" href="Graded.Heap.Typed.Substitution.html#1419" class="Function">wfHeap</a> <a id="1496" href="Graded.Heap.Typed.Substitution.html#1478" class="Bound">⊢H</a>
  <a id="1501" href="Graded.Heap.Typed.Substitution.html#1419" class="Function">wfHeap</a> <a id="1508" class="Symbol">(</a><a id="1509" href="Graded.Heap.Typed.Substitution.html#1509" class="Bound">⊢H</a> <a id="1512" href="Graded.Heap.Typed.html#1139" class="InductiveConstructor Operator">∙●</a> <a id="1515" href="Graded.Heap.Typed.Substitution.html#1515" class="Bound">⊢A</a><a id="1517" class="Symbol">)</a> <a id="1519" class="Symbol">=</a>
    <a id="1525" class="Keyword">let</a> <a id="1529" href="Graded.Heap.Typed.Substitution.html#1529" class="Bound">⊢Δ</a> <a id="1532" class="Symbol">=</a> <a id="1534" href="Graded.Heap.Typed.Substitution.html#1419" class="Function">wfHeap</a> <a id="1541" href="Graded.Heap.Typed.Substitution.html#1509" class="Bound">⊢H</a> <a id="1544" class="Keyword">in</a>
    <a id="1551" href="Definition.Typed.html#1224" class="InductiveConstructor Operator">∙</a> <a id="1553" href="Definition.Typed.Substitution.html#1386" class="Function">substitution</a> <a id="1566" href="Graded.Heap.Typed.Substitution.html#1515" class="Bound">⊢A</a> <a id="1569" class="Symbol">(</a><a id="1570" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="1576" href="Graded.Heap.Typed.Substitution.html#1509" class="Bound">⊢H</a><a id="1578" class="Symbol">)</a> <a id="1580" href="Graded.Heap.Typed.Substitution.html#1529" class="Bound">⊢Δ</a>

<a id="1584" class="Keyword">opaque</a>

  <a id="1594" class="Comment">-- A well-formed type applied to a well-formed heap (as a substitution)</a>
  <a id="1668" class="Comment">-- is well-formed</a>

  <a id="substHeap"></a><a id="1689" href="Graded.Heap.Typed.Substitution.html#1689" class="Function">substHeap</a> <a id="1699" class="Symbol">:</a> <a id="1701" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="1703" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="1706" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="1708" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="1710" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="1712" class="Symbol">→</a> <a id="1714" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="1716" href="Definition.Typed.html#1275" class="Datatype Operator">⊢</a> <a id="1718" href="Graded.Heap.Typed.Substitution.html#875" class="Generalizable">A</a> <a id="1720" class="Symbol">→</a> <a id="1722" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="1724" href="Definition.Typed.html#1275" class="Datatype Operator">⊢</a> <a id="1726" href="Graded.Heap.Typed.Substitution.html#875" class="Generalizable">A</a> <a id="1728" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1730" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="1732" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="1737" href="Graded.Heap.Typed.Substitution.html#1689" class="Function">substHeap</a> <a id="1747" href="Graded.Heap.Typed.Substitution.html#1747" class="Bound">⊢H</a> <a id="1750" href="Graded.Heap.Typed.Substitution.html#1750" class="Bound">⊢A</a> <a id="1753" class="Symbol">=</a>
    <a id="1759" href="Definition.Typed.Substitution.html#1386" class="Function">substitution</a> <a id="1772" href="Graded.Heap.Typed.Substitution.html#1750" class="Bound">⊢A</a> <a id="1775" class="Symbol">(</a><a id="1776" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="1782" href="Graded.Heap.Typed.Substitution.html#1747" class="Bound">⊢H</a><a id="1784" class="Symbol">)</a> <a id="1786" class="Symbol">(</a><a id="1787" href="Graded.Heap.Typed.Substitution.html#1419" class="Function">wfHeap</a> <a id="1794" href="Graded.Heap.Typed.Substitution.html#1747" class="Bound">⊢H</a><a id="1796" class="Symbol">)</a>

<a id="1799" class="Keyword">opaque</a>

  <a id="1809" class="Comment">-- A well-formed term applied to a well-formed heap (as a substitution)</a>
  <a id="1883" class="Comment">-- is well-formed</a>

  <a id="substHeapTerm"></a><a id="1904" href="Graded.Heap.Typed.Substitution.html#1904" class="Function">substHeapTerm</a> <a id="1918" class="Symbol">:</a> <a id="1920" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="1922" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="1925" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="1927" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="1929" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="1931" class="Symbol">→</a> <a id="1933" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="1935" href="Definition.Typed.html#1720" class="Datatype Operator">⊢</a> <a id="1937" href="Graded.Heap.Typed.Substitution.html#871" class="Generalizable">t</a> <a id="1939" href="Definition.Typed.html#1720" class="Datatype Operator">∷</a> <a id="1941" href="Graded.Heap.Typed.Substitution.html#875" class="Generalizable">A</a> <a id="1943" class="Symbol">→</a> <a id="1945" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="1947" href="Definition.Typed.html#1720" class="Datatype Operator">⊢</a> <a id="1949" href="Graded.Heap.Typed.Substitution.html#871" class="Generalizable">t</a> <a id="1951" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1953" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="1955" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="1958" href="Definition.Typed.html#1720" class="Datatype Operator">∷</a> <a id="1960" href="Graded.Heap.Typed.Substitution.html#875" class="Generalizable">A</a> <a id="1962" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1964" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="1966" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="1971" href="Graded.Heap.Typed.Substitution.html#1904" class="Function">substHeapTerm</a> <a id="1985" href="Graded.Heap.Typed.Substitution.html#1985" class="Bound">⊢H</a> <a id="1988" href="Graded.Heap.Typed.Substitution.html#1988" class="Bound">⊢t</a> <a id="1991" class="Symbol">=</a>
    <a id="1997" href="Definition.Typed.Substitution.html#1792" class="Function">substitutionTerm</a> <a id="2014" href="Graded.Heap.Typed.Substitution.html#1988" class="Bound">⊢t</a> <a id="2017" class="Symbol">(</a><a id="2018" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="2024" href="Graded.Heap.Typed.Substitution.html#1985" class="Bound">⊢H</a><a id="2026" class="Symbol">)</a> <a id="2028" class="Symbol">(</a><a id="2029" href="Graded.Heap.Typed.Substitution.html#1419" class="Function">wfHeap</a> <a id="2036" href="Graded.Heap.Typed.Substitution.html#1985" class="Bound">⊢H</a><a id="2038" class="Symbol">)</a>

<a id="2041" class="Keyword">opaque</a>

  <a id="2051" class="Comment">-- A well-formed type equality applied to a well-formed heap</a>
  <a id="2114" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEq"></a><a id="2155" href="Graded.Heap.Typed.Substitution.html#2155" class="Function">substHeapEq</a> <a id="2167" class="Symbol">:</a> <a id="2169" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="2171" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="2174" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="2176" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="2178" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="2180" class="Symbol">→</a> <a id="2182" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="2184" href="Definition.Typed.html#4660" class="Datatype Operator">⊢</a> <a id="2186" href="Graded.Heap.Typed.Substitution.html#875" class="Generalizable">A</a> <a id="2188" href="Definition.Typed.html#4660" class="Datatype Operator">≡</a> <a id="2190" href="Graded.Heap.Typed.Substitution.html#877" class="Generalizable">B</a> <a id="2192" class="Symbol">→</a> <a id="2194" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="2196" href="Definition.Typed.html#4660" class="Datatype Operator">⊢</a> <a id="2198" href="Graded.Heap.Typed.Substitution.html#875" class="Generalizable">A</a> <a id="2200" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2202" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="2204" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2207" href="Definition.Typed.html#4660" class="Datatype Operator">≡</a> <a id="2209" href="Graded.Heap.Typed.Substitution.html#877" class="Generalizable">B</a> <a id="2211" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2213" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="2215" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="2220" href="Graded.Heap.Typed.Substitution.html#2155" class="Function">substHeapEq</a> <a id="2232" href="Graded.Heap.Typed.Substitution.html#2232" class="Bound">⊢H</a> <a id="2235" href="Graded.Heap.Typed.Substitution.html#2235" class="Bound">⊢A≡B</a> <a id="2240" class="Symbol">=</a>
    <a id="2246" href="Definition.Typed.Substitution.html#1559" class="Function">substitutionEq</a> <a id="2261" href="Graded.Heap.Typed.Substitution.html#2235" class="Bound">⊢A≡B</a> <a id="2266" class="Symbol">(</a><a id="2267" href="Definition.Typed.Substitution.html#1154" class="Function">substRefl</a> <a id="2277" class="Symbol">(</a><a id="2278" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="2284" href="Graded.Heap.Typed.Substitution.html#2232" class="Bound">⊢H</a><a id="2286" class="Symbol">))</a> <a id="2289" class="Symbol">(</a><a id="2290" href="Graded.Heap.Typed.Substitution.html#1419" class="Function">wfHeap</a> <a id="2297" href="Graded.Heap.Typed.Substitution.html#2232" class="Bound">⊢H</a><a id="2299" class="Symbol">)</a>

<a id="2302" class="Keyword">opaque</a>

  <a id="2312" class="Comment">-- A well-formed term equality  applied to a well-formed heap</a>
  <a id="2376" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEqTerm"></a><a id="2417" href="Graded.Heap.Typed.Substitution.html#2417" class="Function">substHeapEqTerm</a> <a id="2433" class="Symbol">:</a> <a id="2435" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="2437" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="2440" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="2442" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="2444" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="2446" class="Symbol">→</a> <a id="2448" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="2450" href="Definition.Typed.html#5254" class="Datatype Operator">⊢</a> <a id="2452" href="Graded.Heap.Typed.Substitution.html#871" class="Generalizable">t</a> <a id="2454" href="Definition.Typed.html#5254" class="Datatype Operator">≡</a> <a id="2456" href="Graded.Heap.Typed.Substitution.html#873" class="Generalizable">u</a> <a id="2458" href="Definition.Typed.html#5254" class="Datatype Operator">∷</a> <a id="2460" href="Graded.Heap.Typed.Substitution.html#875" class="Generalizable">A</a>
                  <a id="2480" class="Symbol">→</a> <a id="2482" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="2484" href="Definition.Typed.html#5254" class="Datatype Operator">⊢</a> <a id="2486" href="Graded.Heap.Typed.Substitution.html#871" class="Generalizable">t</a> <a id="2488" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2490" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="2492" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2495" href="Definition.Typed.html#5254" class="Datatype Operator">≡</a> <a id="2497" href="Graded.Heap.Typed.Substitution.html#873" class="Generalizable">u</a> <a id="2499" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2501" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="2503" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2506" href="Definition.Typed.html#5254" class="Datatype Operator">∷</a> <a id="2508" href="Graded.Heap.Typed.Substitution.html#875" class="Generalizable">A</a> <a id="2510" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2512" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="2514" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="2519" href="Graded.Heap.Typed.Substitution.html#2417" class="Function">substHeapEqTerm</a> <a id="2535" href="Graded.Heap.Typed.Substitution.html#2535" class="Bound">⊢H</a> <a id="2538" href="Graded.Heap.Typed.Substitution.html#2538" class="Bound">⊢t≡u</a> <a id="2543" class="Symbol">=</a>
    <a id="2549" href="Definition.Typed.Substitution.html#1994" class="Function">substitutionEqTerm</a> <a id="2568" href="Graded.Heap.Typed.Substitution.html#2538" class="Bound">⊢t≡u</a> <a id="2573" class="Symbol">(</a><a id="2574" href="Definition.Typed.Substitution.html#1154" class="Function">substRefl</a> <a id="2584" class="Symbol">(</a><a id="2585" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="2591" href="Graded.Heap.Typed.Substitution.html#2535" class="Bound">⊢H</a><a id="2593" class="Symbol">))</a> <a id="2596" class="Symbol">(</a><a id="2597" href="Graded.Heap.Typed.Substitution.html#1419" class="Function">wfHeap</a> <a id="2604" href="Graded.Heap.Typed.Substitution.html#2535" class="Bound">⊢H</a><a id="2606" class="Symbol">)</a>

<a id="2609" class="Keyword">opaque</a>

  <a id="2619" class="Comment">-- Applying a well-formed heap as a substitution to a reduction</a>

  <a id="substHeapRedTerm"></a><a id="2686" href="Graded.Heap.Typed.Substitution.html#2686" class="Function">substHeapRedTerm</a> <a id="2703" class="Symbol">:</a> <a id="2705" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="2707" href="Graded.Heap.Typed.html#967" class="Datatype Operator">⊢ʰ</a> <a id="2710" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="2712" href="Graded.Heap.Typed.html#967" class="Datatype Operator">∷</a> <a id="2714" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="2716" class="Symbol">→</a> <a id="2718" href="Graded.Heap.Typed.Substitution.html#821" class="Generalizable">Γ</a> <a id="2720" href="Definition.Typed.html#12674" class="Datatype Operator">⊢</a> <a id="2722" href="Graded.Heap.Typed.Substitution.html#871" class="Generalizable">t</a> <a id="2724" href="Definition.Typed.html#12674" class="Datatype Operator">⇒</a> <a id="2726" href="Graded.Heap.Typed.Substitution.html#873" class="Generalizable">u</a> <a id="2728" href="Definition.Typed.html#12674" class="Datatype Operator">∷</a> <a id="2730" href="Graded.Heap.Typed.Substitution.html#875" class="Generalizable">A</a>
                   <a id="2751" class="Symbol">→</a> <a id="2753" href="Graded.Heap.Typed.Substitution.html#823" class="Generalizable">Δ</a> <a id="2755" href="Definition.Typed.html#12674" class="Datatype Operator">⊢</a> <a id="2757" href="Graded.Heap.Typed.Substitution.html#871" class="Generalizable">t</a> <a id="2759" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2761" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="2763" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2766" href="Definition.Typed.html#12674" class="Datatype Operator">⇒</a> <a id="2768" href="Graded.Heap.Typed.Substitution.html#873" class="Generalizable">u</a> <a id="2770" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2772" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="2774" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2777" href="Definition.Typed.html#12674" class="Datatype Operator">∷</a> <a id="2779" href="Graded.Heap.Typed.Substitution.html#875" class="Generalizable">A</a> <a id="2781" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2783" href="Graded.Heap.Typed.Substitution.html#840" class="Generalizable">H</a> <a id="2785" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="2790" href="Graded.Heap.Typed.Substitution.html#2686" class="Function">substHeapRedTerm</a> <a id="2807" href="Graded.Heap.Typed.Substitution.html#2807" class="Bound">⊢H</a> <a id="2810" href="Graded.Heap.Typed.Substitution.html#2810" class="Bound">d</a> <a id="2812" class="Symbol">=</a>
    <a id="2818" href="Definition.Typed.Substitution.html#11608" class="Function">substitutionRedTerm</a> <a id="2838" href="Graded.Heap.Typed.Substitution.html#2810" class="Bound">d</a> <a id="2840" class="Symbol">(</a><a id="2841" href="Graded.Heap.Typed.Substitution.html#1040" class="Function">⊢ʰ→⊢ˢ</a> <a id="2847" href="Graded.Heap.Typed.Substitution.html#2807" class="Bound">⊢H</a><a id="2849" class="Symbol">)</a> <a id="2851" class="Symbol">(</a><a id="2852" href="Graded.Heap.Typed.Substitution.html#1419" class="Function">wfHeap</a> <a id="2859" href="Graded.Heap.Typed.Substitution.html#2807" class="Bound">⊢H</a><a id="2861" class="Symbol">)</a>
</pre></body></html>