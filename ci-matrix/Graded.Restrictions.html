<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Restrictions</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Definitions related to type and usage restrictions</a>
<a id="128" class="Comment">------------------------------------------------------------------------</a>

<a id="202" class="Keyword">import</a> <a id="209" href="Graded.Modality.html" class="Module">Graded.Modality</a>

<a id="226" class="Keyword">module</a> <a id="233" href="Graded.Restrictions.html" class="Module">Graded.Restrictions</a>
  <a id="255" class="Symbol">{</a><a id="256" href="Graded.Restrictions.html#256" class="Bound">a</a><a id="257" class="Symbol">}</a> <a id="259" class="Symbol">{</a><a id="260" href="Graded.Restrictions.html#260" class="Bound">M</a> <a id="262" class="Symbol">:</a> <a id="264" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="268" href="Graded.Restrictions.html#256" class="Bound">a</a><a id="269" class="Symbol">}</a>
  <a id="273" class="Symbol">(</a><a id="274" class="Keyword">open</a> <a id="279" href="Graded.Modality.html" class="Module">Graded.Modality</a> <a id="295" href="Graded.Restrictions.html#260" class="Bound">M</a><a id="296" class="Symbol">)</a>
  <a id="300" class="Symbol">(</a><a id="301" href="Graded.Restrictions.html#301" class="Bound">𝕄</a> <a id="303" class="Symbol">:</a> <a id="305" href="Graded.Modality.html#7142" class="Record">Modality</a><a id="313" class="Symbol">)</a>
  <a id="317" class="Keyword">where</a>

<a id="324" class="Keyword">open</a> <a id="329" href="Graded.Modality.html#7142" class="Module">Modality</a> <a id="338" href="Graded.Restrictions.html#301" class="Bound">𝕄</a>

<a id="341" class="Keyword">open</a> <a id="346" class="Keyword">import</a> <a id="353" href="Tools.Bool.html" class="Module">Tools.Bool</a>
<a id="364" class="Keyword">open</a> <a id="369" class="Keyword">import</a> <a id="376" href="Tools.Empty.html" class="Module">Tools.Empty</a>
<a id="388" class="Keyword">open</a> <a id="393" class="Keyword">import</a> <a id="400" href="Tools.Function.html" class="Module">Tools.Function</a>
<a id="415" class="Keyword">open</a> <a id="420" class="Keyword">import</a> <a id="427" href="Tools.Level.html" class="Module">Tools.Level</a>
<a id="439" class="Keyword">open</a> <a id="444" class="Keyword">import</a> <a id="451" href="Tools.Product.html" class="Module">Tools.Product</a>
<a id="465" class="Keyword">open</a> <a id="470" class="Keyword">import</a> <a id="477" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a>
<a id="505" class="Keyword">open</a> <a id="510" class="Keyword">import</a> <a id="517" href="Tools.Relation.html" class="Module">Tools.Relation</a>
<a id="532" class="Keyword">open</a> <a id="537" class="Keyword">import</a> <a id="544" href="Tools.Unit.html" class="Module">Tools.Unit</a>

<a id="556" class="Keyword">open</a> <a id="561" class="Keyword">import</a> <a id="568" href="Graded.Modality.Properties.html" class="Module">Graded.Modality.Properties</a> <a id="595" href="Graded.Restrictions.html#301" class="Bound">𝕄</a>
<a id="597" class="Keyword">open</a> <a id="602" class="Keyword">import</a> <a id="609" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a> <a id="635" href="Graded.Restrictions.html#260" class="Bound">M</a>

<a id="638" class="Keyword">open</a> <a id="643" class="Keyword">import</a> <a id="650" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a> <a id="680" href="Graded.Restrictions.html#301" class="Bound">𝕄</a>

<a id="683" class="Keyword">private</a> <a id="691" class="Keyword">variable</a>
  <a id="702" href="Graded.Restrictions.html#702" class="Generalizable">TR</a> <a id="705" class="Symbol">:</a> <a id="707" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a>
  <a id="727" href="Graded.Restrictions.html#727" class="Generalizable">UR</a> <a id="730" class="Symbol">:</a> <a id="732" href="Graded.Usage.Restrictions.html#424" class="Record">Usage-restrictions</a>

<a id="752" class="Comment">-- No type restrictions except that if the modality is trivial, then</a>
<a id="821" class="Comment">-- []-cong is not allowed.</a>

<a id="no-type-restrictions"></a><a id="849" href="Graded.Restrictions.html#849" class="Function">no-type-restrictions</a> <a id="870" class="Symbol">:</a> <a id="872" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a>
<a id="890" href="Graded.Restrictions.html#849" class="Function">no-type-restrictions</a> <a id="911" class="Symbol">=</a> <a id="913" class="Symbol">λ</a> <a id="915" class="Keyword">where</a>
    <a id="925" class="Symbol">.</a><a id="926" href="Definition.Typed.Restrictions.html#683" class="Field">Unit-allowed</a>     <a id="943" class="Symbol">→</a> <a id="945" class="Symbol">λ</a> <a id="947" href="Graded.Restrictions.html#947" class="Bound">_</a> <a id="949" class="Symbol">→</a> <a id="951" href="Level.html#409" class="Record">Lift</a> <a id="956" class="Symbol">_</a> <a id="958" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
    <a id="964" class="Symbol">.</a><a id="965" href="Definition.Typed.Restrictions.html#769" class="Field">ΠΣ-allowed</a>       <a id="982" class="Symbol">→</a> <a id="984" class="Symbol">λ</a> <a id="986" href="Graded.Restrictions.html#986" class="Bound">_</a> <a id="988" href="Graded.Restrictions.html#988" class="Bound">_</a> <a id="990" href="Graded.Restrictions.html#990" class="Bound">_</a> <a id="992" class="Symbol">→</a> <a id="994" href="Level.html#409" class="Record">Lift</a> <a id="999" class="Symbol">_</a> <a id="1001" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
    <a id="1007" class="Symbol">.</a><a id="1008" href="Definition.Typed.Restrictions.html#1951" class="Field">K-allowed</a>        <a id="1025" class="Symbol">→</a> <a id="1027" href="Level.html#409" class="Record">Lift</a> <a id="1032" class="Symbol">_</a> <a id="1034" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
    <a id="1040" class="Symbol">.</a><a id="1041" href="Definition.Typed.Restrictions.html#2151" class="Field">[]-cong-allowed</a>  <a id="1058" class="Symbol">→</a> <a id="1060" class="Symbol">λ</a> <a id="1062" href="Graded.Restrictions.html#1062" class="Bound">_</a> <a id="1064" class="Symbol">→</a> <a id="1066" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="1068" href="Graded.Modality.html#1793" class="Function">Trivial</a>
    <a id="1080" class="Symbol">.</a><a id="1081" href="Definition.Typed.Restrictions.html#2245" class="Field">[]-cong→Erased</a>   <a id="1098" class="Symbol">→</a> <a id="1100" class="Symbol">_</a>
    <a id="1106" class="Symbol">.</a><a id="1107" href="Definition.Typed.Restrictions.html#2376" class="Field">[]-cong→¬Trivial</a> <a id="1124" class="Symbol">→</a> <a id="1126" href="Function.Base.html#704" class="Function">idᶠ</a>
  <a id="1132" class="Keyword">where</a>
  <a id="1140" class="Keyword">open</a> <a id="1145" href="Definition.Typed.Restrictions.html#524" class="Module">Type-restrictions</a>

<a id="1164" class="Comment">-- No usage restrictions, and Id-erased, Erased-matches-for-J and</a>
<a id="1230" class="Comment">-- Erased-matches-for-K are all inhabited.</a>

<a id="no-usage-restrictions"></a><a id="1274" href="Graded.Restrictions.html#1274" class="Function">no-usage-restrictions</a> <a id="1296" class="Symbol">:</a> <a id="1298" href="Graded.Usage.Restrictions.html#424" class="Record">Usage-restrictions</a>
<a id="1317" href="Graded.Restrictions.html#1274" class="Function">no-usage-restrictions</a> <a id="1339" class="Symbol">=</a> <a id="1341" class="Symbol">λ</a> <a id="1343" class="Keyword">where</a>
    <a id="1353" class="Symbol">.</a><a id="1354" href="Graded.Usage.Restrictions.html#577" class="Field">Usage-restrictions.Prodrec-allowed</a>       <a id="1395" class="Symbol">→</a> <a id="1397" class="Symbol">λ</a> <a id="1399" href="Graded.Restrictions.html#1399" class="Bound">_</a> <a id="1401" href="Graded.Restrictions.html#1401" class="Bound">_</a> <a id="1403" href="Graded.Restrictions.html#1403" class="Bound">_</a> <a id="1405" class="Symbol">→</a> <a id="1407" href="Level.html#409" class="Record">Lift</a> <a id="1412" class="Symbol">_</a> <a id="1414" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
    <a id="1420" class="Symbol">.</a><a id="1421" href="Graded.Usage.Restrictions.html#703" class="Field">Unitrec-allowed</a>                          <a id="1462" class="Symbol">→</a> <a id="1464" class="Symbol">λ</a> <a id="1466" href="Graded.Restrictions.html#1466" class="Bound">_</a> <a id="1468" href="Graded.Restrictions.html#1468" class="Bound">_</a> <a id="1470" class="Symbol">→</a> <a id="1472" href="Level.html#409" class="Record">Lift</a> <a id="1477" class="Symbol">_</a> <a id="1479" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
    <a id="1485" class="Symbol">.</a><a id="1486" href="Graded.Usage.Restrictions.html#796" class="Field">starˢ-sink</a>                                <a id="1528" class="Symbol">→</a> <a id="1530" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
    <a id="1539" class="Symbol">.</a><a id="1540" href="Graded.Usage.Restrictions.html#875" class="Field">Usage-restrictions.Id-erased</a>             <a id="1581" class="Symbol">→</a> <a id="1583" href="Level.html#409" class="Record">Lift</a> <a id="1588" class="Symbol">_</a> <a id="1590" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
    <a id="1596" class="Symbol">.</a><a id="1597" href="Graded.Usage.Restrictions.html#927" class="Field">Usage-restrictions.Id-erased?</a>            <a id="1638" class="Symbol">→</a> <a id="1640" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="1644" class="Symbol">_</a>
    <a id="1650" class="Symbol">.</a><a id="1651" href="Graded.Usage.Restrictions.html#1122" class="Field">Usage-restrictions.Erased-matches-for-J</a>  <a id="1692" class="Symbol">→</a> <a id="1694" href="Level.html#409" class="Record">Lift</a> <a id="1699" class="Symbol">_</a> <a id="1701" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
    <a id="1707" class="Symbol">.</a><a id="1708" href="Graded.Usage.Restrictions.html#1196" class="Field">Usage-restrictions.Erased-matches-for-J?</a> <a id="1749" class="Symbol">→</a> <a id="1751" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="1755" class="Symbol">_</a>
    <a id="1761" class="Symbol">.</a><a id="1762" href="Graded.Usage.Restrictions.html#1413" class="Field">Usage-restrictions.Erased-matches-for-K</a>  <a id="1803" class="Symbol">→</a> <a id="1805" href="Level.html#409" class="Record">Lift</a> <a id="1810" class="Symbol">_</a> <a id="1812" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
    <a id="1818" class="Symbol">.</a><a id="1819" href="Graded.Usage.Restrictions.html#1487" class="Field">Usage-restrictions.Erased-matches-for-K?</a> <a id="1860" class="Symbol">→</a> <a id="1862" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="1866" class="Symbol">_</a>
  <a id="1870" class="Keyword">where</a>
  <a id="1878" class="Keyword">open</a> <a id="1883" href="Graded.Usage.Restrictions.html#424" class="Module">Usage-restrictions</a>

<a id="1903" class="Comment">-- The function adds the restriction that the two quantities on a Π-</a>
<a id="1972" class="Comment">-- or Σ-type have to be equal.</a>

<a id="equal-binder-quantities"></a><a id="2004" href="Graded.Restrictions.html#2004" class="Function">equal-binder-quantities</a> <a id="2028" class="Symbol">:</a> <a id="2030" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a> <a id="2048" class="Symbol">→</a> <a id="2050" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a>
<a id="2068" href="Graded.Restrictions.html#2004" class="Function">equal-binder-quantities</a> <a id="2092" href="Graded.Restrictions.html#2092" class="Bound">R</a> <a id="2094" class="Symbol">=</a> <a id="2096" class="Keyword">record</a> <a id="2103" href="Graded.Restrictions.html#2092" class="Bound">R</a>
  <a id="2107" class="Symbol">{</a> <a id="2109" href="Definition.Typed.Restrictions.html#769" class="Field">ΠΣ-allowed</a>     <a id="2124" class="Symbol">=</a> <a id="2126" class="Symbol">λ</a> <a id="2128" href="Graded.Restrictions.html#2128" class="Bound">b</a> <a id="2130" href="Graded.Restrictions.html#2130" class="Bound">p</a> <a id="2132" href="Graded.Restrictions.html#2132" class="Bound">q</a> <a id="2134" class="Symbol">→</a> <a id="2136" href="Definition.Typed.Restrictions.html#769" class="Field">ΠΣ-allowed</a> <a id="2147" href="Graded.Restrictions.html#2128" class="Bound">b</a> <a id="2149" href="Graded.Restrictions.html#2130" class="Bound">p</a> <a id="2151" href="Graded.Restrictions.html#2132" class="Bound">q</a> <a id="2153" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2155" href="Graded.Restrictions.html#2130" class="Bound">p</a> <a id="2157" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2159" href="Graded.Restrictions.html#2132" class="Bound">q</a>
  <a id="2163" class="Symbol">;</a> <a id="2165" href="Definition.Typed.Restrictions.html#2245" class="Field">[]-cong→Erased</a> <a id="2180" class="Symbol">=</a> <a id="2182" class="Symbol">λ</a> <a id="2184" href="Graded.Restrictions.html#2184" class="Bound">ok</a> <a id="2187" class="Symbol">→</a>
      <a id="2195" href="Definition.Typed.Restrictions.html#2245" class="Field">[]-cong→Erased</a> <a id="2210" href="Graded.Restrictions.html#2184" class="Bound">ok</a> <a id="2213" class="Symbol">.</a><a id="2214" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2220" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2222" href="Definition.Typed.Restrictions.html#2245" class="Field">[]-cong→Erased</a> <a id="2237" href="Graded.Restrictions.html#2184" class="Bound">ok</a> <a id="2240" class="Symbol">.</a><a id="2241" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="2247" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2249" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="2256" class="Symbol">}</a>
  <a id="2260" class="Keyword">where</a>
  <a id="2268" class="Keyword">open</a> <a id="2273" href="Definition.Typed.Restrictions.html#524" class="Module">Type-restrictions</a> <a id="2291" href="Graded.Restrictions.html#2092" class="Bound">R</a>

<a id="2294" class="Comment">-- The function adds the restriction that the second quantities</a>
<a id="2358" class="Comment">-- associated with Π- and Σ-types are equal to 𝟘.</a>

<a id="second-ΠΣ-quantities-𝟘"></a><a id="2409" href="Graded.Restrictions.html#2409" class="Function">second-ΠΣ-quantities-𝟘</a> <a id="2432" class="Symbol">:</a>
  <a id="2436" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a> <a id="2454" class="Symbol">→</a> <a id="2456" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a>
<a id="2474" href="Graded.Restrictions.html#2409" class="Function">second-ΠΣ-quantities-𝟘</a> <a id="2497" href="Graded.Restrictions.html#2497" class="Bound">R</a> <a id="2499" class="Symbol">=</a> <a id="2501" class="Keyword">record</a> <a id="2508" href="Graded.Restrictions.html#2497" class="Bound">R</a>
  <a id="2512" class="Symbol">{</a> <a id="2514" href="Definition.Typed.Restrictions.html#769" class="Field">ΠΣ-allowed</a>     <a id="2529" class="Symbol">=</a> <a id="2531" class="Symbol">λ</a> <a id="2533" href="Graded.Restrictions.html#2533" class="Bound">b</a> <a id="2535" href="Graded.Restrictions.html#2535" class="Bound">p</a> <a id="2537" href="Graded.Restrictions.html#2537" class="Bound">q</a> <a id="2539" class="Symbol">→</a> <a id="2541" href="Definition.Typed.Restrictions.html#769" class="Field">ΠΣ-allowed</a> <a id="2552" href="Graded.Restrictions.html#2533" class="Bound">b</a> <a id="2554" href="Graded.Restrictions.html#2535" class="Bound">p</a> <a id="2556" href="Graded.Restrictions.html#2537" class="Bound">q</a> <a id="2558" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2560" href="Graded.Restrictions.html#2537" class="Bound">q</a> <a id="2562" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2564" href="Graded.Modality.html#847" class="Function">𝟘</a>
  <a id="2568" class="Symbol">;</a> <a id="2570" href="Definition.Typed.Restrictions.html#2245" class="Field">[]-cong→Erased</a> <a id="2585" class="Symbol">=</a> <a id="2587" class="Symbol">λ</a> <a id="2589" href="Graded.Restrictions.html#2589" class="Bound">ok</a> <a id="2592" class="Symbol">→</a>
      <a id="2600" href="Definition.Typed.Restrictions.html#2245" class="Field">[]-cong→Erased</a> <a id="2615" href="Graded.Restrictions.html#2589" class="Bound">ok</a> <a id="2618" class="Symbol">.</a><a id="2619" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2625" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2627" href="Definition.Typed.Restrictions.html#2245" class="Field">[]-cong→Erased</a> <a id="2642" href="Graded.Restrictions.html#2589" class="Bound">ok</a> <a id="2645" class="Symbol">.</a><a id="2646" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="2652" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2654" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="2661" class="Symbol">}</a>
  <a id="2665" class="Keyword">where</a>
  <a id="2673" class="Keyword">open</a> <a id="2678" href="Definition.Typed.Restrictions.html#524" class="Module">Type-restrictions</a> <a id="2696" href="Graded.Restrictions.html#2497" class="Bound">R</a>

<a id="2699" class="Comment">-- The function second-ΠΣ-quantities-𝟘-or-ω 𝕄 adds the restriction</a>
<a id="2766" class="Comment">-- that if the first quantity associated with a Π- or Σ-type is the ω</a>
<a id="2836" class="Comment">-- grade of 𝕄, then the second quantity is also ω, and if the first</a>
<a id="2904" class="Comment">-- quantity is not ω, then the second quantity is the 𝟘 of 𝕄.</a>

<a id="second-ΠΣ-quantities-𝟘-or-ω"></a><a id="2967" href="Graded.Restrictions.html#2967" class="Function">second-ΠΣ-quantities-𝟘-or-ω</a> <a id="2995" class="Symbol">:</a>
  <a id="2999" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a> <a id="3017" class="Symbol">→</a> <a id="3019" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a>
<a id="3037" href="Graded.Restrictions.html#2967" class="Function">second-ΠΣ-quantities-𝟘-or-ω</a> <a id="3065" href="Graded.Restrictions.html#3065" class="Bound">R</a> <a id="3067" class="Symbol">=</a> <a id="3069" class="Keyword">record</a> <a id="3076" href="Graded.Restrictions.html#3065" class="Bound">R</a>
  <a id="3080" class="Symbol">{</a> <a id="3082" href="Definition.Typed.Restrictions.html#769" class="Field">ΠΣ-allowed</a> <a id="3093" class="Symbol">=</a> <a id="3095" class="Symbol">λ</a> <a id="3097" href="Graded.Restrictions.html#3097" class="Bound">b</a> <a id="3099" href="Graded.Restrictions.html#3099" class="Bound">p</a> <a id="3101" href="Graded.Restrictions.html#3101" class="Bound">q</a> <a id="3103" class="Symbol">→</a>
      <a id="3111" href="Definition.Typed.Restrictions.html#769" class="Field">ΠΣ-allowed</a> <a id="3122" href="Graded.Restrictions.html#3097" class="Bound">b</a> <a id="3124" href="Graded.Restrictions.html#3099" class="Bound">p</a> <a id="3126" href="Graded.Restrictions.html#3101" class="Bound">q</a> <a id="3128" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
      <a id="3136" class="Symbol">(</a><a id="3137" href="Graded.Restrictions.html#3099" class="Bound">p</a> <a id="3139" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3141" href="Graded.Modality.html#851" class="Function">ω</a> <a id="3143" class="Symbol">→</a> <a id="3145" href="Graded.Restrictions.html#3101" class="Bound">q</a> <a id="3147" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3149" href="Graded.Modality.html#851" class="Function">ω</a><a id="3150" class="Symbol">)</a> <a id="3152" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
      <a id="3160" class="Symbol">(</a><a id="3161" href="Graded.Restrictions.html#3099" class="Bound">p</a> <a id="3163" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="3165" href="Graded.Modality.html#851" class="Function">ω</a> <a id="3167" class="Symbol">→</a> <a id="3169" href="Graded.Restrictions.html#3101" class="Bound">q</a> <a id="3171" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3173" href="Graded.Modality.html#847" class="Function">𝟘</a><a id="3174" class="Symbol">)</a>
  <a id="3178" class="Symbol">;</a> <a id="3180" href="Definition.Typed.Restrictions.html#2245" class="Field">[]-cong→Erased</a> <a id="3195" class="Symbol">=</a> <a id="3197" class="Symbol">λ</a> <a id="3199" href="Graded.Restrictions.html#3199" class="Bound">ok</a> <a id="3202" class="Symbol">→</a>
        <a id="3212" href="Definition.Typed.Restrictions.html#2245" class="Field">[]-cong→Erased</a> <a id="3227" href="Graded.Restrictions.html#3199" class="Bound">ok</a> <a id="3230" class="Symbol">.</a><a id="3231" href="Data.Product.Base.html#636" class="Field">proj₁</a>
      <a id="3243" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3245" href="Definition.Typed.Restrictions.html#2245" class="Field">[]-cong→Erased</a> <a id="3260" href="Graded.Restrictions.html#3199" class="Bound">ok</a> <a id="3263" class="Symbol">.</a><a id="3264" href="Data.Product.Base.html#650" class="Field">proj₂</a>
      <a id="3276" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3278" href="Function.Base.html#704" class="Function">idᶠ</a>
      <a id="3288" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3290" class="Symbol">λ</a> <a id="3292" href="Graded.Restrictions.html#3292" class="Bound">_</a> <a id="3294" class="Symbol">→</a> <a id="3296" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="3303" class="Symbol">}</a>
  <a id="3307" class="Keyword">where</a>
  <a id="3315" class="Keyword">open</a> <a id="3320" href="Definition.Typed.Restrictions.html#524" class="Module">Type-restrictions</a> <a id="3338" href="Graded.Restrictions.html#3065" class="Bound">R</a>

<a id="3341" class="Comment">-- The property of not allowing erased matches.</a>
<a id="3389" class="Comment">--</a>
<a id="3392" class="Comment">-- &quot;Erased&quot; matches are allowed for trivial modalities.</a>

<a id="No-erased-matches"></a><a id="3449" href="Graded.Restrictions.html#3449" class="Function">No-erased-matches</a> <a id="3467" class="Symbol">:</a> <a id="3469" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a> <a id="3487" class="Symbol">→</a> <a id="3489" href="Graded.Usage.Restrictions.html#424" class="Record">Usage-restrictions</a> <a id="3508" class="Symbol">→</a> <a id="3510" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3514" href="Graded.Restrictions.html#256" class="Bound">a</a>
<a id="3516" href="Graded.Restrictions.html#3449" class="Function">No-erased-matches</a> <a id="3534" href="Graded.Restrictions.html#3534" class="Bound">TR</a> <a id="3537" href="Graded.Restrictions.html#3537" class="Bound">UR</a> <a id="3540" class="Symbol">=</a>
  <a id="3544" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="3546" href="Graded.Modality.html#1793" class="Function">Trivial</a> <a id="3554" class="Symbol">→</a>
  <a id="3558" class="Symbol">(∀</a> <a id="3561" class="Symbol">{</a><a id="3562" href="Graded.Restrictions.html#3562" class="Bound">r</a> <a id="3564" href="Graded.Restrictions.html#3564" class="Bound">p</a> <a id="3566" href="Graded.Restrictions.html#3566" class="Bound">q</a><a id="3567" class="Symbol">}</a> <a id="3569" class="Symbol">→</a> <a id="3571" href="Graded.Usage.Restrictions.html#577" class="Field">Prodrec-allowed</a> <a id="3587" href="Graded.Restrictions.html#3562" class="Bound">r</a> <a id="3589" href="Graded.Restrictions.html#3564" class="Bound">p</a> <a id="3591" href="Graded.Restrictions.html#3566" class="Bound">q</a> <a id="3593" class="Symbol">→</a> <a id="3595" href="Graded.Restrictions.html#3562" class="Bound">r</a> <a id="3597" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="3599" href="Graded.Modality.html#847" class="Function">𝟘</a><a id="3600" class="Symbol">)</a> <a id="3602" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
  <a id="3606" class="Symbol">(∀</a> <a id="3609" class="Symbol">{</a><a id="3610" href="Graded.Restrictions.html#3610" class="Bound">p</a> <a id="3612" href="Graded.Restrictions.html#3612" class="Bound">q</a><a id="3613" class="Symbol">}</a>   <a id="3617" class="Symbol">→</a> <a id="3619" href="Graded.Usage.Restrictions.html#703" class="Field">Unitrec-allowed</a> <a id="3635" href="Graded.Restrictions.html#3610" class="Bound">p</a> <a id="3637" href="Graded.Restrictions.html#3612" class="Bound">q</a>   <a id="3641" class="Symbol">→</a> <a id="3643" href="Graded.Restrictions.html#3610" class="Bound">p</a> <a id="3645" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="3647" href="Graded.Modality.html#847" class="Function">𝟘</a><a id="3648" class="Symbol">)</a> <a id="3650" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
  <a id="3654" class="Symbol">(∀</a> <a id="3657" class="Symbol">{</a><a id="3658" href="Graded.Restrictions.html#3658" class="Bound">s</a><a id="3659" class="Symbol">}</a> <a id="3661" class="Symbol">→</a> <a id="3663" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="3665" class="Symbol">(</a><a id="3666" href="Definition.Typed.Restrictions.html#2151" class="Function">[]-cong-allowed</a> <a id="3682" href="Graded.Restrictions.html#3658" class="Bound">s</a><a id="3683" class="Symbol">))</a> <a id="3686" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
  <a id="3690" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="3692" href="Graded.Usage.Restrictions.html#1122" class="Field">Erased-matches-for-J</a> <a id="3713" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
  <a id="3717" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="3719" href="Graded.Usage.Restrictions.html#1413" class="Field">Erased-matches-for-K</a>
  <a id="3742" class="Keyword">where</a>
  <a id="3750" class="Keyword">open</a> <a id="3755" href="Definition.Typed.Restrictions.html#524" class="Module">Type-restrictions</a> <a id="3773" href="Graded.Restrictions.html#3534" class="Bound">TR</a>
  <a id="3778" class="Keyword">open</a> <a id="3783" href="Graded.Usage.Restrictions.html#424" class="Module">Usage-restrictions</a> <a id="3802" href="Graded.Restrictions.html#3537" class="Bound">UR</a>

<a id="3806" class="Comment">-- The function adds the restriction that erased matches are not</a>
<a id="3871" class="Comment">-- allowed.</a>

<a id="no-erased-matches-TR"></a><a id="3884" href="Graded.Restrictions.html#3884" class="Function">no-erased-matches-TR</a> <a id="3905" class="Symbol">:</a> <a id="3907" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a> <a id="3925" class="Symbol">→</a> <a id="3927" href="Definition.Typed.Restrictions.html#524" class="Record">Type-restrictions</a>
<a id="3945" href="Graded.Restrictions.html#3884" class="Function">no-erased-matches-TR</a> <a id="3966" href="Graded.Restrictions.html#3966" class="Bound">TR</a> <a id="3969" class="Symbol">=</a> <a id="3971" class="Keyword">record</a> <a id="3978" href="Graded.Restrictions.html#3966" class="Bound">TR</a>
  <a id="3983" class="Symbol">{</a> <a id="3985" href="Definition.Typed.Restrictions.html#2151" class="Field">[]-cong-allowed</a>  <a id="4002" class="Symbol">=</a> <a id="4004" class="Symbol">λ</a> <a id="4006" href="Graded.Restrictions.html#4006" class="Bound">_</a> <a id="4008" class="Symbol">→</a> <a id="4010" href="Level.html#409" class="Record">Lift</a> <a id="4015" class="Symbol">_</a> <a id="4017" href="Data.Empty.html#895" class="Function">⊥</a>
  <a id="4021" class="Symbol">;</a> <a id="4023" href="Definition.Typed.Restrictions.html#2245" class="Field">[]-cong→Erased</a>   <a id="4040" class="Symbol">=</a> <a id="4042" class="Symbol">λ</a> <a id="4044" class="Symbol">()</a>
  <a id="4049" class="Symbol">;</a> <a id="4051" href="Definition.Typed.Restrictions.html#2376" class="Field">[]-cong→¬Trivial</a> <a id="4068" class="Symbol">=</a> <a id="4070" class="Symbol">λ</a> <a id="4072" class="Symbol">()</a>
  <a id="4077" class="Symbol">}</a>
  <a id="4081" class="Keyword">where</a>
  <a id="4089" class="Keyword">open</a> <a id="4094" href="Definition.Typed.Restrictions.html#524" class="Module">Type-restrictions</a> <a id="4112" href="Graded.Restrictions.html#3966" class="Bound">TR</a>

<a id="4116" class="Comment">-- The function adds the restriction that erased matches are not</a>
<a id="4181" class="Comment">-- allowed (for prodrec and unitrec the restriction only applies</a>
<a id="4246" class="Comment">-- to non-trivial modalities).</a>

<a id="no-erased-matches-UR"></a><a id="4278" href="Graded.Restrictions.html#4278" class="Function">no-erased-matches-UR</a> <a id="4299" class="Symbol">:</a> <a id="4301" href="Graded.Usage.Restrictions.html#424" class="Record">Usage-restrictions</a> <a id="4320" class="Symbol">→</a> <a id="4322" href="Graded.Usage.Restrictions.html#424" class="Record">Usage-restrictions</a>
<a id="4341" href="Graded.Restrictions.html#4278" class="Function">no-erased-matches-UR</a> <a id="4362" href="Graded.Restrictions.html#4362" class="Bound">UR</a> <a id="4365" class="Symbol">=</a> <a id="4367" class="Keyword">record</a> <a id="4374" href="Graded.Restrictions.html#4362" class="Bound">UR</a>
  <a id="4379" class="Symbol">{</a> <a id="4381" href="Graded.Usage.Restrictions.html#577" class="Field">Prodrec-allowed</a>       <a id="4403" class="Symbol">=</a> <a id="4405" class="Symbol">λ</a> <a id="4407" href="Graded.Restrictions.html#4407" class="Bound">r</a> <a id="4409" href="Graded.Restrictions.html#4409" class="Bound">p</a> <a id="4411" href="Graded.Restrictions.html#4411" class="Bound">q</a> <a id="4413" class="Symbol">→</a>
                              <a id="4445" href="Graded.Usage.Restrictions.html#577" class="Field">Prodrec-allowed</a> <a id="4461" href="Graded.Restrictions.html#4407" class="Bound">r</a> <a id="4463" href="Graded.Restrictions.html#4409" class="Bound">p</a> <a id="4465" href="Graded.Restrictions.html#4411" class="Bound">q</a> <a id="4467" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
                              <a id="4499" class="Symbol">(</a><a id="4500" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="4502" href="Graded.Modality.html#1793" class="Function">Trivial</a> <a id="4510" class="Symbol">→</a> <a id="4512" href="Graded.Restrictions.html#4407" class="Bound">r</a> <a id="4514" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="4516" href="Graded.Modality.html#847" class="Function">𝟘</a><a id="4517" class="Symbol">)</a>
  <a id="4521" class="Symbol">;</a> <a id="4523" href="Graded.Usage.Restrictions.html#703" class="Field">Unitrec-allowed</a>       <a id="4545" class="Symbol">=</a> <a id="4547" class="Symbol">λ</a> <a id="4549" href="Graded.Restrictions.html#4549" class="Bound">p</a> <a id="4551" href="Graded.Restrictions.html#4551" class="Bound">q</a> <a id="4553" class="Symbol">→</a>
                              <a id="4585" href="Graded.Usage.Restrictions.html#703" class="Field">Unitrec-allowed</a> <a id="4601" href="Graded.Restrictions.html#4549" class="Bound">p</a> <a id="4603" href="Graded.Restrictions.html#4551" class="Bound">q</a> <a id="4605" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
                              <a id="4637" class="Symbol">(</a><a id="4638" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬</a> <a id="4640" href="Graded.Modality.html#1793" class="Function">Trivial</a> <a id="4648" class="Symbol">→</a> <a id="4650" href="Graded.Restrictions.html#4549" class="Bound">p</a> <a id="4652" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="4654" href="Graded.Modality.html#847" class="Function">𝟘</a><a id="4655" class="Symbol">)</a>
  <a id="4659" class="Symbol">;</a> <a id="4661" href="Graded.Usage.Restrictions.html#1122" class="Field">Erased-matches-for-J</a>  <a id="4683" class="Symbol">=</a> <a id="4685" href="Level.html#409" class="Record">Lift</a> <a id="4690" class="Symbol">_</a> <a id="4692" href="Data.Empty.html#895" class="Function">⊥</a>
  <a id="4696" class="Symbol">;</a> <a id="4698" href="Graded.Usage.Restrictions.html#1196" class="Field">Erased-matches-for-J?</a> <a id="4720" class="Symbol">=</a> <a id="4722" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="4725" class="Symbol">(λ</a> <a id="4728" class="Symbol">())</a>
  <a id="4734" class="Symbol">;</a> <a id="4736" href="Graded.Usage.Restrictions.html#1413" class="Field">Erased-matches-for-K</a>  <a id="4758" class="Symbol">=</a> <a id="4760" href="Level.html#409" class="Record">Lift</a> <a id="4765" class="Symbol">_</a> <a id="4767" href="Data.Empty.html#895" class="Function">⊥</a>
  <a id="4771" class="Symbol">;</a> <a id="4773" href="Graded.Usage.Restrictions.html#1487" class="Field">Erased-matches-for-K?</a> <a id="4795" class="Symbol">=</a> <a id="4797" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="4800" class="Symbol">(λ</a> <a id="4803" class="Symbol">())</a>
  <a id="4809" class="Symbol">}</a>
  <a id="4813" class="Keyword">where</a>
  <a id="4821" class="Keyword">open</a> <a id="4826" href="Graded.Usage.Restrictions.html#424" class="Module">Usage-restrictions</a> <a id="4845" href="Graded.Restrictions.html#4362" class="Bound">UR</a>

<a id="4849" class="Comment">-- The restrictions obtained from no-erased-matches-TR and</a>
<a id="4908" class="Comment">-- no-erased-matches-UR satisfy No-erased-matches.</a>

<a id="No-erased-matches-no-erased-matches"></a><a id="4960" href="Graded.Restrictions.html#4960" class="Function">No-erased-matches-no-erased-matches</a> <a id="4996" class="Symbol">:</a>
  <a id="5000" class="Symbol">∀</a> <a id="5002" href="Graded.Restrictions.html#5002" class="Bound">TR</a> <a id="5005" href="Graded.Restrictions.html#5005" class="Bound">UR</a> <a id="5008" class="Symbol">→</a>
  <a id="5012" href="Graded.Restrictions.html#3449" class="Function">No-erased-matches</a> <a id="5030" class="Symbol">(</a><a id="5031" href="Graded.Restrictions.html#3884" class="Function">no-erased-matches-TR</a> <a id="5052" href="Graded.Restrictions.html#5002" class="Bound">TR</a><a id="5054" class="Symbol">)</a> <a id="5056" class="Symbol">(</a><a id="5057" href="Graded.Restrictions.html#4278" class="Function">no-erased-matches-UR</a> <a id="5078" href="Graded.Restrictions.html#5005" class="Bound">UR</a><a id="5080" class="Symbol">)</a>
<a id="5082" href="Graded.Restrictions.html#4960" class="Function">No-erased-matches-no-erased-matches</a> <a id="5118" class="Symbol">_</a> <a id="5120" class="Symbol">_</a> <a id="5122" href="Graded.Restrictions.html#5122" class="Bound">𝟙≢𝟘</a> <a id="5126" class="Symbol">=</a>
  <a id="5130" class="Symbol">(</a><a id="5131" href="Function.Base.html#1974" class="Function Operator">_$</a> <a id="5134" href="Graded.Restrictions.html#5122" class="Bound">𝟙≢𝟘</a><a id="5137" class="Symbol">)</a> <a id="5139" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5142" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="5148" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5150" class="Symbol">(</a><a id="5151" href="Function.Base.html#1974" class="Function Operator">_$</a> <a id="5154" href="Graded.Restrictions.html#5122" class="Bound">𝟙≢𝟘</a><a id="5157" class="Symbol">)</a> <a id="5159" href="Function.Base.html#1115" class="Function Operator">∘→</a> <a id="5162" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="5168" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5170" class="Symbol">(λ</a> <a id="5173" class="Symbol">())</a> <a id="5177" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5179" class="Symbol">(λ</a> <a id="5182" class="Symbol">())</a> <a id="5186" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5188" class="Symbol">(λ</a> <a id="5191" class="Symbol">())</a>
</pre></body></html>