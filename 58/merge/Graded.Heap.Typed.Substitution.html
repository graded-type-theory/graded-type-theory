<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Graded.Heap.Typed.Substitution</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Properties of well-formed heaps as substitutions</a>
<a id="126" class="Comment">------------------------------------------------------------------------</a>

<a id="200" class="Keyword">open</a> <a id="205" class="Keyword">import</a> <a id="212" href="Graded.Modality.html" class="Module">Graded.Modality</a>
<a id="228" class="Keyword">open</a> <a id="233" class="Keyword">import</a> <a id="240" href="Graded.Usage.Restrictions.html" class="Module">Graded.Usage.Restrictions</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Definition.Typed.Restrictions.html" class="Module">Definition.Typed.Restrictions</a>

<a id="309" class="Keyword">module</a> <a id="316" href="Graded.Heap.Typed.Substitution.html" class="Module">Graded.Heap.Typed.Substitution</a>
  <a id="349" class="Symbol">{</a><a id="350" href="Graded.Heap.Typed.Substitution.html#350" class="Bound">a</a><a id="351" class="Symbol">}</a> <a id="353" class="Symbol">{</a><a id="354" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a> <a id="356" class="Symbol">:</a> <a id="358" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="362" href="Graded.Heap.Typed.Substitution.html#350" class="Bound">a</a><a id="363" class="Symbol">}</a> <a id="365" class="Symbol">{</a><a id="366" href="Graded.Heap.Typed.Substitution.html#366" class="Bound">𝕄</a> <a id="368" class="Symbol">:</a> <a id="370" href="Graded.Modality.html#8202" class="Record">Modality</a> <a id="379" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a><a id="380" class="Symbol">}</a>
  <a id="384" class="Symbol">(</a><a id="385" href="Graded.Heap.Typed.Substitution.html#385" class="Bound">UR</a> <a id="388" class="Symbol">:</a> <a id="390" href="Graded.Usage.Restrictions.html#750" class="Record">Usage-restrictions</a> <a id="409" href="Graded.Heap.Typed.Substitution.html#366" class="Bound">𝕄</a><a id="410" class="Symbol">)</a>
  <a id="414" class="Symbol">(</a><a id="415" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a> <a id="418" class="Symbol">:</a> <a id="420" href="Definition.Typed.Restrictions.html#752" class="Record">Type-restrictions</a> <a id="438" href="Graded.Heap.Typed.Substitution.html#366" class="Bound">𝕄</a><a id="439" class="Symbol">)</a>
  <a id="443" class="Keyword">where</a>

<a id="450" class="Keyword">open</a> <a id="455" href="Definition.Typed.Restrictions.html#752" class="Module">Type-restrictions</a> <a id="473" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>

<a id="477" class="Keyword">open</a> <a id="482" class="Keyword">import</a> <a id="489" href="Definition.Untyped.html" class="Module">Definition.Untyped</a> <a id="508" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a>
<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Definition.Untyped.Properties.html" class="Module">Definition.Untyped.Properties</a> <a id="552" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a>
<a id="554" class="Keyword">open</a> <a id="559" class="Keyword">import</a> <a id="566" href="Definition.Typed.html" class="Module">Definition.Typed</a> <a id="583" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>
<a id="586" class="Keyword">open</a> <a id="591" class="Keyword">import</a> <a id="598" href="Definition.Typed.Properties.html" class="Module">Definition.Typed.Properties</a> <a id="626" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>
<a id="629" class="Keyword">open</a> <a id="634" class="Keyword">import</a> <a id="641" href="Definition.Typed.Consequences.Substitution.html" class="Module">Definition.Typed.Consequences.Substitution</a> <a id="684" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>

<a id="688" class="Keyword">open</a> <a id="693" class="Keyword">import</a> <a id="700" href="Graded.Heap.Typed.html" class="Module">Graded.Heap.Typed</a> <a id="718" href="Graded.Heap.Typed.Substitution.html#385" class="Bound">UR</a> <a id="721" href="Graded.Heap.Typed.Substitution.html#415" class="Bound">TR</a>
<a id="724" class="Keyword">open</a> <a id="729" class="Keyword">import</a> <a id="736" href="Graded.Heap.Untyped.html" class="Module">Graded.Heap.Untyped</a> <a id="756" href="Definition.Typed.Restrictions.html#876" class="Field">type-variant</a> <a id="769" href="Graded.Heap.Typed.Substitution.html#385" class="Bound">UR</a>

<a id="773" class="Keyword">import</a> <a id="780" href="Tools.PropositionalEquality.html" class="Module">Tools.PropositionalEquality</a> <a id="808" class="Symbol">as</a> <a id="811" class="Module">PE</a>

<a id="815" class="Keyword">private</a> <a id="823" class="Keyword">variable</a>
  <a id="834" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="836" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="838" class="Symbol">:</a> <a id="840" href="Definition.Untyped.NotParametrised.html#882" class="Datatype">Con</a> <a id="844" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="849" class="Symbol">_</a>
  <a id="853" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="855" href="Graded.Heap.Typed.Substitution.html#855" class="Generalizable">H′</a> <a id="858" class="Symbol">:</a> <a id="860" href="Graded.Heap.Untyped.html#5903" class="Datatype">Heap</a> <a id="865" class="Symbol">_</a> <a id="867" class="Symbol">_</a>
  <a id="871" href="Graded.Heap.Typed.Substitution.html#871" class="Generalizable">ρ</a> <a id="873" class="Symbol">:</a> <a id="875" href="Definition.Untyped.NotParametrised.html#2601" class="Datatype">Wk</a> <a id="878" class="Symbol">_</a> <a id="880" class="Symbol">_</a>
  <a id="884" href="Graded.Heap.Typed.Substitution.html#884" class="Generalizable">t</a> <a id="886" href="Graded.Heap.Typed.Substitution.html#886" class="Generalizable">u</a> <a id="888" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">A</a> <a id="890" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">B</a> <a id="892" class="Symbol">:</a> <a id="894" href="Definition.Untyped.html#1160" class="Datatype">Term</a> <a id="899" class="Symbol">_</a>
  <a id="903" href="Graded.Heap.Typed.Substitution.html#903" class="Generalizable">y</a> <a id="905" class="Symbol">:</a> <a id="907" href="Graded.Heap.Untyped.html#1264" class="Function">Ptr</a> <a id="911" class="Symbol">_</a>
  <a id="915" href="Graded.Heap.Typed.Substitution.html#915" class="Generalizable">c</a> <a id="917" class="Symbol">:</a> <a id="919" href="Graded.Heap.Untyped.html#1496" class="Function">Entry</a> <a id="925" class="Symbol">_</a> <a id="927" class="Symbol">_</a>
  <a id="931" href="Graded.Heap.Typed.Substitution.html#931" class="Generalizable">p</a> <a id="933" class="Symbol">:</a> <a id="935" href="Graded.Heap.Typed.Substitution.html#354" class="Bound">M</a>
  <a id="939" href="Graded.Heap.Typed.Substitution.html#939" class="Generalizable">e</a> <a id="941" class="Symbol">:</a> <a id="943" href="Graded.Heap.Untyped.html#2043" class="Datatype">Elim</a> <a id="948" class="Symbol">_</a>
  <a id="952" href="Graded.Heap.Typed.Substitution.html#952" class="Generalizable">S</a> <a id="954" class="Symbol">:</a> <a id="956" href="Graded.Heap.Untyped.html#4634" class="Datatype">Stack</a> <a id="962" class="Symbol">_</a>
  <a id="966" href="Graded.Heap.Typed.Substitution.html#966" class="Generalizable">σ</a> <a id="968" class="Symbol">:</a> <a id="970" href="Definition.Untyped.html#11525" class="Function">Subst</a> <a id="976" class="Symbol">_</a> <a id="978" class="Symbol">_</a>

<a id="981" class="Keyword">opaque</a> <a id="988" class="Keyword">mutual</a>

  <a id="998" class="Comment">-- A well-formed heap is a well-formed substitution</a>

  <a id="⊢ʰ→⊢ˢ"></a><a id="1053" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="1059" class="Symbol">:</a> <a id="1061" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="1063" href="Graded.Heap.Typed.html#971" class="Datatype Operator">⊢ʰ</a> <a id="1066" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="1068" href="Graded.Heap.Typed.html#971" class="Datatype Operator">∷</a> <a id="1070" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="1072" class="Symbol">→</a> <a id="1074" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="1076" href="Definition.Typed.html#20885" class="Datatype Operator">⊢ˢ</a> <a id="1079" href="Graded.Heap.Untyped.html#7769" class="Function">toSubstₕ</a> <a id="1088" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="1090" href="Definition.Typed.html#20885" class="Datatype Operator">∷</a> <a id="1092" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a>
  <a id="1096" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="1102" href="Graded.Heap.Typed.html#1045" class="InductiveConstructor">ε</a> <a id="1104" class="Symbol">=</a> <a id="1106" href="Definition.Typed.html#20971" class="InductiveConstructor">id</a>
  <a id="1111" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="1117" class="Symbol">(</a><a id="1118" href="Graded.Heap.Typed.Substitution.html#1118" class="Bound">⊢H</a> <a id="1121" href="Graded.Heap.Typed.html#1062" class="InductiveConstructor Operator">∙</a> <a id="1123" href="Graded.Heap.Typed.Substitution.html#1123" class="Bound">⊢t</a><a id="1125" class="Symbol">)</a> <a id="1127" class="Symbol">=</a>
    <a id="1133" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="1139" href="Graded.Heap.Typed.Substitution.html#1118" class="Bound">⊢H</a> <a id="1142" href="Definition.Typed.html#20990" class="InductiveConstructor Operator">,</a> <a id="1144" href="Graded.Heap.Typed.Substitution.html#1123" class="Bound">⊢t</a>
  <a id="1149" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="1155" class="Symbol">(</a><a id="1156" href="Graded.Heap.Typed.html#1143" class="InductiveConstructor Operator">_∙●_</a> <a id="1161" class="Symbol">{</a><a id="1162" href="Graded.Heap.Typed.Substitution.html#1162" class="Bound">Δ</a><a id="1163" class="Symbol">}</a> <a id="1165" class="Symbol">{</a><a id="1166" href="Graded.Heap.Typed.Substitution.html#1166" class="Bound">H</a><a id="1167" class="Symbol">}</a> <a id="1169" class="Symbol">{</a><a id="1170" href="Graded.Heap.Typed.Substitution.html#1170" class="Bound">A</a><a id="1171" class="Symbol">}</a> <a id="1173" href="Graded.Heap.Typed.Substitution.html#1173" class="Bound">⊢H</a> <a id="1176" href="Graded.Heap.Typed.Substitution.html#1176" class="Bound">⊢A</a><a id="1178" class="Symbol">)</a> <a id="1180" class="Symbol">=</a>
    <a id="1186" class="Keyword">let</a> <a id="1190" href="Graded.Heap.Typed.Substitution.html#1190" class="Bound">⊢σ</a> <a id="1193" class="Symbol">=</a> <a id="1195" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="1201" href="Graded.Heap.Typed.Substitution.html#1173" class="Bound">⊢H</a>
        <a id="1212" href="Graded.Heap.Typed.Substitution.html#1212" class="Bound">⊢Δ</a> <a id="1215" class="Symbol">=</a> <a id="1217" href="Graded.Heap.Typed.Substitution.html#1432" class="Function">wfHeap</a> <a id="1224" href="Graded.Heap.Typed.Substitution.html#1173" class="Bound">⊢H</a>
        <a id="1235" href="Graded.Heap.Typed.Substitution.html#1235" class="Bound">⊢σA</a> <a id="1239" class="Symbol">=</a> <a id="1241" href="Definition.Typed.Consequences.Substitution.html#1294" class="Function">substitution</a> <a id="1254" href="Graded.Heap.Typed.Substitution.html#1176" class="Bound">⊢A</a> <a id="1257" href="Graded.Heap.Typed.Substitution.html#1190" class="Bound">⊢σ</a> <a id="1260" href="Graded.Heap.Typed.Substitution.html#1212" class="Bound">⊢Δ</a>
    <a id="1267" class="Keyword">in</a>    <a id="1273" href="Definition.Typed.Consequences.Substitution.html#2811" class="Function">wk1Subst′</a> <a id="1283" href="Graded.Heap.Typed.Substitution.html#1235" class="Bound">⊢σA</a> <a id="1287" href="Graded.Heap.Typed.Substitution.html#1190" class="Bound">⊢σ</a>
        <a id="1298" href="Definition.Typed.html#20990" class="InductiveConstructor Operator">,</a> <a id="1300" href="Definition.Typed.html#2225" class="InductiveConstructor">var</a> <a id="1304" class="Symbol">(</a><a id="1305" href="Graded.Heap.Typed.Substitution.html#1212" class="Bound">⊢Δ</a> <a id="1308" href="Definition.Typed.html#1232" class="InductiveConstructor Operator">∙</a> <a id="1310" href="Graded.Heap.Typed.Substitution.html#1235" class="Bound">⊢σA</a><a id="1313" class="Symbol">)</a> <a id="1315" class="Symbol">(</a><a id="1316" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">PE.subst</a> <a id="1325" class="Symbol">(</a><a id="1326" href="Graded.Heap.Untyped.html#1299" class="InductiveConstructor">y0</a> <a id="1329" href="Definition.Typed.html#989" class="Datatype Operator">∷_∈</a> <a id="1333" href="Graded.Heap.Typed.Substitution.html#1162" class="Bound">Δ</a> <a id="1335" href="Definition.Untyped.NotParametrised.html#995" class="InductiveConstructor Operator">∙</a> <a id="1337" href="Graded.Heap.Typed.Substitution.html#1170" class="Bound">A</a> <a id="1339" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1341" href="Graded.Heap.Typed.Substitution.html#1166" class="Bound">H</a> <a id="1343" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a><a id="1345" class="Symbol">)</a> <a id="1347" class="Symbol">(</a><a id="1348" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">PE.sym</a> <a id="1355" class="Symbol">(</a><a id="1356" href="Definition.Untyped.Properties.html#23115" class="Function">wk1Subst-wk1</a> <a id="1369" href="Graded.Heap.Typed.Substitution.html#1170" class="Bound">A</a><a id="1370" class="Symbol">))</a> <a id="1373" href="Definition.Typed.html#1055" class="InductiveConstructor">here</a><a id="1377" class="Symbol">)</a>

  <a id="1382" class="Comment">-- Well-formed contexts from well-formed heaps</a>

  <a id="wfHeap"></a><a id="1432" href="Graded.Heap.Typed.Substitution.html#1432" class="Function">wfHeap</a> <a id="1439" class="Symbol">:</a> <a id="1441" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="1443" href="Graded.Heap.Typed.html#971" class="Datatype Operator">⊢ʰ</a> <a id="1446" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="1448" href="Graded.Heap.Typed.html#971" class="Datatype Operator">∷</a> <a id="1450" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="1452" class="Symbol">→</a> <a id="1454" href="Definition.Typed.html#1184" class="Datatype Operator">⊢</a> <a id="1456" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a>
  <a id="1460" href="Graded.Heap.Typed.Substitution.html#1432" class="Function">wfHeap</a> <a id="1467" class="Symbol">{</a><a id="1468" class="Argument">Δ</a> <a id="1470" class="Symbol">=</a> <a id="1472" href="Definition.Untyped.NotParametrised.html#926" class="InductiveConstructor">ε</a><a id="1473" class="Symbol">}</a> <a id="1475" href="Graded.Heap.Typed.html#1045" class="InductiveConstructor">ε</a> <a id="1477" class="Symbol">=</a> <a id="1479" href="Definition.Typed.html#1218" class="InductiveConstructor">ε</a>
  <a id="1483" href="Graded.Heap.Typed.Substitution.html#1432" class="CatchallClause Function">wfHeap</a><a id="1489" class="CatchallClause"> </a><a id="1490" class="CatchallClause Symbol">(</a><a id="1491" href="Graded.Heap.Typed.Substitution.html#1491" class="CatchallClause Bound">⊢H</a><a id="1493" class="CatchallClause"> </a><a id="1494" href="Graded.Heap.Typed.html#1062" class="CatchallClause InductiveConstructor Operator">∙</a><a id="1495" class="CatchallClause"> </a><a id="1496" href="Graded.Heap.Typed.Substitution.html#1496" class="CatchallClause Bound">⊢t</a><a id="1498" class="CatchallClause Symbol">)</a> <a id="1500" class="Symbol">=</a> <a id="1502" href="Graded.Heap.Typed.Substitution.html#1432" class="Function">wfHeap</a> <a id="1509" href="Graded.Heap.Typed.Substitution.html#1491" class="Bound">⊢H</a>
  <a id="1514" href="Graded.Heap.Typed.Substitution.html#1432" class="Function">wfHeap</a> <a id="1521" class="Symbol">(</a><a id="1522" href="Graded.Heap.Typed.Substitution.html#1522" class="Bound">⊢H</a> <a id="1525" href="Graded.Heap.Typed.html#1143" class="InductiveConstructor Operator">∙●</a> <a id="1528" href="Graded.Heap.Typed.Substitution.html#1528" class="Bound">⊢A</a><a id="1530" class="Symbol">)</a> <a id="1532" class="Symbol">=</a>
    <a id="1538" class="Keyword">let</a> <a id="1542" href="Graded.Heap.Typed.Substitution.html#1542" class="Bound">⊢Δ</a> <a id="1545" class="Symbol">=</a> <a id="1547" href="Graded.Heap.Typed.Substitution.html#1432" class="Function">wfHeap</a> <a id="1554" href="Graded.Heap.Typed.Substitution.html#1522" class="Bound">⊢H</a>
    <a id="1561" class="Keyword">in</a>  <a id="1565" href="Graded.Heap.Typed.Substitution.html#1542" class="Bound">⊢Δ</a> <a id="1568" href="Definition.Typed.html#1232" class="InductiveConstructor Operator">∙</a> <a id="1570" href="Definition.Typed.Consequences.Substitution.html#1294" class="Function">substitution</a> <a id="1583" href="Graded.Heap.Typed.Substitution.html#1528" class="Bound">⊢A</a> <a id="1586" class="Symbol">(</a><a id="1587" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="1593" href="Graded.Heap.Typed.Substitution.html#1522" class="Bound">⊢H</a><a id="1595" class="Symbol">)</a> <a id="1597" href="Graded.Heap.Typed.Substitution.html#1542" class="Bound">⊢Δ</a>

<a id="1601" class="Keyword">opaque</a>

  <a id="1611" class="Comment">-- A well-formed type applied to a well-formed heap (as a substitution)</a>
  <a id="1685" class="Comment">-- is well-formed</a>

  <a id="substHeap"></a><a id="1706" href="Graded.Heap.Typed.Substitution.html#1706" class="Function">substHeap</a> <a id="1716" class="Symbol">:</a> <a id="1718" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="1720" href="Graded.Heap.Typed.html#971" class="Datatype Operator">⊢ʰ</a> <a id="1723" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="1725" href="Graded.Heap.Typed.html#971" class="Datatype Operator">∷</a> <a id="1727" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="1729" class="Symbol">→</a> <a id="1731" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="1733" href="Definition.Typed.html#1306" class="Datatype Operator">⊢</a> <a id="1735" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">A</a> <a id="1737" class="Symbol">→</a> <a id="1739" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="1741" href="Definition.Typed.html#1306" class="Datatype Operator">⊢</a> <a id="1743" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">A</a> <a id="1745" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1747" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="1749" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="1754" href="Graded.Heap.Typed.Substitution.html#1706" class="Function">substHeap</a> <a id="1764" href="Graded.Heap.Typed.Substitution.html#1764" class="Bound">⊢H</a> <a id="1767" href="Graded.Heap.Typed.Substitution.html#1767" class="Bound">⊢A</a> <a id="1770" class="Symbol">=</a>
    <a id="1776" href="Definition.Typed.Consequences.Substitution.html#1294" class="Function">substitution</a> <a id="1789" href="Graded.Heap.Typed.Substitution.html#1767" class="Bound">⊢A</a> <a id="1792" class="Symbol">(</a><a id="1793" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="1799" href="Graded.Heap.Typed.Substitution.html#1764" class="Bound">⊢H</a><a id="1801" class="Symbol">)</a> <a id="1803" class="Symbol">(</a><a id="1804" href="Graded.Heap.Typed.Substitution.html#1432" class="Function">wfHeap</a> <a id="1811" href="Graded.Heap.Typed.Substitution.html#1764" class="Bound">⊢H</a><a id="1813" class="Symbol">)</a>

<a id="1816" class="Keyword">opaque</a>

  <a id="1826" class="Comment">-- A well-formed term applied to a well-formed heap (as a substitution)</a>
  <a id="1900" class="Comment">-- is well-formed</a>

  <a id="substHeapTerm"></a><a id="1921" href="Graded.Heap.Typed.Substitution.html#1921" class="Function">substHeapTerm</a> <a id="1935" class="Symbol">:</a> <a id="1937" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="1939" href="Graded.Heap.Typed.html#971" class="Datatype Operator">⊢ʰ</a> <a id="1942" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="1944" href="Graded.Heap.Typed.html#971" class="Datatype Operator">∷</a> <a id="1946" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="1948" class="Symbol">→</a> <a id="1950" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="1952" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="1954" href="Graded.Heap.Typed.Substitution.html#884" class="Generalizable">t</a> <a id="1956" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="1958" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">A</a> <a id="1960" class="Symbol">→</a> <a id="1962" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="1964" href="Definition.Typed.html#1755" class="Datatype Operator">⊢</a> <a id="1966" href="Graded.Heap.Typed.Substitution.html#884" class="Generalizable">t</a> <a id="1968" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1970" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="1972" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="1975" href="Definition.Typed.html#1755" class="Datatype Operator">∷</a> <a id="1977" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">A</a> <a id="1979" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="1981" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="1983" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="1988" href="Graded.Heap.Typed.Substitution.html#1921" class="Function">substHeapTerm</a> <a id="2002" href="Graded.Heap.Typed.Substitution.html#2002" class="Bound">⊢H</a> <a id="2005" href="Graded.Heap.Typed.Substitution.html#2005" class="Bound">⊢t</a> <a id="2008" class="Symbol">=</a>
    <a id="2014" href="Definition.Typed.Consequences.Substitution.html#1788" class="Function">substitutionTerm</a> <a id="2031" href="Graded.Heap.Typed.Substitution.html#2005" class="Bound">⊢t</a> <a id="2034" class="Symbol">(</a><a id="2035" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="2041" href="Graded.Heap.Typed.Substitution.html#2002" class="Bound">⊢H</a><a id="2043" class="Symbol">)</a> <a id="2045" class="Symbol">(</a><a id="2046" href="Graded.Heap.Typed.Substitution.html#1432" class="Function">wfHeap</a> <a id="2053" href="Graded.Heap.Typed.Substitution.html#2002" class="Bound">⊢H</a><a id="2055" class="Symbol">)</a>

<a id="2058" class="Keyword">opaque</a>

  <a id="2068" class="Comment">-- A well-formed type equality applied to a well-formed heap</a>
  <a id="2131" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEq"></a><a id="2172" href="Graded.Heap.Typed.Substitution.html#2172" class="Function">substHeapEq</a> <a id="2184" class="Symbol">:</a> <a id="2186" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="2188" href="Graded.Heap.Typed.html#971" class="Datatype Operator">⊢ʰ</a> <a id="2191" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="2193" href="Graded.Heap.Typed.html#971" class="Datatype Operator">∷</a> <a id="2195" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="2197" class="Symbol">→</a> <a id="2199" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="2201" href="Definition.Typed.html#4865" class="Datatype Operator">⊢</a> <a id="2203" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">A</a> <a id="2205" href="Definition.Typed.html#4865" class="Datatype Operator">≡</a> <a id="2207" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">B</a> <a id="2209" class="Symbol">→</a> <a id="2211" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="2213" href="Definition.Typed.html#4865" class="Datatype Operator">⊢</a> <a id="2215" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">A</a> <a id="2217" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2219" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="2221" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2224" href="Definition.Typed.html#4865" class="Datatype Operator">≡</a> <a id="2226" href="Graded.Heap.Typed.Substitution.html#890" class="Generalizable">B</a> <a id="2228" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2230" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="2232" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="2237" href="Graded.Heap.Typed.Substitution.html#2172" class="Function">substHeapEq</a> <a id="2249" href="Graded.Heap.Typed.Substitution.html#2249" class="Bound">⊢H</a> <a id="2252" href="Graded.Heap.Typed.Substitution.html#2252" class="Bound">⊢A≡B</a> <a id="2257" class="Symbol">=</a>
    <a id="2263" href="Definition.Typed.Consequences.Substitution.html#1518" class="Function">substitutionEq</a> <a id="2278" href="Graded.Heap.Typed.Substitution.html#2252" class="Bound">⊢A≡B</a> <a id="2283" class="Symbol">(</a><a id="2284" href="Definition.Typed.Consequences.Substitution.html#2347" class="Function">substRefl</a> <a id="2294" class="Symbol">(</a><a id="2295" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="2301" href="Graded.Heap.Typed.Substitution.html#2249" class="Bound">⊢H</a><a id="2303" class="Symbol">))</a> <a id="2306" class="Symbol">(</a><a id="2307" href="Graded.Heap.Typed.Substitution.html#1432" class="Function">wfHeap</a> <a id="2314" href="Graded.Heap.Typed.Substitution.html#2249" class="Bound">⊢H</a><a id="2316" class="Symbol">)</a>

<a id="2319" class="Keyword">opaque</a>

  <a id="2329" class="Comment">-- A well-formed term equality  applied to a well-formed heap</a>
  <a id="2393" class="Comment">-- (as a substitution) is well-formed</a>

  <a id="substHeapEqTerm"></a><a id="2434" href="Graded.Heap.Typed.Substitution.html#2434" class="Function">substHeapEqTerm</a> <a id="2450" class="Symbol">:</a> <a id="2452" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="2454" href="Graded.Heap.Typed.html#971" class="Datatype Operator">⊢ʰ</a> <a id="2457" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="2459" href="Graded.Heap.Typed.html#971" class="Datatype Operator">∷</a> <a id="2461" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="2463" class="Symbol">→</a> <a id="2465" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="2467" href="Definition.Typed.html#5482" class="Datatype Operator">⊢</a> <a id="2469" href="Graded.Heap.Typed.Substitution.html#884" class="Generalizable">t</a> <a id="2471" href="Definition.Typed.html#5482" class="Datatype Operator">≡</a> <a id="2473" href="Graded.Heap.Typed.Substitution.html#886" class="Generalizable">u</a> <a id="2475" href="Definition.Typed.html#5482" class="Datatype Operator">∷</a> <a id="2477" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">A</a>
                  <a id="2497" class="Symbol">→</a> <a id="2499" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="2501" href="Definition.Typed.html#5482" class="Datatype Operator">⊢</a> <a id="2503" href="Graded.Heap.Typed.Substitution.html#884" class="Generalizable">t</a> <a id="2505" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2507" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="2509" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2512" href="Definition.Typed.html#5482" class="Datatype Operator">≡</a> <a id="2514" href="Graded.Heap.Typed.Substitution.html#886" class="Generalizable">u</a> <a id="2516" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2518" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="2520" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2523" href="Definition.Typed.html#5482" class="Datatype Operator">∷</a> <a id="2525" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">A</a> <a id="2527" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2529" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="2531" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="2536" href="Graded.Heap.Typed.Substitution.html#2434" class="Function">substHeapEqTerm</a> <a id="2552" href="Graded.Heap.Typed.Substitution.html#2552" class="Bound">⊢H</a> <a id="2555" href="Graded.Heap.Typed.Substitution.html#2555" class="Bound">⊢t≡u</a> <a id="2560" class="Symbol">=</a>
    <a id="2566" href="Definition.Typed.Consequences.Substitution.html#2048" class="Function">substitutionEqTerm</a> <a id="2585" href="Graded.Heap.Typed.Substitution.html#2555" class="Bound">⊢t≡u</a> <a id="2590" class="Symbol">(</a><a id="2591" href="Definition.Typed.Consequences.Substitution.html#2347" class="Function">substRefl</a> <a id="2601" class="Symbol">(</a><a id="2602" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="2608" href="Graded.Heap.Typed.Substitution.html#2552" class="Bound">⊢H</a><a id="2610" class="Symbol">))</a> <a id="2613" class="Symbol">(</a><a id="2614" href="Graded.Heap.Typed.Substitution.html#1432" class="Function">wfHeap</a> <a id="2621" href="Graded.Heap.Typed.Substitution.html#2552" class="Bound">⊢H</a><a id="2623" class="Symbol">)</a>

<a id="2626" class="Keyword">opaque</a>

  <a id="2636" class="Comment">-- Applying a well-formed heap as a substitution to a reduction</a>

  <a id="substHeapRedTerm"></a><a id="2703" href="Graded.Heap.Typed.Substitution.html#2703" class="Function">substHeapRedTerm</a> <a id="2720" class="Symbol">:</a> <a id="2722" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="2724" href="Graded.Heap.Typed.html#971" class="Datatype Operator">⊢ʰ</a> <a id="2727" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="2729" href="Graded.Heap.Typed.html#971" class="Datatype Operator">∷</a> <a id="2731" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="2733" class="Symbol">→</a> <a id="2735" href="Graded.Heap.Typed.Substitution.html#834" class="Generalizable">Γ</a> <a id="2737" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="2739" href="Graded.Heap.Typed.Substitution.html#884" class="Generalizable">t</a> <a id="2741" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="2743" href="Graded.Heap.Typed.Substitution.html#886" class="Generalizable">u</a> <a id="2745" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="2747" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">A</a>
                   <a id="2768" class="Symbol">→</a> <a id="2770" href="Graded.Heap.Typed.Substitution.html#836" class="Generalizable">Δ</a> <a id="2772" href="Definition.Typed.html#13356" class="Datatype Operator">⊢</a> <a id="2774" href="Graded.Heap.Typed.Substitution.html#884" class="Generalizable">t</a> <a id="2776" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2778" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="2780" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2783" href="Definition.Typed.html#13356" class="Datatype Operator">⇒</a> <a id="2785" href="Graded.Heap.Typed.Substitution.html#886" class="Generalizable">u</a> <a id="2787" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2789" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="2791" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a> <a id="2794" href="Definition.Typed.html#13356" class="Datatype Operator">∷</a> <a id="2796" href="Graded.Heap.Typed.Substitution.html#888" class="Generalizable">A</a> <a id="2798" href="Graded.Heap.Untyped.html#7996" class="Function Operator">[</a> <a id="2800" href="Graded.Heap.Typed.Substitution.html#853" class="Generalizable">H</a> <a id="2802" href="Graded.Heap.Untyped.html#7996" class="Function Operator">]ₕ</a>
  <a id="2807" href="Graded.Heap.Typed.Substitution.html#2703" class="Function">substHeapRedTerm</a> <a id="2824" href="Graded.Heap.Typed.Substitution.html#2824" class="Bound">⊢H</a> <a id="2827" href="Graded.Heap.Typed.Substitution.html#2827" class="Bound">d</a> <a id="2829" class="Symbol">=</a>
    <a id="2835" href="Definition.Typed.Consequences.Substitution.html#12240" class="Function">substitutionRedTerm</a> <a id="2855" href="Graded.Heap.Typed.Substitution.html#2827" class="Bound">d</a> <a id="2857" class="Symbol">(</a><a id="2858" href="Graded.Heap.Typed.Substitution.html#1053" class="Function">⊢ʰ→⊢ˢ</a> <a id="2864" href="Graded.Heap.Typed.Substitution.html#2824" class="Bound">⊢H</a><a id="2866" class="Symbol">)</a> <a id="2868" class="Symbol">(</a><a id="2869" href="Graded.Heap.Typed.Substitution.html#1432" class="Function">wfHeap</a> <a id="2876" href="Graded.Heap.Typed.Substitution.html#2824" class="Bound">⊢H</a><a id="2878" class="Symbol">)</a>
</pre></body></html>